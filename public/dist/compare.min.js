function CombinedGraph(t,e,i,o,s,r){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.vectorID="#vector-graph-"+t,this.rows1=i,this.rows2=o,this.combinedRows=e,this.selection1=s,this.selection2=r,this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t),this.$titleVector=$("#title-vector-"+t)}function DataProcessor(){}function DataStructure(t,e,i){this.selectionData=t,this.selectionTable=e,this.combineData=i}function Selection(t,e,i,o){this.aTable=t,this.bTable=e,this.cTable=i,this.dTable=o}function DataTables(t,e,i,o,s,r){this.tableA=t,this.tableB=e,this.tableC=i,this.tableD=o,this.tableAB=s,this.tableCD=r}function SelectionData(t,e,i,o,s){this.rows=t,this.title=e,this.subTitle=i,this.id=s,this.unit=o}function SelectionDataCombined(t,e,i,o,s,r,n,a){this.rows=t,this.title1=o,this.title2=s,this.unit1=r,this.unit2=n,this.id=a,this.table1Rows=e,this.table2Rows=i}function SelectedTableData(t,e,i,o,s){this.rows=t,this.id=e,this.title=i,this.subTitle=o,this.unit=s}function Graph(t,e,i){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.rows=e,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t)}function SelectionRowController(t){this.idNumb=t,this.rowSelections={id:t,section:"",category:"",subCategory:"",description:""},this.setInitialState=function(t){this.rowSelections=t},this.clear=function(){this.rowSelections={id:this.id,section:"",category:"",subCategory:"",description:""}},this.validSelection=function(){return""===this.rowSelections.section||""!==this.rowSelections.description},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0];this.rowSelections.section=i.section,this.rowSelections.category=i.category,this.rowSelections.subCategory=i.subCategory,this.rowSelections.description=i.description},this.updateSection=function(t){t.id===this.idNumb&&(this.rowSelections.category="",this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.section=t.section,events.emit("NEW_SECTION",{id:this.idNumb,selection:this.rowSelections}))},this.updateCategory=function(t){t.id===this.idNumb&&(this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.category=t.category,events.emit("NEW_CATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateSubCategory=function(t){t.id===this.idNumb&&(this.rowSelections.description="",this.rowSelections.subCategory=t.subCategory,events.emit("NEW_SUBCATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateDescription=function(t){t.id===this.idNumb&&(this.rowSelections.description=t.description,events.emit("NEW_DESCRIPTION",{id:this.idNumb,selection:this.rowSelections}))},this.getRowSelection=function(){return this.rowSelections},events.on("SECTION_CHANGED",this.updateSection.bind(this)),events.on("CATEGORY_CHANGED",this.updateCategory.bind(this)),events.on("SUBCATEGORY_CHANGED",this.updateSubCategory.bind(this)),events.on("DESCRIPTION_CHANGED",this.updateDescription.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SectionSelect(t){this.idNumb=t,this.id="#section-select"+t,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=this.id,o=t.filter(function(t){return t.id===e})[0];Database.getSectionsFromDatabase(function(t){dp.sortSections({sections:t}),addOptionsToSelector(i,t,o.section)})},this.updated=function(t){events.emit("SECTION_CHANGED",{section:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function CategorySelect(t){this.idNumb=t,this.id="#category-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getCategoriesFromDatabase(i.section,function(t,e){e||addOptionsToSelector(o,t,i.category)})},this.updated=function(t){events.emit("CATEGORY_CHANGED",{category:this.$select.find("option:selected").text(),id:this.idNumb})},this.sectionChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id;Database.getCategoriesFromDatabase(t.selection.section,function(t,i){i||addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("NEW_SECTION",this.sectionChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SubCategorySelect(t){this.idNumb=t,this.id="#subcategory-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getSubCategoriesFromDatabase(i.section,i.category,function(t,e){e||addOptionsToSelector(o,t,i.subCategory)})},this.categoryChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id,i=this.idNumb;Database.getSubCategoriesFromDatabase(t.selection.section,t.selection.category,function(t,o){o?events.emit("SUBCATEGORY_CHANGED",{subCategory:"",id:i}):addOptionsToSelector(e,t,"")})}},this.updated=function(t){events.emit("SUBCATEGORY_CHANGED",{subCategory:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("NEW_CATEGORY",this.categoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function DescriptionSelect(t){this.idNumb=t,this.id="#description-select"+t,this.$select=$(this.id),this.updated=function(t){events.emit("DESCRIPTION_CHANGED",{description:this.$select.find("option:selected").text(),id:this.idNumb})},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getDescriptionsFromDatabase(i.section,i.category,i.subCategory,function(t,e){e||addOptionsToSelector(o,t,i.description)})},this.subCategoryChangedListener=function(t){if(t.id===this.idNumb){var e=this.id;Database.getDescriptionsFromDatabase(t.selection.section,t.selection.category,t.selection.subCategory,function(t){addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("CATEGORY_CHANGED",clearMyself.bind(this)),events.on("NEW_SUBCATEGORY",this.subCategoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function clearMyself(t){t.id===this.idNumb&&(this.$select.html(""),this.$select.selectpicker("refresh"))}function addOptionsToSelector(t,e,i){$(t).html("");for(var o=0;o<e.length;o++)null!==e[o]&&(e[o]===i?$(t).append("<option selected>"+e[o]+"</option>"):$(t).append("<option>"+e[o]+"</option>"));$(t).selectpicker("refresh")}function Table(t,e,i,o){this.id=t,this.isCombined=o,this.rows=e,this.unit=e[0].units,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.dpFormat=d3.format(".4r"),this.availableYears=this.getAvailableYears(),this.noCPICells=[],this.$table=$("#table-"+t),this.$totalsTable=$("#table-total-"+t),this.$title=$("#title-"+t)}CombinedGraph.prototype.isCombined=function(){return!0},CombinedGraph.prototype.getID=function(){return this.id},CombinedGraph.prototype.getSelection1Title=function(){var t=null===this.selection1?"":this.selection1.subCategory;return this.selection1.description+", "+this.selection1.category+", "+t},CombinedGraph.prototype.getSelection2Title=function(){var t=null===this.selection2?"":this.selection2.subCategory;return this.selection2.description+", "+this.selection2.category+",  "+t},CombinedGraph.prototype.getUnit=function(){return this.rows1[0].units+" / "+this.rows2[0].units},CombinedGraph.prototype.getUnit1=function(){return this.rows1[0].units},CombinedGraph.prototype.getUnit2=function(){return this.rows2[0].units},CombinedGraph.prototype.insertTitles=function(){var t="<h4>Ratio "+this.id.charAt(0).toUpperCase()+" / "+this.id.charAt(1).toUpperCase()+"</h4>",e='<h4 class="title"><span style="Color: black;">'+this.id.charAt(0).toUpperCase()+": </span>"+this.getSelection1Title()+"</h4>",i='<h4 class="title"><span style="Color: black;">'+this.id.charAt(1).toUpperCase()+": </span>"+this.getSelection2Title()+"</h4>";this.$titleBar.append(t),this.$titleBar.append(e),this.$titleBar.append(i),this.$titleBox.append(t),this.$titleBox.append(e),this.$titleBox.append(i),this.$titleVector.append(t),this.$titleVector.append(e),this.$titleVector.append(i)},CombinedGraph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.combinedRows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.combinedRows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit);var i=dp.createDataForVectorGraph(this.rows1,this.rows2);VectorModule.createVectorGraph(i,this.getUnit2(),this.getUnit1(),this.vectorID)},CombinedGraph.prototype.update=function(t,e,i){this.rows=t,this.rows1=e,this.rows2=i,this.create()},String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t){var e=this.filter(function(e){return e==t});return e.length>0}});var CompareModule=function(){function t(t,i,o){var s=i[0].category+", "+i[0].subCategory+", "+i[0].description,r=i[1].category+", "+i[1].subCategory+", "+i[1].description,n=i[2].category+", "+i[2].subCategory+", "+i[2].description,a=i[3].category+", "+i[3].subCategory+", "+i[3].description,c="<h3> Ratio (A / B ) over ( C / D ) </h3>",l='<span class="letter">A: </span>',h='<span class="letter">B: </span>',u='<span class="letter">C: </span>',d='<span class="letter">D: </span>',p='<h4 class="title">'+l+" "+s+"</h4>",b='<h4 class="title">'+h+" "+r+"</h4>",f='<h4 class="title">'+u+" "+n+"</h4>",v='<h4 class="title">'+d+" "+a+"</h4>";$("#title-vector-abcd").append(c).append(p).append(b).append(f).append(v),VectorModule.createVectorGraph(e.createDataForVectorGraph(t[0].rows,t[1].rows),o[0]+" / "+o[1],o[2]+" / "+o[3],"#vector-graph-abcd"),$("#vector-full-abcd").show()}var e=new DataProcessor,i={},o=!1,s=$("#error-div"),r=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},n=function(){if(!selectionRows.canSearch())return void(o||(s.append('<h4 style="color : red;">Partial Row Selected</h4>'),o=!0));var t={};selectionRows.getAllSelectionData().forEach(function(e){""!==e.section&&(t["s"+e.id]=e.section,t["c"+e.id]=e.category,t["sc"+e.id]=e.subCategory,t["d"+e.id]=e.description)}),window.location.replace("compare?"+r(t))},a=function(o){selectionRows.init(o,!0),Database.getRowsForSearch(o,function(s){i.selection=new Selection(o[0],o[1],o[2],o[3]),i.rows=s,i.sortedRows=e.filterRowsToTablesAndCopy(s,i.selection);var r=[];i.sortedRows.forEach(function(t){"a"===t.id&&$("#tab-a").addClass("in active"),"ab"!==t.id&&"cd"!==t.id||r.push(t),$("#full-dash-"+t.id).show()}),2===r.length&&t(r,o,[i.sortedRows[0].rows[0].units,i.sortedRows[1].rows[0].units,i.sortedRows[2].rows[0].units,i.sortedRows[3].rows[0].units]),events.emit("INIT_DATA",{data:i.sortedRows}),events.emit("ROW_CLICKED",{rowID:"rowa0",rowNumb:0,edb:"Alpine Energy"}),events.emit("TOTAL_ROW_CLICKED",{rowID:"row-tot-a0",region:"South Island"})})},c=function(){if(CPIModule.isValid()&&void 0!==i.selection){var t=e.copyRows(i.rows);l(t,CPIModule.getCPIValues());var o=e.filterRowsToTablesAndCopy(t,i.selection);events.emit("ROW_UPDATE",{data:o}),events.emit("APPLY_CPI",{cpiValues:CPIModule.getCPIValues()})}},l=function(t,e){var i=t.filter(function(t){return t.units.includes("$")});if(0!==i.length)for(var o=i.reduce(function(t,e){return t.disc_yr<e.disc_yr?t:e}).obs_yr,s=i.reduce(function(t,e){return t.disc_yr>e.disc_yr?t:e}).obs_yr,r=o;r<=s;r++)i.forEach(function(t,o){for(var s=i[o].obs_yr,n=i[o].value,a=0;a<e.length;a++)e[a].year===r&&s<=r&&(n*=1+e[a].value/100);i[o].value=n})},h=function(){events.emit("ROW_UPDATE",{data:i.sortedRows}),events.emit("REVERT_CPI",{cpiValues:""})};return{loadSearchFromURL:a,search:n,applyCPI:c,revertCPI:h}}();$(document).ready(function(){$(".nav-link").removeClass("active"),$("#benchmarks-link").addClass("active"),$("#search-btn-compare").click(function(){CompareModule.search()}),$("cpi").click(function(){CompareModule.applyCPI()})});var CPIModule=function(){var t=$("#cpi-form");$.validator.setDefaults({errorClass:"help-block",highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")}});var e={required:!0,number:!0,min:.1,max:100},i={required:"Please enter a percentage",number:"Please enter a valid number",min:"Please enter a percentage greater than 0",max:"Please enter a percentage less than 100"};t.validate({rules:{Y2012:e,Y2013:e,Y2014:e,Y2015:e,Y2016:e},messages:{Y2012:i,Y2013:i,Y2014:i,Y2015:i,Y2016:i}});var o=function(){return[{year:2012,value:+t.find("#Y2012").val()},{year:2013,value:+t.find("#Y2013").val()},{year:2014,value:+t.find("#Y2014").val()},{year:2015,value:+t.find("#Y2015").val()},{year:2016,value:+t.find("#Y2016").val()}]},s=function(){return t.valid()};return{getCPIValues:o,isValid:s}}(),dp=new DataProcessor;DataProcessor.prototype.copyDataTables=function(t){for(var e=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],i=[[],[],[],[],[],[]],o=0;o<e.length;o++){var s=e[o];if(void 0!==s)for(var r=0;r<s.length;r++)i[o].push({category:s[r].category,description:s[r].description,disc_yr:s[r].disc_yr,edb:s[r].edb,fcast_yr:s[r].fcast_yr,network:s[r].network,note:s[r].note,obs_yr:s[r].obs_yr,p_key:s[r].p_key,sch_ref:s[r].sch_ref,schedule:s[r].schedule,section:s[r].section,sub_category:s[r].sub_category,units:s[r].units,value:s[r].value})}return new DataTables(i[0],i[1],i[2],i[3],i[4],i[5])},DataProcessor.prototype.copyRows=function(t){var e=[];return t.forEach(function(t){e.push({value:t.value,category:t.category,description:t.description,disc_yr:t.disc_yr,edb:t.edb,fcast_yr:t.fcast_yr,network:t.network,note:t.note,obs_yr:t.obs_yr,p_key:t.p_key,sch_ref:t.sch_ref,schedule:t.schedule,section:t.section,sub_category:t.sub_category,units:t.units})}),e},DataProcessor.prototype.createDataStructuresWithCopy=function(t){for(var e=[],i=[],o=[],s=[t.tableA.length>0,t.tableB.length>0,t.tableC.length>0,t.tableD.length>0],r=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],n=["a","b","c","d","ab","cd"],a=0;a<s.length;a++)if(s[a]){var c=r[a][0].section+", "+r[a][0].category,l=null===r[a][0].sub_category?r[a][0].description:r[a][0].sub_category+", "+r[a][0].description;if(i.push(new SelectedTableData(r[a],n[a],l,c,r[a][0].units)),e.push(new SelectionData(r[a],l,c,r[a][0].units,n[a])),("a"===n[a]||"c"===n[a])&&s[a+1]){var h=0===a?4:3,u=r[a+1][0].section+", "+r[a+1][0].category,d=null===r[a+1][0].sub_category?r[a+1][0].description:r[a+1][0].sub_category+", "+r[a+1][0].description;i.push(new SelectedTableData(r[a+h],n[a+h],l+", "+c,d+", "+u,r[a+1][0].units)),o.push(new SelectionDataCombined(r[a+h],r[a],r[a+1],l+" "+c,d+" "+u,r[a][0].units,r[a+1][0].units,n[a+h]))}}return new DataStructure(e,i,o)},DataProcessor.prototype.validateSearchParams=function(t,e){var i=!0;return t.forEach(function(t,o){""===t.subCategory&&e[o]&&(i=!1),""!==t.section&&""!==t.category&&""!==t.description||""===t.section&&""===t.category&&""===t.description||(i=!1)}),i},DataProcessor.prototype.matchDBRow=function(t,e){return t.section===e.section&&t.category===e.category&&t.description===e.description&&(null!==t.sub_category?e.subCategory===t.sub_category:""===e.subCategory)},DataProcessor.prototype.filterRowsToTables=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)});var n=[];if(i.length>0&&n.push({id:"a",rows:i,search:e.aTable}),i.length>0&&o.length>0)var a=dp.combineTables(i,o);if(s.length>0&&r.length>0)var c=dp.combineTables(s,r);return new DataTables(i,o,s,r,a,c)},DataProcessor.prototype.filterRowsToTablesAndCopy=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});if(i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)}),i.length>0&&o.length>0)var n=dp.combineTables(i,o);if(s.length>0&&r.length>0)var a=dp.combineTables(s,r);var c=this.copyDataTables(new DataTables(i,o,s,r,n,a)),l=[];if(i.length>0&&l.push({id:"a",rows:c.tableA,search:e.aTable,combined:!1}),o.length>0&&l.push({id:"b",rows:c.tableB,search:e.bTable,combined:!1}),s.length>0&&l.push({id:"c",rows:c.tableC,search:e.cTable,combined:!1}),r.length>0&&l.push({id:"d",rows:c.tableD,search:e.dTable,combined:!1}),i.length>0&&o.length>0&&l.push({id:"ab",rows:c.tableAB,table1Rows:c.tableA,table2Rows:c.tableB,search:e.aTable,search2:e.bTable,combined:!0}),s.length>0&&r.length>0){var a=dp.combineTables(s,r);l.push({id:"cd",rows:c.tableCD,table1Rows:c.tableC,table2Rows:c.tableD,search:e.cTable,search2:e.dTable,combined:!0})}return l},DataProcessor.prototype.combineTables=function(t,e){for(var i=[],o=t,s=e,r=0;r<o.length;r++)for(var n=0;n<s.length;n++)if(o[r].edb===s[n].edb&&o[r].obs_yr===s[n].obs_yr&&o[r].disc_yr===s[n].disc_yr){i.push({disc_yr:s[n].disc_yr,edb:s[n].edb,obs_yr:s[n].obs_yr,value:o[r].value/("0"===s[n].value||0===s[n].value?1:s[n].value),section:s[n].section+""+s[n].description+" over ",description:o[r].section+" "+o[r].description,unitA:o[r].units,unitB:s[n].units,unit:o[r].units+" / "+s[n].units});break}return i},DataProcessor.prototype.createDataForVectorGraph=function(t,e){var i=t,o=e,s=[],r=[],n=[];t.forEach(function(t){if(!n.includes(t.obs_yr))for(var i=0;i<e.length;i++)if(e[i].obs_yr===t.obs_yr){n.push(t.obs_yr);break}});for(var a=0;a<i.length;a++)if(!s.includes(i[a].edb)){var c=i.filter(function(t){return t.edb===i[a].edb}),l=o.filter(function(t){return t.edb===i[a].edb});s.push(i[a].edb);for(var h=[],u=[],d=0;d<c.length;d++)if(!h.includes(c[d].disc_yr)&&n.includes(c[d].disc_yr)){h.push(c[d].disc_yr);var p=c.filter(function(t){return t.disc_yr===c[d].disc_yr}),b=l.filter(function(t){return t.disc_yr===c[d].disc_yr});if(p.length!=b.length)return[];for(var f=0;f<p.length;f++)u.push({year:+p[f].disc_yr,valueA:+p[f].value,valueB:+b[f].value})}u.sort(function(t,e){return t.year-e.year}),r.push({edb:i[a].edb,years:u})}return r},DataProcessor.prototype.createDataForBoxPlot=function(t){for(var e=[],i=[],o=0;o<t.length;o++)e.includes(t[o].obs_yr)||(i.push(t.filter(function(e){return e.obs_yr===t[o].obs_yr})),e.push(t[o].obs_yr));for(var s=[],r=[],n=1/0,a=-(1/0),o=0;o<i.length;o++){var c=[];c[0]=""+i[o][0].obs_yr;for(var l=""+i[o][0].obs_yr,h=[],u=0;u<i[o].length;u++){var d=+i[o][u].value,p=i[o][u].edb;d>a&&(a=d),d<n&&(n=d),h.push(d),r.push({year:l,edb:p,value:d})}c[1]=h,s.push(c)}return s.sort(function(t,e){return t[0]-e[0]}),{min:n,max:a,data:s,scatterData:r}},DataProcessor.prototype.createDataForGroupedGraph=function(t){var e=[];t.forEach(function(t){e.includes(t.obs_yr)||e.push(t.obs_yr)}),e.sort(function(t,e){return+t-+e});for(var i=[],o=[],s=0;s<t.length;s++)if(o.includes(t[s].edb))for(var r=0;r<i.length;r++)i[r].edb===t[s].edb&&(i[r][t[s].obs_yr]=+t[s].value);else{o.push(t[s].edb);var n={edb:t[s].edb};n[t[s].obs_yr]=+t[s].value,i.push(n)}return{data:i,keys:e}},DataProcessor.prototype.sortSections=function(t){t.sections.sort(function(t,e){for(var i=0;!isNaN(t.charAt(i));)i++;var o=t.substring(0,i);for(i=0;!isNaN(e.charAt(i));)i++;var s=e.substring(0,i);return o!==s?o-s:[t,e].sort()[0]===t?-1:1})},DataProcessor.prototype.applyCPIToTableRows=function(t,e){t.forEach(function(i,o){for(var s=t[o].obs_yr,r=t[o].value,n=0;n<e.length;n++)s<=e[n].year&&(r*=1+e[n].value/100);t[o].value=r})},DataProcessor.prototype.addToSelection=function(t,e,i,o){for(var s=0;s<o.length;s++)o[s].id+""==t+""&&("section"===e?o[s].section=i:"category"===e?o[s].category=i:"subcategory"===e?o[s].subCategory=i:"description"===e&&(o[s].description=i))},DataProcessor.prototype.createTableTotals=function(t,e,i){for(var o=["n","uni","eni","swni","s","usi","lsi"],s={},r=0;r<i.length;r++)t.filter(function(t){return t.obs_yr===i[r]}).forEach(function(t){o.forEach(function(i){e[i].includes(t.edb)&&(void 0===s[i]?s[i]=[+t.value]:r===s[i].length?s[i].push(+t.value):s[i][r]+=+ +t.value)})});for(var n=[],r=0;r<i.length;r++)n.push(s.n[r]+s.s[r]);return s.nz=n,s},Graph.prototype.isCombined=function(){return!1},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.getID=function(){return this.id},Graph.prototype.getTitle=function(){return this.selection.description+", "+this.selection.subCategory},Graph.prototype.getSubTitle=function(){return this.selection.section+", "+this.selection.category},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.insertTitles=function(){this.$titleBar.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>"),this.$titleBox.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Graph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.rows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.rows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit)},Graph.prototype.update=function(t){this.rows=t,this.create()};var GraphModule=function(){var t=[],e=d3.scaleOrdinal().range(["#BBDEFB","#64B5F6","#1976D2","#1565C0","#0D47A1","#d0743c","#ff8c00"]),i=(d3.scaleOrdinal().range(["#FF7373","#FF4C4C","#FF2626","#B20000","#D90000","#d0743c","#ff8c00"]),d3.scaleOrdinal().range(["#C1FFC1","#90EE90","#5BC85B","#31A231","#137B13","#d0743c","#ff8c00"])),o=function(e){e.data.forEach(function(e){e.combined?t.push(new CombinedGraph(e.id,e.rows,e.table1Rows,e.table2Rows,e.search,e.search2)):t.push(new Graph(e.id,e.rows,e.search))}),t.forEach(function(t){t.insertTitles(),t.create()})},s=function(e){e.data.forEach(function(e){t.forEach(function(t){t.getID()===e.id&&(t.isCombined()?t.update(e.rows,e.table1Rows,e.table2Rows):t.update(e.rows))})})},r=function(t){return t.unselect?(d3.selectAll(".line-selected-table").classed("line-selected",!1),void d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1)):(alreadySelected=!1,d3.selectAll(".bar-selected").datum(function(t){return t}).attr("fill",function(t){return e(t.key)}),d3.selectAll(".bar-selected").classed("bar-selected",!1),void(alreadySelected||(d3.selectAll("rect."+t.edb.replace(/ /g,"")).classed("bar-selected",!0).datum(function(t){return t}).attr("fill",function(t){return i(t.key)}),d3.selectAll(".line-selected-table").classed("line-selected",!1),d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1),d3.selectAll("line."+t.edb.replace(/ /g,"")).classed("line-selected-table",!0),d3.selectAll(".dot."+t.edb.replace(/ /g,"")).classed("vec-dot-selected",!0))))};return events.on("INIT_DATA",o),events.on("ROW_CLICKED",r),events.on("ROW_UPDATE",s),{update:s}}(),selectionRows=function(){for(var t=[new SelectionRowController(0),new SelectionRowController(1),new SelectionRowController(2),new SelectionRowController(3)],e=[],i=0;i<4;i++)e.push({s:new SectionSelect(i),c:new CategorySelect(i),sc:new SubCategorySelect(i),d:new DescriptionSelect(i)});var o=function(){var e=[];return t.forEach(function(t){e.push(t.getRowSelection())}),e},s=function(){for(var e=0;e<t.length;e++)if(!t[e].validSelection())return!1;return!0},r=function(t){Database.getCategoriesFromDatabase(t.section,function(e,i){i||addOptionsToSelector("#category-select"+t.id,e,t.category)}),Database.getSubCategoriesFromDatabase(t.section,t.category,function(e,i){i||(searchData.validOptions[t.id]=!0,addOptionsToSelector("#subsection-select"+t.id,e,t.subCategory))}),Database.getDescriptionsFromDatabase(t.section,t.category,t.subCategory,function(e,i){i||addOptionsToSelector("#description-select"+t.id,e,t.description)})},n=function(t,e){e?events.emit("INIT_SELECTIONS",t):Database.getSectionsFromDatabase(function(t){var e=new DataProcessor;e.sortSections({sections:t});for(var i=0;i<4;i++)addOptionsToSelector("#section-select"+i,t,"")})},a=function(e){t[e].clear(),$("#description-select"+e+",#subcategory-select"+e+",#category-select"+e).html(""),$("#section-select"+e).find("option:selected").removeAttr("selected"),$(".selectpicker").selectpicker("refresh")};return n([],!1),{getAllSelectionData:o,setSelectionsFromURL:r,init:n,clear:a,canSearch:s}}();Table.prototype.getTitle=function(){if(this.isCombined){var t=null===this.selection[0]?"":this.selection[0].subCategory;return this.selection[0].category+", "+t+", "+this.selection[0].description}return(void 0===this.subCategory?"":this.selection.subCategory+", ")+" "+this.selection.description},Table.prototype.getSubTitle=function(){if(this.isCombined){var t=null===this.selection[1]?"":this.selection[1].subCategory;return this.selection[1].category+", "+t+", "+this.selection[1].description}return this.selection.section+", "+this.selection.category},Table.prototype.update=function(t){this.rows=t,this.createTotalsTable(!0,"")},Table.prototype.totalsRowSelected=function(t){var e=t.rowID.charAt(t.rowID.length-1),i="row-tot-"+this.id+e;SingleBarModule.showBarWithRowElem(i,t.region,"#bar-total-"+this.id,"#head-row-totals-"+this.id,"#table-total-"+this.id,this.unit)},Table.prototype.rowClicked=function(t){var e=t.rowID.slice(-1);isNaN(t.rowID.slice(-2))||(e=t.rowID.slice(-2)),SingleBarModule.showBarWithRowElem("row"+this.id+e,t.edb,"#bar-"+this.id,"#head-row-"+this.id,"#table-"+this.id,this.unit)},Table.prototype.getAvailableYears=function(){t=[];var t=[];return this.rows.forEach(function(e){t.includes(e.obs_yr)||t.push(e.obs_yr)}),t.sort(function(t,e){return+t-+e}),t},Table.prototype.canApplyCPI=function(){return!this.isCombined&&this.unit.includes("$")},Table.prototype.applyCPI=function(t){this.noCPICells.length>0&&this.revertCPI();var e=this.$table.find(".cell"),i=this.noCPICells;this.id;e.each(function(){i.push({id:$(this).attr("id"),value:$(this).text()})});var o=1/0,s=-(1/0);e.each(function(){var t=+$(this).attr("class").split(" ")[1];o=t<o?t:o,s=t>s?t:s});var r=this.dpFormat;e.each(function(){for(var e=+$(this).attr("class").split(" ")[1],i=$(this).attr("origvalue"),n=o;n<=s;n++)for(var a=0;a<t.length;a++)t[a].year===n&&e<=n&&(i*=1+t[a].value/100,i=r(i));$(this).text(i)})},Table.prototype.revertCPI=function(){if(this.noCPICells.length>0){var t=this.dpFormat;this.noCPICells.forEach(function(e){$("#"+e.id).text(t(e.value))})}},Table.prototype.insertTitles=function(){if(this.isCombined){var t=this.id.charAt(0).toUpperCase(),e=this.id.charAt(1).toUpperCase();this.$title.append("<h3>Ratio analysis "+t+" / "+e+"</h4>"),this.$title.append('<h4 class="title"><span style="color: black;">'+t+": </span>"+this.title+'</h4><h4 class="title"><span style="color: black;">'+e+": </span>"+this.subTitle+"</h4>")}else this.$title.append('<h2 class="title">'+this.title+"</h2>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Table.prototype.create=function(){var t=this.createTableData(this.rows),e="";t[0].years.forEach(function(t){e+="<th>"+t.year+"</th>"}),this.$table.append('<tr id="head-row-'+this.id+'" class="table-row table-head"> <th>EDB</th>'+e+"</tr>");for(var i=0,o=0,s=[],r=0;r<t.length;r++){for(var n=t[r],a=n.edb,e=n.years,c="<tr class='table-row' id=row"+this.id+o+"><th class='edb-cell'>"+a+"</th>",l=0;l<e.length;l++){var h=e[l];c+="<th origValue='"+h.value+"' class='cell "+h.year+"' id='t"+this.id+i+"'>"+this.dpFormat(h.value)+"</th>",s.push({id:"#t"+this.id+i,value:h.value}),i++}this.$table.append(c+"</tr>"),$("#row"+this.id+o).click(function(){var t=this.id.slice(-1);isNaN(this.id.slice(-2))||(t=this.id.slice(-2));var e=$("#"+this.id+" .edb-cell").text();events.emit("ROW_CLICKED",{rowID:this.id,rowNumb:t,edb:e})}),o++}this.cellValues=s},Table.prototype.createTotalsTable=function(t,e){var i=dp.createTableTotals(this.rows,TablesModule.regions,this.availableYears),o={n:"North Island",uni:"Upper North Island",eni:"Eastern North Island",swni:"South-West North Island",s:"South Island",usi:"Upper South Island",lsi:"Lower South Island",nz:"New Zealand"},s=[],r="";this.availableYears.forEach(function(t){r+="<th>"+t+"</th>"});var n=0,a=0;t&&this.$totalsTable.html("");var c=29;this.$totalsTable.append('<tr id="head-row-totals-'+this.id+'" class="table-row table-head"> <th>Region</th>'+r+"</tr>");for(var l in i)if(i.hasOwnProperty(l)){var h="<tr class='table-row' id=row-tot-"+this.id+a+">",u=this.dpFormat,d=this.noCPICells;h+="<th class='reg-cell'>"+o[l]+"</th>";var p=this.id;i[l].forEach(function(t){var e;e="nz"===l?t/c:t/TablesModule.regions[l].length,h+="<th id='t-total"+p+n+"' origValue='"+e+"' class='cell'>"+u(e)+"</th>",s.push({id:"#t-total"+p+n,value:e}),d.push({id:"t-total"+p+n,value:e}),n++}),this.$totalsTable.append(h+"</tr>"),$("#row-tot-"+this.id+a).click(function(){var t=$("#"+this.id+" .reg-cell").text();events.emit("TOTAL_ROW_CLICKED",{rowID:this.id,region:t})}),a++}""!==e&&$("#"+e).addClass("row-selected"),this.totalCellValues=s},Table.prototype.createTableData=function(t){var e={};t.forEach(function(t){void 0===e[t.edb]&&(e[t.edb]=t.edb)});var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=t.filter(function(t){return t.edb===e[o]}),r=[];s.forEach(function(t){r.push({year:t.obs_yr,value:t.value})}),r.sort(function(t,e){return t.year>e.year}),i.push({edb:e[o],years:r})}return i},Table.prototype.render=function(){this.applyGradientCSS(this.cellValues),this.applyGradientCSS(this.totalCellValues)},Table.prototype.applyGradientCSS=function(t){var e=!1,i=-(1/0);t.forEach(function(t){i=+t.value>i?+t.value:i});for(var o=0;o<t.length;o++){var s=e?s:+t[o].value/i*100;$(t[o].id).css({background:"-webkit-gradient(linear, left top, right top, color-stop("+s+"%,#7bbfd6), color-stop("+s+"%,#FFF))"})}};var TablesModule=function(){var t={n:["Centralines","Counties Power","Eastland Network","Electra","Horizon Energy","Northpower","Powerco","Scanpower","The Lines Company","Top Energy","Unison Networks","Vector Lines","Waipa Networks","WEL Networks","Wellington Electricity"],uni:["Counties Power","Horizon Energy","Northpower","The Lines Company","Top Energy","Vector Lines","Waipa Networks","WEL Networks"],eni:["Centralines","Eastland Network","Scanpower","Unison Networks"],swni:["Electra","Powerco","Wellington Electricity"],s:["Alpine Energy","Aurora Energy","Buller Electricity","Electricity Ashburton","Electricity Invercargill","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Network Waitaki","Orion NZ","OtagoNet","The Power Company","Westpower"],usi:["Alpine Energy","Buller Electricity","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Orion NZ","Westpower"],lsi:["Aurora Energy","Electricity Ashburton","Electricity Invercargill","Network Waitaki","OtagoNet","The Power Company"]},e="",i="",o=[],s=function(t){t.data.forEach(function(t){t.combined?o.push(new Table(t.id,t.rows,[t.search,t.search2],!0)):o.push(new Table(t.id,t.rows,t.search,!1))}),o.forEach(function(t){t.insertTitles(),t.create(),
t.createTotalsTable(!1,i)}),o.forEach(function(t){t.render()})},r=function(t){if(e===t.rowID)return $(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().removeClass("row-selected"),void(rowSelected="");if(""!==e){var i=$("#"+e+" .edb-cell").text();$(".table-row").find(".edb-cell:contains('"+i+"')").parent().removeClass("row-selected")}e=t.rowID,$(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().addClass("row-selected"),o.forEach(function(e){e.rowClicked(t)})},n=function(t){var e=t.region;if(i===t.rowID){var s=$("#"+t.rowID+" .reg-cell").text();return $(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().removeClass("row-selected"),void(i="")}if(""!==i){var s=$("#"+i+" .reg-cell").text();$(".table-row").find(".reg-cell:contains('"+s+"')").filter(function(){return $(this).text()===s}).parent().removeClass("row-selected")}$(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().addClass("row-selected"),i=t.rowID,o.forEach(function(e){e.totalsRowSelected(t)})},a=function(t){var e=t.cpiValues;o.forEach(function(t){t.canApplyCPI()&&(t.applyCPI(e),t.createTotalsTable(!0,i))}),o.forEach(function(t){t.render()})},c=function(){o.forEach(function(t){t.revertCPI()}),o.forEach(function(t){t.render()})},l=function(t){t.data.forEach(function(t){o.forEach(function(e){e.id===t.id&&(e.isCombined?e.update(t.rows,t.table1Rows,t.table2Rows):e.update(t.rows))})})};return events.on("INIT_DATA",s),events.on("ROW_CLICKED",r),events.on("TOTAL_ROW_CLICKED",n),events.on("APPLY_CPI",a),events.on("REVERT_CPI",c),events.on("ROW_UPDATE",l),{regions:t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbWJpbmVkR3JhcGguanMiLCJEYXRhUHJvY2Vzc29yLmpzIiwiR3JhcGguanMiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyLmpzIiwiU2VsZWN0TWFuYWdlci5qcyIsIlRhYmxlLmpzIiwiQ29tcGFyZU1vZHVsZS5qcyIsIkNQSU1vZHVsZS5qcyIsIkdyYXBoTW9kdWxlLmpzIiwiU2VsZWN0aW9uUm93c0NvbnRyb2xsZXIuanMiLCJUYWJsZU1vZHVsZS5qcyJdLCJuYW1lcyI6WyJDb21iaW5lZEdyYXBoIiwiaWQiLCJjb21iaW5lZFJvd3MiLCJyb3dzMSIsInJvd3MyIiwic2VsZWN0aW9uMSIsInNlbGVjdGlvbjIiLCJ0aGlzIiwiZ3JvdXBlZElEIiwiYm94SUQiLCJ2ZWN0b3JJRCIsInVuaXQiLCJnZXRVbml0IiwiJHRpdGxlQmFyIiwiJCIsIiR0aXRsZUJveCIsIiR0aXRsZVZlY3RvciIsIkRhdGFQcm9jZXNzb3IiLCJEYXRhU3RydWN0dXJlIiwic2VsZWN0aW9uRGF0YSIsInNlbGVjdGlvblRhYmxlIiwiY29tYmluZURhdGEiLCJTZWxlY3Rpb24iLCJhIiwiYiIsImMiLCJkIiwiYVRhYmxlIiwiYlRhYmxlIiwiY1RhYmxlIiwiZFRhYmxlIiwiRGF0YVRhYmxlcyIsInRhYmxlQSIsInRhYmxlQiIsInRhYmxlQyIsInRhYmxlRCIsInRhYmxlQUIiLCJ0YWJsZUNEIiwiU2VsZWN0aW9uRGF0YSIsInJvd3MiLCJ0aXRsZSIsInN1YlRpdGxlIiwiU2VsZWN0aW9uRGF0YUNvbWJpbmVkIiwidGFibGUxUm93cyIsInRhYmxlMlJvd3MiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJ1bml0MSIsInVuaXQyIiwiU2VsZWN0ZWRUYWJsZURhdGEiLCJHcmFwaCIsInNlbGVjdGlvbiIsImdldFRpdGxlIiwiZ2V0U3ViVGl0bGUiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyIiwiaWROdW1iIiwicm93U2VsZWN0aW9ucyIsInNlY3Rpb24iLCJjYXRlZ29yeSIsInN1YkNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJzZXRJbml0aWFsU3RhdGUiLCJyb3dEYXRhIiwiY2xlYXIiLCJ2YWxpZFNlbGVjdGlvbiIsImluaXRFdmVudExpc3RlbmVyIiwidXJsU2VsZWN0aW9ucyIsInVybFNlbGVjdGlvbiIsImZpbHRlciIsImUiLCJ1cGRhdGVTZWN0aW9uIiwidXBkYXRlIiwiZXZlbnRzIiwiZW1pdCIsInVwZGF0ZUNhdGVnb3J5IiwidXBkYXRlU3ViQ2F0ZWdvcnkiLCJ1cGRhdGVEZXNjcmlwdGlvbiIsImdldFJvd1NlbGVjdGlvbiIsIm9uIiwiYmluZCIsIlNlY3Rpb25TZWxlY3QiLCIkc2VsZWN0IiwicGFzc0lEIiwiRGF0YWJhc2UiLCJnZXRTZWN0aW9uc0Zyb21EYXRhYmFzZSIsInNlY3Rpb25zIiwiZHAiLCJzb3J0U2VjdGlvbnMiLCJhZGRPcHRpb25zVG9TZWxlY3RvciIsInVwZGF0ZWQiLCJldmVudCIsImZpbmQiLCJ0ZXh0IiwiQ2F0ZWdvcnlTZWxlY3QiLCJnZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlIiwiY2F0ZWdvcmllcyIsIm5vUmVzdWx0Iiwic2VjdGlvbkNoYW5nZWRMaXN0ZW5lciIsImh0bWwiLCJTdWJDYXRlZ29yeVNlbGVjdCIsImdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UiLCJzdWJDYXRlZ29yaWVzIiwiY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIiLCJwYXNzSUROdW1iIiwiY2xlYXJNeXNlbGYiLCJEZXNjcmlwdGlvblNlbGVjdCIsImdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZSIsImRlc2NyaXB0aW9ucyIsInN1YkNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyIiwic2VsZWN0cGlja2VyIiwic2VsZWN0b3JJRCIsIm9wdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJUYWJsZSIsImlzQ29tYmluZWQiLCJ1bml0cyIsImRwRm9ybWF0IiwiZDMiLCJmb3JtYXQiLCJhdmFpbGFibGVZZWFycyIsImdldEF2YWlsYWJsZVllYXJzIiwibm9DUElDZWxscyIsIiR0YWJsZSIsIiR0b3RhbHNUYWJsZSIsIiR0aXRsZSIsInByb3RvdHlwZSIsImdldElEIiwiZ2V0U2VsZWN0aW9uMVRpdGxlIiwiZ2V0U2VsZWN0aW9uMlRpdGxlIiwiZ2V0VW5pdDEiLCJnZXRVbml0MiIsImluc2VydFRpdGxlcyIsInJhdGlvSFRNTCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiczEiLCJzMiIsImNyZWF0ZSIsImdyb3VwZWREYXRhIiwiY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCIsIkdyb3VwZWRCYXJNb2R1bGUiLCJjcmVhdGVkR3JvdXBlZEJhckdyYXBoIiwiZGF0YSIsImtleXMiLCJib3hwbG90RGF0YSIsImNyZWF0ZURhdGFGb3JCb3hQbG90IiwiQm94UGxvdE1vZHVsZSIsImNyZWF0ZUJveFBsb3QiLCJ2ZWN0b3JHcmFwaERhdGEiLCJjcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgiLCJWZWN0b3JNb2R1bGUiLCJjcmVhdGVWZWN0b3JHcmFwaCIsIlN0cmluZyIsImluY2x1ZGVzIiwiaW5kZXhPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwiQXJyYXkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJ2YWx1ZSIsIm9iaiIsIm5ld0FyciIsImVsIiwiQ29tcGFyZU1vZHVsZSIsInNob3dGdWxsVmVjdG9yR3JhcGgiLCJzZWxlY3Rpb25zIiwiYXRpdGxlIiwiYnRpdGxlIiwiY3RpdGxlIiwiZHRpdGxlIiwicmF0aW8iLCJzcGFuQSIsInNwYW5CIiwic3BhbkMiLCJzcGFuRCIsImNvbWJpbmVBIiwiY29tYmluZUIiLCJjb21iaW5lQyIsImNvbWJpbmVEIiwic2hvdyIsImJhY2t1cCIsImVycm9yIiwiJHNlYXJjaEVycm9yIiwic2VyaWFsaXNlIiwic3RyIiwicCIsImhhc093blByb3BlcnR5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJzZWFyY2giLCJzZWxlY3Rpb25Sb3dzIiwiY2FuU2VhcmNoIiwiZ2V0QWxsU2VsZWN0aW9uRGF0YSIsImZvckVhY2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJsb2FkU2VhcmNoRnJvbVVSTCIsImluaXQiLCJnZXRSb3dzRm9yU2VhcmNoIiwic29ydGVkUm93cyIsImZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkiLCJjb21iaW5lZERhdGEiLCJ0IiwiYWRkQ2xhc3MiLCJyb3dJRCIsInJvd051bWIiLCJlZGIiLCJyZWdpb24iLCJhcHBseUNQSSIsIkNQSU1vZHVsZSIsImlzVmFsaWQiLCJ1bmRlZmluZWQiLCJjb3B5T2ZSb3dzIiwiY29weVJvd3MiLCJhcHBseUNQSVRvVGFibGVSb3dzIiwiZ2V0Q1BJVmFsdWVzIiwibmV3RGF0YSIsImNwaVZhbHVlcyIsImFwcGxpY2FibGVSb3dzIiwiciIsIm1pblllYXIiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImRpc2NfeXIiLCJvYnNfeXIiLCJtYXhZZWFyIiwiY3VyIiwiZWxlbSIsImluZGV4IiwieWVhciIsInZhbHVlT2ZDZWxsIiwicmV2ZXJ0Q1BJIiwiZG9jdW1lbnQiLCJyZWFkeSIsInJlbW92ZUNsYXNzIiwiY2xpY2siLCIkY3BpRm9ybSIsInZhbGlkYXRvciIsInNldERlZmF1bHRzIiwiZXJyb3JDbGFzcyIsImhpZ2hsaWdodCIsImVsZW1lbnQiLCJjbG9zZXN0IiwidW5oaWdobGlnaHQiLCJjcGlSdWxlcyIsInJlcXVpcmVkIiwibnVtYmVyIiwibWluIiwibWF4IiwibWVzc2FnZVNldCIsInZhbGlkYXRlIiwicnVsZXMiLCJZMjAxMiIsIlkyMDEzIiwiWTIwMTQiLCJZMjAxNSIsIlkyMDE2IiwibWVzc2FnZXMiLCJ2YWwiLCJ2YWxpZCIsImNvcHlEYXRhVGFibGVzIiwiZGF0YVRhYmxlcyIsIm9yaWdUYWJsZXMiLCJ0YWJsZXMiLCJqIiwiZmNhc3RfeXIiLCJuZXR3b3JrIiwibm90ZSIsInBfa2V5Iiwic2NoX3JlZiIsInNjaGVkdWxlIiwic3ViX2NhdGVnb3J5IiwibmV3Um93cyIsImNyZWF0ZURhdGFTdHJ1Y3R1cmVzV2l0aENvcHkiLCJjb3B5T2ZEYXRhVGFibGVzIiwic2VsZWN0aW9uRGF0YUFycmF5Iiwic2VsZWN0aW9uVGFibGVzQXJyYXkiLCJjb21iaW5lZFNlbGVjdGlvbkRhdGFBcnJheSIsInNlbGVjdGVkUm93cyIsImlkcyIsInN1YnRpdGxlIiwianVtcCIsInN1YlRpdGxlSnVtcCIsInRpdGxlSnVtcCIsInZhbGlkYXRlU2VhcmNoUGFyYW1zIiwidmFsaWRPcHRpb25zIiwicmV0dXJuVmFsIiwibWF0Y2hEQlJvdyIsIkRCUm93IiwiZmlsdGVyUm93c1RvVGFibGVzIiwiYVJvd3MiLCJiUm93cyIsImNSb3dzIiwiZFJvd3MiLCJhYlJvd3MiLCJjb21iaW5lVGFibGVzIiwiY2RSb3dzIiwiY29weSIsImNvbWJpbmVkIiwic2VhcmNoMiIsImF0IiwiYnQiLCJ1bml0QSIsInVuaXRCIiwiZWRiRG9uZSIsInZlY0RhdGEiLCJhdmFpbGFibGVPYnNZZWFycyIsInJvdzEiLCJlZGJSb3dzQXQiLCJlZGJSb3dzQnQiLCJ5ZWFyc0RvbmUiLCJlZGJZZWFyQXJyYXkiLCJ5ZWFyUm93c0F0IiwieWVhclJvd3NCdCIsImsiLCJ2YWx1ZUEiLCJ2YWx1ZUIiLCJzb3J0IiwieWVhcnMiLCJ0YWJsZVJvd3MiLCJzVmFsdWVzIiwiSW5maW5pdHkiLCJlbnRyeSIsInZhbHVlcyIsImN1clZhbHVlIiwic2NhdHRlckRhdGEiLCJpc05hTiIsIm51bWJlckEiLCJzdWJzdHJpbmciLCJudW1iZXJCIiwiYWRkVG9TZWxlY3Rpb24iLCJ0eXBlIiwiY3JlYXRlVGFibGVUb3RhbHMiLCJyZWdpb25zIiwicmVnaW9uU3RyaW5ncyIsInRvdGFscyIsInJvdyIsInJlZ2lvblN0cmluZyIsIm56IiwiYm94RGF0YSIsIkdyYXBoTW9kdWxlIiwiZ3JhcGhzIiwieiIsInNjYWxlT3JkaW5hbCIsInJhbmdlIiwielNlbGVjdGVkIiwidGFibGVEYXRhIiwiZyIsInJvd0NsaWNrZWQiLCJ1bnNlbGVjdCIsInNlbGVjdEFsbCIsImNsYXNzZWQiLCJhbHJlYWR5U2VsZWN0ZWQiLCJkYXR1bSIsImF0dHIiLCJrZXkiLCJyb3dzRGF0YSIsInNlbGVjdG9ycyIsInMiLCJzYyIsInNldFNlbGVjdGlvbnNGcm9tVVJMIiwic2VhcmNoRGF0YSIsIndpdGhTZWFyY2giLCJyb3dOdW1iZXIiLCJyZW1vdmVBdHRyIiwiY3JlYXRlVG90YWxzVGFibGUiLCJ0b3RhbHNSb3dTZWxlY3RlZCIsImRhdGFSb3dJRCIsIlNpbmdsZUJhck1vZHVsZSIsInNob3dCYXJXaXRoUm93RWxlbSIsInNsaWNlIiwiY2FuQXBwbHlDUEkiLCIkY2FjaGVkQ2VsbHMiLCJlYWNoIiwic3BsaXQiLCJjcmVhdGVUYWJsZURhdGEiLCJ5IiwiY2VsbENvdW50Iiwicm93Q291bnQiLCJjZWxsVmFsdWVzIiwiZGF0YVJvdyIsInllYXJEYXRhIiwic2VsZWN0ZWRUb3RhbFJvdyIsIlRhYmxlc01vZHVsZSIsIm5hbWVzIiwibiIsInVuaSIsImVuaSIsInN3bmkiLCJ1c2kiLCJsc2kiLCJ0b3RhbENlbGxzIiwibnVtYmVyT2ZDb21wYW5pZXMiLCJwcm9wZXJ0eSIsImNlbGxzIiwiYXZnIiwicmVnIiwidG90YWxDZWxsVmFsdWVzIiwiZWRicyIsImVkYlllYXJzIiwicmVuZGVyIiwiYXBwbHlHcmFkaWVudENTUyIsInBlcmNlbnQiLCJtYXhDZWxsVmFsdWUiLCJjc3MiLCJiYWNrZ3JvdW5kIiwic2VsZWN0ZWRSb3ciLCJ0YWJsZSIsInBhcmVudCIsInJvd1NlbGVjdGVkIiwidG90YWxSb3dDbGlja2VkIiwib2xkUmVnIl0sIm1hcHBpbmdzIjoiQUFZQSxRQUFBQSxlQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxLQUFBTixHQUFBQSxFQUNBTSxLQUFBQyxVQUFBLGdCQUFBUCxFQUNBTSxLQUFBRSxNQUFBLFlBQUFSLEVBQ0FNLEtBQUFHLFNBQUEsaUJBQUFULEVBQ0FNLEtBQUFKLE1BQUFBLEVBQ0FJLEtBQUFILE1BQUFBLEVBQ0FHLEtBQUFMLGFBQUFBLEVBQ0FL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QTZFLEtBQUEsdUJBQUEySCxFQUFBLE1BQUFsSixPQUFBLFdBQ0EsTUFBQXRELEdBQUFQLE1BQUFxRixTQUFBMEgsSUFDQTBNLFNBQUE5TSxTQUFBLGdCQUdBb0wsRUFBQS9ULEVBQUE0SSxNQUVBNEQsRUFBQXhFLFFBQUEsU0FBQXdOLEdBQ0FBLEVBQUF6QyxrQkFBQS9TLE1BS0FnSixFQUFBLFNBQUFoSixHQUNBLEdBQUF5SixHQUFBekosRUFBQXlKLFNBQ0ErQyxHQUFBeEUsUUFBQSxTQUFBd04sR0FDQUEsRUFBQXBDLGdCQUNBb0MsRUFBQXhNLFNBQUFTLEdBQ0ErTCxFQUFBMUMsbUJBQUEsRUFBQWlCLE1BSUF2SCxFQUFBeEUsUUFBQSxTQUFBd04sR0FDQUEsRUFBQVAsWUFJQXpLLEVBQUEsV0FDQWdDLEVBQUF4RSxRQUFBLFNBQUF3TixHQUNBQSxFQUFBaEwsY0FHQWdDLEVBQUF4RSxRQUFBLFNBQUF3TixHQUNBQSxFQUFBUCxZQUlBalYsRUFBQSxTQUFBQSxHQUNBQSxFQUFBMEUsS0FBQXNELFFBQUEsU0FBQTJKLEdBQ0FuRixFQUFBeEUsUUFBQSxTQUFBNEosR0FDQUEsRUFBQWxXLEtBQUFpVyxFQUFBalcsS0FDQWtXLEVBQUE5TyxXQUNBOE8sRUFBQTVSLE9BQUEyUixFQUFBM1QsS0FBQTJULEVBQUF2VCxXQUFBdVQsRUFBQXRULFlBRUF1VCxFQUFBNVIsT0FBQTJSLEVBQUEzVCxXQWdCQSxPQVJBaUMsUUFBQU0sR0FBQSxZQUFBOEgsR0FDQXBJLE9BQUFNLEdBQUEsY0FBQXNSLEdBQ0E1UixPQUFBTSxHQUFBLG9CQUFBb1YsR0FDQTFWLE9BQUFNLEdBQUEsWUFBQXlJLEdBQ0EvSSxPQUFBTSxHQUFBLGFBQUFpSyxHQUNBdkssT0FBQU0sR0FBQSxhQUFBUCxJQUlBOFEsUUFBQUEiLCJmaWxlIjoiY29tcGFyZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBERVBFTkRFTkNJRVMgOiBEYXRhUHJvY2Vzc29yLCBHcm91cGVkQmFyR3JhcGhNb2R1bGUsIFZlY3RvckdyYXBoTW9kdWxlLCBCb3hQbG90TW9kdWxlXHJcblxyXG4vKipcclxuICogT2JqZWN0IHRoYXQgaGFuZGxlcyBsb2dpYyBmb3IgdXBkYXRpbmcgYW5kIGNyZWF0aW5nIGFsbCBvZiB0aGUgZ3JhcGhzIG9uIHRoZSBkYXNoYm9hcmQgYWNyb3NzIHRoZSB0YWJzXHJcbiAqXHJcbiAqIEBwYXJhbSBpZCB7U3RyaW5nfSB0aGUgaWQgb2YgdGhlIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gY29tYmluZWRSb3dzIHtPYmplY3RbXX0gdGhlIHJlc3VsdCBvZiByb3dzMSBkaXZpZGVkIGJ5IHJvd3MyXHJcbiAqIEBwYXJhbSByb3dzMSB7T2JqZWN0W119IHRoZSByb3dzIGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSByb3dzMiB7T2JqZWN0W119IHRoZSByb3dzIGZvciB0aGUgc2VsZWN0aW9uIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uMSB7T2JqZWN0fSB0aGUgZmlyc3Qgc2VhcmNoXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb24yIHtPYmplY3R9IHRoZSBzZWNvbmQgc2VhcmNoXHJcbiAqICovXHJcbmZ1bmN0aW9uIENvbWJpbmVkR3JhcGgoaWQsIGNvbWJpbmVkUm93cywgcm93czEscm93czIsc2VsZWN0aW9uMSxzZWxlY3Rpb24yKXtcclxuICB0aGlzLmlkID0gaWQ7XHJcbiAgdGhpcy5ncm91cGVkSUQgPSAnI2dyb3VwZWQtYmFyLScraWQ7XHJcbiAgdGhpcy5ib3hJRCA9ICcjYm94cGxvdC0nK2lkO1xyXG4gIHRoaXMudmVjdG9ySUQgPSAnI3ZlY3Rvci1ncmFwaC0nK2lkO1xyXG4gIHRoaXMucm93czEgPSByb3dzMTtcclxuICB0aGlzLnJvd3MyID0gcm93czI7XHJcbiAgdGhpcy5jb21iaW5lZFJvd3MgPSBjb21iaW5lZFJvd3M7XHJcbiAgdGhpcy5zZWxlY3Rpb24xID0gc2VsZWN0aW9uMTtcclxuICB0aGlzLnNlbGVjdGlvbjIgPSBzZWxlY3Rpb24yO1xyXG4gIHRoaXMudW5pdCA9IHRoaXMuZ2V0VW5pdCgpO1xyXG5cclxuXHJcbiAgLy8gQ2FjaGUgZG9tIGVsZW1lbnRzXHJcbiAgdGhpcy4kdGl0bGVCYXIgPSAkKCcjdGl0bGUtYmFyLScraWQpO1xyXG4gIHRoaXMuJHRpdGxlQm94ID0gJCgnI3RpdGxlLWJveC0nK2lkKTtcclxuICB0aGlzLiR0aXRsZVZlY3RvciA9ICQoJyN0aXRsZS12ZWN0b3ItJytpZCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyBpZiB0aGUgdGhlIG9iamVjdCBpcyBjb21iaW5lZCBvciBub3RcclxuICpcclxuICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBjb21iaW5lZFxyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5pc0NvbWJpbmVkID0gZnVuY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIGNvbWJpbmVkIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgY29tYmluZWQgZ3JhcGhzXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldElEID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLmlkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHRpdGxlIG9mIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdGl0bGUgb2YgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRTZWxlY3Rpb24xVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHN1YkNhdGVnb3J5ID0gdGhpcy5zZWxlY3Rpb24xID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uMS5zdWJDYXRlZ29yeTtcclxuICByZXR1cm4gdGhpcy5zZWxlY3Rpb24xLmRlc2NyaXB0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24xLmNhdGVnb3J5ICsgXCIsIFwiICsgc3ViQ2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgb2YgdGhlIHNlY29uZCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdGl0bGUgb2YgdGhlIHNlY29uZCBzZWxlY3Rpb25cclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uMlRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uMiA9PT0gbnVsbCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvbjIuc3ViQ2F0ZWdvcnk7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uMi5kZXNjcmlwdGlvbiArIFwiLCBcIiArIHRoaXMuc2VsZWN0aW9uMi5jYXRlZ29yeSArIFwiLCAgXCIgKyBzdWJDYXRlZ29yeTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IGZvciB0aGUgY29tYmluZWQgZ3JhcGhcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgY29tYmluZWQgdW5pdHMgZm9yIHRoZSBzZWxlY3Rpb25zXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFVuaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93czFbMF0udW5pdHMgKyBcIiAvIFwiICsgdGhpcy5yb3dzMlswXS51bml0cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaXQgZm9yIHRoZSBzZWxlY3Rpb25zXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFVuaXQxID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3MxWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHVuaXQgZm9yIHRoZSBzZWNvbmQgc2VsZWN0aW9uXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaXQgZm9yIHRoZSBzZWxlY3Rpb25zXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFVuaXQyID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3MyWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnRzIHRoZSB0aXRsZXMgZm9yIHRoZSBncmFwaHMgaW50byB0aGUgRE9NIGVsZW1lbnRzXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmluc2VydFRpdGxlcyA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgcmF0aW9IVE1MID0gJzxoND5SYXRpbyAnK3RoaXMuaWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrJyAvICcrdGhpcy5pZC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKSArJzwvaDQ+J1xyXG4gIHZhciBzMSA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPjxzcGFuIHN0eWxlPVwiQ29sb3I6IGJsYWNrO1wiPicrdGhpcy5pZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSsnOiA8L3NwYW4+Jyt0aGlzLmdldFNlbGVjdGlvbjFUaXRsZSgpKyc8L2g0Pic7XHJcbiAgdmFyIHMyID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJDb2xvcjogYmxhY2s7XCI+Jyt0aGlzLmlkLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpKyc6IDwvc3Bhbj4nK3RoaXMuZ2V0U2VsZWN0aW9uMlRpdGxlKCkrJzwvaDQ+JztcclxuXHJcbiAgLy8gdmFyIHRpdGxlSFRNTCA9ICc8aDQgY2xhc3M9XCJjb21iaW5lZC10aXRsZVwiPicrdGhpcy5nZXRTZWxlY3Rpb24xVGl0bGUoKSsnPGJyPjxzcGFuIGNsYXNzPVwib3ZlclwiPm92ZXI8L3NwYW4+PGJyPicrdGhpcy5nZXRTZWxlY3Rpb24yVGl0bGUoKSsnPC9oND4nXHJcblxyXG4gIHRoaXMuJHRpdGxlQmFyLmFwcGVuZChyYXRpb0hUTUwpO1xyXG4gIHRoaXMuJHRpdGxlQmFyLmFwcGVuZChzMSk7XHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKHMyKTtcclxuXHJcbiAgdGhpcy4kdGl0bGVCb3guYXBwZW5kKHJhdGlvSFRNTCk7XHJcbiAgdGhpcy4kdGl0bGVCb3guYXBwZW5kKHMxKTtcclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQoczIpO1xyXG5cclxuXHJcbiAgdGhpcy4kdGl0bGVWZWN0b3IuYXBwZW5kKHJhdGlvSFRNTCk7XHJcbiAgdGhpcy4kdGl0bGVWZWN0b3IuYXBwZW5kKHMxKTtcclxuICB0aGlzLiR0aXRsZVZlY3Rvci5hcHBlbmQoczIpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIEdyYXBoc1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBDcmVhdGUgdGhlIGdyb3VwZWQgYmFyIGdyYXBoXHJcbiAgICB2YXIgZ3JvdXBlZERhdGEgPSBkcC5jcmVhdGVEYXRhRm9yR3JvdXBlZEdyYXBoKHRoaXMuY29tYmluZWRSb3dzKTtcclxuICAgIEdyb3VwZWRCYXJNb2R1bGUuY3JlYXRlZEdyb3VwZWRCYXJHcmFwaChncm91cGVkRGF0YS5kYXRhLGdyb3VwZWREYXRhLmtleXMsdGhpcy51bml0LCB0aGlzLmdyb3VwZWRJRCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBib3ggcGxvdCBncmFwaFxyXG4gICAgdmFyIGJveHBsb3REYXRhID0gZHAuY3JlYXRlRGF0YUZvckJveFBsb3QodGhpcy5jb21iaW5lZFJvd3MpO1xyXG4gICAgQm94UGxvdE1vZHVsZS5jcmVhdGVCb3hQbG90KGJveHBsb3REYXRhLCB0aGlzLmJveElELCB0aGlzLnVuaXQpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgdmVjdG9yIGdyYXBoXHJcbiAgICB2YXIgdmVjdG9yR3JhcGhEYXRhID0gZHAuY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoKHRoaXMucm93czEsIHRoaXMucm93czIpO1xyXG4gICAgVmVjdG9yTW9kdWxlLmNyZWF0ZVZlY3RvckdyYXBoKHZlY3RvckdyYXBoRGF0YSx0aGlzLmdldFVuaXQyKCksdGhpcy5nZXRVbml0MSgpLHRoaXMudmVjdG9ySUQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENhbGxlZCB3aGVuIHRoZSByb3dzIGFyZSB1cGRhdGVkIGJ5IENQSVxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB0aGUgbmV3IGNvbWJpbmVkIHJvd3NcclxuICogQHBhcmFtIHRoZSBuZXcgcm93cyBmb3IgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gcm93czIgdGhlIG5ldyByb3dzIGZvciB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocm93cywgcm93czEscm93czIpIHtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMucm93czEgPSByb3dzMTtcclxuICB0aGlzLnJvd3MyID0gcm93czI7XHJcbiAgdGhpcy5jcmVhdGUoKTtcclxufVxyXG4iLCJ2YXIgZHAgPSBuZXcgRGF0YVByb2Nlc3NvcigpO1xyXG5cclxuLyoqXHJcbiAqIE9iamVjdCBjb250YWlucyBhIG51bWJlciBvZiBmdW5jdGlvbnMgdG8gbWFuaXB1bGF0ZSBkYXRhIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAqICovXHJcbmZ1bmN0aW9uIERhdGFQcm9jZXNzb3IoKXt9XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgb2YgY29weSBvZiB0aGUgZGF0YVRhYmxlcyBvYmplY3QuIENvcGllcyBlYWNoIHRhYmxlIGFuZCBpdHMgdmFsdWVzIGZvciBlYWNoIHJvdy5cclxuICpcclxuICogQHBhcmFtIGRhdGFUYWJsZXMge09iamVjdH0gY29udGFpbnMgNiBhcnJheXMgb2Ygcm93cyBvbmUgZm9yIGVhY2ggdGFibGUuIEF0dHJpYnV0ZSBjYW4gYmUgdW5kZWZpbmVkIGlmIHRhYmxlIGRvZXMgbm90IGV4aXN0XHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IEEgY29weSBvZiB0aGUgZGF0YVRhYmxlcyBvYmplY3RcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY29weURhdGFUYWJsZXMgPSBmdW5jdGlvbihkYXRhVGFibGVzKSB7XHJcbiAgdmFyIG9yaWdUYWJsZXMgPSBbZGF0YVRhYmxlcy50YWJsZUEsZGF0YVRhYmxlcy50YWJsZUIsZGF0YVRhYmxlcy50YWJsZUMsZGF0YVRhYmxlcy50YWJsZUQsZGF0YVRhYmxlcy50YWJsZUFCLGRhdGFUYWJsZXMudGFibGVDRF07IC8vIEFkZCB0YWJsZXMgdG8gYXJyYXkgdG8gaXRlcmF0ZSBvdmVyIHRoZW1cclxuICB2YXIgdGFibGVzID0gW1tdLFtdLFtdLFtdLFtdLFtdXTsgLy8gRW1wdHkgYXJyYXlzIHRvIGluc2VydCBuZXcgcm93cyB3aXRoIHZhbHVlcyB0aGF0IGFyZSBjb3BpZXMgb2YgdGhlIG9yaWdpbmFsXHJcblxyXG4gIC8vIEl0ZXJhdGUgb3ZlciB0aGUgb3JpZ2luYWwgdGFibGVzXHJcbiAgZm9yKHZhciBqID0gMDsgaiA8IG9yaWdUYWJsZXMubGVuZ3RoOyBqKyspe1xyXG4gICAgICB2YXIgYSA9IG9yaWdUYWJsZXNbal07IC8vIEdyYWIgdGhlIGN1cnJlbnQgdGFibGUgd2l0aCBpbmRleCBpXHJcbiAgICAgIGlmKGEgIT09IHVuZGVmaW5lZCl7IC8vIEl0IG1pZ2h0IG5vdCBleGlzdCBkdWUgdG8gaXQgbm90IGJlaW5nIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXHJcbiAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKyl7IC8vIEZvciBldmVyeSByb3cgY29weSBhbGwgdGhlIGZpZWxkc1xyXG4gICAgICAgICAgICAgIHRhYmxlc1tqXS5wdXNoKHtjYXRlZ29yeSA6YVtpXS5jYXRlZ29yeSwgZGVzY3JpcHRpb24gOiBhW2ldLmRlc2NyaXB0aW9uLGRpc2NfeXI6IGFbaV0uZGlzY195cixlZGI6IGFbaV0uZWRiLFxyXG4gICAgICAgICAgICAgICAgICBmY2FzdF95cjogYVtpXS5mY2FzdF95cixuZXR3b3JrOmFbaV0ubmV0d29yayxub3RlOmFbaV0ubm90ZSxvYnNfeXI6YVtpXS5vYnNfeXIscF9rZXk6IGFbaV0ucF9rZXksc2NoX3JlZjphW2ldLnNjaF9yZWYsXHJcbiAgICAgICAgICAgICAgICAgIHNjaGVkdWxlOmFbaV0uc2NoZWR1bGUsc2VjdGlvbjphW2ldLnNlY3Rpb24sc3ViX2NhdGVnb3J5OiBhW2ldLnN1Yl9jYXRlZ29yeSx1bml0czphW2ldLnVuaXRzLHZhbHVlOmFbaV0udmFsdWV9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBuZXcgRGF0YVRhYmxlcyh0YWJsZXNbMF0sdGFibGVzWzFdLHRhYmxlc1syXSx0YWJsZXNbM10sdGFibGVzWzRdLHRhYmxlc1s1XSk7IC8vIFJldHVybiB0aGUgY29weVxyXG59XHJcblxyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jb3B5Um93cyA9IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgICB2YXIgbmV3Um93cyA9IFtdO1xyXG4gICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICBuZXdSb3dzLnB1c2goe3ZhbHVlIDogci52YWx1ZSwgY2F0ZWdvcnkgOnIuY2F0ZWdvcnksIGRlc2NyaXB0aW9uIDogci5kZXNjcmlwdGlvbixkaXNjX3lyOiByLmRpc2NfeXIsZWRiOiByLmVkYixcclxuICAgICAgICAgIGZjYXN0X3lyOiByLmZjYXN0X3lyLG5ldHdvcms6IHIubmV0d29yayxub3RlOiAgci5ub3RlLG9ic195cjogci5vYnNfeXIscF9rZXk6IHIucF9rZXksc2NoX3JlZjogci5zY2hfcmVmLFxyXG4gICAgICAgICAgc2NoZWR1bGU6IHIuc2NoZWR1bGUsc2VjdGlvbjogci5zZWN0aW9uLHN1Yl9jYXRlZ29yeTogci5zdWJfY2F0ZWdvcnksdW5pdHM6IHIudW5pdHN9KVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3Um93cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuZCBvYmplY3Qgd2l0aCB0aHJlZSBhcnJheXMgdGhhdCBhcmUgdXNlZCB0byBpdGVyYXRlIG92ZXIgYW5kIGFkZCB0aGUgZGF0YSB0byB0aGUgcGFnZS4gVGhlIHN0cnVjdHVyZSBzaW1wbGlmaWVzXHJcbiAqIGNyZWF0aW9uIG9mIHRhYmxlLCBncmFwaHMgYW5kIGNvbWJpbmVkIGdyYXBocy5cclxuICpcclxuICogQHBhcmFtIGRhdGFUYWJsZXMge09iamVjdH0gY29udGFpbnMgNiBhcnJheXMgb2Ygcm93cyBvbmUgZm9yIGVhY2ggdGFibGUuIFRhYmxlIGFycmF5IGNhbiBiZSBlbXB0eSBpZiB0YWJsZSBkb2VzIG5vdCBleGlzdFxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBEYXRhIHN0cnVjdHVyZVxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhU3RydWN0dXJlc1dpdGhDb3B5ID0gZnVuY3Rpb24gKGNvcHlPZkRhdGFUYWJsZXMpe1xyXG4gICAgdmFyIHNlbGVjdGlvbkRhdGFBcnJheSA9IFtdOyAvLyBVc2VkIHRvIGNyZWF0ZSB0aGUgcmVndWxhciBncmFwaHNcclxuICAgIHZhciBzZWxlY3Rpb25UYWJsZXNBcnJheSA9IFtdOyAvLyBUYWJsZXMgYWxzbyBjb250YWlucyBjb21iaW5lZCBkYXRhXHJcbiAgICB2YXIgY29tYmluZWRTZWxlY3Rpb25EYXRhQXJyYXkgPSBbXTsgLy8gVXNlZCB0byBjcmVhdGUgdmVjdG9yIGdyYXBoc1xyXG5cclxuICAgIC8vIEFuIGFycmF5IG9mIHRydWUgb3IgZmFsc2UgdmFsdWVzIGlmIGEgdGFibGUgY29udGFpbnMgdmFsdWVzXHJcbiAgICB2YXIgc2VsZWN0ZWRSb3dzID0gW2NvcHlPZkRhdGFUYWJsZXMudGFibGVBLmxlbmd0aCA+IDAsY29weU9mRGF0YVRhYmxlcy50YWJsZUIubGVuZ3RoID4gMCxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQy5sZW5ndGggPiAwLGNvcHlPZkRhdGFUYWJsZXMudGFibGVELmxlbmd0aCA+IDBdO1xyXG5cclxuICAgIC8vIEFuIGFycmF5IHdpdGggdGhlIHRhYmxlcyBkYXRhXHJcbiAgICB2YXIgdGFibGVzID0gW2NvcHlPZkRhdGFUYWJsZXMudGFibGVBLGNvcHlPZkRhdGFUYWJsZXMudGFibGVCLGNvcHlPZkRhdGFUYWJsZXMudGFibGVDLGNvcHlPZkRhdGFUYWJsZXMudGFibGVELGNvcHlPZkRhdGFUYWJsZXMudGFibGVBQixjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQ0RdO1xyXG5cclxuICAgIC8vIENyZWF0ZXMgdGhlIDQgbm9ybWFsIHRhYmxlcyBhbmQgdGhlIGNvbWJpbmVkIHRhYmxlc1xyXG4gICAgdmFyIGlkcyA9IFsnYScsJ2InLCdjJywnZCcsJ2FiJywnY2QnXTsgLy8gVGhlIGlkJ3MgbGluZSB1cCB3aXRoIHRoZSB0YWJsZXMgYXJyYXkgdG8gYWRkIGFuIGlkIHRvIGVhY2ggcm93XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWRSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzZWxlY3RlZFJvd3NbaV0peyAvLyBPbmx5IGdvIHRocm91Z2ggdGFibGUgaWYgaXQgaGFzIHJvd3NcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlID0gdGFibGVzW2ldWzBdLnNlY3Rpb24gKyBcIiwgXCIgKyB0YWJsZXNbaV1bMF0uY2F0ZWdvcnk7IC8vIENyZWF0ZSBzdWJ0aXRsZSB3aXRoIHNlY3Rpb24gYW5kIGNhdGVnb3J5XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzdWIgY2F0ZWdvcnkgaXMgbnVsbCBpZiBzbyBqdXN0IHVzZSBkZXNjcmlwdGlvbiBlbHNlIGFsc28gdXNlIHN1YiBjYXRlZ29yeVxyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSB0YWJsZXNbaV1bMF0uc3ViX2NhdGVnb3J5ID09PSBudWxsID8gdGFibGVzW2ldWzBdLmRlc2NyaXB0aW9uIDogdGFibGVzW2ldWzBdLnN1Yl9jYXRlZ29yeSArIFwiLCBcIiArIHRhYmxlc1tpXVswXS5kZXNjcmlwdGlvbjtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBhIHJvdyBhbG9uZyB3aXRoIHRoZSBpZCBvZiB0aGUgdGFibGUgdGhlIHRpdGxlLCBzdWJ0aXRsZSBhbmQgdW5pdCB0byBib3RoIHRhYmxlIGFuZCBzZWxlY3Rpb24gYXJyYXlzXHJcbiAgICAgICAgICAgIHNlbGVjdGlvblRhYmxlc0FycmF5LnB1c2gobmV3IFNlbGVjdGVkVGFibGVEYXRhKHRhYmxlc1tpXSxpZHNbaV0sdGl0bGUsc3VidGl0bGUsIHRhYmxlc1tpXVswXS51bml0cykpO1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25EYXRhQXJyYXkucHVzaChuZXcgU2VsZWN0aW9uRGF0YSh0YWJsZXNbaV0sIHRpdGxlLCBzdWJ0aXRsZSAsdGFibGVzW2ldWzBdLnVuaXRzLGlkc1tpXSkpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGNvbWJpbmVkIHNwZWNpYWwgY2FzZSwgaWYgQSBvciBDIGV4aXN0IGl0IGlzIHBvc3NpYmxlIGEgY29tYmluZWQgdGFibGUgbmVlZHMgdG8gYmUgY3JlYXRlZFxyXG4gICAgICAgICAgICBpZihpZHNbaV0gPT09ICdhJyB8fCBpZHNbaV0gPT09ICdjJyl7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZFJvd3NbaSsxXSl7IC8vIENoZWNrIHRoYXQgYSBzZWxlY3Rpb25zIGhhcyBiZWVuIG1hZGUgaWYgc28gY3JlYXRlIHRoZSBjb21iaW5lZCB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqdW1wID0gaSA9PT0gMCA/IDQgOiAzOyAvLyBJZiAwIG5lZWQgdG8ganVtcCB0byB0aGUgbG9jYXRpb24gb2YgYWIgdGFibGUgZWxzZSBqdW1wIHRvIGxvY2F0aW9uIG9mIGNkIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlRpdGxlSnVtcCA9IHRhYmxlc1tpKzFdWzBdLnNlY3Rpb24gKyBcIiwgXCIgKyB0YWJsZXNbaSsxXVswXS5jYXRlZ29yeTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGVKdW1wID0gdGFibGVzW2krMV1bMF0uc3ViX2NhdGVnb3J5ID09PSBudWxsID8gdGFibGVzW2krMV1bMF0uZGVzY3JpcHRpb24gOiB0YWJsZXNbaSsxXVswXS5zdWJfY2F0ZWdvcnkgKyBcIiwgXCIgKyB0YWJsZXNbaSsxXVswXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25UYWJsZXNBcnJheS5wdXNoKG5ldyBTZWxlY3RlZFRhYmxlRGF0YSh0YWJsZXNbaStqdW1wXSxpZHNbaStqdW1wXSwgdGl0bGUgKyBcIiwgXCIgKyBzdWJ0aXRsZSwgdGl0bGVKdW1wICsgXCIsIFwiICsgc3ViVGl0bGVKdW1wLCB0YWJsZXNbaSsxXVswXS51bml0cykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5LnB1c2gobmV3IFNlbGVjdGlvbkRhdGFDb21iaW5lZCh0YWJsZXNbaStqdW1wXSx0YWJsZXNbaV0sdGFibGVzW2krMV0sIHRpdGxlICsgXCIgXCIgKyBzdWJ0aXRsZSwgdGl0bGVKdW1wICsgXCIgXCIgKyBzdWJUaXRsZUp1bXAsdGFibGVzW2ldWzBdLnVuaXRzLHRhYmxlc1tpKzFdWzBdLnVuaXRzLGlkc1tpK2p1bXBdKSk7IC8vIFRPRE8gYXNrIGhvdyB0byBmb3JtYXQgdGl0bGVzIGZvciBjb21iaW5lZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBEYXRhU3RydWN0dXJlKHNlbGVjdGlvbkRhdGFBcnJheSxzZWxlY3Rpb25UYWJsZXNBcnJheSxjb21iaW5lZFNlbGVjdGlvbkRhdGFBcnJheSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBzZWxlY3Rpb25zIHRoZSB1c2VyIGhhcyBtYWRlIGFyZSBjb21wbGV0ZS4gRm9yIGV4YW1wbGUgaWYgYSBzZWxlY3Rpb24gaXMgbWFkZSBmb3IgYSBzZWN0aW9uIGluIGEgcm93IHRoZSBjYXRlZ29yeVxyXG4gKiBhbHNvIGhhcyB0byBiZSBjaG9zZW4gYWxvbmcgd2l0aCBhIGRlc2NyaXB0aW9uIGFuZCBzdWIgY2F0ZWdvcnkgaWYgaXQgZXhpc3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9ucyB7T2JqZWN0fSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHNlY3Rpb25zIGZvciBlYWNoIHJvdywgYW4gYXJyYXkgb2YgNCBzZWxlY3Rpb24gcm93c1xyXG4gKiBAcGFyYW0gdmFsaWRPcHRpb25zIHtPYmplY3R9IGNvbnRhaW5zIGlmIGEgcm93IGhhcyBhIHN1YiBjYXRlZ29yeSBvciBub3QgZmFsc2UgaWYgbm8gc3ViIGNhdGVnb3J5XHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgdmFsaWQgc2VhcmNoIGZhbHNlIGlmIG5vdFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS52YWxpZGF0ZVNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uIChzZWxlY3Rpb25zLCB2YWxpZE9wdGlvbnMpe1xyXG4gICAgdmFyIHJldHVyblZhbCA9IHRydWU7XHJcbiAgICBzZWxlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsZW0sIGkpIHtcclxuICAgICAgICBpZihlbGVtLnN1YkNhdGVnb3J5ID09PSBcIlwiICYmIHZhbGlkT3B0aW9uc1tpXSl7IC8vIFZhbGlkIG9wdGlvbnMgaG9sZHMgaWYgdGhlcmUgaXMgYSBwb3NzaWJsZSBvcHRpb24gdG8gY2hvb3NlZnJvbSBpbiB0aGUgc2VsZWN0IGRyb3AgZG93blxyXG4gICAgICAgICAgICByZXR1cm5WYWwgPSBmYWxzZTsgLy8gVGhlcmUgaXMgYSBwb3NzaWJsZSBzdWIgY2F0ZWdvcnkgc28gaXQgaGFzIHRvIGJlIGNob3NlbiBmcm9tXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVja3MgaWYgb25lIG9mIHRoZSBzZWxlY3Rpb25zIGlzIGVtcHR5XHJcbiAgICAgICAgaWYoZWxlbS5zZWN0aW9uID09PSBcIlwiIHx8IGVsZW0uY2F0ZWdvcnkgPT09IFwiXCIgfHwgZWxlbS5kZXNjcmlwdGlvbiA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgIC8vIE5vdyBjaGVjayBpZiBvbmUgb2YgdGhlIHNlbGVjdGlvbnMgaXMgbm90IGVtcHR5XHJcbiAgICAgICAgICAgIGlmKGVsZW0uc2VjdGlvbiAhPT0gXCJcIiB8fCBlbGVtLmNhdGVnb3J5ICE9PSBcIlwiIHx8IGVsZW0uZGVzY3JpcHRpb24gIT09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gZmFsc2U7IC8vIEEgcm93IGNhbm5vdCBoYXZlIG9uZSBpdGVtIHNlbGVjdGVkIGFuZCBhbm90aGVyIGVtcHR5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXR1cm5WYWw7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgcm93IGZyb20gdGhlIGRhdGFiYXNlIG1hdGNoZXMgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSB1c2VyLiBUaGlzIGlzIHVzZWQgYmVjYXVzZSB0aGUgdXNlciBjYW4gbWFrZSBmb3VyIGRpZmZlcmVudFxyXG4gKiBzZWxlY3Rpb25zIGFuZCB0aGUgcXVlcnkgZm9yIHRoZSBkYXRhYmFzZSByZXR1bnMgYWxsIHRoZSByb3dzIGZvciBhbGwgdGhlIHNlY3Rpb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0gREJSb3cge09iamVjdH0gQSByb3cgZnJvbSB0aGUgZGF0YWJhc2UgY29udGFpbnMgYWxsIHRoZSBmaWVsZHNcclxuICogQHBhcmFtIFNlbGVjdGlvbiB7T2JqZWN0fSBjb250YWlucyBzZWN0aW9uLCBjYXRlZ29yeSwgc3ViIGNhdGVnb3J5IGFuZCBkZXNjcmlwdGlvbiBmcm9tIGEgdXNlciBzZWxlY3Rpb25cclxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYSBkYXRhYmFzZSByb3cgYmVsb25ncyB0byB0aGUgdXNlciBzZWxlY3Rpb25cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUubWF0Y2hEQlJvdyA9IGZ1bmN0aW9uIChEQlJvdywgc2VsZWN0aW9uKSB7XHJcbiAgaWYoREJSb3cuc2VjdGlvbiA9PT0gc2VsZWN0aW9uLnNlY3Rpb24gJiYgREJSb3cuY2F0ZWdvcnkgPT09IHNlbGVjdGlvbi5jYXRlZ29yeSAmJiBEQlJvdy5kZXNjcmlwdGlvbiA9PT0gc2VsZWN0aW9uLmRlc2NyaXB0aW9uKXtcclxuICAgICAgaWYoREJSb3cuc3ViX2NhdGVnb3J5ICE9PSBudWxsKXtcclxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IERCUm93LnN1Yl9jYXRlZ29yeTsgLy8gU3ViIGNhdCBjb3VsZCBiZSBudWxsIGJ1dCB3b3VsZCBzdGlsbCBtYXRjaFxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IFwiXCI7IC8vIEhhcyB0byBhbHNvIGJlIGVtcHR5XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyByb3dzIGZyb20gZGF0YWJhc2UgcXVlcnkgcmVzdWx0IGFuZCBzcGxpdHMgaW50byBjb3JyZXNwb25kaW5nIHRhYmxlLiBVc2VzIHRoZSBtYXRjaERCUm93IGZ1bmN0aW9uIHRvIG1hdGNoXHJcbiAqIGEgcm93IHRvIGEgc2VsZWN0aW9uLiBPbmNlIGZpbHRlcmVkIGNyZWF0ZXMgYW5kIG9iamVjdCBjb250YWluaW5nIGVhY2ggdGFibGUgYW5kIHRoZSByb3dzXHJcbiAqXHJcbiAqIEFsc28gY3JlYXRlcyB0aGUgY29tYmluZWQgdGFibGVzIGJ5IHVzaW5nIHRoZSBjb21iaW5lVGFibGUgZnVuY3Rpb24gYW5kIGFkZHMgdGhlIGNvbWJpbmVkIHRhYmxlcyB0byB0aGUgcmV0dXJuZWRcclxuICogb2JqZWN0LlxyXG4gKlxyXG4gKiBOb3RlIGFueSBudWxsIHZhbHVlcyBpbiB0aGUgcm93cyBhcmUgY2hhbmdlZCB0byAwXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHtPYmplY3R9IEFsbCB0aGUgcm93cyBmcm9tIHRoZSB1c2VycyBzZWxlY3Rpb25zXHJcbiAqIEBwYXJhbSBzZWFyY2gge09iamVjdH0gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZvdXIgZGlmZmVyZW50IHNlbGVjdGlvbnMgdGhlIHVzZXIgbWF5IGhhdmUgbWFkZVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHByb3BlcnR5IGZvciBlYWNoIHRhYmxlIHdoaWNoIGlzIGFuIGFycmF5IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5maWx0ZXJSb3dzVG9UYWJsZXMgPSBmdW5jdGlvbiAocm93cywgc2VhcmNoKSB7XHJcblxyXG4gIC8vIENyZWF0ZSBmb3VyIGFycmF5cyBmb3IgdGhlIGRpZmZlcmVudCByb3dzIHRoYXQgYmVsb25nIHRvIGVhY2ggb2YgdGhlIHNlYXJjaGVzXHJcbiAgdmFyIGFSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guYVRhYmxlKTt9KTtcclxuICB2YXIgYlJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5iVGFibGUpO30pO1xyXG4gIHZhciBjUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmNUYWJsZSk7fSk7XHJcbiAgdmFyIGRSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guZFRhYmxlKTt9KTtcclxuXHJcbiAgLy8gU2V0IGFsbCBudWxsIHZhbHVlcyBpbiByb3dzIHRvIDBcclxuICBhUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBiUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBjUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuXHJcblxyXG4gIHZhciB0YWJsZXMgPSBbXTtcclxuICBpZihhUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYScsIHJvd3MgOiBhUm93cywgc2VhcmNoIDogc2VhcmNoLmFUYWJsZX0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGNvbWJpbmVkIHRhYmxlcyBpZiBwb3NzaWJsZVxyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDAgJiYgYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBhYlJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGFSb3dzLGJSb3dzKTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgRGF0YVRhYmxlcyhhUm93cyxiUm93cyxjUm93cyxkUm93cywgYWJSb3dzLCBjZFJvd3MpO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIFNUQVJUIE5FV1xyXG4vKipcclxuICogVGFrZXMgcm93cyBmcm9tIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdCBhbmQgc3BsaXRzIGludG8gY29ycmVzcG9uZGluZyB0YWJsZS4gVXNlcyB0aGUgbWF0Y2hEQlJvdyBmdW5jdGlvbiB0byBtYXRjaFxyXG4gKiBhIHJvdyB0byBhIHNlbGVjdGlvbi4gT25jZSBmaWx0ZXJlZCBjcmVhdGVzIGFuZCBvYmplY3QgY29udGFpbmluZyBlYWNoIHRhYmxlIGFuZCB0aGUgcm93c1xyXG4gKlxyXG4gKiBBbHNvIGNyZWF0ZXMgdGhlIGNvbWJpbmVkIHRhYmxlcyBieSB1c2luZyB0aGUgY29tYmluZVRhYmxlIGZ1bmN0aW9uIGFuZCBhZGRzIHRoZSBjb21iaW5lZCB0YWJsZXMgdG8gdGhlIHJldHVybmVkXHJcbiAqIG9iamVjdC5cclxuICpcclxuICogTm90ZSBhbnkgbnVsbCB2YWx1ZXMgaW4gdGhlIHJvd3MgYXJlIGNoYW5nZWQgdG8gMFxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBBbGwgdGhlIHJvd3MgZnJvbSB0aGUgdXNlcnMgc2VsZWN0aW9uc1xyXG4gKiBAcGFyYW0gc2VhcmNoIHtPYmplY3R9IG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb3VyIGRpZmZlcmVudCBzZWxlY3Rpb25zIHRoZSB1c2VyIG1heSBoYXZlIG1hZGVcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBwcm9wZXJ0eSBmb3IgZWFjaCB0YWJsZSB3aGljaCBpcyBhbiBhcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIHJvd3NcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuZmlsdGVyUm93c1RvVGFibGVzQW5kQ29weSA9IGZ1bmN0aW9uIChyb3dzLCBzZWFyY2gpIHtcclxuXHJcbiAgLy8gQ3JlYXRlIGZvdXIgYXJyYXlzIGZvciB0aGUgZGlmZmVyZW50IHJvd3MgdGhhdCBiZWxvbmcgdG8gZWFjaCBvZiB0aGUgc2VhcmNoZXNcclxuICB2YXIgYVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5hVGFibGUpO30pO1xyXG4gIHZhciBiUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmJUYWJsZSk7fSk7XHJcbiAgdmFyIGNSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guY1RhYmxlKTt9KTtcclxuICB2YXIgZFJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5kVGFibGUpO30pO1xyXG5cclxuICAvLyBTZXQgYWxsIG51bGwgdmFsdWVzIGluIHJvd3MgdG8gMFxyXG4gIGFSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGJSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGNSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGRSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG5cclxuICAvLyBDcmVhdGUgY29tYmluZWQgdGFibGVzIGlmIHBvc3NpYmxlXHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCAmJiBiUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGFiUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoYVJvd3MsYlJvd3MpO1xyXG4gIH1cclxuXHJcbiAgaWYoY1Jvd3MubGVuZ3RoID4gMCAmJiBkUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGNkUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoY1Jvd3MsZFJvd3MpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGNvcHkgPSB0aGlzLmNvcHlEYXRhVGFibGVzKG5ldyBEYXRhVGFibGVzKGFSb3dzLGJSb3dzLGNSb3dzLGRSb3dzLGFiUm93cyxjZFJvd3MpKTtcclxuXHJcbiAgdmFyIHRhYmxlcyA9IFtdO1xyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdhJywgcm93cyA6IGNvcHkudGFibGVBLCBzZWFyY2ggOiBzZWFyY2guYVRhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBpZihiUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYicsIHJvd3MgOiBjb3B5LnRhYmxlQiwgc2VhcmNoIDogc2VhcmNoLmJUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgaWYoY1Jvd3MubGVuZ3RoID4gMCl7XHJcbiAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2MnLCByb3dzIDogY29weS50YWJsZUMsIHNlYXJjaCA6IHNlYXJjaC5jVGFibGUsIGNvbWJpbmVkIDogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIGlmKGRSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdkJywgcm93cyA6IGNvcHkudGFibGVELCBzZWFyY2ggOiBzZWFyY2guZFRhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIC8vIENyZWF0ZSBjb21iaW5lZCB0YWJsZXMgaWYgcG9zc2libGVcclxuICBpZihhUm93cy5sZW5ndGggPiAwICYmIGJSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2FiJywgcm93cyA6IGNvcHkudGFibGVBQiwgdGFibGUxUm93cyA6IGNvcHkudGFibGVBLCB0YWJsZTJSb3dzIDogY29weS50YWJsZUIsIHNlYXJjaCA6IHNlYXJjaC5hVGFibGUsIHNlYXJjaDIgOiBzZWFyY2guYlRhYmxlLCBjb21iaW5lZCA6IHRydWV9KTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICAgICAgdGFibGVzLnB1c2goeyBpZCA6ICdjZCcsIHJvd3MgOiBjb3B5LnRhYmxlQ0QsIHRhYmxlMVJvd3MgOiBjb3B5LnRhYmxlQywgdGFibGUyUm93cyA6IGNvcHkudGFibGVELCBzZWFyY2ggOiBzZWFyY2guY1RhYmxlLCBzZWFyY2gyIDogc2VhcmNoLmRUYWJsZSwgY29tYmluZWQgOiB0cnVlfSk7XHJcbiAgfVxyXG4gIHJldHVybiB0YWJsZXM7XHJcbn1cclxuLy8gRU5EIE5FV1xyXG5cclxuXHJcblxyXG4vKipcclxuICogQ29tYmluZXMgdGhlIHR3byB0YWJsZXMgYnkgZ29pbmcgdGhyb3VnaCBlYWNoIHJvdyBhbmQgZGl2aWRpbmcgdGhlIHZhbHVlIG9mIHRhYmxlMSB0byB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBmcm9tXHJcbiAqIGEgcm93IGluIHRhYmxlIDJcclxuICpcclxuICogTm90ZSBpZiB0YWJsZSAyIHZhbHVlIGlzIDAgaXQgaXMgZGl2aWRlZCBieSAxIGluc3RlYWRcclxuICpcclxuICogQHBhcmFtIHRhYmxlMVJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBvbmUgdGFibGVcclxuICogQHBhcmFtIHRhYmxlMlJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBhbm90aGVyIHRhYmxlXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gQW4gYXJyYXkgb2Ygcm93cyBhcyBhIHJlc3VsdCBvZiBjb21iaW5pbmcgdGFibGUxIGFuZCB0YWJsZTJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY29tYmluZVRhYmxlcyA9IGZ1bmN0aW9uKHRhYmxlMVJvd3MsIHRhYmxlMlJvd3MpIHtcclxuICB2YXIgY29tYmluZWQgPSBbXTtcclxuICB2YXIgYXQgPSB0YWJsZTFSb3dzO1xyXG4gIHZhciBidCA9IHRhYmxlMlJvd3M7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBhdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBidC5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICBpZihhdFtpXS5lZGIgPT09IGJ0W2pdLmVkYiAmJiBhdFtpXS5vYnNfeXIgPT09IGJ0W2pdLm9ic195ciAmJiBhdFtpXS5kaXNjX3lyID09PSBidFtqXS5kaXNjX3lyKXtcclxuICAgICAgICAgICAgICBjb21iaW5lZC5wdXNoKHsgZGlzY195ciA6IGJ0W2pdLmRpc2NfeXIgLFxyXG4gICAgICAgICAgICAgICAgICBlZGIgOiBidFtqXS5lZGIsXHJcbiAgICAgICAgICAgICAgICAgIG9ic195ciA6IGJ0W2pdLm9ic195cixcclxuICAgICAgICAgICAgICAgICAgdmFsdWUgOiBhdFtpXS52YWx1ZSAvIChidFtqXS52YWx1ZSA9PT0gJzAnIHx8IGJ0W2pdLnZhbHVlID09PSAwID8gMSA6IGJ0W2pdLnZhbHVlKSwgLy8gRGl2aWRlIHRoZSB2YWx1ZSBpZiB2YSBpZiBkaXZpZGluZyBieSAwIG1ha2UgaXQgMVxyXG4gICAgICAgICAgICAgICAgICBzZWN0aW9uIDogYnRbal0uc2VjdGlvbiArIFwiXCIgKyBidFtqXS5kZXNjcmlwdGlvbiArIFwiIG92ZXIgXCIsIC8vIEJpdCBvZiBhIGhhY2sgYXMgZGVzY3JpcHRpb24gaXMgaW5zZXJ0ZWQgYWZ0ZXIgc2VjdGlvbiwgdGhpcyB3YXkgYm90aCB0aXRsZXMgYXJlIGFkZGVkIHRvIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogYXRbaV0uc2VjdGlvbiArIFwiIFwiICsgYXRbaV0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgIHVuaXRBIDogYXRbaV0udW5pdHMsXHJcbiAgICAgICAgICAgICAgICAgIHVuaXRCIDogYnRbal0udW5pdHMsXHJcbiAgICAgICAgICAgICAgICAgIHVuaXQgOiBhdFtpXS51bml0cyArXCIgLyBcIiArICBidFtqXS51bml0c1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGJyZWFrOyAvLyBjYW4gZXhpdCB0aGUgbG9vcFxyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBjb21iaW5lZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIGZyb20gdGhlIHRhYmxlIHJvd3MgdXNlZCBieSB0aGUgdmVjdG9yIGdyYXBoLiBFYWNoIGVudHJ5IGluIHRoZSBhcnJheSBjb250YWlucyB0aGUgZWRiIGFuIGFycmF5IG9mIHllYXJzIHdpdGggdGhlIHZhbHVlIGZyb21cclxuICogdGFibGUgYSBhbmQgdGFibGUgYi5cclxuICpcclxuICogQHBhcmFtIHRhYmxlMVJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBvbmUgdGFibGVcclxuICogQHBhcmFtIHRhYmxlMlJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBhbm90aGVyIHRhYmxlXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIHZlY3RvciBncmFwaCBpbiB0aGUgZm9ybSBbeyBFREIsIFsgeyB5ZWFyMSwgdmFsdWVBLCB2YWx1ZUIgfSwge3llYXIyLCB2YWx1ZUEsIHZhbHVlQiB9LC4uLl19XVxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGggPSBmdW5jdGlvbih0YWJsZTFSb3dzLHRhYmxlMlJvd3MpIHtcclxuICAgIHZhciBhdCA9IHRhYmxlMVJvd3M7XHJcbiAgICB2YXIgYnQgPSB0YWJsZTJSb3dzO1xyXG4gICAgdmFyIGVkYkRvbmUgPSBbXTsgLy8gVGhlIGVkYnMgdGhhdCBoYXZlIGJlZW4gcHJvY2Vzc2VkXHJcbiAgICB2YXIgdmVjRGF0YSA9IFtdOyAvLyBUaGUgZmluYWwgZW50cnkgaW4gdGhlIGZvcm0geyBFREIsIFsgeyB5ZWFyMSwgdmFsdWVBLCB2YWx1ZUIgfSwge3llYXIyLCB2YWx1ZUEsIHZhbHVlQiB9XX1cclxuXHJcbiAgICB2YXIgYXZhaWxhYmxlT2JzWWVhcnMgPSBbXTsgLy8gVGhlIHllYXJzIGZvciBib3RoIHRhYmxlIDEgYW5kIHRhYmxlIDJcclxuICAgIHRhYmxlMVJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93MSkge1xyXG4gICAgICAgIGlmKCFhdmFpbGFibGVPYnNZZWFycy5pbmNsdWRlcyhyb3cxLm9ic195cikpe1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2Vjb25kIHNldCBvZiByb3dzIGFsc28gY29udGFpbnMgdGhlIHllYXJcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlMlJvd3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgIGlmKHRhYmxlMlJvd3NbaV0ub2JzX3lyID09PSByb3cxLm9ic195cil7XHJcbiAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZU9ic1llYXJzLnB1c2gocm93MS5vYnNfeXIpO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IHJvd1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBFREIgaGFzIGFscmVhZHkgYmVlbiBwcm9jZXNzZWRcclxuICAgICAgICBpZiAoIWVkYkRvbmUuaW5jbHVkZXMoYXRbaV0uZWRiKSkge1xyXG5cclxuICAgICAgICAgICAgLy8gR3JhYiBhbGwgdGhlIHJvd3MgZm9yIHRoZSBjdXJyZW50IGVkYiBpbiBib3RoIHRhYmxlc1xyXG4gICAgICAgICAgICB2YXIgZWRiUm93c0F0ID0gYXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5lZGIgPT09IGF0W2ldLmVkYlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGVkYlJvd3NCdCA9IGJ0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZWRiID09PSBhdFtpXS5lZGJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVkYkRvbmUucHVzaChhdFtpXS5lZGIpOyAvLyBBZGQgeWVhciB0byBkb25lIHNvIGl0IGlzIG5vdCByZXBlYXRlZFxyXG4gICAgICAgICAgICB2YXIgeWVhcnNEb25lID0gW107IC8vIFByb2Nlc3NlZCB5ZWFyc1xyXG4gICAgICAgICAgICB2YXIgZWRiWWVhckFycmF5ID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cyBpbiBlZGJcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlZGJSb3dzQXQubGVuZ3RoOyBqKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpdCBoYXMgbm90IGJlZW4gcHJvY2Vzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoIXllYXJzRG9uZS5pbmNsdWRlcyhlZGJSb3dzQXRbal0uZGlzY195cikgJiYgYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMoZWRiUm93c0F0W2pdLmRpc2NfeXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcnNEb25lLnB1c2goZWRiUm93c0F0W2pdLmRpc2NfeXIpOyAvLyBBZGQgdG8gcHJvY2Vzc2VkXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgaGF2ZSB0byByb3dzIGZvciBhIHBhcnRpY3VsYXIgeWVhciBmb3IgYSBwYXJ0aWN1bGFyIGVkYiBub3cgd2UgY2FuIGNyZWF0ZSB0aGUgZW50cnlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhclJvd3NBdCA9IGVkYlJvd3NBdC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGlzY195ciA9PT0gZWRiUm93c0F0W2pdLmRpc2NfeXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhclJvd3NCdCA9IGVkYlJvd3NCdC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGlzY195ciA9PT0gZWRiUm93c0F0W2pdLmRpc2NfeXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoISh5ZWFyUm93c0F0Lmxlbmd0aCA9PSB5ZWFyUm93c0J0Lmxlbmd0aCApKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB5ZWFyUm93c0F0Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkYlllYXJBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICt5ZWFyUm93c0F0W2tdLmRpc2NfeXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUE6ICt5ZWFyUm93c0F0W2tdLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVCOiAreWVhclJvd3NCdFtrXS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWRiWWVhckFycmF5LnNvcnQoZnVuY3Rpb24gKGEsYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEueWVhciAtIGIueWVhcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZlY0RhdGEucHVzaCh7ZWRiOiBhdFtpXS5lZGIsIHllYXJzOiBlZGJZZWFyQXJyYXl9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmVjRGF0YTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIGZyb20gdGhlIHRhYmxlIHJvd3Mgd2hpY2ggaXMgdGhlbiB1c2VkIGJ5IHRoZSBib3ggcGxvdC5cclxuICpcclxuICogQHBhcmFtIHRhYmxlUm93cyB7T2JqZWN0fSBUaGUgcm93cyBmcm9tIHRoZSB0YWJsZSB0aGUgYm94IHBsb3QgaXMgdmlzdWFsaXNpbmdcclxuICogQHJldHVybnMge09qYmVjdFtdfSBEYXRhIGZvciB0aGUgYm94IHBsb3RcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlRGF0YUZvckJveFBsb3QgPSBmdW5jdGlvbiAodGFibGVSb3dzKXtcclxuICAgIHZhciB5ZWFyc0RvbmUgPSBbXTsgLy8gWWVhcnMgcHJvY2Vzc2VkXHJcbiAgICB2YXIgeWVhcnMgPSBbXTsgLy8gV2lsbCBjb250YWluIGFuIGFycmF5IG9mIHJvd3MgZm9yIGVhY2ggeWVhclxyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZVJvd3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKCF5ZWFyc0RvbmUuaW5jbHVkZXModGFibGVSb3dzW2ldLm9ic195cikpe1xyXG4gICAgICAgICAgICB5ZWFycy5wdXNoKHRhYmxlUm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUub2JzX3lyID09PSB0YWJsZVJvd3NbaV0ub2JzX3lyfSkpO1xyXG4gICAgICAgICAgICB5ZWFyc0RvbmUucHVzaCh0YWJsZVJvd3NbaV0ub2JzX3lyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGEgPSBbXTsgLy8gRWFjaCBlbnRyeSB3aWxsIGJlIGFuIGFycmF5IHdoZXJlIGFycmF5WzBdID0geWVhciBhbmQgYXJyYXlbMV0gPSB2YWx1ZXMgZm9yIHRoYXQgeWVhclxyXG4gICAgdmFyIHNWYWx1ZXMgPSBbXTsgLy8gRGF0YSBmb3IgdGhlIHNjYXR0ZXIgcGxvdCBvbiB0b3Agb2YgYm94IHBsb3RcclxuICAgIHZhciBtaW4gPSBJbmZpbml0eTtcclxuICAgIHZhciBtYXggPSAtSW5maW5pdHk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHllYXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICB2YXIgZW50cnkgPSBbXTtcclxuICAgICAgICBlbnRyeVswXSA9IFwiXCIreWVhcnNbaV1bMF0ub2JzX3lyOyAvLyBOYW1lIG9mIHRoZSBib3ggcGxvdCBjb252ZXJ0IHllYXIgdG8gc3RyaW5nXHJcbiAgICAgICAgdmFyIHllYXIgPSBcIlwiK3llYXJzW2ldWzBdLm9ic195cjtcclxuICAgICAgICB2YXIgdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCB5ZWFyc1tpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIHZhciBjdXJWYWx1ZSA9ICt5ZWFyc1tpXVtqXS52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGVkYiA9IHllYXJzW2ldW2pdLmVkYjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJWYWx1ZSA+IG1heCl7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBjdXJWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3VyVmFsdWUgPCBtaW4pe1xyXG4gICAgICAgICAgICAgICAgbWluID0gY3VyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWVzLnB1c2goY3VyVmFsdWUpO1xyXG4gICAgICAgICAgICBzVmFsdWVzLnB1c2goe3llYXIgOiB5ZWFyICxlZGIgOiBlZGIsIHZhbHVlIDogY3VyVmFsdWV9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW50cnlbMV0gPSB2YWx1ZXM7XHJcbiAgICAgICAgZGF0YS5wdXNoKGVudHJ5KTtcclxuICAgIH1cclxuICAgIGRhdGEuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgIHJldHVybiBhWzBdIC0gYlswXTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHttaW4gOiBtaW4sIG1heCA6IG1heCwgZGF0YSA6IGRhdGEsIHNjYXR0ZXJEYXRhIDogc1ZhbHVlc307XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHdoaWNoIGlzIHRoZW4gdXNlZCBieSB0aGUgZ3JvdXBlZCBiYXIgZ3JhcGguXHJcbiAqXHJcbiAqIEBwYXJhbSB0b3dzIHtPYmplY3R9IFRoZSByb3dzIGZyb20gdGhlIHRhYmxlIHRoZSBiYXIgZ3JhcGggaXMgdmlzdWFsaXNpbmdcclxuICogQHJldHVybnMge09qYmVjdFtdfSBEYXRhIGZvciB0aGUgYmFyIGdyYXBoXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGggPSBmdW5jdGlvbihyb3dzKXtcclxuICAgIHZhciBhdmFpbGFibGVPYnNZZWFycyA9IFtdO1xyXG5cclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIGlmKCFhdmFpbGFibGVPYnNZZWFycy5pbmNsdWRlcyhlbGVtLm9ic195cikpYXZhaWxhYmxlT2JzWWVhcnMucHVzaChlbGVtLm9ic195cik7XHJcbiAgICB9KTtcclxuICAgIGF2YWlsYWJsZU9ic1llYXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gK2EgLSArYjtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBkYXRhID0gW107XHJcbiAgICB2YXIgZWRiRG9uZSA9IFtdO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZighZWRiRG9uZS5pbmNsdWRlcyhyb3dzW2ldLmVkYikpe1xyXG4gICAgICAgICAgICBlZGJEb25lLnB1c2gocm93c1tpXS5lZGIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0geyBcImVkYlwiIDogcm93c1tpXS5lZGJ9O1xyXG5cclxuICAgICAgICAgICAgZW50cnlbcm93c1tpXS5vYnNfeXJdID0gK3Jvd3NbaV0udmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGEucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YVtqXS5lZGIgPT09IHJvd3NbaV0uZWRiKXtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhW2pdW3Jvd3NbaV0ub2JzX3lyXSA9ICtyb3dzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtkYXRhIDogZGF0YSwga2V5cyA6IGF2YWlsYWJsZU9ic1llYXJzfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTb3J0cyB0aGUgc2VjdGlvbnNcclxuICpcclxuICogQHBhcmFtIHJvd3Mge09iamVjdH0gZGF0YSBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgc2VjdGlvbnMgYXJyYXlcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuc29ydFNlY3Rpb25zID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gIGRhdGEuc2VjdGlvbnMuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAvLyBGaXJzdCBjaGVjayBzaW1wbGUgY2FzZSBvZiBudW1iZXIgZGlmZmVyZW5jZVxyXG4gICAgICB2YXIgaSA9IDA7XHJcbiAgICAgIHdoaWxlKCFpc05hTihhLmNoYXJBdChpKSkpe2krK31cclxuICAgICAgdmFyIG51bWJlckEgPSBhLnN1YnN0cmluZygwLGkpOyAvLyBHZXRzIHRoZSBudW1iZXIgZnJvbSB0aGUgc2VjdGlvblxyXG5cclxuICAgICAgaSA9IDA7XHJcbiAgICAgIHdoaWxlKCFpc05hTihiLmNoYXJBdChpKSkpe2krK31cclxuICAgICAgdmFyIG51bWJlckIgPSBiLnN1YnN0cmluZygwLGkpO1xyXG5cclxuICAgICAgaWYobnVtYmVyQSAhPT0gbnVtYmVyQikge1xyXG4gICAgICAgICAgcmV0dXJuIG51bWJlckEgLSBudW1iZXJCO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbYSxiXS5zb3J0KClbMF0gPT09IGEgPyAtMSA6IDE7IC8vIFNvcnQgdHdvIG5hbWVzIGFuZCByZXR1cm4gdGhlIGZpcnN0XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQXBwbGllcyBhIENQSSBjb25zdW1lciBwcmljZSBpbmRleCBwZXJjZW50YWdlIHRvIGVhY2ggb2YgdGhlIHJvd3MgdmFsdWVzLiBUaGUgY3BpVmFsdWVzIGNvbnRhaW5zIGEgdmFsdWUgZm9yIGVhY2ggb2YgdGhlIHllYXJzLlxyXG4gKlxyXG4gKiBUaGUgQ1BJIGlzIGFwcGxvZWQgYnkgc3RhcnRpbmcgYXQgdGhlIHllYXIgdGhlIHZhbHVlIHdhcyBvYnNlcnZlZCBhdCBjb21wb3VuZGluZyB0aGUgY3BpIHZhbHVlcyB1bnRpbCB0aGUgbGFzdCB5ZWFyIGluIHRoZVxyXG4gKiBjcGlWYWx1ZXMgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBUaGUgcm93cyBjcGkgd2lsbCBiZSBhcHBsaWVkIHRvXHJcbiAqIEBwYXJhbSBjcGkgdmFsdWVzIHtPYmplY3R9IFRoZSB2YWx1ZXMgdG8gYWRkIHRvIGVhY2ggeWVhclxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5hcHBseUNQSVRvVGFibGVSb3dzID0gZnVuY3Rpb24ocm93cywgY3BpVmFsdWVzKXtcclxuICAgIC8vIEZpbmQgdGhlIG1pbiBhbmQgbWF4IHllYXIgZnJvbSB0aGUgZGF0YVxyXG4gICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW0sIGluZGV4KXsgLy8gR3JhYiBldmVyeSBSb3dcclxuICAgICAgICB2YXIgeWVhciA9IHJvd3NbaW5kZXhdLm9ic195cjsgLy8gR3JhYiB0aGUgeWVhciBvZiB0aGUgY2VsbCBieSBjaGVja2luZyB0aGUgY2xhc3NcclxuICAgICAgICB2YXIgdmFsdWVPZkNlbGwgPSByb3dzW2luZGV4XS52YWx1ZTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwaVZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHllYXIgPD0gY3BpVmFsdWVzW2ldLnllYXIpe1xyXG4gICAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSB2YWx1ZU9mQ2VsbCAqICgxICsgKGNwaVZhbHVlc1tpXS52YWx1ZSAvIDEwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd3NbaW5kZXhdLnZhbHVlID0gdmFsdWVPZkNlbGw7IC8vIENQSSBBcHBsaWVkIHZhbHVlXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGluIGEgc2VjdGlvbiwgY2F0ZWdvcnksIHN1YiBjYXRlZ29yeSwgb3IgZGVzY3JpcHRpb24gdG8gYSByb3cgaW4gc2VsZWN0aW9ucy4gVGhlIGlkIGlzIHVzZWQgdG9cclxuICogd29yayBvdXQgd2hpY2ggcm93IGl0IGdvZXMgaW4uIFRoZSB0eXBlIGlzIHVzZWQgZm9yIHdvcmtpbmcgb3V0IHdoaWNoIHByb3BlcnR5IHRvIHNldFxyXG4gKlxyXG4gKiBAcGFyYW0gaWQge051bWJlcn0gdGhlIGlkIG9mIHRoZSBzZWxlY3Rpb24gcm93XHJcbiAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9IHRoZSB0eXBlIG9mIHNlbGVjdGlvbiBzZWN0aW9uLCBjYXRlZ29yeSBldGMuXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25zIHtPYmplY3RbXX0gVGhlIGFycmF5IG9mIHJvd3MgdG8gc2V0IHRoZSBzZWxlY3Rpb24gaW5cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuYWRkVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAoaWQsdHlwZSxkYXRhLHNlbGVjdGlvbnMpIHtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZWN0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoc2VsZWN0aW9uc1tpXS5pZCtcIlwiID09PSBpZCtcIlwiKXsgLy8gQ29udmVydCB0aGVtIGJvdGggdG8gc3RyaW5nc1xyXG4gICAgICAgICAgICBpZih0eXBlID09PSBcInNlY3Rpb25cIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLnNlY3Rpb24gPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJjYXRlZ29yeVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uY2F0ZWdvcnkgPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJzdWJjYXRlZ29yeVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uc3ViQ2F0ZWdvcnkgPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJkZXNjcmlwdGlvblwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uZGVzY3JpcHRpb24gPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFdvcmtzIG91dCB0aGUgdG90YWwgZm9yIGVhY2ggcmVnaW9uIGJhc2VkIG9uIHRoZSBlZGIgZm9yIGVhY2ggcm93IGFuZCB3aGljaCByZWdpb24gaXQgaXMgcGFydCBvZlxyXG4gKlxyXG4gKiBAcGFyYW0gdGFibGVSb3dzIHtPYmplY3RbXX0gdGhlIHJvd3MgZnJvbSBhIHRhYmxlXHJcbiAqIEBwYXJhbSByZWdpb25zIHtPYmplY3RbXX0gQW4gYXJyYXkgb2YgcmVnaW9ucyBhbmQgd2hpY2ggZWRicyBtYWtlIHVwIHRoYXQgcmVnaW9uXHJcbiAqIEBwYXJhbSBhdmFpbGFibGVZZWFycyB7T2JqZWN0W119IFRoZSB5ZWFycyB0aGF0IHRvdGFscyBzaG91bGQgYmUgY3JlYXRlZCBmb3JcclxuICogQHJldHVybnMge09iamVjdH0gY29udGFpbnMgZWFjaCByZWdpb24gYW5kIGFuIGFycmF5IG9mIHllYXJzIGFsb25nIHdpdGggdG90YWxzIGZvciB0aGF0IHllYXJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlVGFibGVUb3RhbHMgPSBmdW5jdGlvbiAodGFibGVSb3dzLCByZWdpb25zLCBhdmFpbGFibGVPYnNZZWFycykge1xyXG4gICAgdmFyIHJlZ2lvblN0cmluZ3MgPSBbXCJuXCIsXCJ1bmlcIixcImVuaVwiLCBcInN3bmlcIiwgXCJzXCIsIFwidXNpXCIsIFwibHNpXCJdOyAvLyBBbGwgdGhlIHJlZ2lvbnNcclxuICAgIHZhciB0b3RhbHMgPSB7fTsgLy8gcmVnIDogXCJcIiAsIHllYXJzIDogW11cclxuXHJcbiAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IHllYXJcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhdmFpbGFibGVPYnNZZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgLy8gR2V0IHRoZSByb3dzIGZvciB0aGUgY3VycmVudCB5ZWFyXHJcbiAgICAgICAgdGFibGVSb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5vYnNfeXIgPT09IGF2YWlsYWJsZU9ic1llYXJzW2ldO30pLmZvckVhY2goZnVuY3Rpb24ocm93KXtcclxuXHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggZWFjaCBvZiB0aGUgcmVnaW9uc1xyXG4gICAgICAgICAgICByZWdpb25TdHJpbmdzLmZvckVhY2goZnVuY3Rpb24ocmVnaW9uU3RyaW5nKXtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHJvdyBlZGIgaXMgaW5zaWRlIHRoZSBjdXJyZW50IHJlcWlvbiBncmFiIHRoZSB2YWx1ZSBmcm9tIHRoZSByb3cgYW5kIGFkZCBpdCBpbiB0aGUgYXJyYXkgZm9yIHRoZSBjdXJyZW50IHllYXJcclxuICAgICAgICAgICAgICAgIGlmKHJlZ2lvbnNbcmVnaW9uU3RyaW5nXS5pbmNsdWRlcyhyb3cuZWRiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodG90YWxzW3JlZ2lvblN0cmluZ10gPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddID0gWytyb3cudmFsdWVdOyAvLyBGaXJzdCB0aW1lIHRoaXMgcmVxaW9uIGhhcyBiZWVuIGZvdW5kIHNvIGhhdmUgdG8gY3JlYXRlIHRoZSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPT09IHRvdGFsc1tyZWdpb25TdHJpbmddLmxlbmd0aCl7IC8vIFRoaXMgbWVhbnMgd2UgaGF2ZSBtb3ZlZCBvbnRvIGEgbmV3IHllYXIgc28gaGF2ZSB0byBjcmVhdGUgYSBuZXcgc2xvdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxzW3JlZ2lvblN0cmluZ10ucHVzaCgrcm93LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddIFtpXSArPSArICgrcm93LnZhbHVlKTsgLy8gU3RpbGwgaW4gdGhlIGZpcnN0IHllYXIgd2l0aCBhIGRpZmZlcmVudCBlZGIgaW4gdGhlIHNhbWUgcmVnaW9uIHNvIGp1c3QgYWRkIHRoZSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB2YXIgbnogPSBbXTsgLy8gVG8gZmluZCB0aGUgdG90YWxzIG9mIE5aIGFkZCBub3J0aCBhbmQgc291dGggdGVnZXRoZXJcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhdmFpbGFibGVPYnNZZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgbnoucHVzaCh0b3RhbHNbXCJuXCJdW2ldICsgdG90YWxzW1wic1wiXVtpXSk7XHJcbiAgICB9XHJcbiAgICB0b3RhbHNbXCJuelwiXSA9IG56OyAvLyBBZGQgdGhlIE5aIHByb3BlcnR5IHRvIHRvdGFsc1xyXG4gICAgcmV0dXJuIHRvdGFscztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgZGF0YSBzdHJ1Y3R1cmUgb2JqZWN0XHJcbiAqXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25zRGF0YSB7T2JqZWN0W119IFVzZWQgZm9yIGNyZWF0aW5nIHJlZ3VsYXIgZ3JhcGhzXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25UYWJsZXtPYmplY3RbXX0gVXNlZCBmb3IgY3JlYXRpbmcgdGhlIGh0bWwgdGFibGVzXHJcbiAqIEBwYXJhbSBjb21iaW5lRGF0YSB7T2JqZWN0W119IFVzZWQgZm9yIHRoZSB2ZWN0b3IgZ3JhcGhzXHJcbiAqICovXHJcbmZ1bmN0aW9uIERhdGFTdHJ1Y3R1cmUoc2VsZWN0aW9uRGF0YSwgc2VsZWN0aW9uVGFibGUsIGNvbWJpbmVEYXRhKXtcclxuICAgIHRoaXMuc2VsZWN0aW9uRGF0YSA9IHNlbGVjdGlvbkRhdGE7IC8vIENvbnRhaW5zIHRoZSByb3dzLCBpZCwgdGl0bGUsIHN1YnRpdGxlIGFtZCBpbml0IGZvciBlYWNoIHNlbGVjdGlvblxyXG4gICAgdGhpcy5zZWxlY3Rpb25UYWJsZSA9IHNlbGVjdGlvblRhYmxlOyAvLyBDb250YWlucyB0aGUgcm93cywgaWQsIHRpdGxlLCBzdWJ0aXRsZSBhbWQgaW5pdCBmb3IgZWFjaCB0YWJsZVxyXG4gICAgdGhpcy5jb21iaW5lRGF0YSA9IGNvbWJpbmVEYXRhOyAvLyBDb250YWlucyBjb21iaW5lZCByb3dzIGFsb25nIHdpdGggdGl0bGVzIGFuZCB1bml0c1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE9iamVjdCBmb3IgaG9sZGluZyB0aGUgdXNlcnMgc2VsZWN0aW9ucyBlYWNoIHByb3BlcnR5IGNvbnRhaW5zIGFcclxuICogc2VjdGlvbiwgY2F0ZWdvcnksIHN1YiBjYXRlZ29yeSBhbmQgZGVzY3JpcHRpb24uIFRoZXkgY2FuIGJlIGVtcHR5IHN0cmluZ3NcclxuICpcclxuICogQHBhcmFtIGEge09iamVjdH0gQSBzZWxlY3Rpb25cclxuICogQHBhcmFtIGIge09iamVjdH0gQiBzZWxlY3Rpb25cclxuICogQHBhcmFtIGMge09iamVjdH0gQyBzZWxlY3Rpb25cclxuICogQHBhcmFtIGQge09iamVjdH0gRCBzZWxlY3Rpb25cclxuICogKi9cclxuZnVuY3Rpb24gU2VsZWN0aW9uKGEsYixjLGQpe1xyXG4gICAgdGhpcy5hVGFibGUgPSBhO1xyXG4gICAgdGhpcy5iVGFibGUgPSBiO1xyXG4gICAgdGhpcy5jVGFibGUgPSBjO1xyXG4gICAgdGhpcy5kVGFibGUgPSBkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE9iamVjdCBmb3IgaG9sZGluZyB0aGUgcm93cyB0aGF0IGJlbG9uZyB0byBlYWNoIG9mIHRoZSB0YWJsZSBzZWxlY3Rpb25zLlxyXG4gKiBBbHNvIGNvbnRhaW5zIHRoZSBjb21iaW5lZCB0YWJsZXMuIEVhY2ggb2YgdGhlIGFycmF5cyBjb3VsZCBiZSBlbXB0eSBpZiBub1xyXG4gKiBzZWxlY3Rpb24gd2FzIG1hZGUgZm9yIGEgdGFibGVcclxuICpcclxuICogQHBhcmFtIHRhYmxlQSB7T2JqZWN0W119IEEgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUIge09iamVjdFtdfSBCIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVDIHtPYmplY3RbXX0gQyBzZWxlY3Rpb25cclxuICogQHBhcmFtIHRhYmxlRCB7T2JqZWN0W119IEQgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUFCIHtPYmplY3RbXX0gQUIgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUNEIHtPYmplY3RbXX0gQ0Qgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIERhdGFUYWJsZXModGFibGVBLHRhYmxlQix0YWJsZUMsdGFibGVELHRhYmxlQUIsdGFibGVDRCl7XHJcbiAgICB0aGlzLnRhYmxlQSA9IHRhYmxlQTtcclxuICAgIHRoaXMudGFibGVCID0gdGFibGVCO1xyXG4gICAgdGhpcy50YWJsZUMgPSB0YWJsZUM7XHJcbiAgICB0aGlzLnRhYmxlRCA9IHRhYmxlRDtcclxuICAgIHRoaXMudGFibGVBQiA9IHRhYmxlQUI7XHJcbiAgICB0aGlzLnRhYmxlQ0QgPSB0YWJsZUNEO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIHRoZSBzZWN0aW9ucyBhbmRcclxuICogdGhlIHNoYXJlZCB0aXRsZSBzdWJ0aXRsZSBhbmQgdW5pdC5cclxuICogKi9cclxuZnVuY3Rpb24gU2VsZWN0aW9uRGF0YShyb3dzLHRpdGxlLHN1YlRpdGxlLHVuaXQsaWQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuc3ViVGl0bGUgPSBzdWJUaXRsZTtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudW5pdCA9IHVuaXQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ29udGFpbnMgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIHNlbGVjdGlvbi4gVGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gYm90aCB0YWJsZXMgYW5kIHRoZSBjb21iaW5lZCByb3dzXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbkRhdGFDb21iaW5lZChyb3dzLCB0YWJsZTFSb3dzLHRhYmxlMlJvd3MsdGl0bGUxLHRpdGxlMix1bml0MSx1bml0MixpZCl7XHJcbiAgICB0aGlzLnJvd3MgPSByb3dzOyAvLyBDb21iaW5lZCByb3dzXHJcbiAgICB0aGlzLnRpdGxlMSA9IHRpdGxlMTtcclxuICAgIHRoaXMudGl0bGUyID0gdGl0bGUyO1xyXG4gICAgdGhpcy51bml0MSA9IHVuaXQxO1xyXG4gICAgdGhpcy51bml0MiA9IHVuaXQyO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy50YWJsZTFSb3dzID0gdGFibGUxUm93cztcclxuICAgIHRoaXMudGFibGUyUm93cyA9IHRhYmxlMlJvd3M7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ29udGFpbnMgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIHNlbGVjdGlvbi4gVGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gdGhlIHNlY3Rpb25zIGFuZFxyXG4gKiB0aGUgc2hhcmVkIHRpdGxlIHN1YnRpdGxlIGFuZCB1bml0LiBVc2VkIHRvIGdlbmVyYXRlIGh0bWwgdGFibGVzXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGVkVGFibGVEYXRhKHJvd3MsaWQsIHRpdGxlLCBzdWJUaXRsZSwgdW5pdCl7XHJcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5zdWJUaXRsZSA9IHN1YlRpdGxlO1xyXG4gICAgdGhpcy51bml0ID0gdW5pdDtcclxufVxyXG4iLCIvLyBERVBFTkRFTkNJRVMgOiBEYXRhUHJvY2Vzc29yLCBHcm91cGVkQmFyR3JhcGgsIGJveFBsb3RcclxuXHJcblxyXG4vKipcclxuICogR3JhcGggb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGdyYXBocyBmb3Igc2luZ2xlIHNlbGVjdGlvbnNcclxuICpcclxuICogQGlkIHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqIEByb3dzIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBzZWxlY3Rpb25cclxuICogQHNlbGVjdGlvbiB7T2JqZWN0fSB0aGUgZGV0YWlscyBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIEdyYXBoKGlkLHJvd3Msc2VsZWN0aW9uKSB7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuZ3JvdXBlZElEID0gJyNncm91cGVkLWJhci0nK2lkO1xyXG4gIHRoaXMuYm94SUQgPSAnI2JveHBsb3QtJytpZDtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xyXG4gIHRoaXMudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgdGhpcy5zdWJUaXRsZSA9IHRoaXMuZ2V0U3ViVGl0bGUoKTtcclxuICB0aGlzLnVuaXQgPSB0aGlzLmdldFVuaXQoKTtcclxuXHJcbiAgLy8gQ2FjaGUgZG9tIGVsZW1lbnRzXHJcbiAgdGhpcy4kdGl0bGVCYXIgPSAkKCcjdGl0bGUtYmFyLScraWQpO1xyXG4gIHRoaXMuJHRpdGxlQm94ID0gJCgnI3RpdGxlLWJveC0nK2lkKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIHRoZSBvYmplY3QgaXMgY29tYmluZWRcclxuICpcclxuICogQHJldHVybiB7Qm9vbGVhbn0gY29tYmluZWQgb3Igbm90XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5pc0NvbWJpbmVkID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IG9mIHRoZSBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRVbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3NbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIGdyYXBoXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGlkXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRJRCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5pZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLmRlc2NyaXB0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24uc3ViQ2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3ViIHRpdGxlIGZvciB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHN1YiB0aXRsZVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0U3ViVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLnNlY3Rpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbi5jYXRlZ29yeTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IGZvciB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaXRcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFVuaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93c1swXS51bml0cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnRzIHRoZSB0aXRsZXMgZm9yIHRoZSBncmFwaHMgaW50byB0aGUgRE9NXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5pbnNlcnRUaXRsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKCc8aDMgY2xhc3M9XCJ0aXRsZVwiPicrdGhpcy50aXRsZSsnPC9oMz4nKS5hcHBlbmQoJzxoNCBjbGFzcz1cInN1YlRpdGxlXCI+Jyt0aGlzLnN1YlRpdGxlKyc8L2g0PicpO1xyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZCgnPGgzIGNsYXNzPVwidGl0bGVcIj4nK3RoaXMudGl0bGUrJzwvaDM+JykuYXBwZW5kKCc8aDQgY2xhc3M9XCJzdWJUaXRsZVwiPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIHVzaW5nIGRhdGEgcHJvY2Vzc29yIGFuZCBpbnNlcnRzIGludG8gRE9NXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBkYXRhIGZvciB0aGUgZ3JvdXBlZCBncmFwaCBhbmQgZGlzcGxheSBpdFxyXG4gICAgdmFyIGdyb3VwZWREYXRhID0gZHAuY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCh0aGlzLnJvd3MpO1xyXG4gICAgR3JvdXBlZEJhck1vZHVsZS5jcmVhdGVkR3JvdXBlZEJhckdyYXBoKGdyb3VwZWREYXRhLmRhdGEsZ3JvdXBlZERhdGEua2V5cyx0aGlzLnVuaXQsdGhpcy5ncm91cGVkSUQpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZGF0YSBmb3IgYm94cGxvdCBhbmQgc2hvdyB0aGUgZ3JhcGhcclxuICAgIHZhciBib3hEYXRhID0gZHAuY3JlYXRlRGF0YUZvckJveFBsb3QodGhpcy5yb3dzKTtcclxuICAgIEJveFBsb3RNb2R1bGUuY3JlYXRlQm94UGxvdChib3hEYXRhLCB0aGlzLmJveElELCB0aGlzLnVuaXQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFRha2VzIHRoZSBuZXcgcm93cyBhbmQgdXBkYXRlcyB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0W119IHJvd3MgdGhlIG5ldyByb3dzXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocm93cykge1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMuY3JlYXRlKCk7XHJcbn1cclxuIiwiLy8gQ29udGFpbnMgaW5mb3JtYXRpb24gZm9yIGEgcm93IG9mIHNlbGVjdGlvbnNcclxuLy8gUmVjaWV2ZXMgZXZlbnRzIGZyb20gc2VsZWN0b3JzIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIGFuZCB1cGRhdGVzIGl0J3Mgc3RhdGVcclxuLy8gU2VuZCBvdXQgZXZlbnRzIHdoZW4gc2VsZWN0b3JzIGNoYW5nZSBhbmQgb3RoZXIgc2VsZWN0b3JzIHNob3VsZCBiZSBub3RpZmllZFxyXG5mdW5jdGlvbiBTZWxlY3Rpb25Sb3dDb250cm9sbGVyKGlkKXtcclxuICAgIHRoaXMuaWROdW1iID0gaWQ7XHJcbiAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSB7IGlkIDogaWQsIHNlY3Rpb24gOiBcIlwiLCBjYXRlZ29yeSA6IFwiXCIsIHN1YkNhdGVnb3J5IDogXCJcIiwgZGVzY3JpcHRpb24gOiBcIlwiIH07XHJcblxyXG4gICAgdGhpcy5zZXRJbml0aWFsU3RhdGUgPSBmdW5jdGlvbiAocm93RGF0YSkge1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSByb3dEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucyA9IHsgaWQgOiB0aGlzLmlkLCBzZWN0aW9uIDogXCJcIiwgY2F0ZWdvcnkgOiBcIlwiLCBzdWJDYXRlZ29yeSA6IFwiXCIsIGRlc2NyaXB0aW9uIDogXCJcIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmFsaWRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmKHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uICE9PSBcIlwiICYmIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9PT0gXCJcIil7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgICB2YXIgdXJsU2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIChlLmlkID09PSBpZCl9KVswXTtcclxuXHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uID0gdXJsU2VsZWN0aW9uLnNlY3Rpb247XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IHVybFNlbGVjdGlvbi5jYXRlZ29yeTtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gdXJsU2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSB1cmxTZWxlY3Rpb24uZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTZWN0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmNhdGVnb3J5ID0gXCJcIjtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSBcIlwiO1xyXG4gICAgICAgICAgLy8gU2V0IHRoZSBuZXcgc2VsZWN0ZWQgc2VjdGlvblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnNlY3Rpb24gPSB1cGRhdGUuc2VjdGlvbjtcclxuICAgICAgICAgIGV2ZW50cy5lbWl0KFwiTkVXX1NFQ1RJT05cIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZUNhdGVnb3J5ID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gXCJcIjtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmNhdGVnb3J5ID0gdXBkYXRlLmNhdGVnb3J5O1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfQ0FURUdPUllcIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZVN1YkNhdGVnb3J5ID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gXCJcIjtcclxuXHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc3ViQ2F0ZWdvcnkgPSB1cGRhdGUuc3ViQ2F0ZWdvcnk7XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19TVUJDQVRFR09SWVwiLCB7aWQgOiB0aGlzLmlkTnVtYiwgc2VsZWN0aW9uIDogdGhpcy5yb3dTZWxlY3Rpb25zfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICAgICAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSB1cGRhdGUuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19ERVNDUklQVElPTlwiLCB7aWQgOiB0aGlzLmlkTnVtYiwgc2VsZWN0aW9uIDogdGhpcy5yb3dTZWxlY3Rpb25zfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0Um93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvd1NlbGVjdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgYW55IG9mIHRoZXNlIGV2ZW50cyBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb25cclxuICAgIGV2ZW50cy5vbihcIlNFQ1RJT05fQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZVNlY3Rpb24uYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJDQVRFR09SWV9DSEFOR0VEXCIsIHRoaXMudXBkYXRlQ2F0ZWdvcnkuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHRoaXMudXBkYXRlU3ViQ2F0ZWdvcnkuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJERVNDUklQVElPTl9DSEFOR0VEXCIsIHRoaXMudXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG4iLCIvLyBSZWxpZXMgb25cclxuLy8gSlFVRVJZXHJcbi8vIERhdGFCYXNlXHJcbi8vIEV2ZW50c1xyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTZWN0aW9uIGRyb3Bkb3duIG1lbnVcclxuZnVuY3Rpb24gU2VjdGlvblNlbGVjdChpZE51bWIpe1xyXG4gICAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgICB0aGlzLmlkID0gXCIjc2VjdGlvbi1zZWxlY3RcIitpZE51bWI7IC8vIFRoZSBlbGVtZW50IGlkXHJcbiAgICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpOyAvLyBTZWxlY3RldHMgYW5kIGNhY2hlcyB0aGUgZWxlbWVudFxyXG5cclxuICAgIC8vIFJlc3BvaW5kcyB0byBhbiBldmVudCB0aGF0IGluZGljYXRlcyBkYXRhIGlzIGF2YWxhYmxlIGZvciB0aGUgZHJvcCBkb3duXHJcbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcblxyXG4gICAgICAvLyBHcmFiIHNlY3Rpb24gZnJvbSBEQiBhbmQgYWRkIHRvIGRyb3Bkb3duXHJcbiAgICAgIERhdGFiYXNlLmdldFNlY3Rpb25zRnJvbURhdGFiYXNlKGZ1bmN0aW9uKHNlY3Rpb25zKXtcclxuICAgICAgICBkcC5zb3J0U2VjdGlvbnMoe3NlY3Rpb25zIDogc2VjdGlvbnN9KTtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsc2VjdGlvbnMsc2VsZWN0aW9uLnNlY3Rpb24pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gV2hlbiB0aGUgc2VsZWN0b3IgaXMgY2xpY2tlZCBzZW5kIG91dCBhIHNlY3Rpb24gY2hhbmdlZCBldmVudFxyXG4gICAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiU0VDVElPTl9DSEFOR0VEXCIsIHtzZWN0aW9uIDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTGlzdGVuIHRvIHRoZXNlIGV2ZW50c1xyXG4gICAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSApO1xyXG4gICAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU2VjdGlvbiBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIENhdGVnb3J5U2VsZWN0KGlkTnVtYil7XHJcbiAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgdGhpcy5pZCA9IFwiI2NhdGVnb3J5LXNlbGVjdFwiK3RoaXMuaWROdW1iO1xyXG4gIHRoaXMuJHNlbGVjdCA9ICQodGhpcy5pZCk7XHJcblxyXG5cclxuICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcbiAgICB2YXIgcGFzc0lEID0gdGhpcy5pZFxyXG5cclxuICAgIC8vIEdyYWIgY2F0ZWdvcmllcyBmcm9tIERCIGFuZCBhZGQgdG8gdGhlIGRyb3Bkb3duXHJcbiAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBmdW5jdGlvbiAoY2F0ZWdvcmllcywgbm9SZXN1bHQpIHtcclxuICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsY2F0ZWdvcmllcyxzZWxlY3Rpb24uY2F0ZWdvcnkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvLyBXaGVuIHRoZSBzZWxlY3RvciBpcyBjbGlja2VkIHNlbmQgb3V0IGEgc2VjdGlvbiBjaGFuZ2VkIGV2ZW50XHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIkNBVEVHT1JZX0NIQU5HRURcIiwge2NhdGVnb3J5IDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiBhIHNlY3Rpb24gY2hhbmdlcyB0aGlzIGZpbmRzIHRoZSBjYXRlZ29yaWVzIHJlcXVpcmVkXHJcbiAgdGhpcy5zZWN0aW9uQ2hhbmdlZExpc3RlbmVyID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpOyAvLyBDbGVhciBvdXQgb2xkIG9wdGlvbnNcclxuICAgICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZFxyXG5cclxuICAgICAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHVwZGF0ZS5zZWxlY3Rpb24uc2VjdGlvbiwgZnVuY3Rpb24gKGNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsY2F0ZWdvcmllcyxcIlwiKTsgLy8gTWlnaHQgY2hhbmdlIHRoaXNcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEJpbmQgZnVuY3Rpb24gdG8gcmVzcG9uZCB0byB1cGRhdGVcclxuICB0aGlzLiRzZWxlY3Qub24oJ2NoYW5nZScsIHRoaXMudXBkYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gTGlzdGVuIHRvIGV2ZW50cyB3ZSBjYXJlIGFib3V0XHJcbiAgZXZlbnRzLm9uKFwiTkVXX1NFQ1RJT05cIiwgdGhpcy5zZWN0aW9uQ2hhbmdlZExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuLy8gTWFuYWdlcyBhIFN1YmNhdGVnb3J5IGRyb3Bkb3duIG1lbnVcclxuZnVuY3Rpb24gU3ViQ2F0ZWdvcnlTZWxlY3QoaWROdW1iKXtcclxuICB0aGlzLmlkTnVtYiA9IGlkTnVtYjtcclxuICB0aGlzLmlkID0gXCIjc3ViY2F0ZWdvcnktc2VsZWN0XCIrdGhpcy5pZE51bWI7XHJcbiAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTtcclxuXHJcblxyXG4gIC8vIFJlc3BvaW5kcyB0byBhbiBldmVudCB0aGF0IGluZGljYXRlcyBkYXRhIGlzIGF2YWxhYmxlIGZvciB0aGUgZHJvcCBkb3duXHJcbiAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgIHZhciBzZWxlY3Rpb24gPSB1cmxTZWxlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pZCA9PT0gaWR9KVswXTtcclxuICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sIHNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELHN1YkNhdGVnb3JpZXMsc2VsZWN0aW9uLnN1YkNhdGVnb3J5KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gTGlzdGVucyB0byBhIGNoYW5nZSBpbiBhIGNhdGVnb3J5XHJcbiAgdGhpcy5jYXRlZ29yeUNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICB0aGlzLiRzZWxlY3QuaHRtbCgnJyk7XHJcbiAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICB2YXIgcGFzc0lETnVtYiA9IHRoaXMuaWROdW1iO1xyXG5cclxuICAgICAgRGF0YWJhc2UuZ2V0U3ViQ2F0ZWdvcmllc0Zyb21EYXRhYmFzZSh1cGRhdGUuc2VsZWN0aW9uLnNlY3Rpb24sdXBkYXRlLnNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxzdWJDYXRlZ29yaWVzLFwiXCIpOyAvLyBNaWdodCBjaGFuZ2UgdGhpc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIlNVQkNBVEVHT1JZX0NIQU5HRURcIiwge3N1YkNhdGVnb3J5IDogXCJcIiwgaWQgOiBwYXNzSUROdW1ifSk7Ly8gQlkgc2VuZGluZyBvdXQgdGhpcyBldmVudCBkZXNjcmlwdGlvbiBpcyBub3RpZmllZCB3aXRoIGVtcHR5IHN1YkNhdGVnb3J5XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBXaGVuIHdlIGFyZSB1cGRhdGVkIGJ5IHRoZSB1c2VyIHNlbmQgb3V0IGFuIGV2ZW50XHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIlNVQkNBVEVHT1JZX0NIQU5HRURcIiwge3N1YkNhdGVnb3J5IDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gQmluZCBmdW5jdGlvbiB0byByZXNwb25kIHRvIHVwZGF0ZVxyXG4gIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzIHdlIGNhcmUgYWJvdXRcclxuICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7IC8vIFRPRE8gdGVzdFxyXG4gIGV2ZW50cy5vbihcIk5FV19DQVRFR09SWVwiLCB0aGlzLmNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTdWJjYXRlZ29yeSBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIERlc2NyaXB0aW9uU2VsZWN0KGlkKXtcclxuICB0aGlzLmlkTnVtYiA9IGlkO1xyXG4gIHRoaXMuaWQgPSBcIiNkZXNjcmlwdGlvbi1zZWxlY3RcIitpZDtcclxuICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpO1xyXG5cclxuICB0aGlzLnVwZGF0ZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50cy5lbWl0KFwiREVTQ1JJUFRJT05fQ0hBTkdFRFwiLCAge2Rlc2NyaXB0aW9uIDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy9cclxuICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG4gICAgdmFyIHBhc3NJRCA9IHRoaXMuaWQ7XHJcblxyXG4gICAgRGF0YWJhc2UuZ2V0RGVzY3JpcHRpb25zRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBzZWxlY3Rpb24uY2F0ZWdvcnksIHNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24gKGRlc2NyaXB0aW9ucywgbm9SZXN1bHQpIHtcclxuICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsZGVzY3JpcHRpb25zLHNlbGVjdGlvbi5kZXNjcmlwdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vXHJcbiAgdGhpcy5zdWJDYXRlZ29yeUNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgICAgICBEYXRhYmFzZS5nZXREZXNjcmlwdGlvbnNGcm9tRGF0YWJhc2UodXBkYXRlLnNlbGVjdGlvbi5zZWN0aW9uLHVwZGF0ZS5zZWxlY3Rpb24uY2F0ZWdvcnksdXBkYXRlLnNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24oZGVzY3JpcHRpb25zKXtcclxuICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxkZXNjcmlwdGlvbnMsXCJcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBCaW5kIGZ1bmN0aW9uIHRvIHJlc3BvbmQgdG8gZXZlbnRzXHJcbiAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHMgZnJvbSBhbnkgb2YgdGhlIG90aGVyIHNlbGVjdGlvbnMgY2hhbmdpbmcgb24gb3VyIHJvd1xyXG4gIGV2ZW50cy5vbihcIlNFQ1RJT05fQ0hBTkdFRFwiLCBjbGVhck15c2VsZi5iaW5kKHRoaXMpKTsgLy8gVE9ETyB0ZXN0XHJcbiAgZXZlbnRzLm9uKFwiQ0FURUdPUllfQ0hBTkdFRFwiLCBjbGVhck15c2VsZi5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJORVdfU1VCQ0FURUdPUllcIiwgdGhpcy5zdWJDYXRlZ29yeUNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuLy8gQ2xlYXJzIHRoZSBvcHRpb25zIGZyb20gdGhlIHNlbGVjdFxyXG5mdW5jdGlvbiBjbGVhck15c2VsZih1cGRhdGUpIHtcclxuICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpO1xyXG4gICAgICB0aGlzLiRzZWxlY3Quc2VsZWN0cGlja2VyKCdyZWZyZXNoJyk7IC8vIFJlZnJlc2ggdGhlIHNlbGVjdGlvbnNcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQWRkcyB0aGUgZHJvcCBkb3duIG9wdGlvbnMgdG8gb25lIG9mIHRoZSBzZWxlY3RvcnNcclxuICpcclxuICogQHBhcmFtIHNlbGVjdG9ySUQge1N0cmluZ30gdGhlIGlkIG9mIHRoZSBkcm9wIGRvd25cclxuICogQHBhcmFtIG9wdGlvbnMge1N0cmluZ1tdfSB0aGUgb3B0aW9ucyB0byBhZGRcclxuICogQHBhcmFtIHNlbGVjdGVkT3B0aW9uIHtTdHJpbmd9IHRoZSBvcHRpb24gdGhhdCBzaG91bGQgYmUgc2V0IGFzIHNlbGVjdGVkXHJcbiAqICovXHJcbmZ1bmN0aW9uIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHNlbGVjdG9ySUQsIG9wdGlvbnMsIHNlbGVjdGVkT3B0aW9uKXtcclxuICAkKHNlbGVjdG9ySUQpLmh0bWwoJycpOyAvLyBFbXB0eSB0ZW1wIG9wdGlvbnNcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICBpZihvcHRpb25zW2ldID09PSBudWxsKWNvbnRpbnVlO1xyXG4gICAgaWYob3B0aW9uc1tpXSA9PT0gc2VsZWN0ZWRPcHRpb24pe1xyXG4gICAgICAkKHNlbGVjdG9ySUQpLmFwcGVuZCgnPG9wdGlvbiBzZWxlY3RlZD4nICsgb3B0aW9uc1tpXSArICc8L29wdGlvbj4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoc2VsZWN0b3JJRCkuYXBwZW5kKCc8b3B0aW9uPicgKyBvcHRpb25zW2ldICsgJzwvb3B0aW9uPicpO1xyXG4gICAgfVxyXG4gIH1cclxuICAkKHNlbGVjdG9ySUQpLnNlbGVjdHBpY2tlcigncmVmcmVzaCcpOyAvLyBSZWZyZXNoIHRoZSBzZWxlY3Rpb25zXHJcbn1cclxuIiwiLyoqXHJcbiogQ3JlYXRlcyBhIHRhYmxlIG9iamVjdFxyXG4qIEBwYXJhbSBpZCB0aGUgaWQgb2YgdGhlIHRhYmxlIGEsIGIsIGMsIGRcclxuKiBAcGFyYW0gcm93cyB0aGUgcm93cyBvZiBkYXRhIGZvciB0aGUgdGFibGVcclxuKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCBvZiB0aGUgZGF0YVxyXG4qIEBwYXJhbSBzZWxlY3Rpb24ge09iamVjdH0gaWYgbm90IGNvbWJpbmVkIGVsc2Uge09iamVjdFtdfSB0aGUgc2VsZWN0aW9uIG1hZGUgYnkgdGhlIHVzZXIgdG8gZmluZCB0aGUgZGF0YVxyXG4qL1xyXG5mdW5jdGlvbiBUYWJsZShpZCwgcm93cywgc2VsZWN0aW9uLCBpc0NvbWJpbmVkKXtcclxuICB0aGlzLmlkID0gaWQ7XHJcbiAgdGhpcy5pc0NvbWJpbmVkID0gaXNDb21iaW5lZDtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMudW5pdCA9IHJvd3NbMF0udW5pdHM7XHJcbiAgdGhpcy5zZWxlY3Rpb24gPSBzZWxlY3Rpb247XHJcblxyXG4gIC8vIENyZWF0ZSB0aGUgdGl0bGVzXHJcbiAgdGhpcy50aXRsZSA9IHRoaXMuZ2V0VGl0bGUoKTtcclxuICB0aGlzLnN1YlRpdGxlID0gdGhpcy5nZXRTdWJUaXRsZSgpO1xyXG5cclxuICAvLyBVc2VkIHRvIGZvcm1hdCBudW1iZXJzIGRpc3BsYXllZFxyXG4gIHRoaXMuZHBGb3JtYXQgPSBkMy5mb3JtYXQoXCIuNHJcIik7XHJcblxyXG4gIC8vIEZpbmQgdGhlIGF2YWlsYWJsZSB5ZWFyc1xyXG4gIHRoaXMuYXZhaWxhYmxlWWVhcnMgPSB0aGlzLmdldEF2YWlsYWJsZVllYXJzKCk7XHJcblxyXG4gIC8vIFVzZWQgdG8gc3RvcmUgb3JpZ2luYWwgY2VsbCB2YWx1ZXNcclxuICB0aGlzLm5vQ1BJQ2VsbHMgPSBbXTtcclxuXHJcbiAgLy8gQ2FjaGUgRE9NIGVsZW1lbnRzXHJcbiAgdGhpcy4kdGFibGUgPSAkKCcjdGFibGUtJytpZCk7XHJcbiAgdGhpcy4kdG90YWxzVGFibGUgPSAkKCcjdGFibGUtdG90YWwtJytpZCk7XHJcbiAgdGhpcy4kdGl0bGUgPSAkKCcjdGl0bGUtJytpZCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgZm9yIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRpdGxlXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5nZXRUaXRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZih0aGlzLmlzQ29tYmluZWQpe1xyXG4gICAgdmFyIHN1YkNhdGVnb3J5ID0gdGhpcy5zZWxlY3Rpb25bMF0gPT09IG51bGwgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb25bMF0uc3ViQ2F0ZWdvcnk7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25bMF0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzdWJDYXRlZ29yeSArIFwiLCBcIisgdGhpcy5zZWxlY3Rpb25bMF0uZGVzY3JpcHRpb247XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAodGhpcy5zdWJDYXRlZ29yeSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uLnN1YkNhdGVnb3J5ICsgXCIsIFwiKSArIFwiIFwiKyB0aGlzLnNlbGVjdGlvbi5kZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3VidGl0bGUgZm9yIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHN1YnRpdGxlXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5nZXRTdWJUaXRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZih0aGlzLmlzQ29tYmluZWQpe1xyXG4gICAgdmFyIHN1YkNhdGVnb3J5ID0gdGhpcy5zZWxlY3Rpb25bMV0gPT09IG51bGwgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb25bMV0uc3ViQ2F0ZWdvcnk7XHJcbiAgICByZXR1cm4gIHRoaXMuc2VsZWN0aW9uWzFdLmNhdGVnb3J5ICsgXCIsIFwiICsgc3ViQ2F0ZWdvcnkgKyBcIiwgXCIrIHRoaXMuc2VsZWN0aW9uWzFdLmRlc2NyaXB0aW9uO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb24uc2VjdGlvbiArIFwiLCBcIiArIHRoaXMuc2VsZWN0aW9uLmNhdGVnb3J5O1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSByb3dzIGFuZCB0aGUgcmVjYWxjdWxhdGVzIHRvdGFsIHRhYmxlXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHRoZSBuZXcgcm93cyBmb3IgdGhlIHRhYmxlXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocm93cykge1xyXG4gIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgdGhpcy5jcmVhdGVUb3RhbHNUYWJsZSh0cnVlLCBcIlwiKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIGJhciBncmFwaCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc2VsZWN0ZWQgcm93XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB1cGRhdGUgdGhlIG9iamVjdCB0byBob2xkIGluZm9ybWF0aW9uIGFib3V0IHRoZSByb3cgY2xpY2tlZFxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUudG90YWxzUm93U2VsZWN0ZWQgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgdmFyIHJvd051bWIgID0gdXBkYXRlLnJvd0lELmNoYXJBdCh1cGRhdGUucm93SUQubGVuZ3RoLTEpO1xyXG4gIHZhciBkYXRhUm93SUQgPSBcInJvdy10b3QtXCIrdGhpcy5pZCtcIlwiK3Jvd051bWI7XHJcblxyXG4gIFNpbmdsZUJhck1vZHVsZS5zaG93QmFyV2l0aFJvd0VsZW0oZGF0YVJvd0lELHVwZGF0ZS5yZWdpb24sXCIjYmFyLXRvdGFsLVwiK3RoaXMuaWQsXCIjaGVhZC1yb3ctdG90YWxzLVwiK3RoaXMuaWQsXCIjdGFibGUtdG90YWwtXCIrdGhpcy5pZCx0aGlzLnVuaXQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNob3dzIGEgYmFyIGdyYXBoIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBzZWxlY3RlZCByb3dcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHVwZGF0ZSB0aGUgb2JqZWN0IHRvIGhvbGQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJvdyBjbGlja2VkXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5yb3dDbGlja2VkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgdmFyIHJvd051bWIgPSBldmVudC5yb3dJRC5zbGljZSgtMSk7XHJcbi8vIE5lZWQgdG8gYWNjb3VudCBmb3IgbnVtYmVycyBncmVhdGVyIHRoYW4gMTBcclxuaWYoIWlzTmFOKGV2ZW50LnJvd0lELnNsaWNlKC0yKSkpe1xyXG4gIHJvd051bWIgPSBldmVudC5yb3dJRC5zbGljZSgtMik7XHJcbn1cclxuICBTaW5nbGVCYXJNb2R1bGUuc2hvd0JhcldpdGhSb3dFbGVtKCdyb3cnK3RoaXMuaWQgKycnK3Jvd051bWIsZXZlbnQuZWRiLFwiI2Jhci1cIit0aGlzLmlkLFwiI2hlYWQtcm93LVwiK3RoaXMuaWQsXCIjdGFibGUtXCIrdGhpcy5pZCx0aGlzLnVuaXQpO1xyXG59XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgeWVhcnMgb2YgZGF0YSBpbiB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nW119IFRoZSBhcnJheSBvZiB5ZWFyc1xyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuZ2V0QXZhaWxhYmxlWWVhcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgYXZhaWxhYmxlWWVhcnMgPSBbXTtcclxuICB2YXIgYXZhaWxhYmxlWWVhcnMgPSBbXTtcclxuICB0aGlzLnJvd3MuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICBpZighYXZhaWxhYmxlWWVhcnMuaW5jbHVkZXMoZWxlbS5vYnNfeXIpKWF2YWlsYWJsZVllYXJzLnB1c2goZWxlbS5vYnNfeXIpO1xyXG4gIH0pO1xyXG4gIGF2YWlsYWJsZVllYXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgLy8gU29ydCB0aGUgeWVhcnNcclxuICAgICAgcmV0dXJuICthIC0gK2I7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGF2YWlsYWJsZVllYXJzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgaWYgQ1BJIGNhbiBiZSBhcHBsaWVkIHRvIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcmV0dXJuIHtCb29sZWFufSBjYW4gYXBwbHkgY3BpIG9yIG5vdFxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuY2FuQXBwbHlDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXJldHVybiBmYWxzZTtcclxuICByZXR1cm4gdGhpcy51bml0LmluY2x1ZGVzKCckJyk7IC8vIFRPRE8gY2hlY2sgaWYgdGhpcyBpcyByaWdodCBsYXRlclxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFwcGxpZXMgQ1BJIHRvIGFsbCB2YWx1ZXMgaW4gdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBIb2xkcyBwZXJjZW50YWdlIG9mIENQSSBmb3IgZWFjaCB5ZWFyXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5hcHBseUNQSSA9IGZ1bmN0aW9uIChjcGlWYWx1ZXMpIHtcclxuICBpZih0aGlzLm5vQ1BJQ2VsbHMubGVuZ3RoID4gMCl7XHJcbiAgICAgIHRoaXMucmV2ZXJ0Q1BJKCk7XHJcbiAgfVxyXG5cclxuICB2YXIgJGNhY2hlZENlbGxzID0gdGhpcy4kdGFibGUuZmluZCgnLmNlbGwnKTtcclxuXHJcbiAgLy8gRmlyc3QgYmFja3VwIHRoZSBjcGlDZWxsc1xyXG4gIHZhciBub0NQSUNlbGxzID0gdGhpcy5ub0NQSUNlbGxzO1xyXG4gIHZhciBpZCA9IHRoaXMuaWQ7XHJcbiAgJGNhY2hlZENlbGxzLmVhY2goZnVuY3Rpb24oKXsgLy8gQmFja3VwIHRoZSB2YWx1ZXMgZnJvbSB0aGUgY2VsbHNcclxuICAgICAgbm9DUElDZWxscy5wdXNoKHtpZCA6ICQodGhpcykuYXR0cignaWQnKSwgdmFsdWUgOiAkKHRoaXMpLnRleHQoKX0pO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgbWluWWVhciA9IEluZmluaXR5O1xyXG4gIHZhciBtYXhZZWFyID0gLUluZmluaXR5O1xyXG4gICRjYWNoZWRDZWxscy5lYWNoKGZ1bmN0aW9uKCl7IC8vY2VsbCBvciB0aFxyXG4gICAgICB2YXIgeWVhciA9ICskKHRoaXMpLmF0dHIoXCJjbGFzc1wiKS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICBtaW5ZZWFyID0geWVhciA8IG1pblllYXIgPyB5ZWFyIDogbWluWWVhcjtcclxuICAgICAgbWF4WWVhciA9IHllYXIgPiBtYXhZZWFyID8geWVhciA6IG1heFllYXI7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBmb3JtYXQgPSB0aGlzLmRwRm9ybWF0O1xyXG4gICAgICAkY2FjaGVkQ2VsbHMuZWFjaChmdW5jdGlvbigpeyAvLyBHcmFiIGV2ZXJ5IGNlbGxcclxuICAgICAgICAgIHZhciB5ZWFyID0gKyQodGhpcykuYXR0cihcImNsYXNzXCIpLnNwbGl0KCcgJylbMV07IC8vIEdyYWIgdGhlIHllYXIgb2YgdGhlIGNlbGwgYnkgY2hlY2tpbmcgdGhlIGNsYXNzXHJcbiAgICAgICAgICB2YXIgdmFsdWVPZkNlbGwgPSAkKHRoaXMpLmF0dHIoXCJvcmlndmFsdWVcIik7XHJcbiAgICAgIGZvcih2YXIgY3VyID0gbWluWWVhcjsgY3VyIDw9bWF4WWVhcjsgY3VyKyspeyAvLyBHbyB0aHJvdWdoIGVhY2ggcG9zc2libGUgeWVhclxyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY3BpVmFsdWVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICBpZihjcGlWYWx1ZXNbaV0ueWVhciA9PT0gY3VyKXtcclxuICAgICAgICAgICAgICAgICAgaWYoeWVhciA8PSBjdXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSB2YWx1ZU9mQ2VsbCAqICgxICsgKGNwaVZhbHVlc1tpXS52YWx1ZSAvIDEwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSBmb3JtYXQodmFsdWVPZkNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAgICQodGhpcykudGV4dCh2YWx1ZU9mQ2VsbCk7IC8vIENQSSBBcHBsaWVkIHZhbHVlXHJcbiAgICAgIH0pO1xyXG59XHJcblxyXG5UYWJsZS5wcm90b3R5cGUucmV2ZXJ0Q1BJID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmKHRoaXMubm9DUElDZWxscy5sZW5ndGggPiAwKXtcclxuICAgIHZhciBmb3JtYXQgPSB0aGlzLmRwRm9ybWF0O1xyXG4gICAgdGhpcy5ub0NQSUNlbGxzLmZvckVhY2goZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgJCgnIycrZS5pZCkudGV4dChmb3JtYXQoZS52YWx1ZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5UYWJsZS5wcm90b3R5cGUuaW5zZXJ0VGl0bGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXtcclxuICAgIHZhciBzMSA9IHRoaXMuaWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCk7XHJcbiAgICB2YXIgczIgPSB0aGlzLmlkLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgdGhpcy4kdGl0bGUuYXBwZW5kKCc8aDM+UmF0aW8gYW5hbHlzaXMgJytzMSsnIC8gJytzMisnPC9oND4nKTtcclxuICAgIHRoaXMuJHRpdGxlLmFwcGVuZCgnPGg0IGNsYXNzPVwidGl0bGVcIj48c3BhbiBzdHlsZT1cImNvbG9yOiBibGFjaztcIj4nK3MxKyc6IDwvc3Bhbj4nK3RoaXMudGl0bGUrJzwvaDQ+PGg0IGNsYXNzPVwidGl0bGVcIj48c3BhbiBzdHlsZT1cImNvbG9yOiBibGFjaztcIj4nK3MyKyc6IDwvc3Bhbj4nK3RoaXMuc3ViVGl0bGUrJzwvaDQ+Jyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuJHRpdGxlLmFwcGVuZCgnPGgyIGNsYXNzPVwidGl0bGVcIj4nK3RoaXMudGl0bGUrJzwvaDI+JykuYXBwZW5kKCc8aDQgY2xhc3M9XCJzdWJUaXRsZVwiPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuLy8gT25seSBjYWxsZWQgb25jZSB0byBjcmVhdGUgdGhlIHRhYmxlXHJcblRhYmxlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHRhYmxlRGF0YSA9IHRoaXMuY3JlYXRlVGFibGVEYXRhICh0aGlzLnJvd3MpOyAvLyBHcmFiIHRoZSBkYXRhIGluIHRoZSBmb3JtIHdlIHdhbnRcclxuXHJcbiAgLy8gY3JlYXRlIHRoZSB5ZWFycyBjZWxsc1xyXG4gIHZhciB5ZWFycyA9IFwiXCI7XHJcbiAgdGFibGVEYXRhWzBdLnllYXJzLmZvckVhY2goZnVuY3Rpb24oeSl7XHJcbiAgICB5ZWFycyArPSBcIjx0aD5cIiArIHkueWVhciArIFwiPC90aD5cIjtcclxuICB9KTtcclxuXHJcbiAgLy8gQXBwZW5kIHRoZSBoZWFkIHJvd1xyXG4gIHRoaXMuJHRhYmxlLmFwcGVuZCgnPHRyIGlkPVwiaGVhZC1yb3ctJyt0aGlzLmlkKydcIiBjbGFzcz1cInRhYmxlLXJvdyB0YWJsZS1oZWFkXCI+IDx0aD5FREI8L3RoPicrIHllYXJzICsgJzwvdHI+Jyk7XHJcblxyXG4gIC8vIEdvIHRocm91Z2ggYW5kIGNyZWF0ZSBhIHJvdyBmb3IgZWFjaCBlZGJcclxuICB2YXIgY2VsbENvdW50ID0gMDtcclxuICB2YXIgcm93Q291bnQgPSAgMDtcclxuICB2YXIgY2VsbFZhbHVlcyA9IFtdOyAvLyBBbGwgdGhlIGNlbGwgdmFsdWVzXHJcblxyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdGFibGVEYXRhLmxlbmd0aDsgaSsrKXtcclxuICAgIHZhciBkYXRhUm93ID0gdGFibGVEYXRhW2ldO1xyXG4gICAgdmFyIGVkYiA9IGRhdGFSb3cuZWRiO1xyXG4gICAgdmFyIHllYXJzID0gZGF0YVJvdy55ZWFycztcclxuICAgIHZhciByb3c9IFwiPHRyIGNsYXNzPSd0YWJsZS1yb3cnIGlkPXJvd1wiK3RoaXMuaWQrcm93Q291bnQrXCI+PHRoIGNsYXNzPSdlZGItY2VsbCc+XCIgKyBlZGIgKyBcIjwvdGg+XCI7Ly8gSW5zZXJ0cyB0aGUgY2VsbCB3aXRoIHRoZSBlZGIgbmFtZVxyXG5cclxuICAgIGZvcih2YXIgaiA9IDA7IGogPCB5ZWFycy5sZW5ndGg7IGorKyl7XHJcbiAgICAgIHZhciB5ZWFyRGF0YSA9IHllYXJzW2pdO1xyXG4gICAgICByb3cgKz0gXCI8dGggb3JpZ1ZhbHVlPSdcIisgeWVhckRhdGEudmFsdWUgK1wiJyBjbGFzcz0nY2VsbCBcIit5ZWFyRGF0YS55ZWFyK1wiJyBpZD0ndFwiK3RoaXMuaWQrXCJcIitjZWxsQ291bnQrXCInPlwiICsgdGhpcy5kcEZvcm1hdCh5ZWFyRGF0YS52YWx1ZSkgKyBcIjwvdGg+XCI7XHJcbiAgICAgIGNlbGxWYWx1ZXMucHVzaCh7IGlkIDogXCIjdFwiK3RoaXMuaWQrXCJcIitjZWxsQ291bnQsIHZhbHVlIDogeWVhckRhdGEudmFsdWUgfSk7XHJcbiAgICAgIGNlbGxDb3VudCsrO1xyXG4gICAgfVxyXG4gICAgdGhpcy4kdGFibGUuYXBwZW5kKHJvdyArICc8L3RyPicpO1xyXG5cclxuICAgICQoXCIjcm93XCIrdGhpcy5pZCtyb3dDb3VudCkuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIHJvd051bWIgPSB0aGlzLmlkLnNsaWNlKC0xKTtcclxuICAgICAgLy8gTmVlZCB0byBhY2NvdW50IGZvciBudW1iZXJzIGdyZWF0ZXIgdGhhbiAxMFxyXG4gICAgICBpZighaXNOYU4odGhpcy5pZC5zbGljZSgtMikpKXtcclxuICAgICAgICByb3dOdW1iID0gdGhpcy5pZC5zbGljZSgtMik7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGVkYiA9ICQoXCIjXCIrdGhpcy5pZCtcIiAuZWRiLWNlbGxcIikudGV4dCgpO1xyXG4gICAgICBldmVudHMuZW1pdCgnUk9XX0NMSUNLRUQnLCB7IHJvd0lEIDogdGhpcy5pZCwgcm93TnVtYiA6IHJvd051bWIsIGVkYiA6IGVkYn0pO1xyXG4gICAgfSk7XHJcbiAgICByb3dDb3VudCsrO1xyXG4gIH1cclxuICB0aGlzLmNlbGxWYWx1ZXMgPSBjZWxsVmFsdWVzO1xyXG59XHJcblxyXG5UYWJsZS5wcm90b3R5cGUuY3JlYXRlVG90YWxzVGFibGUgPSBmdW5jdGlvbih1cGRhdGUsIHNlbGVjdGVkVG90YWxSb3cpIHtcclxuXHJcbiAgdmFyIHRvdGFscyA9IGRwLmNyZWF0ZVRhYmxlVG90YWxzKHRoaXMucm93cywgVGFibGVzTW9kdWxlLnJlZ2lvbnMsIHRoaXMuYXZhaWxhYmxlWWVhcnMpO1xyXG4gIHZhciBuYW1lcyA9IHtuIDogXCJOb3J0aCBJc2xhbmRcIiwgdW5pIDogXCJVcHBlciBOb3J0aCBJc2xhbmRcIiwgZW5pIDogXCJFYXN0ZXJuIE5vcnRoIElzbGFuZFwiLCBzd25pIDogXCJTb3V0aC1XZXN0IE5vcnRoIElzbGFuZFwiLCBzIDogXCJTb3V0aCBJc2xhbmRcIiwgdXNpIDogXCJVcHBlciBTb3V0aCBJc2xhbmRcIiwgbHNpIDogXCJMb3dlciBTb3V0aCBJc2xhbmRcIiwgbnogOiBcIk5ldyBaZWFsYW5kXCJ9O1xyXG5cclxuICB2YXIgdG90YWxDZWxscyA9IFtdO1xyXG4gIC8vIEluc2VydCBDYXB0aW9uIGZvciB0YWJsZVxyXG4gIHZhciB5ZWFycyA9IFwiXCI7XHJcbiAgdGhpcy5hdmFpbGFibGVZZWFycy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyKSB7XHJcbiAgICAgIHllYXJzICs9IFwiPHRoPlwiICsgeWVhciArIFwiPC90aD5cIjtcclxuICB9KTtcclxuXHJcbiAgdmFyIGNlbGxDb3VudCA9IDA7IC8vIFVzZWQgZm9yIGlkIGNlbGxzXHJcbiAgdmFyIHJvd0NvdW50ID0gMDsgLy8gVXNlZCBmb3IgaWQgcm93c1xyXG5cclxuICBpZih1cGRhdGUpe1xyXG4gICAgICB0aGlzLiR0b3RhbHNUYWJsZS5odG1sKCcnKTsgLy8gQ2xlYXIgbGFzdCB0YWJsZVxyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCB0byBjYWxjdWxhdGUgYXZlcmFnZSBvciB0b3RhbFxyXG4gIHZhciBudW1iZXJPZkNvbXBhbmllcyA9IDI5O1xyXG5cclxuICB0aGlzLiR0b3RhbHNUYWJsZS5hcHBlbmQoJzx0ciBpZD1cImhlYWQtcm93LXRvdGFscy0nK3RoaXMuaWQrJ1wiIGNsYXNzPVwidGFibGUtcm93IHRhYmxlLWhlYWRcIj4gPHRoPlJlZ2lvbjwvdGg+JysgeWVhcnMgKyAnPC90cj4nKTtcclxuXHJcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gdG90YWxzKSB7XHJcbiAgICAgIGlmICh0b3RhbHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICB2YXIgcm93PSBcIjx0ciBjbGFzcz0ndGFibGUtcm93JyBpZD1yb3ctdG90LVwiK3RoaXMuaWQrcm93Q291bnQrXCI+XCI7XHJcblxyXG4gICAgICAgICAgLy9UT0RPIChOb3RlIHdoZW4gdXBkYXRlZCBvcmlnVmFsdWUgd2lsbCBiZSB0aGUgdXBkYXRlZCB2YWx1ZSBub3QgdGhlIG9yaWdpbmFsKVxyXG5cclxuICAgICAgICAgIC8vIEluc2VydCBuYW1lIGluIGNvbHVtbiBhbmQgYXNzaWduIGFuIGlkIHRvIHRoZSByb3dcclxuICAgICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmRwRm9ybWF0O1xyXG4gICAgICAgIHZhciBjZWxscyA9IHRoaXMubm9DUElDZWxscztcclxuICAgICAgICAgIHJvdyArPSBcIjx0aCBjbGFzcz0ncmVnLWNlbGwnPlwiICsgbmFtZXNbcHJvcGVydHldICsgXCI8L3RoPlwiO1xyXG4gICAgICAgICAgdmFyIHBhc3NJRCA9IHRoaXMuaWQ7XHJcbiAgICAgICAgICB0b3RhbHNbcHJvcGVydHldLmZvckVhY2goZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgIHZhciBhdmc7XHJcbiAgICAgICAgICAgICAgaWYocHJvcGVydHkgPT09IFwibnpcIil7XHJcbiAgICAgICAgICAgICAgICAgIGF2ZyA9IHZhbHVlIC8gbnVtYmVyT2ZDb21wYW5pZXM7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgYXZnID0gdmFsdWUgLyBUYWJsZXNNb2R1bGUucmVnaW9uc1twcm9wZXJ0eV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcm93ICs9IFwiPHRoIGlkPSd0LXRvdGFsXCIrcGFzc0lEK1wiXCIrY2VsbENvdW50K1wiJyBvcmlnVmFsdWU9J1wiKyBhdmcgK1wiJyBjbGFzcz0nY2VsbCc+XCIgKyBmb3JtYXQoYXZnKSArIFwiPC90aD5cIjtcclxuICAgICAgICAgICAgICB0b3RhbENlbGxzLnB1c2goe2lkIDogXCIjdC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCwgdmFsdWUgOmF2Z30pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBUT0RPIGNoZWNrIGlmIGJldHRlciB3YXlcclxuICAgICAgICAgICAgICBjZWxscy5wdXNoKHtpZCA6IFwidC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCwgdmFsdWUgOiBhdmd9KTtcclxuXHJcbiAgICAgICAgICAgICAgY2VsbENvdW50Kys7XHJcblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLiR0b3RhbHNUYWJsZS5hcHBlbmQocm93ICsgJzwvdHI+Jyk7XHJcbiAgICAgICAgICAkKFwiI3Jvdy10b3QtXCIrdGhpcy5pZCtyb3dDb3VudCkuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSAkKFwiI1wiK3RoaXMuaWQgK1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50cy5lbWl0KFwiVE9UQUxfUk9XX0NMSUNLRURcIiwge3Jvd0lEIDogdGhpcy5pZCwgcmVnaW9uIDogcmVnfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJvd0NvdW50Kys7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYoc2VsZWN0ZWRUb3RhbFJvdyAhPT1cIlwiKXtcclxuICAgICAgJCgnIycrc2VsZWN0ZWRUb3RhbFJvdykuYWRkQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7XHJcbiAgfVxyXG4gIHRoaXMudG90YWxDZWxsVmFsdWVzID0gdG90YWxDZWxscztcclxufVxyXG5cclxuXHJcblxyXG5cclxuVGFibGUucHJvdG90eXBlLmNyZWF0ZVRhYmxlRGF0YSA9IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgLy8gQ3JlYXRlIGFycmF5IHdpdGggdW5pcXVlIEVEQlNcclxuICB2YXIgZWRicyA9IHt9O1xyXG4gIHJvd3MuZm9yRWFjaCAoZnVuY3Rpb24ocil7XHJcbiAgICBpZihlZGJzW3IuZWRiXSA9PT0gdW5kZWZpbmVkKWVkYnNbci5lZGJdID0gci5lZGI7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBkYXRhID0gW107XHJcblxyXG4gIC8vIEZpbHRlciByb3dzIGJ5IGVhY2ggRURCXHJcbiAgZm9yICh2YXIgZWRiIGluIGVkYnMpIHtcclxuICAgIGlmIChlZGJzLmhhc093blByb3BlcnR5KGVkYikpIHtcclxuICAgICAgdmFyIGVkYlllYXJzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIHIuZWRiID09PSBlZGJzW2VkYl0gfSk7XHJcblxyXG4gICAgICB2YXIgeWVhcnMgPSBbXTtcclxuICAgICAgZWRiWWVhcnMuZm9yRWFjaChmdW5jdGlvbih5KXtcclxuICAgICAgICB5ZWFycy5wdXNoKHsgeWVhciA6IHkub2JzX3lyLCB2YWx1ZSA6IHkudmFsdWUgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU29ydCB5ZWFyc1xyXG4gICAgICB5ZWFycy5zb3J0KGZ1bmN0aW9uKGEsYil7XHJcbiAgICAgICAgcmV0dXJuIGEueWVhciA+IGIueWVhcjtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGRhdGEucHVzaCh7IGVkYiA6IGVkYnNbZWRiXSwgeWVhcnMgOiB5ZWFyc30pO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuXHJcbi8vIENhbGxlZCB3aGVuIHZhbHVlcyBpbiB0aGUgdGFibGUgdXBkYXRlXHJcblRhYmxlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy5hcHBseUdyYWRpZW50Q1NTKHRoaXMuY2VsbFZhbHVlcyk7XHJcbiAgdGhpcy5hcHBseUdyYWRpZW50Q1NTKHRoaXMudG90YWxDZWxsVmFsdWVzKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBoaWdobGlnaHRzIHRoZSBjZWxsIGJhc2VkIG9uIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBtYXggdmFsdWUgaW4gdGhlIHRhYmxlIHVubGVzcyBhbHJlYWR5IGEgcGVyY2VudGFnZVxyXG4gKlxyXG4gKiBAcGFyYW0gY2VsbFZhbHVlcyB7T2JqZWN0W119IHZhbHVlIG9mIGEgY2VsbCBhbmQgdGhlIHRhYmxlIGNlbGwgaWRcclxuICogQHBhcmFtIHBlcmNlbnQge0Jvb2xlYW59IGlmIG5vdCBhIHBlcmNlbnQgaXQgc2hvdWxkIGJlIGhpZ2hsaWdodGVkIGJhc2VkIG9uIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBtYXggdmFsdWUgaW4gdGhlIGNlbGxcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmFwcGx5R3JhZGllbnRDU1MgPSBmdW5jdGlvbihjZWxsVmFsdWVzKSB7XHJcbiAgdmFyIHBlcmNlbnQgPSBmYWxzZTsgLy8gVE9ETyBmaXggbGF0ZXJcclxuICAvLyBGaW5kIHRoZSBtYXggdmFsdWVcclxuICB2YXIgbWF4Q2VsbFZhbHVlID0gLUluZmluaXR5O1xyXG4gIGNlbGxWYWx1ZXMuZm9yRWFjaChmdW5jdGlvbihlbGVtKXtcclxuICAgICAgbWF4Q2VsbFZhbHVlID0gK2VsZW0udmFsdWUgPiBtYXhDZWxsVmFsdWUgPyArZWxlbS52YWx1ZSA6IG1heENlbGxWYWx1ZTtcclxuICB9KTtcclxuXHJcbiAgLy8gQXBsbGllIGNzcyB0byBlYWNoIGNlbGxcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2VsbFZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIHZhciB2YWx1ZSA9IChwZXJjZW50ID8gdmFsdWUgOiAoKCtjZWxsVmFsdWVzW2ldLnZhbHVlIC8gbWF4Q2VsbFZhbHVlKSoxMDApKTsgLy8gSWYgcGVyY2VudGFnZSBtZXRyaWMganVzdCB1c2UgdmFsdWRcclxuICAgICAgJChjZWxsVmFsdWVzW2ldLmlkKS5jc3Moe1xyXG4gICAgICAgICAgICAgIFwiYmFja2dyb3VuZFwiIDogXCItd2Via2l0LWdyYWRpZW50KGxpbmVhciwgbGVmdCB0b3AsIHJpZ2h0IHRvcCwgY29sb3Itc3RvcChcIiArIHZhbHVlICtcIiUsIzdiYmZkNiksIGNvbG9yLXN0b3AoXCIgKyB2YWx1ZSArXCIlLCNGRkYpKVwiLFxyXG4gICAgICAgICAgfVxyXG4gICAgICApO1xyXG4gIH1cclxufVxyXG4iLCIvLyBERVBFTkRFTkNJRVMgRGF0YVByb2Nlc3NvciwgRGF0YWJhc2UsIEV2ZW50c1xyXG5cclxuLy8gSW50ZXJuZXQgRXhwbG9yZXIgY29tcGF0aWJpbGl0eVxyXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMpIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAndXNlIHN0cmljdCc7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpICE9PSAtMTtcclxuICAgIH07XHJcbn1cclxuXHJcbmlmICghQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImluY2x1ZGVzXCIsIHtcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdBcnIgPSB0aGlzLmZpbHRlcihmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsID09IG9iajtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdBcnIubGVuZ3RoID4gMDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vLyBFbmQgSW50ZXJuZXQgZXhwbG9yZXIgY29tcGF0aWJpbGl0eVxyXG5cclxudmFyIENvbXBhcmVNb2R1bGUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgLy8gSW5pdCB0aGUgZGF0YSBwcm9jZXNzb3JcclxuICB2YXIgZHAgPSBuZXcgRGF0YVByb2Nlc3NvcigpO1xyXG5cclxuICAvLyBPYmplY3QgdGhhdCBob2xkcyBhbGwgdGhlIHJvd3MgZm9yIGVhY2ggdGFibGUgYWxvbmcgd2l0aCBhIGNvcHlcclxuICB2YXIgYmFja3VwID0ge307XHJcblxyXG4gIC8vIFNlYXJjaCBlcnJvciBzdGF0ZVxyXG4gIHZhciBlcnJvciA9IGZhbHNlO1xyXG5cclxuICAvLyBDYWNoZSBkb20gZWxlbWVudHNcclxuICB2YXIgJHNlYXJjaEVycm9yID0gJCgnI2Vycm9yLWRpdicpO1xyXG5cclxuICAvKipcclxuICAgKiBUdXJucyBvYmplY3QgaW4gdXJsIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIG9iaiB7T2JqZWN0fSB0aGUgb2JqZWN0IHRvIHR1cm4gaW50byB1cmxcclxuICAgKiAqL1xyXG4gIHZhciBzZXJpYWxpc2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICB2YXIgc3RyID0gW107XHJcbiAgICBmb3IodmFyIHAgaW4gb2JqKVxyXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgc3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKSk7XHJcbiAgICAgIH1cclxuICAgIHJldHVybiBzdHIuam9pbihcIiZcIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZCwgY2hlY2tzIGlmIGEgdmFsaWQgc2VhcmNoIHNlbGVjdGlvbiBpcyBtYWRlXHJcbiAgICogaWYgc28gaW5zZXJ0cyB0aGUgc2VhcmNoIGludG8gdGhlIHVybCB0byBzZWFyY2guXHJcbiAgICogKi9cclxuICB2YXIgc2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCFzZWxlY3Rpb25Sb3dzLmNhblNlYXJjaCgpKSB7XHJcbiAgICAgIGlmICghZXJyb3IpIHtcclxuICAgICAgICAkc2VhcmNoRXJyb3IuYXBwZW5kKCc8aDQgc3R5bGU9XCJjb2xvciA6IHJlZDtcIj5QYXJ0aWFsIFJvdyBTZWxlY3RlZDwvaDQ+Jyk7XHJcbiAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjsgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIHNlbGVjdGlvbiBpcyB2YWxpZFxyXG4gICAgfVxyXG5cclxuICAgIHZhciByb3dzPSB7fTtcclxuICAgIHNlbGVjdGlvblJvd3MuZ2V0QWxsU2VsZWN0aW9uRGF0YSgpLmZvckVhY2goZnVuY3Rpb24oc2VsZWN0aW9uKXtcclxuICAgICAgaWYoc2VsZWN0aW9uLnNlY3Rpb24gIT09IFwiXCIpe1xyXG4gICAgICAgICAgcm93c1tcInNcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLnNlY3Rpb247XHJcbiAgICAgICAgICByb3dzW1wiY1wiK3NlbGVjdGlvbi5pZF0gPSBzZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbiAgICAgICAgICByb3dzW1wic2NcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG4gICAgICAgICAgcm93c1tcImRcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLmRlc2NyaXB0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFwiY29tcGFyZT9cIiArIHNlcmlhbGlzZShyb3dzKSk7IC8vIFJlcGxhY2UgdGhlIHVybCB3aXRoIHRoZSBzZWxlY3Rpb25zIHVybFxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBwYWdlIGlzIGxvYWRlZCB3aXRoIGEgc2VhcmNoIGluIHRoZSB1cmwsIGZldGNoZXMgdGhlIHJlbGV2YW50IGRhdGEgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgKiB1c2luZyB0aGUgZGIgbW9kdWxlXHJcbiAgICogKi9cclxuICB2YXIgbG9hZFNlYXJjaEZyb21VUkwgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgc2VsZWN0aW9uUm93cy5pbml0KHVybFNlbGVjdGlvbnMsdHJ1ZSk7IC8vIFNldCB1cHMgdGhlIHNlbGVjdGlvbiByb3dzXHJcblxyXG4gICAgRGF0YWJhc2UuZ2V0Um93c0ZvclNlYXJjaCh1cmxTZWxlY3Rpb25zLCBmdW5jdGlvbihyb3dzKXtcclxuICAgICAgLy8gc2V0IHRoZSByb3dzIHRhYmxlcyBhbmQgY3JlYXRlIGEgY29weVxyXG4gICAgICBiYWNrdXAuc2VsZWN0aW9uICA9IG5ldyBTZWxlY3Rpb24odXJsU2VsZWN0aW9uc1swXSx1cmxTZWxlY3Rpb25zWzFdLHVybFNlbGVjdGlvbnNbMl0sdXJsU2VsZWN0aW9uc1szXSk7XHJcbiAgICAgIGJhY2t1cC5yb3dzID0gcm93c1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cyA9IGRwLmZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkocm93cyxiYWNrdXAuc2VsZWN0aW9uKTtcclxuXHJcbiAgICAgIHZhciBjb21iaW5lZERhdGEgPSBbXTtcclxuICAgICAgYmFja3VwLnNvcnRlZFJvd3MuZm9yRWFjaChmdW5jdGlvbih0KXtcclxuICAgICAgICBpZih0LmlkID09PSAnYScpe1xyXG4gICAgICAgICAgJCgnI3RhYi1hJykuYWRkQ2xhc3MoXCJpbiBhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHQuaWQgPT09ICdhYicgfHwgdC5pZCA9PT0gJ2NkJyl7XHJcbiAgICAgICAgICBjb21iaW5lZERhdGEucHVzaCh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAkKCcjZnVsbC1kYXNoLScrIHQuaWQpLnNob3coKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZihjb21iaW5lZERhdGEubGVuZ3RoID09PSAyKXtcclxuICAgICAgICBzaG93RnVsbFZlY3RvckdyYXBoKGNvbWJpbmVkRGF0YSwgdXJsU2VsZWN0aW9ucywgW2JhY2t1cC5zb3J0ZWRSb3dzWzBdLnJvd3NbMF0udW5pdHMsYmFja3VwLnNvcnRlZFJvd3NbMV0ucm93c1swXS51bml0cyxiYWNrdXAuc29ydGVkUm93c1syXS5yb3dzWzBdLnVuaXRzLGJhY2t1cC5zb3J0ZWRSb3dzWzNdLnJvd3NbMF0udW5pdHMgXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIGJvdGggQUIgYW5kIENEIGV4aXN0XHJcbiAgICAgIC8vIEVtaXQgYW4gZXZlbnQgd2l0aCB0aGUgZGF0YVxyXG4gICAgICBldmVudHMuZW1pdChcIklOSVRfREFUQVwiLCB7ZGF0YSA6IGJhY2t1cC5zb3J0ZWRSb3dzfSk7XHJcblxyXG4gICAgICAvLyBTZXQgZGVmYXVsdCByb3dzIHNlbGVjdGVkXHJcbiAgICAgIGV2ZW50cy5lbWl0KCdST1dfQ0xJQ0tFRCcsICB7cm93SUQ6IFwicm93YTBcIiwgcm93TnVtYjogMCwgZWRiOiBcIkFscGluZSBFbmVyZ3lcIn0pO1xyXG4gICAgICBldmVudHMuZW1pdChcIlRPVEFMX1JPV19DTElDS0VEXCIsIHtyb3dJRDogXCJyb3ctdG90LWEwXCIsIHJlZ2lvbjogXCJTb3V0aCBJc2xhbmRcIn0pO1xyXG5cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBhcHBseSBjcGkgYnV0dG9uIGlzIGNsaWNrZWQuIEZpcnN0IGNoZWNrc1xyXG4gICAqIGlmIGNwaSBpbnB1dCBpcyB2YWxpZCB0aGVuIGNvcGllcyByb3dzIGFuZCBhcHBsaWVzIGNwaSB0byBjb3B5XHJcbiAgICogKi9cclxuICB2YXIgYXBwbHlDUEkgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKENQSU1vZHVsZS5pc1ZhbGlkKCkgJiYgYmFja3VwLnNlbGVjdGlvbiAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdmFyIGNvcHlPZlJvd3MgID0gZHAuY29weVJvd3MoYmFja3VwLnJvd3MpO1xyXG4gICAgICBhcHBseUNQSVRvVGFibGVSb3dzKGNvcHlPZlJvd3MsQ1BJTW9kdWxlLmdldENQSVZhbHVlcygpKTtcclxuICAgICAgdmFyIG5ld0RhdGEgPSBkcC5maWx0ZXJSb3dzVG9UYWJsZXNBbmRDb3B5KGNvcHlPZlJvd3MsYmFja3VwLnNlbGVjdGlvbik7XHJcblxyXG4gICAgICAvLyBTZW5kIGV2ZW50IHRvIHVwZGF0ZSB0YWJsZSBhbmQgZ3JhcGhzXHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiUk9XX1VQREFURVwiLCB7ZGF0YSA6IG5ld0RhdGEgfSk7XHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiQVBQTFlfQ1BJXCIsIHtjcGlWYWx1ZXMgOiBDUElNb2R1bGUuZ2V0Q1BJVmFsdWVzKCl9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBcHBsaWVzIGNwaSB2YWx1ZXMgdG8gdGhlIHJvd3MgYnkgY2hhbmluZyB0aGUgdmFsdWUgaW4gZWFjaCByb3cgd2l0aCB0aGUgY29tcG91bmRlZCBjcGkgdmFsdWVzXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcm93cyB7T2JqZWN0W119IHRoZSByb3dzXHJcbiAgICogQHBhcmFtIGNwaVZhbHVlcyB7T2JqZWN0W119IGNvbnRhaW5zIHRoZSBjcGkgZm9yIGVhY2ggeWVhclxyXG4gICAqICovXHJcbiAgdmFyIGFwcGx5Q1BJVG9UYWJsZVJvd3MgPSBmdW5jdGlvbiAocm93cywgY3BpVmFsdWVzKSB7XHJcbiAgICB2YXIgYXBwbGljYWJsZVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihyKXtcclxuICAgICAgcmV0dXJuIHIudW5pdHMuaW5jbHVkZXMoJyQnKTtcclxuICAgIH0pO1xyXG4gICAgaWYoYXBwbGljYWJsZVJvd3MubGVuZ3RoID09PSAwKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBGaW5kIHRoZSBtaW4gYW5kIG1heCB5ZWFyIGZyb20gdGhlIGRhdGFcclxuICAgIHZhciBtaW5ZZWFyID0gYXBwbGljYWJsZVJvd3MucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgcmV0dXJuIHByZXYuZGlzY195ciA8IGN1cnIuZGlzY195ciA/IHByZXYgOiBjdXJyO1xyXG4gICAgfSkub2JzX3lyO1xyXG5cclxuICAgIHZhciBtYXhZZWFyID0gYXBwbGljYWJsZVJvd3MucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgcmV0dXJuIHByZXYuZGlzY195ciA+IGN1cnIuZGlzY195ciA/IHByZXYgOiBjdXJyO1xyXG4gICAgfSkub2JzX3lyO1xyXG5cclxuICAgIGZvcih2YXIgY3VyID0gbWluWWVhcjsgY3VyIDw9bWF4WWVhcjsgY3VyKyspeyAvLyBHbyB0aHJvdWdoIGVhY2ggcG9zc2libGUgeWVhclxyXG4gICAgICBhcHBsaWNhYmxlUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW0sIGluZGV4KXsgLy8gR3JhYiBldmVyeSBSb3dcclxuICAgICAgICB2YXIgeWVhciA9IGFwcGxpY2FibGVSb3dzW2luZGV4XS5vYnNfeXI7IC8vIEdyYWIgdGhlIHllYXIgb2YgdGhlIGNlbGwgYnkgY2hlY2tpbmcgdGhlIGNsYXNzXHJcbiAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gYXBwbGljYWJsZVJvd3NbaW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY3BpVmFsdWVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgIGlmKGNwaVZhbHVlc1tpXS55ZWFyID09PSBjdXIpe1xyXG4gICAgICAgICAgICBpZih5ZWFyIDw9IGN1cil7XHJcbiAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSB2YWx1ZU9mQ2VsbCAqICgxICsgKGNwaVZhbHVlc1tpXS52YWx1ZSAvIDEwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcGxpY2FibGVSb3dzW2luZGV4XS52YWx1ZSA9IHZhbHVlT2ZDZWxsOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBBcnJheSB3aXRoIGJvdGggdGhpbmdzIGluIGl0XHJcbiAgZnVuY3Rpb24gc2hvd0Z1bGxWZWN0b3JHcmFwaChkYXRhLCBzZWxlY3Rpb25zLCB1bml0cykge1xyXG5cclxuXHJcbiAgICAgICAgLy8gR3JhYiBhIHRpdGxlXHJcbiAgICAgICAgdmFyIGF0aXRsZSA9IHNlbGVjdGlvbnNbMF0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzBdLnN1YkNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1swXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICB2YXIgYnRpdGxlID0gc2VsZWN0aW9uc1sxXS5jYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMV0uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzFdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHZhciBjdGl0bGUgPSBzZWxlY3Rpb25zWzJdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1syXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMl0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgdmFyIGR0aXRsZSA9IHNlbGVjdGlvbnNbM10uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzNdLnN1YkNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1szXS5kZXNjcmlwdGlvbjtcclxuXHJcbiAgICAgICAgdmFyIHJhdGlvID0gJzxoMz4gUmF0aW8gKEEgLyBCICkgb3ZlciAoIEMgLyBEICkgPC9oMz4nXHJcbiAgICAgICAgdmFyIHNwYW5BID0gJzxzcGFuIGNsYXNzPVwibGV0dGVyXCI+QTogPC9zcGFuPic7XHJcbiAgICAgICAgdmFyIHNwYW5CID0gJzxzcGFuIGNsYXNzPVwibGV0dGVyXCI+QjogPC9zcGFuPic7XHJcbiAgICAgICAgdmFyIHNwYW5DID0gJzxzcGFuIGNsYXNzPVwibGV0dGVyXCI+QzogPC9zcGFuPic7XHJcbiAgICAgICAgdmFyIHNwYW5EID0gJzxzcGFuIGNsYXNzPVwibGV0dGVyXCI+RDogPC9zcGFuPic7XHJcblxyXG5cclxuICAgICAgICB2YXIgY29tYmluZUEgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj4nK3NwYW5BKycgJysgYXRpdGxlICsnPC9oND4nO1xyXG4gICAgICAgIHZhciBjb21iaW5lQiA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPicrc3BhbkIrJyAnKyBidGl0bGUgKyc8L2g0Pic7XHJcbiAgICAgICAgdmFyIGNvbWJpbmVDID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuQysnICcrIGN0aXRsZSArJzwvaDQ+JztcclxuICAgICAgICB2YXIgY29tYmluZUQgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj4nK3NwYW5EKycgJysgZHRpdGxlICsnPC9oND4nO1xyXG5cclxuICAgICAgICAkKCcjdGl0bGUtdmVjdG9yLWFiY2QnKS5hcHBlbmQocmF0aW8pLmFwcGVuZChjb21iaW5lQSkuYXBwZW5kKGNvbWJpbmVCKS5hcHBlbmQoY29tYmluZUMpLmFwcGVuZChjb21iaW5lRCk7XHJcblxyXG4gICAgICAgIFZlY3Rvck1vZHVsZS5jcmVhdGVWZWN0b3JHcmFwaChkcC5jcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgoZGF0YVswXS5yb3dzLGRhdGFbMV0ucm93cyksIHVuaXRzWzBdICsgXCIgLyBcIiArIHVuaXRzWzFdICx1bml0c1syXSArIFwiIC8gXCIgKyB1bml0c1szXSAsXCIjdmVjdG9yLWdyYXBoLWFiY2RcIik7XHJcbiAgICAgICAgJCgnI3ZlY3Rvci1mdWxsLWFiY2QnKS5zaG93KCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gcmV2ZXJ0IGNwaSBpcyBjbGlja2VkIHNlbmQgb3V0IGV2ZW50cyB3aXRoIHRvXHJcbiAgICogbm90aWZ5IHRoYXQgY3BpIG5lZWRzIHRvIGJlIHJldmVydGVkXHJcbiAgICogKi9cclxuICB2YXIgcmV2ZXJ0Q1BJID0gZnVuY3Rpb24gKCkge1xyXG4gICAgZXZlbnRzLmVtaXQoXCJST1dfVVBEQVRFXCIsIHtkYXRhIDogYmFja3VwLnNvcnRlZFJvd3MgfSk7XHJcbiAgICBldmVudHMuZW1pdChcIlJFVkVSVF9DUElcIiwge2NwaVZhbHVlcyA6IFwiXCJ9KTtcclxuICB9XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbG9hZFNlYXJjaEZyb21VUkwgOiBsb2FkU2VhcmNoRnJvbVVSTCxcclxuICAgIHNlYXJjaCA6IHNlYXJjaCxcclxuICAgIGFwcGx5Q1BJIDogYXBwbHlDUEksXHJcbiAgICByZXZlcnRDUEkgOiByZXZlcnRDUElcclxuICB9XHJcbn0pKCk7XHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gSGlnaGxpZ2h0IHRoZSBzZWxlY3RlZCBsaW5rXHJcbiAgICAkKFwiLm5hdi1saW5rXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoXCIjYmVuY2htYXJrcy1saW5rXCIpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJyNzZWFyY2gtYnRuLWNvbXBhcmUnKS5jbGljayhmdW5jdGlvbigpeyAvLyBMaXN0ZW5lciB0byBzZWFyY2ggYnV0dG9uXHJcbiAgICAgICAgQ29tcGFyZU1vZHVsZS5zZWFyY2goKTsgLy8gU2VhcmNoIGVuY29kZXMgdGhlIHNlbGVjdGlvbnMgaW50byB0aGUgdXJsIGFuZCBzZW5kcyB0byBzZXJ2ZXJcclxuICAgIH0pO1xyXG4gICAgJCgnY3BpJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgQ29tcGFyZU1vZHVsZS5hcHBseUNQSSgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4iLCJ2YXIgQ1BJTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIEdyYXBoIGFuZCBjYWNoZVxyXG52YXIgJGNwaUZvcm0gPSAkKCcjY3BpLWZvcm0nKTtcclxuXHJcbi8vIHNldCB1cCB2YWxpZGF0aW9uIHJ1bGVzXHJcbiQudmFsaWRhdG9yLnNldERlZmF1bHRzKHtcclxuICAgICAgICBlcnJvckNsYXNzIDogJ2hlbHAtYmxvY2snLFxyXG4gICAgICAgIGhpZ2hsaWdodDogZnVuY3Rpb24gKGVsZW1lbnQpIHskKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykuYWRkQ2xhc3MoJ2hhcy1lcnJvcicpfSxcclxuICAgICAgICB1bmhpZ2hsaWdodCA6ZnVuY3Rpb24gKGVsZW1lbnQpIHskKGVsZW1lbnQpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJykucmVtb3ZlQ2xhc3MoJ2hhcy1lcnJvcicpfVxyXG4gICAgfVxyXG4pO1xyXG5cclxuLy8gU2V0IHRoZSBydWxlcyBmb3IgZWFjaCBpbnB1dFxyXG52YXIgY3BpUnVsZXMgPSB7cmVxdWlyZWQgOiB0cnVlLCBudW1iZXIgOiB0cnVlLCBtaW4gOiAwLjEsIG1heCA6IDEwMH07XHJcbnZhciBtZXNzYWdlU2V0ID0ge1xyXG4gICAgcmVxdWlyZWQgOiBcIlBsZWFzZSBlbnRlciBhIHBlcmNlbnRhZ2VcIixcclxuICAgIG51bWJlciA6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyXCIsXHJcbiAgICBtaW4gOiBcIlBsZWFzZSBlbnRlciBhIHBlcmNlbnRhZ2UgZ3JlYXRlciB0aGFuIDBcIixcclxuICAgIG1heCA6IFwiUGxlYXNlIGVudGVyIGEgcGVyY2VudGFnZSBsZXNzIHRoYW4gMTAwXCJcclxufTtcclxuXHJcblxyXG4kY3BpRm9ybS52YWxpZGF0ZSh7XHJcbiAgICBydWxlcyA6IHtZMjAxMiA6IGNwaVJ1bGVzLFkyMDEzIDogY3BpUnVsZXMsWTIwMTQgOiBjcGlSdWxlcyxZMjAxNSA6IGNwaVJ1bGVzLFkyMDE2IDogY3BpUnVsZXN9LFxyXG4gICAgbWVzc2FnZXMgOiB7WTIwMTIgOiBtZXNzYWdlU2V0LFkyMDEzIDogbWVzc2FnZVNldCxZMjAxNCA6IG1lc3NhZ2VTZXQsWTIwMTUgOiBtZXNzYWdlU2V0LFkyMDE2IDogbWVzc2FnZVNldH1cclxufSk7XHJcblxyXG52YXIgZ2V0Q1BJVmFsdWVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiAgW3t5ZWFyIDogMjAxMiwgdmFsdWUgOiArJGNwaUZvcm0uZmluZCgnI1kyMDEyJykudmFsKCl9LFxyXG4gICAgICAgICAgIHt5ZWFyIDogMjAxMywgdmFsdWUgOiArJGNwaUZvcm0uZmluZCgnI1kyMDEzJykudmFsKCl9LFxyXG4gICAgICAgICAgIHt5ZWFyIDogMjAxNCwgdmFsdWUgOiArJGNwaUZvcm0uZmluZCgnI1kyMDE0JykudmFsKCl9LFxyXG4gICAgICAgICAgIHt5ZWFyIDogMjAxNSwgdmFsdWUgOiArJGNwaUZvcm0uZmluZCgnI1kyMDE1JykudmFsKCl9LFxyXG4gICAgICAgICAgIHt5ZWFyIDogMjAxNiwgdmFsdWUgOiArJGNwaUZvcm0uZmluZCgnI1kyMDE2JykudmFsKCl9XVxyXG59XHJcblxyXG52YXIgaXNWYWxpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiAkY3BpRm9ybS52YWxpZCgpO1xyXG59XHJcblxyXG5cclxucmV0dXJuIHtcclxuICBnZXRDUElWYWx1ZXMgOiBnZXRDUElWYWx1ZXMsXHJcbiAgaXNWYWxpZCA6IGlzVmFsaWRcclxufVxyXG5cclxufSkoKTtcclxuIiwiLy8gREVQRU5ERU5DSUVTIDogR3JhcGgsIENvbWJpbmVkR3JhcGhcclxuXHJcbnZhciBHcmFwaE1vZHVsZSA9IChmdW5jdGlvbigpe1xyXG5cclxuICAvLyBIb2xkcyB0aGUgZ3JhcGggb2JqZWN0c1xyXG4gIHZhciBncmFwaHMgPSBbXTtcclxuXHJcbiAgLy8gQmx1ZSBjb2xvciBzY2FsZVxyXG4gIHZhciB6ID0gZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoW1wiI0JCREVGQlwiLCBcIiM2NEI1RjZcIiwgXCIjMTk3NkQyXCIsIFwiIzE1NjVDMFwiLCBcIiMwRDQ3QTFcIiwgXCIjZDA3NDNjXCIsIFwiI2ZmOGMwMFwiXSk7XHJcblxyXG4gIC8vIFJlZCBjb2xvciBzY2FsZSBmb3IgbmVnYXRpdmUgdmFsdWVzXHJcbiAgdmFyIHpSZWQgPSBkMy5zY2FsZU9yZGluYWwoKS5yYW5nZShbXCIjRkY3MzczXCIsIFwiI0ZGNEM0Q1wiLCBcIiNGRjI2MjZcIiwgXCIjQjIwMDAwXCIsIFwiI0Q5MDAwMFwiLCBcIiNkMDc0M2NcIiwgXCIjZmY4YzAwXCJdKTtcclxuXHJcbiAgLy8gR3JlZW4gY29sb3Igc2NhbGUgZm9yIHNlbGVjdGVkIHZhbHVlc1xyXG4gIHZhciB6U2VsZWN0ZWQgPSBkMy5zY2FsZU9yZGluYWwoKS5yYW5nZShbXCIjQzFGRkMxXCIsIFwiIzkwRUU5MFwiLCBcIiM1QkM4NUJcIiwgXCIjMzFBMjMxXCIsIFwiIzEzN0IxM1wiLCBcIiNkMDc0M2NcIiwgXCIjZmY4YzAwXCJdKTtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGlzZXMgYWxsIG9mIHRoZSBncmFwaHMgb24gdGhlIHBhZ2UuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gIHVwZGF0ZSwgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIGZvciBlYWNoIG9mIHRoZSBncmFwaHNcclxuICAgKiAqL1xyXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZ3JhcGhzXHJcbiAgICB1cGRhdGUuZGF0YS5mb3JFYWNoIChmdW5jdGlvbih0YWJsZURhdGEpe1xyXG4gICAgICBpZih0YWJsZURhdGEuY29tYmluZWQpe1xyXG4gICAgICAgIGdyYXBocy5wdXNoKG5ldyBDb21iaW5lZEdyYXBoKHRhYmxlRGF0YS5pZCx0YWJsZURhdGEucm93cyx0YWJsZURhdGEudGFibGUxUm93cyx0YWJsZURhdGEudGFibGUyUm93cywgIHRhYmxlRGF0YS5zZWFyY2gsIHRhYmxlRGF0YS5zZWFyY2gyKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ3JhcGhzLnB1c2gobmV3IEdyYXBoKHRhYmxlRGF0YS5pZCx0YWJsZURhdGEucm93cyx0YWJsZURhdGEuc2VhcmNoKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gSW5zZXJ0IHRoZSB0aXRsZXMgYW5kIGNyZWF0ZSB0aGUgZ3JhcGhzXHJcbiAgICBncmFwaHMuZm9yRWFjaChmdW5jdGlvbihnKXtcclxuICAgICAgZy5pbnNlcnRUaXRsZXMoKTtcclxuICAgICAgZy5jcmVhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSBhbGwgdGhlIGdyYXBocyB3aXRoIHRoZSBuZXcgcm93c1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9ICB1cGRhdGUsIGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSBmb3IgZWFjaCBvZiB0aGUgZ3JhcGhzXHJcbiAgICogKi9cclxuICB2YXIgdXBkYXRlID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdXBkYXRlLmRhdGEuZm9yRWFjaChmdW5jdGlvbih0YWJsZURhdGEpe1xyXG4gICAgICBncmFwaHMuZm9yRWFjaChmdW5jdGlvbihnKXtcclxuICAgICAgICBpZihnLmdldElEKCkgPT09IHRhYmxlRGF0YS5pZCl7XHJcbiAgICAgICAgICBpZihnLmlzQ29tYmluZWQoKSl7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzLCB0YWJsZURhdGEudGFibGUxUm93cywgdGFibGVEYXRhLnRhYmxlMlJvd3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy51cGRhdGUodGFibGVEYXRhLnJvd3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgd2hlbiBhIHJvdyBpcyBjbGlja2VkXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gIGV2ZW50LCBjb250YWlucyB0aGUgRURCXHJcbiAgICogKi9cclxuICB2YXIgcm93Q2xpY2tlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYoZXZlbnQudW5zZWxlY3QpIHtcclxuICAgICAgZDMuc2VsZWN0QWxsKFwiLmxpbmUtc2VsZWN0ZWQtdGFibGVcIikuY2xhc3NlZChcImxpbmUtc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG4gICAgICBkMy5zZWxlY3RBbGwoXCIudmVjLWRvdC1zZWxlY3RlZFwiKS5jbGFzc2VkKFwidmVjLWRvdC1zZWxlY3RlZFwiLCBmYWxzZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBhbHJlYWR5U2VsZWN0ZWQgPSBmYWxzZTsgLy8gVE9ETyBmaXhcclxuXHJcbiAgICAvLyBCZWZvcmUgd2UgcmVtb3ZlIHRoZSBjbGFzcyB3ZSBuZWVkIHRvIGFwcGx5IHRoZSBjb3JyZWN0IGNvbG9yIHNjYWxlXHJcbiAgICBkMy5zZWxlY3RBbGwoXCIuYmFyLXNlbGVjdGVkXCIpLmRhdHVtKGZ1bmN0aW9uKGQpIHtyZXR1cm4gZDsgfSlcclxuICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7cmV0dXJuIHooZC5rZXkpOyB9KTtcclxuXHJcbiAgICAvLyBTZWxlY3QgYWxsIHJlY3RhbmdsZSB3aXRoIHRoZSBzZWxlY3RlZCBjbGFzcyBhbmQgcmVtb3ZlIGNsYXNzXHJcbiAgICBkMy5zZWxlY3RBbGwoXCIuYmFyLXNlbGVjdGVkXCIpLmNsYXNzZWQoXCJiYXItc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG5cclxuICAgIGlmKGFscmVhZHlTZWxlY3RlZCl7cmV0dXJuO30gLy8gVGhlIGNhc2Ugd2hlcmUgdGhlIHJvdyBpcyB1bnNlbGVjdGVkIGJ1dCBub3RoaW5nIGVsc2UgaXMgc2VsZWN0ZWRcclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoXCJyZWN0LlwiK2V2ZW50LmVkYi5yZXBsYWNlKC8gL2cgLCBcIlwiKSlcclxuICAgIC5jbGFzc2VkKFwiYmFyLXNlbGVjdGVkXCIsIHRydWUpIC8vIFNlbGVjdCBhbGwgcmVjdGFuZ2xlIHdpdGggdGhlIGNvcnJlY3QgRURCIGFuZCBvdXRsaW5lIGJhcnMgYW5kIGFkZCBzZWxlY3RlZCBjbGFzc1xyXG4gICAgLmRhdHVtKGZ1bmN0aW9uKGQpIHtyZXR1cm4gZDsgfSkgLy8gR3JhYiB0aGUgZGF0YSBib3VuZCB0byB0aGUgZWxlbWVudHNcclxuICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7cmV0dXJuIHpTZWxlY3RlZChkLmtleSk7IH0pOyAvLyBBcHBseSB0aGUgZ3JlZW4gY29sb3Igc2NhbGUgYmFzZWQgb24gdGhlIGtleVxyXG5cclxuICAgIC8vIFNlbGVjdCBhbGwgbGluZXMgd2l0aCB0aGUgc2VsZWN0ZWQgY2xhc3MgYW5kIHJlbW92ZSBjbGFzc1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmxpbmUtc2VsZWN0ZWQtdGFibGVcIikuY2xhc3NlZChcImxpbmUtc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLnZlYy1kb3Qtc2VsZWN0ZWRcIikuY2xhc3NlZChcInZlYy1kb3Qtc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG5cclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoXCJsaW5lLlwiK2V2ZW50LmVkYi5yZXBsYWNlKC8gL2cgLCBcIlwiKSkuY2xhc3NlZChcImxpbmUtc2VsZWN0ZWQtdGFibGVcIiwgdHJ1ZSk7XHJcbiAgICBkMy5zZWxlY3RBbGwoXCIuZG90LlwiK2V2ZW50LmVkYi5yZXBsYWNlKC8gL2cgLCBcIlwiKSkuY2xhc3NlZChcInZlYy1kb3Qtc2VsZWN0ZWRcIiwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gTGlzdGVuIHRvIGV2ZW50c1xyXG4gIGV2ZW50cy5vbihcIklOSVRfREFUQVwiLCBpbml0KTtcclxuICBldmVudHMub24oXCJST1dfQ0xJQ0tFRFwiLCByb3dDbGlja2VkKTtcclxuICBldmVudHMub24oXCJST1dfVVBEQVRFXCIsIHVwZGF0ZSk7XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdXBkYXRlIDogdXBkYXRlXHJcbiAgfVxyXG59KSgpO1xyXG4iLCJcclxudmFyIHNlbGVjdGlvblJvd3MgPSAgKGZ1bmN0aW9uKCl7XHJcbiAgICAvLyBGaXJzdCBjcmVhdGUgdGhlIGVtcHR5IHNlbGVjdGlvbmRhdGFyb3dzIHdoaWNoIGFyZSB1c2VkIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbGVjdGlvbnNcclxuICAgIHZhciByb3dzRGF0YSA9IFtuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigwKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigxKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigyKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigzKV07XHJcblxyXG4gICAgLy8gTmV4dCBjcmVhdGUgdGhlIG9iamVjdCB0aGF0IGhvbGQgdGhlIGxvZ2ljIGZvciB0aGUgc2VsZWN0b3JzXHJcblxyXG4gICAgdmFyIHNlbGVjdG9ycyA9IFtdO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgIHNlbGVjdG9ycy5wdXNoKHsgcyA6IG5ldyBTZWN0aW9uU2VsZWN0KGkpLCBjIDogbmV3IENhdGVnb3J5U2VsZWN0KGkpLCBzYyA6IG5ldyBTdWJDYXRlZ29yeVNlbGVjdChpKSwgZCA6IG5ldyBEZXNjcmlwdGlvblNlbGVjdChpKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBnZXRBbGxTZWxlY3Rpb25EYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICByb3dzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgIHNlbGVjdGlvbnMucHVzaChyLmdldFJvd1NlbGVjdGlvbigpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgY2FuU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb3dzRGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICBpZighcm93c0RhdGFbaV0udmFsaWRTZWxlY3Rpb24oKSlyZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgaW4gb3B0aW9ucyBmb3IgZWFjaCBzZWxlY3Rpb24gZHJvcCBkb3duIGZyb20gYSBzZWFyY2guXHJcbiAgICAgKiBXaGVuIHRoZSBwYWdlIGlzIGxvYWRlZCBmcm9tIGEgc2VhcmNoIHRoZSBvcHRpb24gZm9yIHRoYXQgc2VhcmNoIG5lZWQgdG8gYmUgaW5zZXJ0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uIHtPYmplY3R9IG9uZSByb3cgb2Ygc2VsZWN0aW9ucyAoc2VjdGlvbiwgY2F0ZWdvcnkgZXRjKVxyXG4gICAgICogKi9cclxuICAgIHZhciBzZXRTZWxlY3Rpb25zRnJvbVVSTCA9IGZ1bmN0aW9uKHNlbGVjdGlvbil7XHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlIGNhdGVnb3JpZXMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb25cclxuICAgICAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBmdW5jdGlvbiAoY2F0ZWdvcmllcyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNjYXRlZ29yeS1zZWxlY3QnK3NlbGVjdGlvbi5pZCxjYXRlZ29yaWVzLCBzZWxlY3Rpb24uY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgfX0pO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFsbCB0aGUgIHN1YiBjYXRlZ29yaWVzIGFzc29jaWF0ZWQgd2l0aCBzZWxlY3RlZCBzZWN0aW9uIGFuZCBjYXRlZ29yeVxyXG4gICAgICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sIHNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgICAgICBzZWFyY2hEYXRhLnZhbGlkT3B0aW9uc1tzZWxlY3Rpb24uaWRdID0gdHJ1ZTsgLy8gVGhlcmUgYXJlIG9wdGlvbnMgZm9yIHRoaXMgcm93IGFuZCBzdWIgY2F0ZWdvcnlcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNzdWJzZWN0aW9uLXNlbGVjdCcrc2VsZWN0aW9uLmlkLHN1YkNhdGVnb3JpZXMsc2VsZWN0aW9uLnN1YkNhdGVnb3J5KTtcclxuICAgICAgICAgIH19KTtcclxuXHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlICBkZXNjcmlwdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb24sIGNhdGVnb3J5LCBhbmQgc3Vic2VjdGlvbnNcclxuICAgICAgICBEYXRhYmFzZS5nZXREZXNjcmlwdGlvbnNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sc2VsZWN0aW9uLmNhdGVnb3J5LHNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24gKGRlc2NyaXB0aW9ucyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNkZXNjcmlwdGlvbi1zZWxlY3QnK3NlbGVjdGlvbi5pZCxkZXNjcmlwdGlvbnMsc2VsZWN0aW9uLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgIH19KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zLCB3aXRoU2VhcmNoKSB7XHJcbiAgICAgIGlmKHdpdGhTZWFyY2gpe1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJJTklUX1NFTEVDVElPTlNcIiwgdXJsU2VsZWN0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSnVzdCBmaWxsIHRoZSBzZWN0aW9uIHNlbGVjdG9ycyB3aXRoIHNlY3Rpb25zXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0U2VjdGlvbnNGcm9tRGF0YWJhc2UoZnVuY3Rpb24oc2VjdGlvbnMpe1xyXG4gICAgICAgICAgdmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuICAgICAgICAgIGRwLnNvcnRTZWN0aW9ucyh7c2VjdGlvbnMgOiBzZWN0aW9uc30pOyAvLyBUT0RPIGZpeFxyXG5cclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcignI3NlY3Rpb24tc2VsZWN0JytpLHNlY3Rpb25zLCcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKHJvd051bWJlcikge1xyXG4gICAgICAgIHJvd3NEYXRhW3Jvd051bWJlcl0uY2xlYXIoKTtcclxuICAgICAgICAkKCcjZGVzY3JpcHRpb24tc2VsZWN0Jytyb3dOdW1iZXIrJywjc3ViY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIrJywjY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIpLmh0bWwoJycpO1xyXG4gICAgICAgICQoJyNzZWN0aW9uLXNlbGVjdCcrcm93TnVtYmVyKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAkKFwiLnNlbGVjdHBpY2tlclwiKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdChbXSxmYWxzZSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZXRBbGxTZWxlY3Rpb25EYXRhIDogZ2V0QWxsU2VsZWN0aW9uRGF0YSxcclxuICAgICAgc2V0U2VsZWN0aW9uc0Zyb21VUkwgOiBzZXRTZWxlY3Rpb25zRnJvbVVSTCxcclxuICAgICAgaW5pdCA6IGluaXQsXHJcbiAgICAgIGNsZWFyIDogY2xlYXIsXHJcbiAgICAgIGNhblNlYXJjaCA6IGNhblNlYXJjaFxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCJ2YXIgVGFibGVzTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIFRoZSBFREJzIHRoYXQgYmVsb25nIHRvIGVhY2ggcmVnaW9uXHJcbiAgdmFyIHJlZ2lvbnMgPSB7XHJcbiAgICBuIDogW1wiQ2VudHJhbGluZXNcIixcIkNvdW50aWVzIFBvd2VyXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJFbGVjdHJhXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFxyXG4gICAgICAgICBcIlBvd2VyY29cIixcIlNjYW5wb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlVuaXNvbiBOZXR3b3Jrc1wiLFwiVmVjdG9yIExpbmVzXCIsXHJcbiAgICAgICAgIFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiLFwiV2VsbGluZ3RvbiBFbGVjdHJpY2l0eVwiXSxcclxuICAgIHVuaSA6IFtcIkNvdW50aWVzIFBvd2VyXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlZlY3RvciBMaW5lc1wiLFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiXSxcclxuICAgIGVuaSA6IFtcIkNlbnRyYWxpbmVzXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJTY2FucG93ZXJcIixcIlVuaXNvbiBOZXR3b3Jrc1wiXSxcclxuICAgIHN3bmkgOiBbXCJFbGVjdHJhXCIsXCJQb3dlcmNvXCIsXCJXZWxsaW5ndG9uIEVsZWN0cmljaXR5XCJdLFxyXG4gICAgcyA6IFtcIkFscGluZSBFbmVyZ3lcIixcIkF1cm9yYSBFbmVyZ3lcIixcIkJ1bGxlciBFbGVjdHJpY2l0eVwiLFwiRWxlY3RyaWNpdHkgQXNoYnVydG9uXCIsXCJFbGVjdHJpY2l0eSBJbnZlcmNhcmdpbGxcIixcclxuICAgICAgICAgXCJNYWluUG93ZXIgTlpcIixcIk1hcmxib3JvdWdoIExpbmVzXCIsXCJOZWxzb24gRWxlY3RyaWNpdHlcIixcIk5ldHdvcmsgVGFzbWFuXCIsXHJcbiAgICAgICAgIFwiTmV0d29yayBXYWl0YWtpXCIsXCJPcmlvbiBOWlwiLFwiT3RhZ29OZXRcIixcIlRoZSBQb3dlciBDb21wYW55XCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICB1c2kgOiBbXCJBbHBpbmUgRW5lcmd5XCIsXCJCdWxsZXIgRWxlY3RyaWNpdHlcIixcIk1haW5Qb3dlciBOWlwiLFwiTWFybGJvcm91Z2ggTGluZXNcIixcIk5lbHNvbiBFbGVjdHJpY2l0eVwiLFwiTmV0d29yayBUYXNtYW5cIixcIk9yaW9uIE5aXCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICBsc2kgOiBbXCJBdXJvcmEgRW5lcmd5XCIsXCJFbGVjdHJpY2l0eSBBc2hidXJ0b25cIixcIkVsZWN0cmljaXR5IEludmVyY2FyZ2lsbFwiLFwiTmV0d29yayBXYWl0YWtpXCIsXCJPdGFnb05ldFwiLFwiVGhlIFBvd2VyIENvbXBhbnlcIl1cclxuICB9O1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIG1haW4gdGFibGVcclxuICB2YXIgc2VsZWN0ZWRSb3cgPSBcIlwiO1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIHRvdGFsc1xyXG4gIHZhciBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuXHJcbiAgLy8gSG9sZHMgdGhlIHRhYmxlIG9iamVjdHNcclxuICB2YXIgdGFibGVzID0gW107XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSB0YWJsZXMgdXNpbmcgdGhlIHRhYmxlIGRhdGFcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRhYmxlcyBkYXRhXHJcbiAgICogKi9cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2ggKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIGlmKHRhYmxlRGF0YS5jb21iaW5lZCl7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCwgdGFibGVEYXRhLnJvd3MsIFt0YWJsZURhdGEuc2VhcmNoLCB0YWJsZURhdGEuc2VhcmNoMiBdLCB0cnVlKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCx0YWJsZURhdGEucm93cyx0YWJsZURhdGEuc2VhcmNoLGZhbHNlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAvLyBDcmVhdGUgZWFjaCBvZiB0aGUgdGFibGVzIGFsb25nIHdpdGggYSB0aGUgdG90YWxzIHRhYmxlXHJcbiAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5pbnNlcnRUaXRsZXMoKTtcclxuICAgICAgdGFibGUuY3JlYXRlKCk7XHJcbiAgICAgIHRhYmxlLmNyZWF0ZVRvdGFsc1RhYmxlKGZhbHNlLCBzZWxlY3RlZFRvdGFsUm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlbmRlciBlYWNoIG9mIHRoZSB0YWJsZXNcclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXt0YWJsZS5yZW5kZXIoKTt9KTtcclxuICB9XHJcblxyXG4gIC8vIENhbGxlZCB3aGVuIGEgcm93IGNsaWNrZWQgZXZlbnQgb2Njb3Vyc1xyXG4gIHZhciByb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgaWYoc2VsZWN0ZWRSb3cgPT09IHVwZGF0ZS5yb3dJRCl7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit1cGRhdGUuZWRiK1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICAgIHJvd1NlbGVjdGVkID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkUm93ICE9PSBcIlwiKXtcclxuICAgICAgdmFyIHRleHQgPSAkKFwiI1wiK3NlbGVjdGVkUm93K1wiIC5lZGItY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit0ZXh0K1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZFJvdyA9IHVwZGF0ZS5yb3dJRDtcclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5lZGItY2VsbDpjb250YWlucygnXCIrdXBkYXRlLmVkYitcIicpXCIpLnBhcmVudCgpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucm93Q2xpY2tlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgdG90YWxSb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIHJlZ2lvbiA9IHVwZGF0ZS5yZWdpb247XHJcblxyXG4gICAgaWYoc2VsZWN0ZWRUb3RhbFJvdyA9PT0gdXBkYXRlLnJvd0lEKXtcclxuICAgICAgdmFyIG9sZFJlZyA9ICQoXCIjXCIrdXBkYXRlLnJvd0lEK1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcblxyXG4gICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICQodGhpcykudGV4dCgpID09PSByZWdpb247XHJcbiAgICAgIH0pLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG4gICAgICBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkVG90YWxSb3cgIT09IFwiXCIpe1xyXG4gICAgICAgIHZhciBvbGRSZWcgPSAkKFwiI1wiK3NlbGVjdGVkVG90YWxSb3crXCIgLnJlZy1jZWxsXCIpLnRleHQoKTtcclxuICAgICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrb2xkUmVnK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkgPT09IG9sZFJlZztcclxuICAgICAgICB9KS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcInJvdy1zZWxlY3RlZFwiKTsgLy8gU2VsZWN0cyBlZGIgcm93IGluIGFsbCB0YWJsZXNcclxuICAgIH1cclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gcmVnaW9uO1xyXG4gICAgfSkucGFyZW50KCkuYWRkQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcblxyXG4gICAgLy8gaWYgaWQgZW5kcyB3aXRoIGxldHRlciBzZXQgdG8gaWRcclxuICAgIHNlbGVjdGVkVG90YWxSb3cgPSB1cGRhdGUucm93SUQ7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS50b3RhbHNSb3dTZWxlY3RlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgdmFyIGFwcGx5Q1BJID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIGNwaVZhbHVlcyA9IHVwZGF0ZS5jcGlWYWx1ZXM7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIGlmKHRhYmxlLmNhbkFwcGx5Q1BJKCkpe1xyXG4gICAgICAgIHRhYmxlLmFwcGx5Q1BJKGNwaVZhbHVlcyk7XHJcbiAgICAgICAgdGFibGUuY3JlYXRlVG90YWxzVGFibGUodHJ1ZSwgc2VsZWN0ZWRUb3RhbFJvdyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciByZXZlcnRDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIHRhYmxlLnJldmVydENQSSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgICAgaWYoZy5pZCA9PT0gdGFibGVEYXRhLmlkKXtcclxuICAgICAgICAgIGlmKGcuaXNDb21iaW5lZCl7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzLCB0YWJsZURhdGEudGFibGUxUm93cywgdGFibGVEYXRhLnRhYmxlMlJvd3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy51cGRhdGUodGFibGVEYXRhLnJvd3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHNcclxuICBldmVudHMub24oXCJJTklUX0RBVEFcIiwgaW5pdCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX0NMSUNLRURcIiwgcm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiVE9UQUxfUk9XX0NMSUNLRURcIiwgdG90YWxSb3dDbGlja2VkKTtcclxuICBldmVudHMub24oXCJBUFBMWV9DUElcIiwgYXBwbHlDUEkpO1xyXG4gIGV2ZW50cy5vbihcIlJFVkVSVF9DUElcIiwgcmV2ZXJ0Q1BJKTsgLy8gV0hBVD9cclxuICBldmVudHMub24oXCJST1dfVVBEQVRFXCIsIHVwZGF0ZSk7XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVnaW9ucyA6IHJlZ2lvbnNcclxuICB9XHJcbn0pKCk7XHJcbiJdfQ==
