function CombinedGraph(t,e,i,o,s,r){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.vectorID="#vector-graph-"+t,this.rows1=i,this.rows2=o,this.combinedRows=e,this.selection1=s,this.selection2=r,this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t),this.$titleVector=$("#title-vector-"+t)}function DataProcessor(){}function DataStructure(t,e,i){this.selectionData=t,this.selectionTable=e,this.combineData=i}function Selection(t,e,i,o){this.aTable=t,this.bTable=e,this.cTable=i,this.dTable=o}function DataTables(t,e,i,o,s,r){this.tableA=t,this.tableB=e,this.tableC=i,this.tableD=o,this.tableAB=s,this.tableCD=r}function SelectionData(t,e,i,o,s){this.rows=t,this.title=e,this.subTitle=i,this.id=s,this.unit=o}function SelectionDataCombined(t,e,i,o,s,r,n,a){this.rows=t,this.title1=o,this.title2=s,this.unit1=r,this.unit2=n,this.id=a,this.table1Rows=e,this.table2Rows=i}function SelectedTableData(t,e,i,o,s){this.rows=t,this.id=e,this.title=i,this.subTitle=o,this.unit=s}function Graph(t,e,i){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.rows=e,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t)}function SelectionRowController(t){this.idNumb=t,this.rowSelections={id:t,section:"",category:"",subCategory:"",description:""},this.setInitialState=function(t){this.rowSelections=t},this.clear=function(){this.rowSelections={id:this.id,section:"",category:"",subCategory:"",description:""}},this.validSelection=function(){return""===this.rowSelections.section||""!==this.rowSelections.description},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0];this.rowSelections.section=i.section,this.rowSelections.category=i.category,this.rowSelections.subCategory=i.subCategory,this.rowSelections.description=i.description},this.updateSection=function(t){t.id===this.idNumb&&(this.rowSelections.category="",this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.section=t.section,events.emit("NEW_SECTION",{id:this.idNumb,selection:this.rowSelections}))},this.updateCategory=function(t){t.id===this.idNumb&&(this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.category=t.category,events.emit("NEW_CATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateSubCategory=function(t){t.id===this.idNumb&&(this.rowSelections.description="",this.rowSelections.subCategory=t.subCategory,events.emit("NEW_SUBCATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateDescription=function(t){t.id===this.idNumb&&(this.rowSelections.description=t.description,events.emit("NEW_DESCRIPTION",{id:this.idNumb,selection:this.rowSelections}))},this.getRowSelection=function(){return this.rowSelections},events.on("SECTION_CHANGED",this.updateSection.bind(this)),events.on("CATEGORY_CHANGED",this.updateCategory.bind(this)),events.on("SUBCATEGORY_CHANGED",this.updateSubCategory.bind(this)),events.on("DESCRIPTION_CHANGED",this.updateDescription.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SectionSelect(t){this.idNumb=t,this.id="#section-select"+t,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=this.id,o=t.filter(function(t){return t.id===e})[0];Database.getSectionsFromDatabase(function(t){dp.sortSections({sections:t}),addOptionsToSelector(i,t,o.section)})},this.updated=function(t){events.emit("SECTION_CHANGED",{section:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function CategorySelect(t){this.idNumb=t,this.id="#category-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getCategoriesFromDatabase(i.section,function(t,e){e||addOptionsToSelector(o,t,i.category)})},this.updated=function(t){events.emit("CATEGORY_CHANGED",{category:this.$select.find("option:selected").text(),id:this.idNumb})},this.sectionChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id;Database.getCategoriesFromDatabase(t.selection.section,function(t,i){i||addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("NEW_SECTION",this.sectionChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SubCategorySelect(t){this.idNumb=t,this.id="#subcategory-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getSubCategoriesFromDatabase(i.section,i.category,function(t,e){e||addOptionsToSelector(o,t,i.subCategory)})},this.categoryChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id,i=this.idNumb;Database.getSubCategoriesFromDatabase(t.selection.section,t.selection.category,function(t,o){o?events.emit("SUBCATEGORY_CHANGED",{subCategory:"",id:i}):addOptionsToSelector(e,t,"")})}},this.updated=function(t){events.emit("SUBCATEGORY_CHANGED",{subCategory:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("NEW_CATEGORY",this.categoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function DescriptionSelect(t){this.idNumb=t,this.id="#description-select"+t,this.$select=$(this.id),this.updated=function(t){events.emit("DESCRIPTION_CHANGED",{description:this.$select.find("option:selected").text(),id:this.idNumb})},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getDescriptionsFromDatabase(i.section,i.category,i.subCategory,function(t,e){e||addOptionsToSelector(o,t,i.description)})},this.subCategoryChangedListener=function(t){if(t.id===this.idNumb){var e=this.id;Database.getDescriptionsFromDatabase(t.selection.section,t.selection.category,t.selection.subCategory,function(t){addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("CATEGORY_CHANGED",clearMyself.bind(this)),events.on("NEW_SUBCATEGORY",this.subCategoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function clearMyself(t){t.id===this.idNumb&&(this.$select.html(""),this.$select.selectpicker("refresh"))}function addOptionsToSelector(t,e,i){$(t).html("");for(var o=0;o<e.length;o++)null!==e[o]&&(e[o]===i?$(t).append("<option selected>"+e[o]+"</option>"):$(t).append("<option>"+e[o]+"</option>"));$(t).selectpicker("refresh")}function Table(t,e,i,o){this.id=t,this.isCombined=o,this.rows=e,this.unit=e[0].units,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.dpFormat=d3.format(".4r"),this.availableYears=this.getAvailableYears(),this.noCPICells=[],this.$table=$("#table-"+t),this.$totalsTable=$("#table-total-"+t),this.$title=$("#title-"+t)}CombinedGraph.prototype.isCombined=function(){return!0},CombinedGraph.prototype.getID=function(){return this.id},CombinedGraph.prototype.getSelection1Title=function(){var t=null===this.selection1?"":this.selection1.subCategory;return this.selection1.description+", "+this.selection1.category+", "+t},CombinedGraph.prototype.getSelection2Title=function(){var t=null===this.selection2?"":this.selection2.subCategory;return this.selection2.description+", "+this.selection2.category+",  "+t},CombinedGraph.prototype.getUnit=function(){return this.rows1[0].units+" / "+this.rows2[0].units},CombinedGraph.prototype.getUnit1=function(){return this.rows1[0].units},CombinedGraph.prototype.getUnit2=function(){return this.rows2[0].units},CombinedGraph.prototype.insertTitles=function(){var t="<h4>Ratio "+this.id.charAt(0).toUpperCase()+" / "+this.id.charAt(1).toUpperCase()+"</h4>",e='<h4 class="title"><span style="Color: black;">'+this.id.charAt(0).toUpperCase()+": </span>"+this.getSelection1Title()+"</h4>",i='<h4 class="title"><span style="Color: black;">'+this.id.charAt(1).toUpperCase()+": </span>"+this.getSelection2Title()+"</h4>";this.$titleBar.append(t),this.$titleBar.append(e),this.$titleBar.append(i),this.$titleBox.append(t),this.$titleBox.append(e),this.$titleBox.append(i),this.$titleVector.append(t),this.$titleVector.append(e),this.$titleVector.append(i)},CombinedGraph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.combinedRows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.combinedRows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit);var i=dp.createDataForVectorGraph(this.rows1,this.rows2);VectorModule.createVectorGraph(i,this.getUnit2(),this.getUnit1(),this.vectorID)},CombinedGraph.prototype.update=function(t,e,i){this.rows=t,this.rows1=e,this.rows2=i,this.create()},String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t){var e=this.filter(function(e){return e==t});return e.length>0}});var CompareModule=function(){function t(t,i,o){var s=i[0].category+", "+i[0].subCategory+", "+i[0].description,r=i[1].category+", "+i[1].subCategory+", "+i[1].description,n=i[2].category+", "+i[2].subCategory+", "+i[2].description,a=i[3].category+", "+i[3].subCategory+", "+i[3].description,c="<h3> Ratio (A / B ) over ( C / D ) </h3>",l='<span class="letter">A: </span>',h='<span class="letter">B: </span>',u='<span class="letter">C: </span>',d='<span class="letter">D: </span>',p='<h4 class="title">'+l+" "+s+"</h4>",b='<h4 class="title">'+h+" "+r+"</h4>",f='<h4 class="title">'+u+" "+n+"</h4>",v='<h4 class="title">'+d+" "+a+"</h4>";$("#title-vector-abcd").append(c).append(p).append(b).append(f).append(v),VectorModule.createVectorGraph(e.createDataForVectorGraph(t[0].rows,t[1].rows),o[0]+" / "+o[1],o[2]+" / "+o[3],"#vector-graph-abcd"),$("#vector-full-abcd").show()}var e=new DataProcessor,i={},o=!1,s=$("#error-div"),r=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},n=function(){if(!selectionRows.canSearch())return void(o||(s.append('<h4 style="color : red;">Partial Row Selected</h4>'),o=!0));var t={};selectionRows.getAllSelectionData().forEach(function(e){""!==e.section&&(t["s"+e.id]=e.section,t["c"+e.id]=e.category,t["sc"+e.id]=e.subCategory,t["d"+e.id]=e.description)}),window.location.replace("compare?"+r(t))},a=function(o){selectionRows.init(o,!0),Database.getRowsForSearch(o,function(s){s.length>0&&null!==s[0].fcast_yr&&s.forEach(function(t){t.obs_yr=t.fcast_yr}),i.selection=new Selection(o[0],o[1],o[2],o[3]),i.rows=s,i.sortedRows=e.filterRowsToTablesAndCopy(s,i.selection);var r=[];i.sortedRows.forEach(function(t){"a"===t.id&&$("#tab-a").addClass("in active"),"ab"!==t.id&&"cd"!==t.id||r.push(t),$("#full-dash-"+t.id).show(),$("#tab-"+t.id).addClass("in active")}),2===r.length&&t(r,o,[i.sortedRows[0].rows[0].units,i.sortedRows[1].rows[0].units,i.sortedRows[2].rows[0].units,i.sortedRows[3].rows[0].units]),events.emit("INIT_DATA",{data:i.sortedRows}),events.emit("ROW_CLICKED",{rowID:"rowa0",rowNumb:0,edb:"Alpine Energy"}),events.emit("TOTAL_ROW_CLICKED",{rowID:"row-tot-a0",region:"South Island"}),i.sortedRows.forEach(function(t){"a"!==t.id&&$("#tab-"+t.id).removeClass("in active")}),c("#top-tab")})},c=function(t){$("html,body").animate({scrollTop:$(t).offset().top},"slow")},l=function(){if(CPIModule.isValid()&&void 0!==i.selection){var t=e.copyRows(i.rows);h(t,CPIModule.getCPIValues());var o=e.filterRowsToTablesAndCopy(t,i.selection);events.emit("ROW_UPDATE",{data:o}),events.emit("APPLY_CPI",{cpiValues:CPIModule.getCPIValues()})}},h=function(t,e){var i=t.filter(function(t){return t.units.includes("$")});if(0!==i.length)for(var o=i.reduce(function(t,e){return t.disc_yr<e.disc_yr?t:e}).obs_yr,s=i.reduce(function(t,e){return t.disc_yr>e.disc_yr?t:e}).obs_yr,r=o;r<=s;r++)i.forEach(function(t,o){for(var s=i[o].obs_yr,n=i[o].value,a=0;a<e.length;a++)e[a].year===r&&s<=r&&(n*=1+e[a].value/100);i[o].value=n})},u=function(){events.emit("ROW_UPDATE",{data:i.sortedRows}),events.emit("REVERT_CPI",{cpiValues:""})};return{loadSearchFromURL:a,search:n,applyCPI:l,revertCPI:u}}();$(document).ready(function(){$(".nav-link").removeClass("active"),$("#benchmarks-link").addClass("active"),$("#search-btn-compare").click(function(){CompareModule.search()}),$("cpi").click(function(){CompareModule.applyCPI()})});var CPIModule=function(){var t=$("#cpi-form");$.validator.setDefaults({errorClass:"help-block",highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")}});var e={required:!0,number:!0,min:.1,max:100},i={required:"Please enter a percentage",number:"Please enter a valid number",min:"Please enter a percentage greater than 0",max:"Please enter a percentage less than 100"};t.validate({rules:{Y2012:e,Y2013:e,Y2014:e,Y2015:e,Y2016:e},messages:{Y2012:i,Y2013:i,Y2014:i,Y2015:i,Y2016:i}});var o=function(){return[{year:2012,value:+t.find("#Y2012").val()},{year:2013,value:+t.find("#Y2013").val()},{year:2014,value:+t.find("#Y2014").val()},{year:2015,value:+t.find("#Y2015").val()},{year:2016,value:+t.find("#Y2016").val()}]},s=function(){return t.valid()};return{getCPIValues:o,isValid:s}}(),dp=new DataProcessor;DataProcessor.prototype.copyDataTables=function(t){for(var e=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],i=[[],[],[],[],[],[]],o=0;o<e.length;o++){var s=e[o];if(void 0!==s)for(var r=0;r<s.length;r++)i[o].push({category:s[r].category,description:s[r].description,disc_yr:s[r].disc_yr,edb:s[r].edb,fcast_yr:s[r].fcast_yr,network:s[r].network,note:s[r].note,obs_yr:s[r].obs_yr,p_key:s[r].p_key,sch_ref:s[r].sch_ref,schedule:s[r].schedule,section:s[r].section,sub_category:s[r].sub_category,units:s[r].units,value:s[r].value})}return new DataTables(i[0],i[1],i[2],i[3],i[4],i[5])},DataProcessor.prototype.copyRows=function(t){var e=[];return t.forEach(function(t){e.push({value:t.value,category:t.category,description:t.description,disc_yr:t.disc_yr,edb:t.edb,fcast_yr:t.fcast_yr,network:t.network,note:t.note,obs_yr:t.obs_yr,p_key:t.p_key,sch_ref:t.sch_ref,schedule:t.schedule,section:t.section,sub_category:t.sub_category,units:t.units})}),e},DataProcessor.prototype.createDataStructuresWithCopy=function(t){for(var e=[],i=[],o=[],s=[t.tableA.length>0,t.tableB.length>0,t.tableC.length>0,t.tableD.length>0],r=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],n=["a","b","c","d","ab","cd"],a=0;a<s.length;a++)if(s[a]){var c=r[a][0].section+", "+r[a][0].category,l=null===r[a][0].sub_category?r[a][0].description:r[a][0].sub_category+", "+r[a][0].description;if(i.push(new SelectedTableData(r[a],n[a],l,c,r[a][0].units)),e.push(new SelectionData(r[a],l,c,r[a][0].units,n[a])),("a"===n[a]||"c"===n[a])&&s[a+1]){var h=0===a?4:3,u=r[a+1][0].section+", "+r[a+1][0].category,d=null===r[a+1][0].sub_category?r[a+1][0].description:r[a+1][0].sub_category+", "+r[a+1][0].description;i.push(new SelectedTableData(r[a+h],n[a+h],l+", "+c,d+", "+u,r[a+1][0].units)),o.push(new SelectionDataCombined(r[a+h],r[a],r[a+1],l+" "+c,d+" "+u,r[a][0].units,r[a+1][0].units,n[a+h]))}}return new DataStructure(e,i,o)},DataProcessor.prototype.validateSearchParams=function(t,e){var i=!0;return t.forEach(function(t,o){""===t.subCategory&&e[o]&&(i=!1),""!==t.section&&""!==t.category&&""!==t.description||""===t.section&&""===t.category&&""===t.description||(i=!1)}),i},DataProcessor.prototype.matchDBRow=function(t,e){return t.section===e.section&&t.category===e.category&&t.description===e.description&&(null!==t.sub_category?e.subCategory===t.sub_category:""===e.subCategory)},DataProcessor.prototype.filterRowsToTables=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)});var n=[];if(i.length>0&&n.push({id:"a",rows:i,search:e.aTable}),i.length>0&&o.length>0)var a=dp.combineTables(i,o);if(s.length>0&&r.length>0)var c=dp.combineTables(s,r);return new DataTables(i,o,s,r,a,c)},DataProcessor.prototype.filterRowsToTablesAndCopy=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});if(i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)}),i.length>0&&o.length>0)var n=dp.combineTables(i,o);if(s.length>0&&r.length>0)var a=dp.combineTables(s,r);var c=this.copyDataTables(new DataTables(i,o,s,r,n,a)),l=[];if(i.length>0&&l.push({id:"a",rows:c.tableA,search:e.aTable,combined:!1}),o.length>0&&l.push({id:"b",rows:c.tableB,search:e.bTable,combined:!1}),s.length>0&&l.push({id:"c",rows:c.tableC,search:e.cTable,combined:!1}),r.length>0&&l.push({id:"d",rows:c.tableD,search:e.dTable,combined:!1}),i.length>0&&o.length>0&&l.push({id:"ab",rows:c.tableAB,table1Rows:c.tableA,table2Rows:c.tableB,search:e.aTable,search2:e.bTable,combined:!0}),s.length>0&&r.length>0){var a=dp.combineTables(s,r);l.push({id:"cd",rows:c.tableCD,table1Rows:c.tableC,table2Rows:c.tableD,search:e.cTable,search2:e.dTable,combined:!0})}return l},DataProcessor.prototype.combineTables=function(t,e){for(var i=[],o=t,s=e,r=0;r<o.length;r++)for(var n=0;n<s.length;n++)if(o[r].edb===s[n].edb&&o[r].obs_yr===s[n].obs_yr&&o[r].disc_yr===s[n].disc_yr){i.push({disc_yr:s[n].disc_yr,edb:s[n].edb,obs_yr:s[n].obs_yr,value:o[r].value/("0"===s[n].value||0===s[n].value?1:s[n].value),section:s[n].section+""+s[n].description+" over ",description:o[r].section+" "+o[r].description,unitA:o[r].units,unitB:s[n].units,unit:o[r].units+" / "+s[n].units});break}return i},DataProcessor.prototype.createDataForVectorGraph=function(t,e){var i=t,o=e,s=[],r=[],n=[];t.forEach(function(t){if(!n.includes(t.obs_yr))for(var i=0;i<e.length;i++)if(e[i].obs_yr===t.obs_yr){n.push(t.obs_yr);break}});for(var a=0;a<i.length;a++)if(!s.includes(i[a].edb)){var c=i.filter(function(t){return t.edb===i[a].edb}),l=o.filter(function(t){return t.edb===i[a].edb});s.push(i[a].edb);for(var h=[],u=[],d=0;d<c.length;d++)if(!h.includes(c[d].disc_yr)&&n.includes(c[d].disc_yr)){h.push(c[d].disc_yr);var p=c.filter(function(t){return t.disc_yr===c[d].disc_yr}),b=l.filter(function(t){return t.disc_yr===c[d].disc_yr});if(p.length!=b.length)return[];for(var f=0;f<p.length;f++)u.push({year:+p[f].disc_yr,valueA:+p[f].value,valueB:+b[f].value})}u.sort(function(t,e){return t.year-e.year}),r.push({edb:i[a].edb,years:u})}return r},DataProcessor.prototype.createDataForBoxPlot=function(t){for(var e=[],i=[],o=0;o<t.length;o++)e.includes(t[o].obs_yr)||(i.push(t.filter(function(e){return e.obs_yr===t[o].obs_yr})),e.push(t[o].obs_yr));for(var s=[],r=[],n=1/0,a=-(1/0),o=0;o<i.length;o++){var c=[];c[0]=""+i[o][0].obs_yr;for(var l=""+i[o][0].obs_yr,h=[],u=0;u<i[o].length;u++){var d=+i[o][u].value,p=i[o][u].edb;d>a&&(a=d),d<n&&(n=d),h.push(d),r.push({year:l,edb:p,value:d})}c[1]=h,s.push(c)}return s.sort(function(t,e){return t[0]-e[0]}),{min:n,max:a,data:s,scatterData:r}},DataProcessor.prototype.createDataForGroupedGraph=function(t){var e=[];t.forEach(function(t){e.includes(t.obs_yr)||e.push(t.obs_yr)}),e.sort(function(t,e){return+t-+e});for(var i=[],o=[],s=0;s<t.length;s++)if(o.includes(t[s].edb))for(var r=0;r<i.length;r++)i[r].edb===t[s].edb&&(i[r][t[s].obs_yr]=+t[s].value);else{o.push(t[s].edb);var n={edb:t[s].edb};n[t[s].obs_yr]=+t[s].value,i.push(n)}return{data:i,keys:e}},DataProcessor.prototype.sortSections=function(t){t.sections.sort(function(t,e){for(var i=0;!isNaN(t.charAt(i));)i++;var o=t.substring(0,i);for(i=0;!isNaN(e.charAt(i));)i++;var s=e.substring(0,i);return o!==s?o-s:[t,e].sort()[0]===t?-1:1})},DataProcessor.prototype.applyCPIToTableRows=function(t,e){t.forEach(function(i,o){for(var s=t[o].obs_yr,r=t[o].value,n=0;n<e.length;n++)s<=e[n].year&&(r*=1+e[n].value/100);t[o].value=r})},DataProcessor.prototype.addToSelection=function(t,e,i,o){for(var s=0;s<o.length;s++)o[s].id+""==t+""&&("section"===e?o[s].section=i:"category"===e?o[s].category=i:"subcategory"===e?o[s].subCategory=i:"description"===e&&(o[s].description=i))},DataProcessor.prototype.createTableTotals=function(t,e,i){for(var o=["n","uni","eni","swni","s","usi","lsi"],s={},r=0;r<i.length;r++)t.filter(function(t){return t.obs_yr===i[r]}).forEach(function(t){o.forEach(function(i){e[i].includes(t.edb)&&(void 0===s[i]?s[i]=[+t.value]:r===s[i].length?s[i].push(+t.value):s[i][r]+=+ +t.value)})});for(var n=[],r=0;r<i.length;r++)n.push(s.n[r]+s.s[r]);return s.nz=n,s},Graph.prototype.isCombined=function(){return!1},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.getID=function(){return this.id},Graph.prototype.getTitle=function(){return this.selection.description+", "+this.selection.subCategory},Graph.prototype.getSubTitle=function(){return this.selection.section+", "+this.selection.category},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.insertTitles=function(){this.$titleBar.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>"),this.$titleBox.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Graph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.rows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.rows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit)},Graph.prototype.update=function(t){this.rows=t,this.create()};var GraphModule=function(){var t=[],e=d3.scaleOrdinal().range(["#BBDEFB","#64B5F6","#1976D2","#1565C0","#0D47A1","#d0743c","#ff8c00"]),i=(d3.scaleOrdinal().range(["#FF7373","#FF4C4C","#FF2626","#B20000","#D90000","#d0743c","#ff8c00"]),d3.scaleOrdinal().range(["#C1FFC1","#90EE90","#5BC85B","#31A231","#137B13","#d0743c","#ff8c00"])),o=function(e){e.data.forEach(function(e){e.combined?t.push(new CombinedGraph(e.id,e.rows,e.table1Rows,e.table2Rows,e.search,e.search2)):t.push(new Graph(e.id,e.rows,e.search))}),t.forEach(function(t){t.insertTitles(),t.create()})},s=function(e){e.data.forEach(function(e){t.forEach(function(t){t.getID()===e.id&&(t.isCombined()?t.update(e.rows,e.table1Rows,e.table2Rows):t.update(e.rows))})})},r=function(t){return t.unselect?(d3.selectAll(".line-selected-table").classed("line-selected",!1),void d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1)):(alreadySelected=!1,d3.selectAll(".bar-selected").datum(function(t){return t}).attr("fill",function(t){return e(t.key)}),d3.selectAll(".bar-selected").classed("bar-selected",!1),void(alreadySelected||(d3.selectAll("rect."+t.edb.replace(/ /g,"")).classed("bar-selected",!0).datum(function(t){return t}).attr("fill",function(t){return i(t.key)}),d3.selectAll(".line-selected-table").classed("line-selected",!1),d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1),d3.selectAll("line."+t.edb.replace(/ /g,"")).classed("line-selected-table",!0),d3.selectAll(".dot."+t.edb.replace(/ /g,"")).classed("vec-dot-selected",!0))))};return events.on("INIT_DATA",o),events.on("ROW_CLICKED",r),events.on("ROW_UPDATE",s),{update:s}}(),selectionRows=function(){for(var t=[new SelectionRowController(0),new SelectionRowController(1),new SelectionRowController(2),new SelectionRowController(3)],e=[],i=0;i<4;i++)e.push({s:new SectionSelect(i),c:new CategorySelect(i),sc:new SubCategorySelect(i),d:new DescriptionSelect(i)});var o=function(){var e=[];return t.forEach(function(t){e.push(t.getRowSelection())}),e},s=function(){for(var e=0;e<t.length;e++)if(!t[e].validSelection())return!1;return!0},r=function(t){Database.getCategoriesFromDatabase(t.section,function(e,i){i||addOptionsToSelector("#category-select"+t.id,e,t.category)}),Database.getSubCategoriesFromDatabase(t.section,t.category,function(e,i){i||(searchData.validOptions[t.id]=!0,addOptionsToSelector("#subsection-select"+t.id,e,t.subCategory))}),Database.getDescriptionsFromDatabase(t.section,t.category,t.subCategory,function(e,i){i||addOptionsToSelector("#description-select"+t.id,e,t.description)})},n=function(t,e){e?events.emit("INIT_SELECTIONS",t):Database.getSectionsFromDatabase(function(t){var e=new DataProcessor;e.sortSections({sections:t});for(var i=0;i<4;i++)addOptionsToSelector("#section-select"+i,t,"")})},a=function(e){t[e].clear(),$("#description-select"+e+",#subcategory-select"+e+",#category-select"+e).html(""),$("#section-select"+e).find("option:selected").removeAttr("selected"),$(".selectpicker").selectpicker("refresh")};return n([],!1),{getAllSelectionData:o,setSelectionsFromURL:r,init:n,clear:a,canSearch:s}}();Table.prototype.getTitle=function(){if(this.isCombined){var t=null===this.selection[0]?"":this.selection[0].subCategory;return this.selection[0].category+", "+t+", "+this.selection[0].description}return(void 0===this.subCategory?"":this.selection.subCategory+", ")+" "+this.selection.description},Table.prototype.getSubTitle=function(){if(this.isCombined){var t=null===this.selection[1]?"":this.selection[1].subCategory;return this.selection[1].category+", "+t+", "+this.selection[1].description}return this.selection.section+", "+this.selection.category},Table.prototype.update=function(t){this.rows=t,this.createTotalsTable(!0,"")},Table.prototype.totalsRowSelected=function(t){var e=t.rowID.charAt(t.rowID.length-1),i="row-tot-"+this.id+e;SingleBarModule.showBarWithRowElem(i,t.region,"#bar-total-"+this.id,"#head-row-totals-"+this.id,"#table-total-"+this.id,this.unit)},Table.prototype.rowClicked=function(t){var e=t.rowID.slice(-1);isNaN(t.rowID.slice(-2))||(e=t.rowID.slice(-2)),SingleBarModule.showBarWithRowElem("row"+this.id+e,t.edb,"#bar-"+this.id,"#head-row-"+this.id,"#table-"+this.id,this.unit)},Table.prototype.getAvailableYears=function(){t=[];var t=[];return this.rows.forEach(function(e){t.includes(e.obs_yr)||t.push(e.obs_yr)}),t.sort(function(t,e){return+t-+e}),t},Table.prototype.canApplyCPI=function(){return!this.isCombined&&this.unit.includes("$")},Table.prototype.applyCPI=function(t){this.noCPICells.length>0&&this.revertCPI();var e=this.$table.find(".cell"),i=this.noCPICells;this.id;e.each(function(){i.push({id:$(this).attr("id"),value:$(this).text()})});var o=1/0,s=-(1/0);e.each(function(){var t=+$(this).attr("class").split(" ")[1];o=t<o?t:o,s=t>s?t:s});var r=this.dpFormat;e.each(function(){for(var e=+$(this).attr("class").split(" ")[1],i=$(this).attr("origvalue"),n=o;n<=s;n++)for(var a=0;a<t.length;a++)t[a].year===n&&e<=n&&(i*=1+t[a].value/100,i=r(i));$(this).text(i)})},Table.prototype.revertCPI=function(){if(this.noCPICells.length>0){var t=this.dpFormat;this.noCPICells.forEach(function(e){$("#"+e.id).text(t(e.value))})}},Table.prototype.insertTitles=function(){if(this.isCombined){var t=this.id.charAt(0).toUpperCase(),e=this.id.charAt(1).toUpperCase();this.$title.append("<h3>Ratio analysis "+t+" / "+e+"</h4>"),this.$title.append('<h4 class="title"><span style="color: black;">'+t+": </span>"+this.title+'</h4><h4 class="title"><span style="color: black;">'+e+": </span>"+this.subTitle+"</h4>")}else this.$title.append('<h2 class="title">'+this.title+"</h2>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Table.prototype.create=function(){var t=this.createTableData(this.rows),e="";t[0].years.forEach(function(t){e+="<th>"+t.year+"</th>"}),this.$table.append('<tr id="head-row-'+this.id+'" class="table-row table-head"> <th>EDB</th>'+e+"</tr>");for(var i=0,o=0,s=[],r=0;r<t.length;r++){for(var n=t[r],a=n.edb,e=n.years,c="<tr class='table-row' id=row"+this.id+o+"><th class='edb-cell'>"+a+"</th>",l=0;l<e.length;l++){var h=e[l];c+="<th origValue='"+h.value+"' class='cell "+h.year+"' id='t"+this.id+i+"'>"+this.dpFormat(h.value)+"</th>",s.push({id:"#t"+this.id+i,value:h.value}),i++}this.$table.append(c+"</tr>"),$("#row"+this.id+o).click(function(){var t=this.id.slice(-1);isNaN(this.id.slice(-2))||(t=this.id.slice(-2));var e=$("#"+this.id+" .edb-cell").text();events.emit("ROW_CLICKED",{rowID:this.id,rowNumb:t,edb:e})}),o++}this.cellValues=s},Table.prototype.createTotalsTable=function(t,e){var i=dp.createTableTotals(this.rows,TablesModule.regions,this.availableYears),o={n:"North Island",uni:"Upper North Island",eni:"Eastern North Island",swni:"South-West North Island",s:"South Island",usi:"Upper South Island",lsi:"Lower South Island",nz:"New Zealand"},s=[],r="";this.availableYears.forEach(function(t){r+="<th>"+t+"</th>"});var n=0,a=0;t&&this.$totalsTable.html("");var c=29;this.$totalsTable.append('<tr id="head-row-totals-'+this.id+'" class="table-row table-head"> <th>Region</th>'+r+"</tr>");for(var l in i)if(i.hasOwnProperty(l)){var h="<tr class='table-row' id=row-tot-"+this.id+a+">",u=this.dpFormat,d=this.noCPICells;h+="<th class='reg-cell'>"+o[l]+"</th>";var p=this.id;i[l].forEach(function(t){var e;e="nz"===l?t/c:t/TablesModule.regions[l].length,h+="<th id='t-total"+p+n+"' origValue='"+e+"' class='cell'>"+u(e)+"</th>",s.push({id:"#t-total"+p+n,value:e}),d.push({id:"t-total"+p+n,value:e}),n++}),this.$totalsTable.append(h+"</tr>"),$("#row-tot-"+this.id+a).click(function(){var t=$("#"+this.id+" .reg-cell").text();events.emit("TOTAL_ROW_CLICKED",{rowID:this.id,region:t})}),a++}""!==e&&$("#"+e).addClass("row-selected"),this.totalCellValues=s},Table.prototype.createTableData=function(t){var e={};t.forEach(function(t){void 0===e[t.edb]&&(e[t.edb]=t.edb)});var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=t.filter(function(t){return t.edb===e[o]}),r=[];s.forEach(function(t){r.push({year:t.obs_yr,value:t.value})}),r.sort(function(t,e){return t.year>e.year}),i.push({edb:e[o],years:r})}return i},Table.prototype.render=function(){this.applyGradientCSS(this.cellValues),this.applyGradientCSS(this.totalCellValues)},Table.prototype.applyGradientCSS=function(t){var e=!1,i=-(1/0);t.forEach(function(t){i=+t.value>i?+t.value:i});for(var o=0;o<t.length;o++){var s=e?s:+t[o].value/i*100;$(t[o].id).css({background:"-webkit-gradient(linear, left top, right top, color-stop("+s+"%,#7bbfd6), color-stop("+s+"%,#FFF))"})}};var TablesModule=function(){var t={n:["Centralines","Counties Power","Eastland Network","Electra","Horizon Energy","Northpower","Powerco","Scanpower","The Lines Company","Top Energy","Unison Networks","Vector Lines","Waipa Networks","WEL Networks","Wellington Electricity"],uni:["Counties Power","Horizon Energy","Northpower","The Lines Company","Top Energy","Vector Lines","Waipa Networks","WEL Networks"],eni:["Centralines","Eastland Network","Scanpower","Unison Networks"],swni:["Electra","Powerco","Wellington Electricity"],s:["Alpine Energy","Aurora Energy","Buller Electricity","Electricity Ashburton","Electricity Invercargill","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Network Waitaki","Orion NZ","OtagoNet","The Power Company","Westpower"],usi:["Alpine Energy","Buller Electricity","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Orion NZ","Westpower"],lsi:["Aurora Energy","Electricity Ashburton","Electricity Invercargill","Network Waitaki","OtagoNet","The Power Company"]
},e="",i="",o=[],s=function(t){t.data.forEach(function(t){t.combined?o.push(new Table(t.id,t.rows,[t.search,t.search2],!0)):o.push(new Table(t.id,t.rows,t.search,!1))}),o.forEach(function(t){t.insertTitles(),t.create(),t.createTotalsTable(!1,i)}),o.forEach(function(t){t.render()})},r=function(t){if(e===t.rowID)return $(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().removeClass("row-selected"),void(rowSelected="");if(""!==e){var i=$("#"+e+" .edb-cell").text();$(".table-row").find(".edb-cell:contains('"+i+"')").parent().removeClass("row-selected")}e=t.rowID,$(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().addClass("row-selected"),o.forEach(function(e){e.rowClicked(t)})},n=function(t){var e=t.region;if(i===t.rowID){var s=$("#"+t.rowID+" .reg-cell").text();return $(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().removeClass("row-selected"),void(i="")}if(""!==i){var s=$("#"+i+" .reg-cell").text();$(".table-row").find(".reg-cell:contains('"+s+"')").filter(function(){return $(this).text()===s}).parent().removeClass("row-selected")}$(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().addClass("row-selected"),i=t.rowID,o.forEach(function(e){e.totalsRowSelected(t)})},a=function(t){var e=t.cpiValues;o.forEach(function(t){t.canApplyCPI()&&(t.applyCPI(e),t.createTotalsTable(!0,i))}),o.forEach(function(t){t.render()})},c=function(){o.forEach(function(t){t.revertCPI()}),o.forEach(function(t){t.render()})},l=function(t){t.data.forEach(function(t){o.forEach(function(e){e.id===t.id&&(e.isCombined?e.update(t.rows,t.table1Rows,t.table2Rows):e.update(t.rows))})})};return events.on("INIT_DATA",s),events.on("ROW_CLICKED",r),events.on("TOTAL_ROW_CLICKED",n),events.on("APPLY_CPI",a),events.on("REVERT_CPI",c),events.on("ROW_UPDATE",l),{regions:t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbWJpbmVkR3JhcGguanMiLCJEYXRhUHJvY2Vzc29yLmpzIiwiR3JhcGguanMiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyLmpzIiwiU2VsZWN0TWFuYWdlci5qcyIsIlRhYmxlLmpzIiwiQ29tcGFyZU1vZHVsZS5qcyIsIkNQSU1vZHVsZS5qcyIsIkdyYXBoTW9kdWxlLmpzIiwiU2VsZWN0aW9uUm93c0NvbnRyb2xsZXIuanMiLCJUYWJsZU1vZHVsZS5qcyJdLCJuYW1lcyI6WyJDb21iaW5lZEdyYXBoIiwiaWQiLCJjb21iaW5lZFJvd3MiLCJyb3dzMSIsInJvd3MyIiwic2VsZWN0aW9uMSIsInNlbGVjdGlvbjIiLCJ0aGlzIiwiZ3JvdXBlZElEIiwiYm94SUQiLCJ2ZWN0b3JJRCIsInVuaXQiLCJnZXRVbml0IiwiJHRpdGxlQmFyIiwiJCIsIiR0aXRsZUJveCIsIiR0aXRsZVZlY3RvciIsIkRhdGFQcm9jZXNzb3IiLCJEYXRhU3RydWN0dXJlIiwic2VsZWN0aW9uRGF0YSIsInNlbGVjdGlvblRhYmxlIiwiY29tYmluZURhdGEiLCJTZWxlY3Rpb24iLCJhIiwiYiIsImMiLCJkIiwiYVRhYmxlIiwiYlRhYmxlIiwiY1RhYmxlIiwiZFRhYmxlIiwiRGF0YVRhYmxlcyIsInRhYmxlQSIsInRhYmxlQiIsInRhYmxlQyIsInRhYmxlRCIsInRhYmxlQUIiLCJ0YWJsZUNEIiwiU2VsZWN0aW9uRGF0YSIsInJvd3MiLCJ0aXRsZSIsInN1YlRpdGxlIiwiU2VsZWN0aW9uRGF0YUNvbWJpbmVkIiwidGFibGUxUm93cyIsInRhYmxlMlJvd3MiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJ1bml0MSIsInVuaXQyIiwiU2VsZWN0ZWRUYWJsZURhdGEiLCJHcmFwaCIsInNlbGVjdGlvbiIsImdldFRpdGxlIiwiZ2V0U3ViVGl0bGUiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyIiwiaWROdW1iIiwicm93U2VsZWN0aW9ucyIsInNlY3Rpb24iLCJjYXRlZ29yeSIsInN1YkNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJzZXRJbml0aWFsU3RhdGUiLCJyb3dEYXRhIiwiY2xlYXIiLCJ2YWxpZFNlbGVjdGlvbiIsImluaXRFdmVudExpc3RlbmVyIiwidXJsU2VsZWN0aW9ucyIsInVybFNlbGVjdGlvbiIsImZpbHRlciIsImUiLCJ1cGRhdGVTZWN0aW9uIiwidXBkYXRlIiwiZXZlbnRzIiwiZW1pdCIsInVwZGF0ZUNhdGVnb3J5IiwidXBkYXRlU3ViQ2F0ZWdvcnkiLCJ1cGRhdGVEZXNjcmlwdGlvbiIsImdldFJvd1NlbGVjdGlvbiIsIm9uIiwiYmluZCIsIlNlY3Rpb25TZWxlY3QiLCIkc2VsZWN0IiwicGFzc0lEIiwiRGF0YWJhc2UiLCJnZXRTZWN0aW9uc0Zyb21EYXRhYmFzZSIsInNlY3Rpb25zIiwiZHAiLCJzb3J0U2VjdGlvbnMiLCJhZGRPcHRpb25zVG9TZWxlY3RvciIsInVwZGF0ZWQiLCJldmVudCIsImZpbmQiLCJ0ZXh0IiwiQ2F0ZWdvcnlTZWxlY3QiLCJnZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlIiwiY2F0ZWdvcmllcyIsIm5vUmVzdWx0Iiwic2VjdGlvbkNoYW5nZWRMaXN0ZW5lciIsImh0bWwiLCJTdWJDYXRlZ29yeVNlbGVjdCIsImdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UiLCJzdWJDYXRlZ29yaWVzIiwiY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIiLCJwYXNzSUROdW1iIiwiY2xlYXJNeXNlbGYiLCJEZXNjcmlwdGlvblNlbGVjdCIsImdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZSIsImRlc2NyaXB0aW9ucyIsInN1YkNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyIiwic2VsZWN0cGlja2VyIiwic2VsZWN0b3JJRCIsIm9wdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJUYWJsZSIsImlzQ29tYmluZWQiLCJ1bml0cyIsImRwRm9ybWF0IiwiZDMiLCJmb3JtYXQiLCJhdmFpbGFibGVZZWFycyIsImdldEF2YWlsYWJsZVllYXJzIiwibm9DUElDZWxscyIsIiR0YWJsZSIsIiR0b3RhbHNUYWJsZSIsIiR0aXRsZSIsInByb3RvdHlwZSIsImdldElEIiwiZ2V0U2VsZWN0aW9uMVRpdGxlIiwiZ2V0U2VsZWN0aW9uMlRpdGxlIiwiZ2V0VW5pdDEiLCJnZXRVbml0MiIsImluc2VydFRpdGxlcyIsInJhdGlvSFRNTCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiczEiLCJzMiIsImNyZWF0ZSIsImdyb3VwZWREYXRhIiwiY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCIsIkdyb3VwZWRCYXJNb2R1bGUiLCJjcmVhdGVkR3JvdXBlZEJhckdyYXBoIiwiZGF0YSIsImtleXMiLCJib3hwbG90RGF0YSIsImNyZWF0ZURhdGFGb3JCb3hQbG90IiwiQm94UGxvdE1vZHVsZSIsImNyZWF0ZUJveFBsb3QiLCJ2ZWN0b3JHcmFwaERhdGEiLCJjcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgiLCJWZWN0b3JNb2R1bGUiLCJjcmVhdGVWZWN0b3JHcmFwaCIsIlN0cmluZyIsImluY2x1ZGVzIiwiaW5kZXhPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwiQXJyYXkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJ2YWx1ZSIsIm9iaiIsIm5ld0FyciIsImVsIiwiQ29tcGFyZU1vZHVsZSIsInNob3dGdWxsVmVjdG9yR3JhcGgiLCJzZWxlY3Rpb25zIiwiYXRpdGxlIiwiYnRpdGxlIiwiY3RpdGxlIiwiZHRpdGxlIiwicmF0aW8iLCJzcGFuQSIsInNwYW5CIiwic3BhbkMiLCJzcGFuRCIsImNvbWJpbmVBIiwiY29tYmluZUIiLCJjb21iaW5lQyIsImNvbWJpbmVEIiwic2hvdyIsImJhY2t1cCIsImVycm9yIiwiJHNlYXJjaEVycm9yIiwic2VyaWFsaXNlIiwic3RyIiwicCIsImhhc093blByb3BlcnR5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJzZWFyY2giLCJzZWxlY3Rpb25Sb3dzIiwiY2FuU2VhcmNoIiwiZ2V0QWxsU2VsZWN0aW9uRGF0YSIsImZvckVhY2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJsb2FkU2VhcmNoRnJvbVVSTCIsImluaXQiLCJnZXRSb3dzRm9yU2VhcmNoIiwiZmNhc3RfeXIiLCJyIiwib2JzX3lyIiwic29ydGVkUm93cyIsImZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkiLCJjb21iaW5lZERhdGEiLCJ0IiwiYWRkQ2xhc3MiLCJyb3dJRCIsInJvd051bWIiLCJlZGIiLCJyZWdpb24iLCJyZW1vdmVDbGFzcyIsImdvVG9CeVNjcm9sbCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJhcHBseUNQSSIsIkNQSU1vZHVsZSIsImlzVmFsaWQiLCJ1bmRlZmluZWQiLCJjb3B5T2ZSb3dzIiwiY29weVJvd3MiLCJhcHBseUNQSVRvVGFibGVSb3dzIiwiZ2V0Q1BJVmFsdWVzIiwibmV3RGF0YSIsImNwaVZhbHVlcyIsImFwcGxpY2FibGVSb3dzIiwibWluWWVhciIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwiZGlzY195ciIsIm1heFllYXIiLCJjdXIiLCJlbGVtIiwiaW5kZXgiLCJ5ZWFyIiwidmFsdWVPZkNlbGwiLCJyZXZlcnRDUEkiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCIkY3BpRm9ybSIsInZhbGlkYXRvciIsInNldERlZmF1bHRzIiwiZXJyb3JDbGFzcyIsImhpZ2hsaWdodCIsImVsZW1lbnQiLCJjbG9zZXN0IiwidW5oaWdobGlnaHQiLCJjcGlSdWxlcyIsInJlcXVpcmVkIiwibnVtYmVyIiwibWluIiwibWF4IiwibWVzc2FnZVNldCIsInZhbGlkYXRlIiwicnVsZXMiLCJZMjAxMiIsIlkyMDEzIiwiWTIwMTQiLCJZMjAxNSIsIlkyMDE2IiwibWVzc2FnZXMiLCJ2YWwiLCJ2YWxpZCIsImNvcHlEYXRhVGFibGVzIiwiZGF0YVRhYmxlcyIsIm9yaWdUYWJsZXMiLCJ0YWJsZXMiLCJqIiwibmV0d29yayIsIm5vdGUiLCJwX2tleSIsInNjaF9yZWYiLCJzY2hlZHVsZSIsInN1Yl9jYXRlZ29yeSIsIm5ld1Jvd3MiLCJjcmVhdGVEYXRhU3RydWN0dXJlc1dpdGhDb3B5IiwiY29weU9mRGF0YVRhYmxlcyIsInNlbGVjdGlvbkRhdGFBcnJheSIsInNlbGVjdGlvblRhYmxlc0FycmF5IiwiY29tYmluZWRTZWxlY3Rpb25EYXRhQXJyYXkiLCJzZWxlY3RlZFJvd3MiLCJpZHMiLCJzdWJ0aXRsZSIsImp1bXAiLCJzdWJUaXRsZUp1bXAiLCJ0aXRsZUp1bXAiLCJ2YWxpZGF0ZVNlYXJjaFBhcmFtcyIsInZhbGlkT3B0aW9ucyIsInJldHVyblZhbCIsIm1hdGNoREJSb3ciLCJEQlJvdyIsImZpbHRlclJvd3NUb1RhYmxlcyIsImFSb3dzIiwiYlJvd3MiLCJjUm93cyIsImRSb3dzIiwiYWJSb3dzIiwiY29tYmluZVRhYmxlcyIsImNkUm93cyIsImNvcHkiLCJjb21iaW5lZCIsInNlYXJjaDIiLCJhdCIsImJ0IiwidW5pdEEiLCJ1bml0QiIsImVkYkRvbmUiLCJ2ZWNEYXRhIiwiYXZhaWxhYmxlT2JzWWVhcnMiLCJyb3cxIiwiZWRiUm93c0F0IiwiZWRiUm93c0J0IiwieWVhcnNEb25lIiwiZWRiWWVhckFycmF5IiwieWVhclJvd3NBdCIsInllYXJSb3dzQnQiLCJrIiwidmFsdWVBIiwidmFsdWVCIiwic29ydCIsInllYXJzIiwidGFibGVSb3dzIiwic1ZhbHVlcyIsIkluZmluaXR5IiwiZW50cnkiLCJ2YWx1ZXMiLCJjdXJWYWx1ZSIsInNjYXR0ZXJEYXRhIiwiaXNOYU4iLCJudW1iZXJBIiwic3Vic3RyaW5nIiwibnVtYmVyQiIsImFkZFRvU2VsZWN0aW9uIiwidHlwZSIsImNyZWF0ZVRhYmxlVG90YWxzIiwicmVnaW9ucyIsInJlZ2lvblN0cmluZ3MiLCJ0b3RhbHMiLCJyb3ciLCJyZWdpb25TdHJpbmciLCJueiIsImJveERhdGEiLCJHcmFwaE1vZHVsZSIsImdyYXBocyIsInoiLCJzY2FsZU9yZGluYWwiLCJyYW5nZSIsInpTZWxlY3RlZCIsInRhYmxlRGF0YSIsImciLCJyb3dDbGlja2VkIiwidW5zZWxlY3QiLCJzZWxlY3RBbGwiLCJjbGFzc2VkIiwiYWxyZWFkeVNlbGVjdGVkIiwiZGF0dW0iLCJhdHRyIiwia2V5Iiwicm93c0RhdGEiLCJzZWxlY3RvcnMiLCJzIiwic2MiLCJzZXRTZWxlY3Rpb25zRnJvbVVSTCIsInNlYXJjaERhdGEiLCJ3aXRoU2VhcmNoIiwicm93TnVtYmVyIiwicmVtb3ZlQXR0ciIsImNyZWF0ZVRvdGFsc1RhYmxlIiwidG90YWxzUm93U2VsZWN0ZWQiLCJkYXRhUm93SUQiLCJTaW5nbGVCYXJNb2R1bGUiLCJzaG93QmFyV2l0aFJvd0VsZW0iLCJzbGljZSIsImNhbkFwcGx5Q1BJIiwiJGNhY2hlZENlbGxzIiwiZWFjaCIsInNwbGl0IiwiY3JlYXRlVGFibGVEYXRhIiwieSIsImNlbGxDb3VudCIsInJvd0NvdW50IiwiY2VsbFZhbHVlcyIsImRhdGFSb3ciLCJ5ZWFyRGF0YSIsInNlbGVjdGVkVG90YWxSb3ciLCJUYWJsZXNNb2R1bGUiLCJuYW1lcyIsIm4iLCJ1bmkiLCJlbmkiLCJzd25pIiwidXNpIiwibHNpIiwidG90YWxDZWxscyIsIm51bWJlck9mQ29tcGFuaWVzIiwicHJvcGVydHkiLCJjZWxscyIsImF2ZyIsInJlZyIsInRvdGFsQ2VsbFZhbHVlcyIsImVkYnMiLCJlZGJZZWFycyIsInJlbmRlciIsImFwcGx5R3JhZGllbnRDU1MiLCJwZXJjZW50IiwibWF4Q2VsbFZhbHVlIiwiY3NzIiwiYmFja2dyb3VuZCIsInNlbGVjdGVkUm93IiwidGFibGUiLCJwYXJlbnQiLCJyb3dTZWxlY3RlZCIsInRvdGFsUm93Q2xpY2tlZCIsIm9sZFJlZyJdLCJtYXBwaW5ncyI6IkFBWUEsUUFBQUEsZUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQU4sR0FBQUEsRUFDQU0sS0FBQUMsVUFBQSxnQkFBQVAsRUFDQU0sS0FBQUUsTUFBQSxZQUFBUixFQUNBTSxLQUFBRyxTQUFBLGlCQUFBVCxFQUNBTSxLQUFBSixNQUFBQSxFQUNBSSxLQUFBSCxNQUFBQSxFQUNBRyxLQUFBTCxhQUFBQSxFQUNBSyxLQUFBRixXQUFBQSxFQUNBRSxLQUFBRCxXQUFBQSxFQUNBQyxLQUFBSSxLQUFBSixLQUFBSyxVQUlBTCxLQUFBTSxVQUFBQyxFQUFBLGNBQUFiLEdBQ0FNLEtBQUFRLFVBQUFELEVBQUEsY0FBQWIsR0FDQU0sS0FBQVMsYUFBQUYsRUFBQSxpQkFBQWIsR0N2QkEsUUFBQWdCLGtCQXVrQkEsUUFBQUMsZUFBQUMsRUFBQUMsRUFBQUMsR0FDQWQsS0FBQVksY0FBQUEsRUFDQVosS0FBQWEsZUFBQUEsRUFDQWIsS0FBQWMsWUFBQUEsRUFhQSxRQUFBQyxXQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBbkIsS0FBQW9CLE9BQUFKLEVBQ0FoQixLQUFBcUIsT0FBQUosRUFDQWpCLEtBQUFzQixPQUFBSixFQUNBbEIsS0FBQXVCLE9BQUFKLEVBZ0JBLFFBQUFLLFlBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0E5QixLQUFBeUIsT0FBQUEsRUFDQXpCLEtBQUEwQixPQUFBQSxFQUNBMUIsS0FBQTJCLE9BQUFBLEVBQ0EzQixLQUFBNEIsT0FBQUEsRUFDQTVCLEtBQUE2QixRQUFBQSxFQUNBN0IsS0FBQThCLFFBQUFBLEVBUUEsUUFBQUMsZUFBQUMsRUFBQUMsRUFBQUMsRUFBQTlCLEVBQUFWLEdBQ0FNLEtBQUFnQyxLQUFBQSxFQUNBaEMsS0FBQWlDLE1BQUFBLEVBQ0FqQyxLQUFBa0MsU0FBQUEsRUFDQWxDLEtBQUFOLEdBQUFBLEVBQ0FNLEtBQUFJLEtBQUFBLEVBT0EsUUFBQStCLHVCQUFBSCxFQUFBSSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBL0MsR0FDQU0sS0FBQWdDLEtBQUFBLEVBQ0FoQyxLQUFBc0MsT0FBQUEsRUFDQXRDLEtBQUF1QyxPQUFBQSxFQUNBdkMsS0FBQXdDLE1BQUFBLEVBQ0F4QyxLQUFBeUMsTUFBQUEsRUFDQXpDLEtBQUFOLEdBQUFBLEVBQ0FNLEtBQUFvQyxXQUFBQSxFQUNBcEMsS0FBQXFDLFdBQUFBLEVBUUEsUUFBQUssbUJBQUFWLEVBQUF0QyxFQUFBdUMsRUFBQUMsRUFBQTlCLEdBQ0FKLEtBQUFnQyxLQUFBQSxFQUNBaEMsS0FBQU4sR0FBQUEsRUFDQU0sS0FBQWlDLE1BQUFBLEVBQ0FqQyxLQUFBa0MsU0FBQUEsRUFDQWxDLEtBQUFJLEtBQUFBLEVDcnBCQSxRQUFBdUMsT0FBQWpELEVBQUFzQyxFQUFBWSxHQUNBNUMsS0FBQU4sR0FBQUEsRUFDQU0sS0FBQUMsVUFBQSxnQkFBQVAsRUFDQU0sS0FBQUUsTUFBQSxZQUFBUixFQUNBTSxLQUFBZ0MsS0FBQUEsRUFDQWhDLEtBQUE0QyxVQUFBQSxFQUNBNUMsS0FBQWlDLE1BQUFqQyxLQUFBNkMsV0FDQTdDLEtBQUFrQyxTQUFBbEMsS0FBQThDLGNBQ0E5QyxLQUFBSSxLQUFBSixLQUFBSyxVQUdBTCxLQUFBTSxVQUFBQyxFQUFBLGNBQUFiLEdBQ0FNLEtBQUFRLFVBQUFELEVBQUEsY0FBQWIsR0NuQkEsUUFBQXFELHdCQUFBckQsR0FDQU0sS0FBQWdELE9BQUF0RCxFQUNBTSxLQUFBaUQsZUFBQXZELEdBQUFBLEVBQUF3RCxRQUFBLEdBQUFDLFNBQUEsR0FBQUMsWUFBQSxHQUFBQyxZQUFBLElBRUFyRCxLQUFBc0QsZ0JBQUEsU0FBQUMsR0FDQXZELEtBQUFpRCxjQUFBTSxHQUdBdkQsS0FBQXdELE1BQUEsV0FDQXhELEtBQUFpRCxlQUFBdkQsR0FBQU0sS0FBQU4sR0FBQXdELFFBQUEsR0FBQUMsU0FBQSxHQUFBQyxZQUFBLEdBQUFDLFlBQUEsS0FHQXJELEtBQUF5RCxlQUFBLFdBQ0EsTUFBQSxLQUFBekQsS0FBQWlELGNBQUFDLFNBQUEsS0FBQWxELEtBQUFpRCxjQUFBSSxhQU1BckQsS0FBQTBELGtCQUFBLFNBQUFDLEdBQ0EsR0FBQWpFLEdBQUFNLEtBQUFnRCxPQUNBWSxFQUFBRCxFQUFBRSxPQUFBLFNBQUFDLEdBQUEsTUFBQUEsR0FBQXBFLEtBQUFBLElBQUEsRUFFQU0sTUFBQWlELGNBQUFDLFFBQUFVLEVBQUFWLFFBQ0FsRCxLQUFBaUQsY0FBQUUsU0FBQVMsRUFBQVQsU0FDQW5ELEtBQUFpRCxjQUFBRyxZQUFBUSxFQUFBUixZQUNBcEQsS0FBQWlELGNBQUFJLFlBQUFPLEVBQUFQLGFBR0FyRCxLQUFBK0QsY0FBQSxTQUFBQyxHQUNBQSxFQUFBdEUsS0FBQU0sS0FBQWdELFNBQ0FoRCxLQUFBaUQsY0FBQUUsU0FBQSxHQUNBbkQsS0FBQWlELGNBQUFHLFlBQUEsR0FDQXBELEtBQUFpRCxjQUFBSSxZQUFBLEdBRUFyRCxLQUFBaUQsY0FBQUMsUUFBQWMsRUFBQWQsUUFDQWUsT0FBQUMsS0FBQSxlQUFBeEUsR0FBQU0sS0FBQWdELE9BQUFKLFVBQUE1QyxLQUFBaUQsa0JBSUFqRCxLQUFBbUUsZUFBQSxTQUFBSCxHQUNBQSxFQUFBdEUsS0FBQU0sS0FBQWdELFNBQ0FoRCxLQUFBaUQsY0FBQUcsWUFBQSxHQUNBcEQsS0FBQWlELGNBQUFJLFlBQUEsR0FFQXJELEtBQUFpRCxjQUFBRSxTQUFBYSxFQUFBYixTQUNBYyxPQUFBQyxLQUFBLGdCQUFBeEUsR0FBQU0sS0FBQWdELE9BQUFKLFVBQUE1QyxLQUFBaUQsa0JBSUFqRCxLQUFBb0Usa0JBQUEsU0FBQUosR0FDQUEsRUFBQXRFLEtBQUFNLEtBQUFnRCxTQUNBaEQsS0FBQWlELGNBQUFJLFlBQUEsR0FFQXJELEtBQUFpRCxjQUFBRyxZQUFBWSxFQUFBWixZQUNBYSxPQUFBQyxLQUFBLG1CQUFBeEUsR0FBQU0sS0FBQWdELE9BQUFKLFVBQUE1QyxLQUFBaUQsa0JBSUFqRCxLQUFBcUUsa0JBQUEsU0FBQUwsR0FDQUEsRUFBQXRFLEtBQUFNLEtBQUFnRCxTQUNBaEQsS0FBQWlELGNBQUFJLFlBQUFXLEVBQUFYLFlBQ0FZLE9BQUFDLEtBQUEsbUJBQUF4RSxHQUFBTSxLQUFBZ0QsT0FBQUosVUFBQTVDLEtBQUFpRCxrQkFJQWpELEtBQUFzRSxnQkFBQSxXQUNBLE1BQUF0RSxNQUFBaUQsZUFJQWdCLE9BQUFNLEdBQUEsa0JBQUF2RSxLQUFBK0QsY0FBQVMsS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLG1CQUFBdkUsS0FBQW1FLGVBQUFLLEtBQUF4RSxPQUNBaUUsT0FBQU0sR0FBQSxzQkFBQXZFLEtBQUFvRSxrQkFBQUksS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLHNCQUFBdkUsS0FBQXFFLGtCQUFBRyxLQUFBeEUsT0FDQWlFLE9BQUFNLEdBQUEsa0JBQUF2RSxLQUFBMEQsa0JBQUFjLEtBQUF4RSxPQ3ZFQSxRQUFBeUUsZUFBQXpCLEdBQ0FoRCxLQUFBZ0QsT0FBQUEsRUFDQWhELEtBQUFOLEdBQUEsa0JBQUFzRCxFQUNBaEQsS0FBQTBFLFFBQUFuRSxFQUFBUCxLQUFBTixJQUdBTSxLQUFBMEQsa0JBQUEsU0FBQUMsR0FDQSxHQUFBakUsR0FBQU0sS0FBQWdELE9BQ0EyQixFQUFBM0UsS0FBQU4sR0FDQWtELEVBQUFlLEVBQUFFLE9BQUEsU0FBQUMsR0FBQSxNQUFBQSxHQUFBcEUsS0FBQUEsSUFBQSxFQUdBa0YsVUFBQUMsd0JBQUEsU0FBQUMsR0FDQUMsR0FBQUMsY0FBQUYsU0FBQUEsSUFDQUcscUJBQUFOLEVBQUFHLEVBQUFsQyxFQUFBTSxZQU1BbEQsS0FBQWtGLFFBQUEsU0FBQUMsR0FDQWxCLE9BQUFDLEtBQUEsbUJBQUFoQixRQUFBbEQsS0FBQTBFLFFBQUFVLEtBQUEsbUJBQUFDLE9BQUEzRixHQUFBTSxLQUFBZ0QsVUFJQWhELEtBQUEwRSxRQUFBSCxHQUFBLFNBQUF2RSxLQUFBa0YsUUFBQVYsS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLGtCQUFBdkUsS0FBQTBELGtCQUFBYyxLQUFBeEUsT0FLQSxRQUFBc0YsZ0JBQUF0QyxHQUNBaEQsS0FBQWdELE9BQUFBLEVBQ0FoRCxLQUFBTixHQUFBLG1CQUFBTSxLQUFBZ0QsT0FDQWhELEtBQUEwRSxRQUFBbkUsRUFBQVAsS0FBQU4sSUFJQU0sS0FBQTBELGtCQUFBLFNBQUFDLEdBQ0EsR0FBQWpFLEdBQUFNLEtBQUFnRCxPQUNBSixFQUFBZSxFQUFBRSxPQUFBLFNBQUFDLEdBQUEsTUFBQUEsR0FBQXBFLEtBQUFBLElBQUEsR0FDQWlGLEVBQUEzRSxLQUFBTixFQUdBa0YsVUFBQVcsMEJBQUEzQyxFQUFBTSxRQUFBLFNBQUFzQyxFQUFBQyxHQUNBQSxHQUNBUixxQkFBQU4sRUFBQWEsRUFBQTVDLEVBQUFPLGFBT0FuRCxLQUFBa0YsUUFBQSxTQUFBQyxHQUNBbEIsT0FBQUMsS0FBQSxvQkFBQWYsU0FBQW5ELEtBQUEwRSxRQUFBVSxLQUFBLG1CQUFBQyxPQUFBM0YsR0FBQU0sS0FBQWdELFVBS0FoRCxLQUFBMEYsdUJBQUEsU0FBQTFCLEdBQ0EsR0FBQUEsRUFBQXRFLEtBQUFNLEtBQUFnRCxPQUFBLENBQ0FoRCxLQUFBMEUsUUFBQWlCLEtBQUEsR0FDQSxJQUFBaEIsR0FBQTNFLEtBQUFOLEVBRUFrRixVQUFBVywwQkFBQXZCLEVBQUFwQixVQUFBTSxRQUFBLFNBQUFzQyxFQUFBQyxHQUNBQSxHQUNBUixxQkFBQU4sRUFBQWEsRUFBQSxRQU9BeEYsS0FBQTBFLFFBQUFILEdBQUEsU0FBQXZFLEtBQUFrRixRQUFBVixLQUFBeEUsT0FHQWlFLE9BQUFNLEdBQUEsY0FBQXZFLEtBQUEwRix1QkFBQWxCLEtBQUF4RSxPQUNBaUUsT0FBQU0sR0FBQSxrQkFBQXZFLEtBQUEwRCxrQkFBQWMsS0FBQXhFLE9BS0EsUUFBQTRGLG1CQUFBNUMsR0FDQWhELEtBQUFnRCxPQUFBQSxFQUNBaEQsS0FBQU4sR0FBQSxzQkFBQU0sS0FBQWdELE9BQ0FoRCxLQUFBMEUsUUFBQW5FLEVBQUFQLEtBQUFOLElBSUFNLEtBQUEwRCxrQkFBQSxTQUFBQyxHQUNBLEdBQUFqRSxHQUFBTSxLQUFBZ0QsT0FDQUosRUFBQWUsRUFBQUUsT0FBQSxTQUFBQyxHQUFBLE1BQUFBLEdBQUFwRSxLQUFBQSxJQUFBLEdBQ0FpRixFQUFBM0UsS0FBQU4sRUFFQWtGLFVBQUFpQiw2QkFBQWpELEVBQUFNLFFBQUFOLEVBQUFPLFNBQUEsU0FBQTJDLEVBQUFMLEdBQ0FBLEdBQ0FSLHFCQUFBTixFQUFBbUIsRUFBQWxELEVBQUFRLGdCQU9BcEQsS0FBQStGLHdCQUFBLFNBQUEvQixHQUNBLEdBQUFBLEVBQUF0RSxLQUFBTSxLQUFBZ0QsT0FBQSxDQUNBaEQsS0FBQTBFLFFBQUFpQixLQUFBLEdBQ0EsSUFBQWhCLEdBQUEzRSxLQUFBTixHQUNBc0csRUFBQWhHLEtBQUFnRCxNQUVBNEIsVUFBQWlCLDZCQUFBN0IsRUFBQXBCLFVBQUFNLFFBQUFjLEVBQUFwQixVQUFBTyxTQUFBLFNBQUEyQyxFQUFBTCxHQUNBQSxFQUdBeEIsT0FBQUMsS0FBQSx1QkFBQWQsWUFBQSxHQUFBMUQsR0FBQXNHLElBRkFmLHFCQUFBTixFQUFBbUIsRUFBQSxRQVVBOUYsS0FBQWtGLFFBQUEsU0FBQUMsR0FDQWxCLE9BQUFDLEtBQUEsdUJBQUFkLFlBQUFwRCxLQUFBMEUsUUFBQVUsS0FBQSxtQkFBQUMsT0FBQTNGLEdBQUFNLEtBQUFnRCxVQUtBaEQsS0FBQTBFLFFBQUFILEdBQUEsU0FBQXZFLEtBQUFrRixRQUFBVixLQUFBeEUsT0FHQWlFLE9BQUFNLEdBQUEsa0JBQUEwQixZQUFBekIsS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLGVBQUF2RSxLQUFBK0Ysd0JBQUF2QixLQUFBeEUsT0FDQWlFLE9BQUFNLEdBQUEsa0JBQUF2RSxLQUFBMEQsa0JBQUFjLEtBQUF4RSxPQU1BLFFBQUFrRyxtQkFBQXhHLEdBQ0FNLEtBQUFnRCxPQUFBdEQsRUFDQU0sS0FBQU4sR0FBQSxzQkFBQUEsRUFDQU0sS0FBQTBFLFFBQUFuRSxFQUFBUCxLQUFBTixJQUVBTSxLQUFBa0YsUUFBQSxTQUFBQyxHQUNBbEIsT0FBQUMsS0FBQSx1QkFBQWIsWUFBQXJELEtBQUEwRSxRQUFBVSxLQUFBLG1CQUFBQyxPQUFBM0YsR0FBQU0sS0FBQWdELFVBS0FoRCxLQUFBMEQsa0JBQUEsU0FBQUMsR0FDQSxHQUFBakUsR0FBQU0sS0FBQWdELE9BQ0FKLEVBQUFlLEVBQUFFLE9BQUEsU0FBQUMsR0FBQSxNQUFBQSxHQUFBcEUsS0FBQUEsSUFBQSxHQUNBaUYsRUFBQTNFLEtBQUFOLEVBRUFrRixVQUFBdUIsNEJBQUF2RCxFQUFBTSxRQUFBTixFQUFBTyxTQUFBUCxFQUFBUSxZQUFBLFNBQUFnRCxFQUFBWCxHQUNBQSxHQUNBUixxQkFBQU4sRUFBQXlCLEVBQUF4RCxFQUFBUyxnQkFPQXJELEtBQUFxRywyQkFBQSxTQUFBckMsR0FDQSxHQUFBQSxFQUFBdEUsS0FBQU0sS0FBQWdELE9BQUEsQ0FDQSxHQUFBMkIsR0FBQTNFLEtBQUFOLEVBRUFrRixVQUFBdUIsNEJBQUFuQyxFQUFBcEIsVUFBQU0sUUFBQWMsRUFBQXBCLFVBQUFPLFNBQUFhLEVBQUFwQixVQUFBUSxZQUFBLFNBQUFnRCxHQUNBbkIscUJBQUFOLEVBQUF5QixFQUFBLFFBTUFwRyxLQUFBMEUsUUFBQUgsR0FBQSxTQUFBdkUsS0FBQWtGLFFBQUFWLEtBQUF4RSxPQUdBaUUsT0FBQU0sR0FBQSxrQkFBQTBCLFlBQUF6QixLQUFBeEUsT0FDQWlFLE9BQUFNLEdBQUEsbUJBQUEwQixZQUFBekIsS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLGtCQUFBdkUsS0FBQXFHLDJCQUFBN0IsS0FBQXhFLE9BQ0FpRSxPQUFBTSxHQUFBLGtCQUFBdkUsS0FBQTBELGtCQUFBYyxLQUFBeEUsT0FJQSxRQUFBaUcsYUFBQWpDLEdBQ0FBLEVBQUF0RSxLQUFBTSxLQUFBZ0QsU0FDQWhELEtBQUEwRSxRQUFBaUIsS0FBQSxJQUNBM0YsS0FBQTBFLFFBQUE0QixhQUFBLFlBWUEsUUFBQXJCLHNCQUFBc0IsRUFBQUMsRUFBQUMsR0FDQWxHLEVBQUFnRyxHQUFBWixLQUFBLEdBQ0EsS0FBQSxHQUFBZSxHQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQ0EsT0FBQUYsRUFBQUUsS0FDQUYsRUFBQUUsS0FBQUQsRUFDQWxHLEVBQUFnRyxHQUFBSyxPQUFBLG9CQUFBSixFQUFBRSxHQUFBLGFBRUFuRyxFQUFBZ0csR0FBQUssT0FBQSxXQUFBSixFQUFBRSxHQUFBLGFBR0FuRyxHQUFBZ0csR0FBQUQsYUFBQSxXQ2pOQSxRQUFBTyxPQUFBbkgsRUFBQXNDLEVBQUFZLEVBQUFrRSxHQUNBOUcsS0FBQU4sR0FBQUEsRUFDQU0sS0FBQThHLFdBQUFBLEVBQ0E5RyxLQUFBZ0MsS0FBQUEsRUFDQWhDLEtBQUFJLEtBQUE0QixFQUFBLEdBQUErRSxNQUNBL0csS0FBQTRDLFVBQUFBLEVBR0E1QyxLQUFBaUMsTUFBQWpDLEtBQUE2QyxXQUNBN0MsS0FBQWtDLFNBQUFsQyxLQUFBOEMsY0FHQTlDLEtBQUFnSCxTQUFBQyxHQUFBQyxPQUFBLE9BR0FsSCxLQUFBbUgsZUFBQW5ILEtBQUFvSCxvQkFHQXBILEtBQUFxSCxjQUdBckgsS0FBQXNILE9BQUEvRyxFQUFBLFVBQUFiLEdBQ0FNLEtBQUF1SCxhQUFBaEgsRUFBQSxnQkFBQWIsR0FDQU0sS0FBQXdILE9BQUFqSCxFQUFBLFVBQUFiLEdMT0FELGNBQUFnSSxVQUFBWCxXQUFBLFdBQ0EsT0FBQSxHQVNBckgsY0FBQWdJLFVBQUFDLE1BQUEsV0FDQSxNQUFBMUgsTUFBQU4sSUFTQUQsY0FBQWdJLFVBQUFFLG1CQUFBLFdBQ0EsR0FBQXZFLEdBQUEsT0FBQXBELEtBQUFGLFdBQUEsR0FBQUUsS0FBQUYsV0FBQXNELFdBQ0EsT0FBQXBELE1BQUFGLFdBQUF1RCxZQUFBLEtBQUFyRCxLQUFBRixXQUFBcUQsU0FBQSxLQUFBQyxHQVNBM0QsY0FBQWdJLFVBQUFHLG1CQUFBLFdBQ0EsR0FBQXhFLEdBQUEsT0FBQXBELEtBQUFELFdBQUEsR0FBQUMsS0FBQUQsV0FBQXFELFdBQ0EsT0FBQXBELE1BQUFELFdBQUFzRCxZQUFBLEtBQUFyRCxLQUFBRCxXQUFBb0QsU0FBQSxNQUFBQyxHQVNBM0QsY0FBQWdJLFVBQUFwSCxRQUFBLFdBQ0EsTUFBQUwsTUFBQUosTUFBQSxHQUFBbUgsTUFBQSxNQUFBL0csS0FBQUgsTUFBQSxHQUFBa0gsT0FTQXRILGNBQUFnSSxVQUFBSSxTQUFBLFdBQ0EsTUFBQTdILE1BQUFKLE1BQUEsR0FBQW1ILE9BU0F0SCxjQUFBZ0ksVUFBQUssU0FBQSxXQUNBLE1BQUE5SCxNQUFBSCxNQUFBLEdBQUFrSCxPQVFBdEgsY0FBQWdJLFVBQUFNLGFBQUEsV0FDQSxHQUFBQyxHQUFBLGFBQUFoSSxLQUFBTixHQUFBdUksT0FBQSxHQUFBQyxjQUFBLE1BQUFsSSxLQUFBTixHQUFBdUksT0FBQSxHQUFBQyxjQUFBLFFBQ0FDLEVBQUEsaURBQUFuSSxLQUFBTixHQUFBdUksT0FBQSxHQUFBQyxjQUFBLFlBQUFsSSxLQUFBMkgscUJBQUEsUUFDQVMsRUFBQSxpREFBQXBJLEtBQUFOLEdBQUF1SSxPQUFBLEdBQUFDLGNBQUEsWUFBQWxJLEtBQUE0SCxxQkFBQSxPQUlBNUgsTUFBQU0sVUFBQXNHLE9BQUFvQixHQUNBaEksS0FBQU0sVUFBQXNHLE9BQUF1QixHQUNBbkksS0FBQU0sVUFBQXNHLE9BQUF3QixHQUVBcEksS0FBQVEsVUFBQW9HLE9BQUFvQixHQUNBaEksS0FBQVEsVUFBQW9HLE9BQUF1QixHQUNBbkksS0FBQVEsVUFBQW9HLE9BQUF3QixHQUdBcEksS0FBQVMsYUFBQW1HLE9BQUFvQixHQUNBaEksS0FBQVMsYUFBQW1HLE9BQUF1QixHQUNBbkksS0FBQVMsYUFBQW1HLE9BQUF3QixJQU9BM0ksY0FBQWdJLFVBQUFZLE9BQUEsV0FFQSxHQUFBQyxHQUFBdkQsR0FBQXdELDBCQUFBdkksS0FBQUwsYUFDQTZJLGtCQUFBQyx1QkFBQUgsRUFBQUksS0FBQUosRUFBQUssS0FBQTNJLEtBQUFJLEtBQUFKLEtBQUFDLFVBR0EsSUFBQTJJLEdBQUE3RCxHQUFBOEQscUJBQUE3SSxLQUFBTCxhQUNBbUosZUFBQUMsY0FBQUgsRUFBQTVJLEtBQUFFLE1BQUFGLEtBQUFJLEtBR0EsSUFBQTRJLEdBQUFqRSxHQUFBa0UseUJBQUFqSixLQUFBSixNQUFBSSxLQUFBSCxNQUNBcUosY0FBQUMsa0JBQUFILEVBQUFoSixLQUFBOEgsV0FBQTlILEtBQUE2SCxXQUFBN0gsS0FBQUcsV0FXQVYsY0FBQWdJLFVBQUF6RCxPQUFBLFNBQUFoQyxFQUFBcEMsRUFBQUMsR0FDQUcsS0FBQWdDLEtBQUFBLEVBQ0FoQyxLQUFBSixNQUFBQSxFQUNBSSxLQUFBSCxNQUFBQSxFQUNBRyxLQUFBcUksVU01SkFlLE9BQUEzQixVQUFBNEIsV0FDQUQsT0FBQTNCLFVBQUE0QixTQUFBLFdBQ0EsWUFDQSxPQUFBRCxRQUFBM0IsVUFBQTZCLFFBQUFDLE1BQUF2SixLQUFBd0osY0FBQSxJQUlBQyxNQUFBaEMsVUFBQTRCLFVBQ0FLLE9BQUFDLGVBQUFGLE1BQUFoQyxVQUFBLFlBQ0FtQyxZQUFBLEVBQ0FDLE1BQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBL0osS0FBQTZELE9BQUEsU0FBQW1HLEdBQ0EsTUFBQUEsSUFBQUYsR0FFQSxPQUFBQyxHQUFBcEQsT0FBQSxJQU1BLElBQUFzRCxlQUFBLFdBZ0xBLFFBQUFDLEdBQUF4QixFQUFBeUIsRUFBQXBELEdBR0EsR0FBQXFELEdBQUFELEVBQUEsR0FBQWhILFNBQUEsS0FBQWdILEVBQUEsR0FBQS9HLFlBQUEsS0FBQStHLEVBQUEsR0FBQTlHLFlBQ0FnSCxFQUFBRixFQUFBLEdBQUFoSCxTQUFBLEtBQUFnSCxFQUFBLEdBQUEvRyxZQUFBLEtBQUErRyxFQUFBLEdBQUE5RyxZQUNBaUgsRUFBQUgsRUFBQSxHQUFBaEgsU0FBQSxLQUFBZ0gsRUFBQSxHQUFBL0csWUFBQSxLQUFBK0csRUFBQSxHQUFBOUcsWUFDQWtILEVBQUFKLEVBQUEsR0FBQWhILFNBQUEsS0FBQWdILEVBQUEsR0FBQS9HLFlBQUEsS0FBQStHLEVBQUEsR0FBQTlHLFlBRUFtSCxFQUFBLDJDQUNBQyxFQUFBLGtDQUNBQyxFQUFBLGtDQUNBQyxFQUFBLGtDQUNBQyxFQUFBLGtDQUdBQyxFQUFBLHFCQUFBSixFQUFBLElBQUFMLEVBQUEsUUFDQVUsRUFBQSxxQkFBQUosRUFBQSxJQUFBTCxFQUFBLFFBQ0FVLEVBQUEscUJBQUFKLEVBQUEsSUFBQUwsRUFBQSxRQUNBVSxFQUFBLHFCQUFBSixFQUFBLElBQUFMLEVBQUEsT0FFQWhLLEdBQUEsc0JBQUFxRyxPQUFBNEQsR0FBQTVELE9BQUFpRSxHQUFBakUsT0FBQWtFLEdBQUFsRSxPQUFBbUUsR0FBQW5FLE9BQUFvRSxHQUVBOUIsYUFBQUMsa0JBQUFwRSxFQUFBa0UseUJBQUFQLEVBQUEsR0FBQTFHLEtBQUEwRyxFQUFBLEdBQUExRyxNQUFBK0UsRUFBQSxHQUFBLE1BQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBLE1BQUFBLEVBQUEsR0FBQSxzQkFDQXhHLEVBQUEscUJBQUEwSyxPQXBNQSxHQUFBbEcsR0FBQSxHQUFBckUsZUFHQXdLLEtBR0FDLEdBQUEsRUFHQUMsRUFBQTdLLEVBQUEsY0FPQThLLEVBQUEsU0FBQXZCLEdBQ0EsR0FBQXdCLEtBQ0EsS0FBQSxHQUFBQyxLQUFBekIsR0FDQUEsRUFBQTBCLGVBQUFELElBQ0FELEVBQUFHLEtBQUFDLG1CQUFBSCxHQUFBLElBQUFHLG1CQUFBNUIsRUFBQXlCLElBRUEsT0FBQUQsR0FBQUssS0FBQSxNQVFBQyxFQUFBLFdBQ0EsSUFBQUMsY0FBQUMsWUFLQSxZQUpBWCxJQUNBQyxFQUFBeEUsT0FBQSxzREFDQXVFLEdBQUEsR0FLQSxJQUFBbkosS0FDQTZKLGVBQUFFLHNCQUFBQyxRQUFBLFNBQUFwSixHQUNBLEtBQUFBLEVBQUFNLFVBQ0FsQixFQUFBLElBQUFZLEVBQUFsRCxJQUFBa0QsRUFBQU0sUUFDQWxCLEVBQUEsSUFBQVksRUFBQWxELElBQUFrRCxFQUFBTyxTQUNBbkIsRUFBQSxLQUFBWSxFQUFBbEQsSUFBQWtELEVBQUFRLFlBQ0FwQixFQUFBLElBQUFZLEVBQUFsRCxJQUFBa0QsRUFBQVMsZUFHQTRJLE9BQUFDLFNBQUFDLFFBQUEsV0FBQWQsRUFBQXJKLEtBUUFvSyxFQUFBLFNBQUF6SSxHQUNBa0ksY0FBQVEsS0FBQTFJLEdBQUEsR0FFQWlCLFNBQUEwSCxpQkFBQTNJLEVBQUEsU0FBQTNCLEdBR0FBLEVBQUEyRSxPQUFBLEdBQUEsT0FBQTNFLEVBQUEsR0FBQXVLLFVBQ0F2SyxFQUFBZ0ssUUFBQSxTQUFBUSxHQUNBQSxFQUFBQyxPQUFBRCxFQUFBRCxXQUtBckIsRUFBQXRJLFVBQUEsR0FBQTdCLFdBQUE0QyxFQUFBLEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLElBQ0F1SCxFQUFBbEosS0FBQUEsRUFDQWtKLEVBQUF3QixXQUFBM0gsRUFBQTRILDBCQUFBM0ssRUFBQWtKLEVBQUF0SSxVQUlBLElBQUFnSyxLQUNBMUIsR0FBQXdCLFdBQUFWLFFBQUEsU0FBQWEsR0FDQSxNQUFBQSxFQUFBbk4sSUFDQWEsRUFBQSxVQUFBdU0sU0FBQSxhQUVBLE9BQUFELEVBQUFuTixJQUFBLE9BQUFtTixFQUFBbk4sSUFDQWtOLEVBQUFuQixLQUFBb0IsR0FFQXRNLEVBQUEsY0FBQXNNLEVBQUFuTixJQUFBdUwsT0FDQTFLLEVBQUEsUUFBQXNNLEVBQUFuTixJQUFBb04sU0FBQSxlQUdBLElBQUFGLEVBQUFqRyxRQUNBdUQsRUFBQTBDLEVBQUFqSixHQUFBdUgsRUFBQXdCLFdBQUEsR0FBQTFLLEtBQUEsR0FBQStFLE1BQUFtRSxFQUFBd0IsV0FBQSxHQUFBMUssS0FBQSxHQUFBK0UsTUFBQW1FLEVBQUF3QixXQUFBLEdBQUExSyxLQUFBLEdBQUErRSxNQUFBbUUsRUFBQXdCLFdBQUEsR0FBQTFLLEtBQUEsR0FBQStFLFFBS0E5QyxPQUFBQyxLQUFBLGFBQUF3RSxLQUFBd0MsRUFBQXdCLGFBR0F6SSxPQUFBQyxLQUFBLGVBQUE2SSxNQUFBLFFBQUFDLFFBQUEsRUFBQUMsSUFBQSxrQkFDQWhKLE9BQUFDLEtBQUEscUJBQUE2SSxNQUFBLGFBQUFHLE9BQUEsaUJBR0FoQyxFQUFBd0IsV0FBQVYsUUFBQSxTQUFBYSxHQUNBLE1BQUFBLEVBQUFuTixJQUNBYSxFQUFBLFFBQUFzTSxFQUFBbk4sSUFBQXlOLFlBQUEsZUFJQUMsRUFBQSxlQUlBQSxFQUFBLFNBQUExTixHQUNBYSxFQUFBLGFBQUE4TSxTQUFBQyxVQUFBL00sRUFBQWIsR0FBQTZOLFNBQUFDLEtBQUEsU0FPQUMsRUFBQSxXQUNBLEdBQUFDLFVBQUFDLFdBQUFDLFNBQUExQyxFQUFBdEksVUFBQSxDQUNBLEdBQUFpTCxHQUFBOUksRUFBQStJLFNBQUE1QyxFQUFBbEosS0FDQStMLEdBQUFGLEVBQUFILFVBQUFNLGVBQ0EsSUFBQUMsR0FBQWxKLEVBQUE0SCwwQkFBQWtCLEVBQUEzQyxFQUFBdEksVUFHQXFCLFFBQUFDLEtBQUEsY0FBQXdFLEtBQUF1RixJQUNBaEssT0FBQUMsS0FBQSxhQUFBZ0ssVUFBQVIsVUFBQU0sbUJBV0FELEVBQUEsU0FBQS9MLEVBQUFrTSxHQUNBLEdBQUFDLEdBQUFuTSxFQUFBNkIsT0FBQSxTQUFBMkksR0FDQSxNQUFBQSxHQUFBekYsTUFBQXNDLFNBQUEsTUFFQSxJQUFBLElBQUE4RSxFQUFBeEgsT0FhQSxJQUFBLEdBUkF5SCxHQUFBRCxFQUFBRSxPQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsR0FBQUUsUUFBQUQsRUFBQUMsUUFBQUYsRUFBQUMsSUFDQTlCLE9BRUFnQyxFQUFBTixFQUFBRSxPQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQUQsR0FBQUUsUUFBQUQsRUFBQUMsUUFBQUYsRUFBQUMsSUFDQTlCLE9BRUFpQyxFQUFBTixFQUFBTSxHQUFBRCxFQUFBQyxJQUNBUCxFQUFBbkMsUUFBQSxTQUFBMkMsRUFBQUMsR0FJQSxJQUFBLEdBSEFDLEdBQUFWLEVBQUFTLEdBQUFuQyxPQUNBcUMsRUFBQVgsRUFBQVMsR0FBQS9FLE1BRUFuRCxFQUFBLEVBQUFBLEVBQUF3SCxFQUFBdkgsT0FBQUQsSUFDQXdILEVBQUF4SCxHQUFBbUksT0FBQUgsR0FDQUcsR0FBQUgsSUFDQUksR0FBQSxFQUFBWixFQUFBeEgsR0FBQW1ELE1BQUEsSUFJQXNFLEdBQUFTLEdBQUEvRSxNQUFBaUYsS0FzQ0FDLEVBQUEsV0FDQTlLLE9BQUFDLEtBQUEsY0FBQXdFLEtBQUF3QyxFQUFBd0IsYUFDQXpJLE9BQUFDLEtBQUEsY0FBQWdLLFVBQUEsS0FJQSxRQUNBOUIsa0JBQUFBLEVBQ0FSLE9BQUFBLEVBQ0E2QixTQUFBQSxFQUNBc0IsVUFBQUEsS0FLQXhPLEdBQUF5TyxVQUFBQyxNQUFBLFdBRUExTyxFQUFBLGFBQUE0TSxZQUFBLFVBQ0E1TSxFQUFBLG9CQUFBdU0sU0FBQSxVQUNBdk0sRUFBQSx1QkFBQTJPLE1BQUEsV0FDQWpGLGNBQUEyQixXQUVBckwsRUFBQSxPQUFBMk8sTUFBQSxXQUNBakYsY0FBQXdELGNDN1BBLElBQUFDLFdBQUEsV0FHQSxHQUFBeUIsR0FBQTVPLEVBQUEsWUFHQUEsR0FBQTZPLFVBQUFDLGFBQ0FDLFdBQUEsYUFDQUMsVUFBQSxTQUFBQyxHQUFBalAsRUFBQWlQLEdBQUFDLFFBQUEsZUFBQTNDLFNBQUEsY0FDQTRDLFlBQUEsU0FBQUYsR0FBQWpQLEVBQUFpUCxHQUFBQyxRQUFBLGVBQUF0QyxZQUFBLGVBS0EsSUFBQXdDLElBQUFDLFVBQUEsRUFBQUMsUUFBQSxFQUFBQyxJQUFBLEdBQUFDLElBQUEsS0FDQUMsR0FDQUosU0FBQSw0QkFDQUMsT0FBQSw4QkFDQUMsSUFBQSwyQ0FDQUMsSUFBQSwwQ0FJQVosR0FBQWMsVUFDQUMsT0FBQUMsTUFBQVIsRUFBQVMsTUFBQVQsRUFBQVUsTUFBQVYsRUFBQVcsTUFBQVgsRUFBQVksTUFBQVosR0FDQWEsVUFBQUwsTUFBQUgsRUFBQUksTUFBQUosRUFBQUssTUFBQUwsRUFBQU0sTUFBQU4sRUFBQU8sTUFBQVAsSUFHQSxJQUFBaEMsR0FBQSxXQUNBLFFBQUFhLEtBQUEsS0FBQWhGLE9BQUFzRixFQUFBL0osS0FBQSxVQUFBcUwsUUFDQTVCLEtBQUEsS0FBQWhGLE9BQUFzRixFQUFBL0osS0FBQSxVQUFBcUwsUUFDQTVCLEtBQUEsS0FBQWhGLE9BQUFzRixFQUFBL0osS0FBQSxVQUFBcUwsUUFDQTVCLEtBQUEsS0FBQWhGLE9BQUFzRixFQUFBL0osS0FBQSxVQUFBcUwsUUFDQTVCLEtBQUEsS0FBQWhGLE9BQUFzRixFQUFBL0osS0FBQSxVQUFBcUwsU0FHQTlDLEVBQUEsV0FDQSxNQUFBd0IsR0FBQXVCLFFBSUEsUUFDQTFDLGFBQUFBLEVBQ0FMLFFBQUFBLE1OM0NBNUksR0FBQSxHQUFBckUsY0FjQUEsZUFBQStHLFVBQUFrSixlQUFBLFNBQUFDLEdBS0EsSUFBQSxHQUpBQyxJQUFBRCxFQUFBblAsT0FBQW1QLEVBQUFsUCxPQUFBa1AsRUFBQWpQLE9BQUFpUCxFQUFBaFAsT0FBQWdQLEVBQUEvTyxRQUFBK08sRUFBQTlPLFNBQ0FnUCxzQkFHQUMsRUFBQSxFQUFBQSxFQUFBRixFQUFBbEssT0FBQW9LLElBQUEsQ0FDQSxHQUFBL1AsR0FBQTZQLEVBQUFFLEVBQ0EsSUFBQW5ELFNBQUE1TSxFQUNBLElBQUEsR0FBQTBGLEdBQUEsRUFBQUEsRUFBQTFGLEVBQUEyRixPQUFBRCxJQUNBb0ssRUFBQUMsR0FBQXRGLE1BQUF0SSxTQUFBbkMsRUFBQTBGLEdBQUF2RCxTQUFBRSxZQUFBckMsRUFBQTBGLEdBQUFyRCxZQUFBbUwsUUFBQXhOLEVBQUEwRixHQUFBOEgsUUFBQXZCLElBQUFqTSxFQUFBMEYsR0FBQXVHLElBQ0FWLFNBQUF2TCxFQUFBMEYsR0FBQTZGLFNBQUF5RSxRQUFBaFEsRUFBQTBGLEdBQUFzSyxRQUFBQyxLQUFBalEsRUFBQTBGLEdBQUF1SyxLQUFBeEUsT0FBQXpMLEVBQUEwRixHQUFBK0YsT0FBQXlFLE1BQUFsUSxFQUFBMEYsR0FBQXdLLE1BQUFDLFFBQUFuUSxFQUFBMEYsR0FBQXlLLFFBQ0FDLFNBQUFwUSxFQUFBMEYsR0FBQTBLLFNBQUFsTyxRQUFBbEMsRUFBQTBGLEdBQUF4RCxRQUFBbU8sYUFBQXJRLEVBQUEwRixHQUFBMkssYUFBQXRLLE1BQUEvRixFQUFBMEYsR0FBQUssTUFBQThDLE1BQUE3SSxFQUFBMEYsR0FBQW1ELFFBSUEsTUFBQSxJQUFBckksWUFBQXNQLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEdBQUFBLEVBQUEsR0FBQUEsRUFBQSxHQUFBQSxFQUFBLEtBR0FwUSxjQUFBK0csVUFBQXFHLFNBQUEsU0FBQTlMLEdBQ0EsR0FBQXNQLEtBTUEsT0FMQXRQLEdBQUFnSyxRQUFBLFNBQUFRLEdBQ0E4RSxFQUFBN0YsTUFBQTVCLE1BQUEyQyxFQUFBM0MsTUFBQTFHLFNBQUFxSixFQUFBckosU0FBQUUsWUFBQW1KLEVBQUFuSixZQUFBbUwsUUFBQWhDLEVBQUFnQyxRQUFBdkIsSUFBQVQsRUFBQVMsSUFDQVYsU0FBQUMsRUFBQUQsU0FBQXlFLFFBQUF4RSxFQUFBd0UsUUFBQUMsS0FBQXpFLEVBQUF5RSxLQUFBeEUsT0FBQUQsRUFBQUMsT0FBQXlFLE1BQUExRSxFQUFBMEUsTUFBQUMsUUFBQTNFLEVBQUEyRSxRQUNBQyxTQUFBNUUsRUFBQTRFLFNBQUFsTyxRQUFBc0osRUFBQXRKLFFBQUFtTyxhQUFBN0UsRUFBQTZFLGFBQUF0SyxNQUFBeUYsRUFBQXpGLFVBRUF1SyxHQVdBNVEsY0FBQStHLFVBQUE4Siw2QkFBQSxTQUFBQyxHQWFBLElBQUEsR0FaQUMsTUFDQUMsS0FDQUMsS0FHQUMsR0FBQUosRUFBQS9QLE9BQUFrRixPQUFBLEVBQUE2SyxFQUFBOVAsT0FBQWlGLE9BQUEsRUFBQTZLLEVBQUE3UCxPQUFBZ0YsT0FBQSxFQUFBNkssRUFBQTVQLE9BQUErRSxPQUFBLEdBR0FtSyxHQUFBVSxFQUFBL1AsT0FBQStQLEVBQUE5UCxPQUFBOFAsRUFBQTdQLE9BQUE2UCxFQUFBNVAsT0FBQTRQLEVBQUEzUCxRQUFBMlAsRUFBQTFQLFNBR0ErUCxHQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FBQSxNQUNBbkwsRUFBQSxFQUFBQSxFQUFBa0wsRUFBQWpMLE9BQUFELElBQ0EsR0FBQWtMLEVBQUFsTCxHQUFBLENBQ0EsR0FBQW9MLEdBQUFoQixFQUFBcEssR0FBQSxHQUFBeEQsUUFBQSxLQUFBNE4sRUFBQXBLLEdBQUEsR0FBQXZELFNBR0FsQixFQUFBLE9BQUE2TyxFQUFBcEssR0FBQSxHQUFBMkssYUFBQVAsRUFBQXBLLEdBQUEsR0FBQXJELFlBQUF5TixFQUFBcEssR0FBQSxHQUFBMkssYUFBQSxLQUFBUCxFQUFBcEssR0FBQSxHQUFBckQsV0FPQSxJQUpBcU8sRUFBQWpHLEtBQUEsR0FBQS9JLG1CQUFBb08sRUFBQXBLLEdBQUFtTCxFQUFBbkwsR0FBQXpFLEVBQUE2UCxFQUFBaEIsRUFBQXBLLEdBQUEsR0FBQUssUUFDQTBLLEVBQUFoRyxLQUFBLEdBQUExSixlQUFBK08sRUFBQXBLLEdBQUF6RSxFQUFBNlAsRUFBQWhCLEVBQUFwSyxHQUFBLEdBQUFLLE1BQUE4SyxFQUFBbkwsTUFHQSxNQUFBbUwsRUFBQW5MLElBQUEsTUFBQW1MLEVBQUFuTCxLQUNBa0wsRUFBQWxMLEVBQUEsR0FBQSxDQUNBLEdBQUFxTCxHQUFBLElBQUFyTCxFQUFBLEVBQUEsRUFDQXNMLEVBQUFsQixFQUFBcEssRUFBQSxHQUFBLEdBQUF4RCxRQUFBLEtBQUE0TixFQUFBcEssRUFBQSxHQUFBLEdBQUF2RCxTQUNBOE8sRUFBQSxPQUFBbkIsRUFBQXBLLEVBQUEsR0FBQSxHQUFBMkssYUFBQVAsRUFBQXBLLEVBQUEsR0FBQSxHQUFBckQsWUFBQXlOLEVBQUFwSyxFQUFBLEdBQUEsR0FBQTJLLGFBQUEsS0FBQVAsRUFBQXBLLEVBQUEsR0FBQSxHQUFBckQsV0FDQXFPLEdBQUFqRyxLQUFBLEdBQUEvSSxtQkFBQW9PLEVBQUFwSyxFQUFBcUwsR0FBQUYsRUFBQW5MLEVBQUFxTCxHQUFBOVAsRUFBQSxLQUFBNlAsRUFBQUcsRUFBQSxLQUFBRCxFQUFBbEIsRUFBQXBLLEVBQUEsR0FBQSxHQUFBSyxRQUNBNEssRUFBQWxHLEtBQUEsR0FBQXRKLHVCQUFBMk8sRUFBQXBLLEVBQUFxTCxHQUFBakIsRUFBQXBLLEdBQUFvSyxFQUFBcEssRUFBQSxHQUFBekUsRUFBQSxJQUFBNlAsRUFBQUcsRUFBQSxJQUFBRCxFQUFBbEIsRUFBQXBLLEdBQUEsR0FBQUssTUFBQStKLEVBQUFwSyxFQUFBLEdBQUEsR0FBQUssTUFBQThLLEVBQUFuTCxFQUFBcUwsTUFLQSxNQUFBLElBQUFwUixlQUFBOFEsRUFBQUMsRUFBQUMsSUFZQWpSLGNBQUErRyxVQUFBeUsscUJBQUEsU0FBQS9ILEVBQUFnSSxHQUNBLEdBQUFDLElBQUEsQ0FjQSxPQWJBakksR0FBQTZCLFFBQUEsU0FBQTJDLEVBQUFqSSxHQUNBLEtBQUFpSSxFQUFBdkwsYUFBQStPLEVBQUF6TCxLQUNBMEwsR0FBQSxHQUlBLEtBQUF6RCxFQUFBekwsU0FBQSxLQUFBeUwsRUFBQXhMLFVBQUEsS0FBQXdMLEVBQUF0TCxhQUVBLEtBQUFzTCxFQUFBekwsU0FBQSxLQUFBeUwsRUFBQXhMLFVBQUEsS0FBQXdMLEVBQUF0TCxjQUNBK08sR0FBQSxLQUlBQSxHQVlBMVIsY0FBQStHLFVBQUE0SyxXQUFBLFNBQUFDLEVBQUExUCxHQUNBLE1BQUEwUCxHQUFBcFAsVUFBQU4sRUFBQU0sU0FBQW9QLEVBQUFuUCxXQUFBUCxFQUFBTyxVQUFBbVAsRUFBQWpQLGNBQUFULEVBQUFTLGNBQ0EsT0FBQWlQLEVBQUFqQixhQUNBek8sRUFBQVEsY0FBQWtQLEVBQUFqQixhQUVBLEtBQUF6TyxFQUFBUSxjQW1CQTFDLGNBQUErRyxVQUFBOEssbUJBQUEsU0FBQXZRLEVBQUE0SixHQUdBLEdBQUE0RyxHQUFBeFEsRUFBQTZCLE9BQUEsU0FBQUMsR0FBQSxNQUFBaUIsSUFBQXNOLFdBQUF2TyxFQUFBOEgsRUFBQXhLLFVBQ0FxUixFQUFBelEsRUFBQTZCLE9BQUEsU0FBQUMsR0FBQSxNQUFBaUIsSUFBQXNOLFdBQUF2TyxFQUFBOEgsRUFBQXZLLFVBQ0FxUixFQUFBMVEsRUFBQTZCLE9BQUEsU0FBQUMsR0FBQSxNQUFBaUIsSUFBQXNOLFdBQUF2TyxFQUFBOEgsRUFBQXRLLFVBQ0FxUixFQUFBM1EsRUFBQTZCLE9BQUEsU0FBQUMsR0FBQSxNQUFBaUIsSUFBQXNOLFdBQUF2TyxFQUFBOEgsRUFBQXJLLFNBR0FpUixHQUFBeEcsUUFBQSxTQUFBbEksR0FBQSxPQUFBQSxFQUFBK0YsUUFBQS9GLEVBQUErRixNQUFBLEtBQ0E0SSxFQUFBekcsUUFBQSxTQUFBbEksR0FBQSxPQUFBQSxFQUFBK0YsUUFBQS9GLEVBQUErRixNQUFBLEtBQ0E2SSxFQUFBMUcsUUFBQSxTQUFBbEksR0FBQSxPQUFBQSxFQUFBK0YsUUFBQS9GLEVBQUErRixNQUFBLEtBQ0E4SSxFQUFBM0csUUFBQSxTQUFBbEksR0FBQSxPQUFBQSxFQUFBK0YsUUFBQS9GLEVBQUErRixNQUFBLElBR0EsSUFBQWlILEtBTUEsSUFMQTBCLEVBQUE3TCxPQUFBLEdBQ0FtSyxFQUFBckYsTUFBQS9MLEdBQUEsSUFBQXNDLEtBQUF3USxFQUFBNUcsT0FBQUEsRUFBQXhLLFNBSUFvUixFQUFBN0wsT0FBQSxHQUFBOEwsRUFBQTlMLE9BQUEsRUFDQSxHQUFBaU0sR0FBQTdOLEdBQUE4TixjQUFBTCxFQUFBQyxFQUdBLElBQUFDLEVBQUEvTCxPQUFBLEdBQUFnTSxFQUFBaE0sT0FBQSxFQUNBLEdBQUFtTSxHQUFBL04sR0FBQThOLGNBQUFILEVBQUFDLEVBR0EsT0FBQSxJQUFBblIsWUFBQWdSLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFFLElBbUJBcFMsY0FBQStHLFVBQUFrRiwwQkFBQSxTQUFBM0ssRUFBQTRKLEdBR0EsR0FBQTRHLEdBQUF4USxFQUFBNkIsT0FBQSxTQUFBQyxHQUFBLE1BQUFpQixJQUFBc04sV0FBQXZPLEVBQUE4SCxFQUFBeEssVUFDQXFSLEVBQUF6USxFQUFBNkIsT0FBQSxTQUFBQyxHQUFBLE1BQUFpQixJQUFBc04sV0FBQXZPLEVBQUE4SCxFQUFBdkssVUFDQXFSLEVBQUExUSxFQUFBNkIsT0FBQSxTQUFBQyxHQUFBLE1BQUFpQixJQUFBc04sV0FBQXZPLEVBQUE4SCxFQUFBdEssVUFDQXFSLEVBQUEzUSxFQUFBNkIsT0FBQSxTQUFBQyxHQUFBLE1BQUFpQixJQUFBc04sV0FBQXZPLEVBQUE4SCxFQUFBckssU0FTQSxJQU5BaVIsRUFBQXhHLFFBQUEsU0FBQWxJLEdBQUEsT0FBQUEsRUFBQStGLFFBQUEvRixFQUFBK0YsTUFBQSxLQUNBNEksRUFBQXpHLFFBQUEsU0FBQWxJLEdBQUEsT0FBQUEsRUFBQStGLFFBQUEvRixFQUFBK0YsTUFBQSxLQUNBNkksRUFBQTFHLFFBQUEsU0FBQWxJLEdBQUEsT0FBQUEsRUFBQStGLFFBQUEvRixFQUFBK0YsTUFBQSxLQUNBOEksRUFBQTNHLFFBQUEsU0FBQWxJLEdBQUEsT0FBQUEsRUFBQStGLFFBQUEvRixFQUFBK0YsTUFBQSxLQUdBMkksRUFBQTdMLE9BQUEsR0FBQThMLEVBQUE5TCxPQUFBLEVBQ0EsR0FBQWlNLEdBQUE3TixHQUFBOE4sY0FBQUwsRUFBQUMsRUFHQSxJQUFBQyxFQUFBL0wsT0FBQSxHQUFBZ00sRUFBQWhNLE9BQUEsRUFDQSxHQUFBbU0sR0FBQS9OLEdBQUE4TixjQUFBSCxFQUFBQyxFQUdBLElBQUFJLEdBQUEvUyxLQUFBMlEsZUFBQSxHQUFBblAsWUFBQWdSLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFFLElBRUFoQyxJQXdCQSxJQXZCQTBCLEVBQUE3TCxPQUFBLEdBQ0FtSyxFQUFBckYsTUFBQS9MLEdBQUEsSUFBQXNDLEtBQUErUSxFQUFBdFIsT0FBQW1LLE9BQUFBLEVBQUF4SyxPQUFBNFIsVUFBQSxJQUdBUCxFQUFBOUwsT0FBQSxHQUNBbUssRUFBQXJGLE1BQUEvTCxHQUFBLElBQUFzQyxLQUFBK1EsRUFBQXJSLE9BQUFrSyxPQUFBQSxFQUFBdkssT0FBQTJSLFVBQUEsSUFHQU4sRUFBQS9MLE9BQUEsR0FDQW1LLEVBQUFyRixNQUFBL0wsR0FBQSxJQUFBc0MsS0FBQStRLEVBQUFwUixPQUFBaUssT0FBQUEsRUFBQXRLLE9BQUEwUixVQUFBLElBR0FMLEVBQUFoTSxPQUFBLEdBQ0FtSyxFQUFBckYsTUFBQS9MLEdBQUEsSUFBQXNDLEtBQUErUSxFQUFBblIsT0FBQWdLLE9BQUFBLEVBQUFySyxPQUFBeVIsVUFBQSxJQU1BUixFQUFBN0wsT0FBQSxHQUFBOEwsRUFBQTlMLE9BQUEsR0FDQW1LLEVBQUFyRixNQUFBL0wsR0FBQSxLQUFBc0MsS0FBQStRLEVBQUFsUixRQUFBTyxXQUFBMlEsRUFBQXRSLE9BQUFZLFdBQUEwUSxFQUFBclIsT0FBQWtLLE9BQUFBLEVBQUF4SyxPQUFBNlIsUUFBQXJILEVBQUF2SyxPQUFBMlIsVUFBQSxJQUdBTixFQUFBL0wsT0FBQSxHQUFBZ00sRUFBQWhNLE9BQUEsRUFBQSxDQUNBLEdBQUFtTSxHQUFBL04sR0FBQThOLGNBQUFILEVBQUFDLEVBQ0E3QixHQUFBckYsTUFBQS9MLEdBQUEsS0FBQXNDLEtBQUErUSxFQUFBalIsUUFBQU0sV0FBQTJRLEVBQUFwUixPQUFBVSxXQUFBMFEsRUFBQW5SLE9BQUFnSyxPQUFBQSxFQUFBdEssT0FBQTJSLFFBQUFySCxFQUFBckssT0FBQXlSLFVBQUEsSUFFQSxNQUFBbEMsSUFnQkFwUSxjQUFBK0csVUFBQW9MLGNBQUEsU0FBQXpRLEVBQUFDLEdBS0EsSUFBQSxHQUpBMlEsTUFDQUUsRUFBQTlRLEVBQ0ErUSxFQUFBOVEsRUFFQXFFLEVBQUEsRUFBQUEsRUFBQXdNLEVBQUF2TSxPQUFBRCxJQUNBLElBQUEsR0FBQXFLLEdBQUEsRUFBQUEsRUFBQW9DLEVBQUF4TSxPQUFBb0ssSUFDQSxHQUFBbUMsRUFBQXhNLEdBQUF1RyxNQUFBa0csRUFBQXBDLEdBQUE5RCxLQUFBaUcsRUFBQXhNLEdBQUErRixTQUFBMEcsRUFBQXBDLEdBQUF0RSxRQUFBeUcsRUFBQXhNLEdBQUE4SCxVQUFBMkUsRUFBQXBDLEdBQUF2QyxRQUFBLENBQ0F3RSxFQUFBdkgsTUFBQStDLFFBQUEyRSxFQUFBcEMsR0FBQXZDLFFBQ0F2QixJQUFBa0csRUFBQXBDLEdBQUE5RCxJQUNBUixPQUFBMEcsRUFBQXBDLEdBQUF0RSxPQUNBNUMsTUFBQXFKLEVBQUF4TSxHQUFBbUQsT0FBQSxNQUFBc0osRUFBQXBDLEdBQUFsSCxPQUFBLElBQUFzSixFQUFBcEMsR0FBQWxILE1BQUEsRUFBQXNKLEVBQUFwQyxHQUFBbEgsT0FDQTNHLFFBQUFpUSxFQUFBcEMsR0FBQTdOLFFBQUEsR0FBQWlRLEVBQUFwQyxHQUFBMU4sWUFBQSxTQUNBQSxZQUFBNlAsRUFBQXhNLEdBQUF4RCxRQUFBLElBQUFnUSxFQUFBeE0sR0FBQXJELFlBQ0ErUCxNQUFBRixFQUFBeE0sR0FBQUssTUFDQXNNLE1BQUFGLEVBQUFwQyxHQUFBaEssTUFDQTNHLEtBQUE4UyxFQUFBeE0sR0FBQUssTUFBQSxNQUFBb00sRUFBQXBDLEdBQUFoSyxPQUVBLE9BSUEsTUFBQWlNLElBWUF0UyxjQUFBK0csVUFBQXdCLHlCQUFBLFNBQUE3RyxFQUFBQyxHQUNBLEdBQUE2USxHQUFBOVEsRUFDQStRLEVBQUE5USxFQUNBaVIsS0FDQUMsS0FFQUMsSUFDQXBSLEdBQUE0SixRQUFBLFNBQUF5SCxHQUNBLElBQUFELEVBQUFuSyxTQUFBb0ssRUFBQWhILFFBRUEsSUFBQSxHQUFBL0YsR0FBQSxFQUFBQSxFQUFBckUsRUFBQXNFLE9BQUFELElBQ0EsR0FBQXJFLEVBQUFxRSxHQUFBK0YsU0FBQWdILEVBQUFoSCxPQUFBLENBQ0ErRyxFQUFBL0gsS0FBQWdJLEVBQUFoSCxPQUNBLFNBT0EsS0FBQSxHQUFBL0YsR0FBQSxFQUFBQSxFQUFBd00sRUFBQXZNLE9BQUFELElBRUEsSUFBQTRNLEVBQUFqSyxTQUFBNkosRUFBQXhNLEdBQUF1RyxLQUFBLENBR0EsR0FBQXlHLEdBQUFSLEVBQUFyUCxPQUFBLFNBQUExQyxHQUNBLE1BQUFBLEdBQUE4TCxNQUFBaUcsRUFBQXhNLEdBQUF1RyxNQUVBMEcsRUFBQVIsRUFBQXRQLE9BQUEsU0FBQTFDLEdBQ0EsTUFBQUEsR0FBQThMLE1BQUFpRyxFQUFBeE0sR0FBQXVHLEtBRUFxRyxHQUFBN0gsS0FBQXlILEVBQUF4TSxHQUFBdUcsSUFLQSxLQUFBLEdBSkEyRyxNQUNBQyxLQUdBOUMsRUFBQSxFQUFBQSxFQUFBMkMsRUFBQS9NLE9BQUFvSyxJQUdBLElBQUE2QyxFQUFBdkssU0FBQXFLLEVBQUEzQyxHQUFBdkMsVUFBQWdGLEVBQUFuSyxTQUFBcUssRUFBQTNDLEdBQUF2QyxTQUFBLENBQ0FvRixFQUFBbkksS0FBQWlJLEVBQUEzQyxHQUFBdkMsUUFHQSxJQUFBc0YsR0FBQUosRUFBQTdQLE9BQUEsU0FBQTFDLEdBQ0EsTUFBQUEsR0FBQXFOLFVBQUFrRixFQUFBM0MsR0FBQXZDLFVBRUF1RixFQUFBSixFQUFBOVAsT0FBQSxTQUFBMUMsR0FDQSxNQUFBQSxHQUFBcU4sVUFBQWtGLEVBQUEzQyxHQUFBdkMsU0FHQSxJQUFBc0YsRUFBQW5OLFFBQUFvTixFQUFBcE4sT0FDQSxRQUdBLEtBQUEsR0FBQXFOLEdBQUEsRUFBQUEsRUFBQUYsRUFBQW5OLE9BQUFxTixJQUNBSCxFQUFBcEksTUFDQW9ELE1BQUFpRixFQUFBRSxHQUFBeEYsUUFDQXlGLFFBQUFILEVBQUFFLEdBQUFuSyxNQUNBcUssUUFBQUgsRUFBQUMsR0FBQW5LLFFBS0FnSyxFQUFBTSxLQUFBLFNBQUFuVCxFQUFBQyxHQUNBLE1BQUFELEdBQUE2TixLQUFBNU4sRUFBQTROLE9BRUEwRSxFQUFBOUgsTUFBQXdCLElBQUFpRyxFQUFBeE0sR0FBQXVHLElBQUFtSCxNQUFBUCxJQUdBLE1BQUFOLElBVUE3UyxjQUFBK0csVUFBQW9CLHFCQUFBLFNBQUF3TCxHQUlBLElBQUEsR0FIQVQsTUFDQVEsS0FFQTFOLEVBQUEsRUFBQUEsRUFBQTJOLEVBQUExTixPQUFBRCxJQUNBa04sRUFBQXZLLFNBQUFnTCxFQUFBM04sR0FBQStGLFVBQ0EySCxFQUFBM0ksS0FBQTRJLEVBQUF4USxPQUFBLFNBQUFDLEdBQUEsTUFBQUEsR0FBQTJJLFNBQUE0SCxFQUFBM04sR0FBQStGLFVBQ0FtSCxFQUFBbkksS0FBQTRJLEVBQUEzTixHQUFBK0YsUUFTQSxLQUFBLEdBTEEvRCxNQUNBNEwsS0FDQXhFLEVBQUF5RSxFQUFBQSxFQUNBeEUsSUFBQXdFLEVBQUFBLEdBRUE3TixFQUFBLEVBQUFBLEVBQUEwTixFQUFBek4sT0FBQUQsSUFBQSxDQUNBLEdBQUE4TixLQUNBQSxHQUFBLEdBQUEsR0FBQUosRUFBQTFOLEdBQUEsR0FBQStGLE1BSUEsS0FBQSxHQUhBb0MsR0FBQSxHQUFBdUYsRUFBQTFOLEdBQUEsR0FBQStGLE9BQ0FnSSxLQUVBMUQsRUFBQSxFQUFBQSxFQUFBcUQsRUFBQTFOLEdBQUFDLE9BQUFvSyxJQUFBLENBQ0EsR0FBQTJELElBQUFOLEVBQUExTixHQUFBcUssR0FBQWxILE1BQ0FvRCxFQUFBbUgsRUFBQTFOLEdBQUFxSyxHQUFBOUQsR0FFQXlILEdBQUEzRSxJQUNBQSxFQUFBMkUsR0FFQUEsRUFBQTVFLElBQ0FBLEVBQUE0RSxHQUVBRCxFQUFBaEosS0FBQWlKLEdBQ0FKLEVBQUE3SSxNQUFBb0QsS0FBQUEsRUFBQTVCLElBQUFBLEVBQUFwRCxNQUFBNkssSUFFQUYsRUFBQSxHQUFBQyxFQUNBL0wsRUFBQStDLEtBQUErSSxHQUtBLE1BSEE5TCxHQUFBeUwsS0FBQSxTQUFBblQsRUFBQUMsR0FDQSxNQUFBRCxHQUFBLEdBQUFDLEVBQUEsTUFFQTZPLElBQUFBLEVBQUFDLElBQUFBLEVBQUFySCxLQUFBQSxFQUFBaU0sWUFBQUwsSUFVQTVULGNBQUErRyxVQUFBYywwQkFBQSxTQUFBdkcsR0FDQSxHQUFBd1IsS0FFQXhSLEdBQUFnSyxRQUFBLFNBQUEyQyxHQUNBNkUsRUFBQW5LLFNBQUFzRixFQUFBbEMsU0FBQStHLEVBQUEvSCxLQUFBa0QsRUFBQWxDLFVBRUErRyxFQUFBVyxLQUFBLFNBQUFuVCxFQUFBQyxHQUNBLE9BQUFELEdBQUFDLEdBTUEsS0FBQSxHQUhBeUgsTUFDQTRLLEtBRUE1TSxFQUFBLEVBQUFBLEVBQUExRSxFQUFBMkUsT0FBQUQsSUFDQSxHQUFBNE0sRUFBQWpLLFNBQUFySCxFQUFBMEUsR0FBQXVHLEtBUUEsSUFBQSxHQUFBOEQsR0FBQSxFQUFBQSxFQUFBckksRUFBQS9CLE9BQUFvSyxJQUNBckksRUFBQXFJLEdBQUE5RCxNQUFBakwsRUFBQTBFLEdBQUF1RyxNQUNBdkUsRUFBQXFJLEdBQUEvTyxFQUFBMEUsR0FBQStGLFNBQUF6SyxFQUFBMEUsR0FBQW1ELFdBVkEsQ0FDQXlKLEVBQUE3SCxLQUFBekosRUFBQTBFLEdBQUF1RyxJQUVBLElBQUF1SCxJQUFBdkgsSUFBQWpMLEVBQUEwRSxHQUFBdUcsSUFFQXVILEdBQUF4UyxFQUFBMEUsR0FBQStGLFNBQUF6SyxFQUFBMEUsR0FBQW1ELE1BQ0FuQixFQUFBK0MsS0FBQStJLEdBU0EsT0FBQTlMLEtBQUFBLEVBQUFDLEtBQUE2SyxJQVNBOVMsY0FBQStHLFVBQUF6QyxhQUFBLFNBQUEwRCxHQUNBQSxFQUFBNUQsU0FBQXFQLEtBQUEsU0FBQW5ULEVBQUFDLEdBR0EsSUFEQSxHQUFBeUYsR0FBQSxHQUNBa08sTUFBQTVULEVBQUFpSCxPQUFBdkIsS0FBQUEsR0FDQSxJQUFBbU8sR0FBQTdULEVBQUE4VCxVQUFBLEVBQUFwTyxFQUdBLEtBREFBLEVBQUEsR0FDQWtPLE1BQUEzVCxFQUFBZ0gsT0FBQXZCLEtBQUFBLEdBQ0EsSUFBQXFPLEdBQUE5VCxFQUFBNlQsVUFBQSxFQUFBcE8sRUFFQSxPQUFBbU8sS0FBQUUsRUFDQUYsRUFBQUUsR0FFQS9ULEVBQUFDLEdBQUFrVCxPQUFBLEtBQUFuVCxHQUFBLEVBQUEsS0FjQU4sY0FBQStHLFVBQUFzRyxvQkFBQSxTQUFBL0wsRUFBQWtNLEdBRUFsTSxFQUFBZ0ssUUFBQSxTQUFBMkMsRUFBQUMsR0FJQSxJQUFBLEdBSEFDLEdBQUE3TSxFQUFBNE0sR0FBQW5DLE9BQ0FxQyxFQUFBOU0sRUFBQTRNLEdBQUEvRSxNQUVBbkQsRUFBQSxFQUFBQSxFQUFBd0gsRUFBQXZILE9BQUFELElBQ0FtSSxHQUFBWCxFQUFBeEgsR0FBQW1JLE9BQ0FDLEdBQUEsRUFBQVosRUFBQXhILEdBQUFtRCxNQUFBLElBR0E3SCxHQUFBNE0sR0FBQS9FLE1BQUFpRixLQWFBcE8sY0FBQStHLFVBQUF1TixlQUFBLFNBQUF0VixFQUFBdVYsRUFBQXZNLEVBQUF5QixHQUVBLElBQUEsR0FBQXpELEdBQUEsRUFBQUEsRUFBQXlELEVBQUF4RCxPQUFBRCxJQUNBeUQsRUFBQXpELEdBQUFoSCxHQUFBLElBQUFBLEVBQUEsS0FDQSxZQUFBdVYsRUFDQTlLLEVBQUF6RCxHQUFBeEQsUUFBQXdGLEVBQ0EsYUFBQXVNLEVBQ0E5SyxFQUFBekQsR0FBQXZELFNBQUF1RixFQUNBLGdCQUFBdU0sRUFDQTlLLEVBQUF6RCxHQUFBdEQsWUFBQXNGLEVBQ0EsZ0JBQUF1TSxJQUNBOUssRUFBQXpELEdBQUFyRCxZQUFBcUYsS0FlQWhJLGNBQUErRyxVQUFBeU4sa0JBQUEsU0FBQWIsRUFBQWMsRUFBQTNCLEdBS0EsSUFBQSxHQUpBNEIsSUFBQSxJQUFBLE1BQUEsTUFBQSxPQUFBLElBQUEsTUFBQSxPQUNBQyxLQUdBM08sRUFBQSxFQUFBQSxFQUFBOE0sRUFBQTdNLE9BQUFELElBRUEyTixFQUFBeFEsT0FBQSxTQUFBQyxHQUFBLE1BQUFBLEdBQUEySSxTQUFBK0csRUFBQTlNLEtBQUFzRixRQUFBLFNBQUFzSixHQUdBRixFQUFBcEosUUFBQSxTQUFBdUosR0FFQUosRUFBQUksR0FBQWxNLFNBQUFpTSxFQUFBckksT0FDQVcsU0FBQXlILEVBQUFFLEdBQ0FGLEVBQUFFLEtBQUFELEVBQUF6TCxPQUVBbkQsSUFBQTJPLEVBQUFFLEdBQUE1TyxPQUNBME8sRUFBQUUsR0FBQTlKLE1BQUE2SixFQUFBekwsT0FFQXdMLEVBQUFFLEdBQUE3TyxPQUFBNE8sRUFBQXpMLFVBUUEsS0FBQSxHQURBMkwsTUFDQTlPLEVBQUEsRUFBQUEsRUFBQThNLEVBQUE3TSxPQUFBRCxJQUNBOE8sRUFBQS9KLEtBQUE0SixFQUFBLEVBQUEzTyxHQUFBMk8sRUFBQSxFQUFBM08sR0FHQSxPQURBMk8sR0FBQSxHQUFBRyxFQUNBSCxHQ2xpQkExUyxNQUFBOEUsVUFBQVgsV0FBQSxXQUNBLE9BQUEsR0FTQW5FLE1BQUE4RSxVQUFBcEgsUUFBQSxXQUNBLE1BQUFMLE1BQUFnQyxLQUFBLEdBQUErRSxPQVNBcEUsTUFBQThFLFVBQUFDLE1BQUEsV0FDQSxNQUFBMUgsTUFBQU4sSUFTQWlELE1BQUE4RSxVQUFBNUUsU0FBQSxXQUNBLE1BQUE3QyxNQUFBNEMsVUFBQVMsWUFBQSxLQUFBckQsS0FBQTRDLFVBQUFRLGFBU0FULE1BQUE4RSxVQUFBM0UsWUFBQSxXQUNBLE1BQUE5QyxNQUFBNEMsVUFBQU0sUUFBQSxLQUFBbEQsS0FBQTRDLFVBQUFPLFVBU0FSLE1BQUE4RSxVQUFBcEgsUUFBQSxXQUNBLE1BQUFMLE1BQUFnQyxLQUFBLEdBQUErRSxPQU9BcEUsTUFBQThFLFVBQUFNLGFBQUEsV0FDQS9ILEtBQUFNLFVBQUFzRyxPQUFBLHFCQUFBNUcsS0FBQWlDLE1BQUEsU0FBQTJFLE9BQUEsd0JBQUE1RyxLQUFBa0MsU0FBQSxTQUNBbEMsS0FBQVEsVUFBQW9HLE9BQUEscUJBQUE1RyxLQUFBaUMsTUFBQSxTQUFBMkUsT0FBQSx3QkFBQTVHLEtBQUFrQyxTQUFBLFVBT0FTLE1BQUE4RSxVQUFBWSxPQUFBLFdBR0EsR0FBQUMsR0FBQXZELEdBQUF3RCwwQkFBQXZJLEtBQUFnQyxLQUNBd0csa0JBQUFDLHVCQUFBSCxFQUFBSSxLQUFBSixFQUFBSyxLQUFBM0ksS0FBQUksS0FBQUosS0FBQUMsVUFHQSxJQUFBd1YsR0FBQTFRLEdBQUE4RCxxQkFBQTdJLEtBQUFnQyxLQUNBOEcsZUFBQUMsY0FBQTBNLEVBQUF6VixLQUFBRSxNQUFBRixLQUFBSSxPQVNBdUMsTUFBQThFLFVBQUF6RCxPQUFBLFNBQUFoQyxHQUNBaEMsS0FBQWdDLEtBQUFBLEVBQ0FoQyxLQUFBcUksU01uSEEsSUFBQXFOLGFBQUEsV0FHQSxHQUFBQyxNQUdBQyxFQUFBM08sR0FBQTRPLGVBQUFDLE9BQUEsVUFBQSxVQUFBLFVBQUEsVUFBQSxVQUFBLFVBQUEsWUFNQUMsR0FIQTlPLEdBQUE0TyxlQUFBQyxPQUFBLFVBQUEsVUFBQSxVQUFBLFVBQUEsVUFBQSxVQUFBLFlBR0E3TyxHQUFBNE8sZUFBQUMsT0FBQSxVQUFBLFVBQUEsVUFBQSxVQUFBLFVBQUEsVUFBQSxhQU9BekosRUFBQSxTQUFBckksR0FHQUEsRUFBQTBFLEtBQUFzRCxRQUFBLFNBQUFnSyxHQUNBQSxFQUFBaEQsU0FDQTJDLEVBQUFsSyxLQUFBLEdBQUFoTSxlQUFBdVcsRUFBQXRXLEdBQUFzVyxFQUFBaFUsS0FBQWdVLEVBQUE1VCxXQUFBNFQsRUFBQTNULFdBQUEyVCxFQUFBcEssT0FBQW9LLEVBQUEvQyxVQUVBMEMsRUFBQWxLLEtBQUEsR0FBQTlJLE9BQUFxVCxFQUFBdFcsR0FBQXNXLEVBQUFoVSxLQUFBZ1UsRUFBQXBLLFdBSUErSixFQUFBM0osUUFBQSxTQUFBaUssR0FDQUEsRUFBQWxPLGVBQ0FrTyxFQUFBNU4sWUFVQXJFLEVBQUEsU0FBQUEsR0FDQUEsRUFBQTBFLEtBQUFzRCxRQUFBLFNBQUFnSyxHQUNBTCxFQUFBM0osUUFBQSxTQUFBaUssR0FDQUEsRUFBQXZPLFVBQUFzTyxFQUFBdFcsS0FDQXVXLEVBQUFuUCxhQUNBbVAsRUFBQWpTLE9BQUFnUyxFQUFBaFUsS0FBQWdVLEVBQUE1VCxXQUFBNFQsRUFBQTNULFlBRUE0VCxFQUFBalMsT0FBQWdTLEVBQUFoVSxZQWFBa1UsRUFBQSxTQUFBL1EsR0FDQSxNQUFBQSxHQUFBZ1IsVUFDQWxQLEdBQUFtUCxVQUFBLHdCQUFBQyxRQUFBLGlCQUFBLE9BQ0FwUCxJQUFBbVAsVUFBQSxxQkFBQUMsUUFBQSxvQkFBQSxLQUlBQyxpQkFBQSxFQUdBclAsR0FBQW1QLFVBQUEsaUJBQUFHLE1BQUEsU0FBQXBWLEdBQUEsTUFBQUEsS0FDQXFWLEtBQUEsT0FBQSxTQUFBclYsR0FBQSxNQUFBeVUsR0FBQXpVLEVBQUFzVixPQUdBeFAsR0FBQW1QLFVBQUEsaUJBQUFDLFFBQUEsZ0JBQUEsUUFFQUMsa0JBRUFyUCxHQUFBbVAsVUFBQSxRQUFBalIsRUFBQThILElBQUFkLFFBQUEsS0FBQSxLQUNBa0ssUUFBQSxnQkFBQSxHQUNBRSxNQUFBLFNBQUFwVixHQUFBLE1BQUFBLEtBQ0FxVixLQUFBLE9BQUEsU0FBQXJWLEdBQUEsTUFBQTRVLEdBQUE1VSxFQUFBc1YsT0FHQXhQLEdBQUFtUCxVQUFBLHdCQUFBQyxRQUFBLGlCQUFBLEdBQ0FwUCxHQUFBbVAsVUFBQSxxQkFBQUMsUUFBQSxvQkFBQSxHQUdBcFAsR0FBQW1QLFVBQUEsUUFBQWpSLEVBQUE4SCxJQUFBZCxRQUFBLEtBQUEsS0FBQWtLLFFBQUEsdUJBQUEsR0FDQXBQLEdBQUFtUCxVQUFBLFFBQUFqUixFQUFBOEgsSUFBQWQsUUFBQSxLQUFBLEtBQUFrSyxRQUFBLG9CQUFBLE1BU0EsT0FKQXBTLFFBQUFNLEdBQUEsWUFBQThILEdBQ0FwSSxPQUFBTSxHQUFBLGNBQUEyUixHQUNBalMsT0FBQU0sR0FBQSxhQUFBUCxJQUdBQSxPQUFBQSxNQ3RHQTZILGNBQUEsV0FPQSxJQUFBLEdBTEE2SyxJQUFBLEdBQUEzVCx3QkFBQSxHQUFBLEdBQUFBLHdCQUFBLEdBQUEsR0FBQUEsd0JBQUEsR0FBQSxHQUFBQSx3QkFBQSxJQUlBNFQsS0FDQWpRLEVBQUEsRUFBQUEsRUFBQSxFQUFBQSxJQUNBaVEsRUFBQWxMLE1BQUFtTCxFQUFBLEdBQUFuUyxlQUFBaUMsR0FBQXhGLEVBQUEsR0FBQW9FLGdCQUFBb0IsR0FBQW1RLEdBQUEsR0FBQWpSLG1CQUFBYyxHQUFBdkYsRUFBQSxHQUFBK0UsbUJBQUFRLElBR0EsSUFBQXFGLEdBQUEsV0FDQSxHQUFBNUIsS0FJQSxPQUhBdU0sR0FBQTFLLFFBQUEsU0FBQVEsR0FDQXJDLEVBQUFzQixLQUFBZSxFQUFBbEkscUJBRUE2RixHQUlBMkIsRUFBQSxXQUNBLElBQUEsR0FBQXBGLEdBQUEsRUFBQUEsRUFBQWdRLEVBQUEvUCxPQUFBRCxJQUNBLElBQUFnUSxFQUFBaFEsR0FBQWpELGlCQUFBLE9BQUEsQ0FFQSxRQUFBLEdBU0FxVCxFQUFBLFNBQUFsVSxHQUVBZ0MsU0FBQVcsMEJBQUEzQyxFQUFBTSxRQUFBLFNBQUFzQyxFQUFBQyxHQUNBQSxHQUNBUixxQkFBQSxtQkFBQXJDLEVBQUFsRCxHQUFBOEYsRUFBQTVDLEVBQUFPLFlBSUF5QixTQUFBaUIsNkJBQUFqRCxFQUFBTSxRQUFBTixFQUFBTyxTQUFBLFNBQUEyQyxFQUFBTCxHQUNBQSxJQUNBc1IsV0FBQTVFLGFBQUF2UCxFQUFBbEQsS0FBQSxFQUNBdUYscUJBQUEscUJBQUFyQyxFQUFBbEQsR0FBQW9HLEVBQUFsRCxFQUFBUSxnQkFJQXdCLFNBQUF1Qiw0QkFBQXZELEVBQUFNLFFBQUFOLEVBQUFPLFNBQUFQLEVBQUFRLFlBQUEsU0FBQWdELEVBQUFYLEdBQ0FBLEdBQ0FSLHFCQUFBLHNCQUFBckMsRUFBQWxELEdBQUEwRyxFQUFBeEQsRUFBQVMsZ0JBSUFnSixFQUFBLFNBQUExSSxFQUFBcVQsR0FDQUEsRUFDQS9TLE9BQUFDLEtBQUEsa0JBQUFQLEdBR0FpQixTQUFBQyx3QkFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FBQXJFLGNBQ0FxRSxHQUFBQyxjQUFBRixTQUFBQSxHQUVBLEtBQUEsR0FBQTRCLEdBQUEsRUFBQUEsRUFBQSxFQUFBQSxJQUNBekIscUJBQUEsa0JBQUF5QixFQUFBNUIsRUFBQSxPQVFBdEIsRUFBQSxTQUFBeVQsR0FDQVAsRUFBQU8sR0FBQXpULFFBQ0FqRCxFQUFBLHNCQUFBMFcsRUFBQSx1QkFBQUEsRUFBQSxvQkFBQUEsR0FBQXRSLEtBQUEsSUFDQXBGLEVBQUEsa0JBQUEwVyxHQUFBN1IsS0FBQSxtQkFBQThSLFdBQUEsWUFDQTNXLEVBQUEsaUJBQUErRixhQUFBLFdBS0EsT0FEQStGLE9BQUEsSUFFQU4sb0JBQUFBLEVBQ0ErSyxxQkFBQUEsRUFDQXpLLEtBQUFBLEVBQ0E3SSxNQUFBQSxFQUNBc0ksVUFBQUEsS0poREFqRixPQUFBWSxVQUFBNUUsU0FBQSxXQUNBLEdBQUE3QyxLQUFBOEcsV0FBQSxDQUNBLEdBQUExRCxHQUFBLE9BQUFwRCxLQUFBNEMsVUFBQSxHQUFBLEdBQUE1QyxLQUFBNEMsVUFBQSxHQUFBUSxXQUNBLE9BQUFwRCxNQUFBNEMsVUFBQSxHQUFBTyxTQUFBLEtBQUFDLEVBQUEsS0FBQXBELEtBQUE0QyxVQUFBLEdBQUFTLFlBRUEsT0FBQXVLLFNBQUE1TixLQUFBb0QsWUFBQSxHQUFBcEQsS0FBQTRDLFVBQUFRLFlBQUEsTUFBQSxJQUFBcEQsS0FBQTRDLFVBQUFTLGFBVUF3RCxNQUFBWSxVQUFBM0UsWUFBQSxXQUNBLEdBQUE5QyxLQUFBOEcsV0FBQSxDQUNBLEdBQUExRCxHQUFBLE9BQUFwRCxLQUFBNEMsVUFBQSxHQUFBLEdBQUE1QyxLQUFBNEMsVUFBQSxHQUFBUSxXQUNBLE9BQUFwRCxNQUFBNEMsVUFBQSxHQUFBTyxTQUFBLEtBQUFDLEVBQUEsS0FBQXBELEtBQUE0QyxVQUFBLEdBQUFTLFlBRUEsTUFBQXJELE1BQUE0QyxVQUFBTSxRQUFBLEtBQUFsRCxLQUFBNEMsVUFBQU8sVUFVQTBELE1BQUFZLFVBQUF6RCxPQUFBLFNBQUFoQyxHQUNBaEMsS0FBQWdDLEtBQUFBLEVBQ0FoQyxLQUFBbVgsbUJBQUEsRUFBQSxLQVNBdFEsTUFBQVksVUFBQTJQLGtCQUFBLFNBQUFwVCxHQUNBLEdBQUFnSixHQUFBaEosRUFBQStJLE1BQUE5RSxPQUFBakUsRUFBQStJLE1BQUFwRyxPQUFBLEdBQ0EwUSxFQUFBLFdBQUFyWCxLQUFBTixHQUFBc04sQ0FFQXNLLGlCQUFBQyxtQkFBQUYsRUFBQXJULEVBQUFrSixPQUFBLGNBQUFsTixLQUFBTixHQUFBLG9CQUFBTSxLQUFBTixHQUFBLGdCQUFBTSxLQUFBTixHQUFBTSxLQUFBSSxPQVNBeUcsTUFBQVksVUFBQXlPLFdBQUEsU0FBQS9RLEdBQ0EsR0FBQTZILEdBQUE3SCxFQUFBNEgsTUFBQXlLLE9BQUEsRUFFQTVDLE9BQUF6UCxFQUFBNEgsTUFBQXlLLE9BQUEsTUFDQXhLLEVBQUE3SCxFQUFBNEgsTUFBQXlLLE9BQUEsSUFFQUYsZ0JBQUFDLG1CQUFBLE1BQUF2WCxLQUFBTixHQUFBc04sRUFBQTdILEVBQUE4SCxJQUFBLFFBQUFqTixLQUFBTixHQUFBLGFBQUFNLEtBQUFOLEdBQUEsVUFBQU0sS0FBQU4sR0FBQU0sS0FBQUksT0FRQXlHLE1BQUFZLFVBQUFMLGtCQUFBLFdBQ0FELElBQ0EsSUFBQUEsS0FPQSxPQU5BbkgsTUFBQWdDLEtBQUFnSyxRQUFBLFNBQUEyQyxHQUNBeEgsRUFBQWtDLFNBQUFzRixFQUFBbEMsU0FBQXRGLEVBQUFzRSxLQUFBa0QsRUFBQWxDLFVBRUF0RixFQUFBZ04sS0FBQSxTQUFBblQsRUFBQUMsR0FDQSxPQUFBRCxHQUFBQyxJQUVBa0csR0FTQU4sTUFBQVksVUFBQWdRLFlBQUEsV0FDQSxPQUFBelgsS0FBQThHLFlBQ0E5RyxLQUFBSSxLQUFBaUosU0FBQSxNQVNBeEMsTUFBQVksVUFBQWdHLFNBQUEsU0FBQVMsR0FDQWxPLEtBQUFxSCxXQUFBVixPQUFBLEdBQ0EzRyxLQUFBK08sV0FHQSxJQUFBMkksR0FBQTFYLEtBQUFzSCxPQUFBbEMsS0FBQSxTQUdBaUMsRUFBQXJILEtBQUFxSCxVQUNBckgsTUFBQU4sRUFDQWdZLEdBQUFDLEtBQUEsV0FDQXRRLEVBQUFvRSxNQUFBL0wsR0FBQWEsRUFBQVAsTUFBQXdXLEtBQUEsTUFBQTNNLE1BQUF0SixFQUFBUCxNQUFBcUYsVUFHQSxJQUFBK0ksR0FBQW1HLEVBQUFBLEVBQ0E5RixJQUFBOEYsRUFBQUEsRUFDQW1ELEdBQUFDLEtBQUEsV0FDQSxHQUFBOUksSUFBQXRPLEVBQUFQLE1BQUF3VyxLQUFBLFNBQUFvQixNQUFBLEtBQUEsRUFDQXhKLEdBQUFTLEVBQUFULEVBQUFTLEVBQUFULEVBQ0FLLEVBQUFJLEVBQUFKLEVBQUFJLEVBQUFKLEdBR0EsSUFBQXZILEdBQUFsSCxLQUFBZ0gsUUFDQTBRLEdBQUFDLEtBQUEsV0FHQSxJQUFBLEdBRkE5SSxJQUFBdE8sRUFBQVAsTUFBQXdXLEtBQUEsU0FBQW9CLE1BQUEsS0FBQSxHQUNBOUksRUFBQXZPLEVBQUFQLE1BQUF3VyxLQUFBLGFBQ0E5SCxFQUFBTixFQUFBTSxHQUFBRCxFQUFBQyxJQUVBLElBQUEsR0FBQWhJLEdBQUEsRUFBQUEsRUFBQXdILEVBQUF2SCxPQUFBRCxJQUNBd0gsRUFBQXhILEdBQUFtSSxPQUFBSCxHQUNBRyxHQUFBSCxJQUNBSSxHQUFBLEVBQUFaLEVBQUF4SCxHQUFBbUQsTUFBQSxJQUNBaUYsRUFBQTVILEVBQUE0SCxHQUtBdk8sR0FBQVAsTUFBQXFGLEtBQUF5SixNQUlBakksTUFBQVksVUFBQXNILFVBQUEsV0FDQSxHQUFBL08sS0FBQXFILFdBQUFWLE9BQUEsRUFBQSxDQUNBLEdBQUFPLEdBQUFsSCxLQUFBZ0gsUUFDQWhILE1BQUFxSCxXQUFBMkUsUUFBQSxTQUFBbEksR0FDQXZELEVBQUEsSUFBQXVELEVBQUFwRSxJQUFBMkYsS0FBQTZCLEVBQUFwRCxFQUFBK0YsWUFLQWhELE1BQUFZLFVBQUFNLGFBQUEsV0FDQSxHQUFBL0gsS0FBQThHLFdBQUEsQ0FDQSxHQUFBcUIsR0FBQW5JLEtBQUFOLEdBQUF1SSxPQUFBLEdBQUFDLGNBQ0FFLEVBQUFwSSxLQUFBTixHQUFBdUksT0FBQSxHQUFBQyxhQUNBbEksTUFBQXdILE9BQUFaLE9BQUEsc0JBQUF1QixFQUFBLE1BQUFDLEVBQUEsU0FDQXBJLEtBQUF3SCxPQUFBWixPQUFBLGlEQUFBdUIsRUFBQSxZQUFBbkksS0FBQWlDLE1BQUEsc0RBQUFtRyxFQUFBLFlBQUFwSSxLQUFBa0MsU0FBQSxhQUVBbEMsTUFBQXdILE9BQUFaLE9BQUEscUJBQUE1RyxLQUFBaUMsTUFBQSxTQUFBMkUsT0FBQSx3QkFBQTVHLEtBQUFrQyxTQUFBLFVBT0EyRSxNQUFBWSxVQUFBWSxPQUFBLFdBQ0EsR0FBQTJOLEdBQUFoVyxLQUFBNlgsZ0JBQUE3WCxLQUFBZ0MsTUFHQW9TLEVBQUEsRUFDQTRCLEdBQUEsR0FBQTVCLE1BQUFwSSxRQUFBLFNBQUE4TCxHQUNBMUQsR0FBQSxPQUFBMEQsRUFBQWpKLEtBQUEsVUFJQTdPLEtBQUFzSCxPQUFBVixPQUFBLG9CQUFBNUcsS0FBQU4sR0FBQSwrQ0FBQTBVLEVBQUEsUUFRQSxLQUFBLEdBTEEyRCxHQUFBLEVBQ0FDLEVBQUEsRUFDQUMsS0FHQXZSLEVBQUEsRUFBQUEsRUFBQXNQLEVBQUFyUCxPQUFBRCxJQUFBLENBTUEsSUFBQSxHQUxBd1IsR0FBQWxDLEVBQUF0UCxHQUNBdUcsRUFBQWlMLEVBQUFqTCxJQUNBbUgsRUFBQThELEVBQUE5RCxNQUNBa0IsRUFBQSwrQkFBQXRWLEtBQUFOLEdBQUFzWSxFQUFBLHlCQUFBL0ssRUFBQSxRQUVBOEQsRUFBQSxFQUFBQSxFQUFBcUQsRUFBQXpOLE9BQUFvSyxJQUFBLENBQ0EsR0FBQW9ILEdBQUEvRCxFQUFBckQsRUFDQXVFLElBQUEsa0JBQUE2QyxFQUFBdE8sTUFBQSxpQkFBQXNPLEVBQUF0SixLQUFBLFVBQUE3TyxLQUFBTixHQUFBcVksRUFBQSxLQUFBL1gsS0FBQWdILFNBQUFtUixFQUFBdE8sT0FBQSxRQUNBb08sRUFBQXhNLE1BQUEvTCxHQUFBLEtBQUFNLEtBQUFOLEdBQUFxWSxFQUFBbE8sTUFBQXNPLEVBQUF0TyxRQUNBa08sSUFFQS9YLEtBQUFzSCxPQUFBVixPQUFBME8sRUFBQSxTQUVBL1UsRUFBQSxPQUFBUCxLQUFBTixHQUFBc1ksR0FBQTlJLE1BQUEsV0FDQSxHQUFBbEMsR0FBQWhOLEtBQUFOLEdBQUE4WCxPQUFBLEVBRUE1QyxPQUFBNVUsS0FBQU4sR0FBQThYLE9BQUEsTUFDQXhLLEVBQUFoTixLQUFBTixHQUFBOFgsT0FBQSxHQUVBLElBQUF2SyxHQUFBMU0sRUFBQSxJQUFBUCxLQUFBTixHQUFBLGNBQUEyRixNQUNBcEIsUUFBQUMsS0FBQSxlQUFBNkksTUFBQS9NLEtBQUFOLEdBQUFzTixRQUFBQSxFQUFBQyxJQUFBQSxNQUVBK0ssSUFFQWhZLEtBQUFpWSxXQUFBQSxHQUdBcFIsTUFBQVksVUFBQTBQLGtCQUFBLFNBQUFuVCxFQUFBb1UsR0FFQSxHQUFBL0MsR0FBQXRRLEdBQUFtUSxrQkFBQWxWLEtBQUFnQyxLQUFBcVcsYUFBQWxELFFBQUFuVixLQUFBbUgsZ0JBQ0FtUixHQUFBQyxFQUFBLGVBQUFDLElBQUEscUJBQUFDLElBQUEsdUJBQUFDLEtBQUEsMEJBQUE5QixFQUFBLGVBQUErQixJQUFBLHFCQUFBQyxJQUFBLHFCQUFBcEQsR0FBQSxlQUVBcUQsS0FFQXpFLEVBQUEsRUFDQXBVLE1BQUFtSCxlQUFBNkUsUUFBQSxTQUFBNkMsR0FDQXVGLEdBQUEsT0FBQXZGLEVBQUEsU0FHQSxJQUFBa0osR0FBQSxFQUNBQyxFQUFBLENBRUFoVSxJQUNBaEUsS0FBQXVILGFBQUE1QixLQUFBLEdBSUEsSUFBQW1ULEdBQUEsRUFFQTlZLE1BQUF1SCxhQUFBWCxPQUFBLDJCQUFBNUcsS0FBQU4sR0FBQSxrREFBQTBVLEVBQUEsUUFFQSxLQUFBLEdBQUEyRSxLQUFBMUQsR0FDQSxHQUFBQSxFQUFBN0osZUFBQXVOLEdBQUEsQ0FDQSxHQUFBekQsR0FBQSxvQ0FBQXRWLEtBQUFOLEdBQUFzWSxFQUFBLElBS0E5USxFQUFBbEgsS0FBQWdILFNBQ0FnUyxFQUFBaFosS0FBQXFILFVBQ0FpTyxJQUFBLHdCQUFBZ0QsRUFBQVMsR0FBQSxPQUNBLElBQUFwVSxHQUFBM0UsS0FBQU4sRUFDQTJWLEdBQUEwRCxHQUFBL00sUUFBQSxTQUFBbkMsR0FDQSxHQUFBb1AsRUFFQUEsR0FEQSxPQUFBRixFQUNBbFAsRUFBQWlQLEVBRUFqUCxFQUFBd08sYUFBQWxELFFBQUE0RCxHQUFBcFMsT0FHQTJPLEdBQUEsa0JBQUEzUSxFQUFBb1QsRUFBQSxnQkFBQWtCLEVBQUEsa0JBQUEvUixFQUFBK1IsR0FBQSxRQUNBSixFQUFBcE4sTUFBQS9MLEdBQUEsV0FBQWlGLEVBQUFvVCxFQUFBbE8sTUFBQW9QLElBR0FELEVBQUF2TixNQUFBL0wsR0FBQSxVQUFBaUYsRUFBQW9ULEVBQUFsTyxNQUFBb1AsSUFFQWxCLE1BR0EvWCxLQUFBdUgsYUFBQVgsT0FBQTBPLEVBQUEsU0FDQS9VLEVBQUEsWUFBQVAsS0FBQU4sR0FBQXNZLEdBQUE5SSxNQUFBLFdBQ0EsR0FBQWdLLEdBQUEzWSxFQUFBLElBQUFQLEtBQUFOLEdBQUEsY0FBQTJGLE1BQ0FwQixRQUFBQyxLQUFBLHFCQUFBNkksTUFBQS9NLEtBQUFOLEdBQUF3TixPQUFBZ00sTUFFQWxCLElBR0EsS0FBQUksR0FDQTdYLEVBQUEsSUFBQTZYLEdBQUF0TCxTQUFBLGdCQUVBOU0sS0FBQW1aLGdCQUFBTixHQU1BaFMsTUFBQVksVUFBQW9RLGdCQUFBLFNBQUE3VixHQUVBLEdBQUFvWCxLQUNBcFgsR0FBQWdLLFFBQUEsU0FBQVEsR0FDQW9CLFNBQUF3TCxFQUFBNU0sRUFBQVMsT0FBQW1NLEVBQUE1TSxFQUFBUyxLQUFBVCxFQUFBUyxNQUdBLElBQUF2RSxLQUdBLEtBQUEsR0FBQXVFLEtBQUFtTSxHQUNBLEdBQUFBLEVBQUE1TixlQUFBeUIsR0FBQSxDQUNBLEdBQUFvTSxHQUFBclgsRUFBQTZCLE9BQUEsU0FBQTJJLEdBQUEsTUFBQUEsR0FBQVMsTUFBQW1NLEVBQUFuTSxLQUVBbUgsSUFDQWlGLEdBQUFyTixRQUFBLFNBQUE4TCxHQUNBMUQsRUFBQTNJLE1BQUFvRCxLQUFBaUosRUFBQXJMLE9BQUE1QyxNQUFBaU8sRUFBQWpPLFVBSUF1SyxFQUFBRCxLQUFBLFNBQUFuVCxFQUFBQyxHQUNBLE1BQUFELEdBQUE2TixLQUFBNU4sRUFBQTROLE9BR0FuRyxFQUFBK0MsTUFBQXdCLElBQUFtTSxFQUFBbk0sR0FBQW1ILE1BQUFBLElBR0EsTUFBQTFMLElBS0E3QixNQUFBWSxVQUFBNlIsT0FBQSxXQUNBdFosS0FBQXVaLGlCQUFBdlosS0FBQWlZLFlBQ0FqWSxLQUFBdVosaUJBQUF2WixLQUFBbVosa0JBVUF0UyxNQUFBWSxVQUFBOFIsaUJBQUEsU0FBQXRCLEdBQ0EsR0FBQXVCLElBQUEsRUFFQUMsSUFBQWxGLEVBQUFBLEVBQ0EwRCxHQUFBak0sUUFBQSxTQUFBMkMsR0FDQThLLEdBQUE5SyxFQUFBOUUsTUFBQTRQLEdBQUE5SyxFQUFBOUUsTUFBQTRQLEdBSUEsS0FBQSxHQUFBL1MsR0FBQSxFQUFBQSxFQUFBdVIsRUFBQXRSLE9BQUFELElBQUEsQ0FDQSxHQUFBbUQsR0FBQTJQLEVBQUEzUCxHQUFBb08sRUFBQXZSLEdBQUFtRCxNQUFBNFAsRUFBQSxHQUNBbFosR0FBQTBYLEVBQUF2UixHQUFBaEgsSUFBQWdhLEtBQ0FDLFdBQUEsNERBQUE5UCxFQUFBLDBCQUFBQSxFQUFBLGNLblhBLElBQUF3TyxjQUFBLFdBR0EsR0FBQWxELElBQ0FvRCxHQUFBLGNBQUEsaUJBQUEsbUJBQUEsVUFBQSxpQkFBQSxhQUNBLFVBQUEsWUFBQSxvQkFBQSxhQUFBLGtCQUFBLGVBQ0EsaUJBQUEsZUFBQSwwQkFDQUMsS0FBQSxpQkFBQSxpQkFBQSxhQUFBLG9CQUFBLGFBQUEsZUFBQSxpQkFBQSxnQkFDQUMsS0FBQSxjQUFBLG1CQUFBLFlBQUEsbUJBQ0FDLE1BQUEsVUFBQSxVQUFBLDBCQUNBOUIsR0FBQSxnQkFBQSxnQkFBQSxxQkFBQSx3QkFBQSwyQkFDQSxlQUFBLG9CQUFBLHFCQUFBLGlCQUNBLGtCQUFBLFdBQUEsV0FBQSxvQkFBQSxhQUNBK0IsS0FBQSxnQkFBQSxxQkFBQSxlQUFBLG9CQUFBLHFCQUFBLGlCQUFBLFdBQUEsYUFDQUMsS0FBQSxnQkFBQSx3QkFBQSwyQkFBQSxrQkFBQSxXQUFBO0VBSUFnQixFQUFBLEdBR0F4QixFQUFBLEdBR0F0SCxLQVFBekUsRUFBQSxTQUFBckksR0FDQUEsRUFBQTBFLEtBQUFzRCxRQUFBLFNBQUFnSyxHQUNBQSxFQUFBaEQsU0FDQWxDLEVBQUFyRixLQUFBLEdBQUE1RSxPQUFBbVAsRUFBQXRXLEdBQUFzVyxFQUFBaFUsTUFBQWdVLEVBQUFwSyxPQUFBb0ssRUFBQS9DLFVBQUEsSUFFQW5DLEVBQUFyRixLQUFBLEdBQUE1RSxPQUFBbVAsRUFBQXRXLEdBQUFzVyxFQUFBaFUsS0FBQWdVLEVBQUFwSyxRQUFBLE1BS0FrRixFQUFBOUUsUUFBQSxTQUFBNk4sR0FDQUEsRUFBQTlSLGVBQ0E4UixFQUFBeFIsU0FDQXdSLEVBQUExQyxtQkFBQSxFQUFBaUIsS0FJQXRILEVBQUE5RSxRQUFBLFNBQUE2TixHQUFBQSxFQUFBUCxZQUlBcEQsRUFBQSxTQUFBbFMsR0FDQSxHQUFBNFYsSUFBQTVWLEVBQUErSSxNQUdBLE1BRkF4TSxHQUFBLGNBQUE2RSxLQUFBLHVCQUFBcEIsRUFBQWlKLElBQUEsTUFBQTZNLFNBQUEzTSxZQUFBLHFCQUNBNE0sWUFBQSxHQUlBLElBQUEsS0FBQUgsRUFBQSxDQUNBLEdBQUF2VSxHQUFBOUUsRUFBQSxJQUFBcVosRUFBQSxjQUFBdlUsTUFDQTlFLEdBQUEsY0FBQTZFLEtBQUEsdUJBQUFDLEVBQUEsTUFBQXlVLFNBQUEzTSxZQUFBLGdCQUVBeU0sRUFBQTVWLEVBQUErSSxNQUVBeE0sRUFBQSxjQUFBNkUsS0FBQSx1QkFBQXBCLEVBQUFpSixJQUFBLE1BQUE2TSxTQUFBaE4sU0FBQSxnQkFFQWdFLEVBQUE5RSxRQUFBLFNBQUE2TixHQUNBQSxFQUFBM0QsV0FBQWxTLE1BSUFnVyxFQUFBLFNBQUFoVyxHQUNBLEdBQUFrSixHQUFBbEosRUFBQWtKLE1BRUEsSUFBQWtMLElBQUFwVSxFQUFBK0ksTUFBQSxDQUNBLEdBQUFrTixHQUFBMVosRUFBQSxJQUFBeUQsRUFBQStJLE1BQUEsY0FBQTFILE1BTUEsT0FKQTlFLEdBQUEsY0FBQTZFLEtBQUEsdUJBQUE4SCxFQUFBLE1BQUFySixPQUFBLFdBQ0EsTUFBQXRELEdBQUFQLE1BQUFxRixTQUFBNkgsSUFDQTRNLFNBQUEzTSxZQUFBLHFCQUNBaUwsRUFBQSxJQUlBLEdBQUEsS0FBQUEsRUFBQSxDQUNBLEdBQUE2QixHQUFBMVosRUFBQSxJQUFBNlgsRUFBQSxjQUFBL1MsTUFDQTlFLEdBQUEsY0FBQTZFLEtBQUEsdUJBQUE2VSxFQUFBLE1BQUFwVyxPQUFBLFdBQ0EsTUFBQXRELEdBQUFQLE1BQUFxRixTQUFBNFUsSUFDQUgsU0FBQTNNLFlBQUEsZ0JBR0E1TSxFQUFBLGNBQUE2RSxLQUFBLHVCQUFBOEgsRUFBQSxNQUFBckosT0FBQSxXQUNBLE1BQUF0RCxHQUFBUCxNQUFBcUYsU0FBQTZILElBQ0E0TSxTQUFBaE4sU0FBQSxnQkFHQXNMLEVBQUFwVSxFQUFBK0ksTUFFQStELEVBQUE5RSxRQUFBLFNBQUE2TixHQUNBQSxFQUFBekMsa0JBQUFwVCxNQUtBeUosRUFBQSxTQUFBekosR0FDQSxHQUFBa0ssR0FBQWxLLEVBQUFrSyxTQUNBNEMsR0FBQTlFLFFBQUEsU0FBQTZOLEdBQ0FBLEVBQUFwQyxnQkFDQW9DLEVBQUFwTSxTQUFBUyxHQUNBMkwsRUFBQTFDLG1CQUFBLEVBQUFpQixNQUlBdEgsRUFBQTlFLFFBQUEsU0FBQTZOLEdBQ0FBLEVBQUFQLFlBSUF2SyxFQUFBLFdBQ0ErQixFQUFBOUUsUUFBQSxTQUFBNk4sR0FDQUEsRUFBQTlLLGNBR0ErQixFQUFBOUUsUUFBQSxTQUFBNk4sR0FDQUEsRUFBQVAsWUFJQXRWLEVBQUEsU0FBQUEsR0FDQUEsRUFBQTBFLEtBQUFzRCxRQUFBLFNBQUFnSyxHQUNBbEYsRUFBQTlFLFFBQUEsU0FBQWlLLEdBQ0FBLEVBQUF2VyxLQUFBc1csRUFBQXRXLEtBQ0F1VyxFQUFBblAsV0FDQW1QLEVBQUFqUyxPQUFBZ1MsRUFBQWhVLEtBQUFnVSxFQUFBNVQsV0FBQTRULEVBQUEzVCxZQUVBNFQsRUFBQWpTLE9BQUFnUyxFQUFBaFUsV0FnQkEsT0FSQWlDLFFBQUFNLEdBQUEsWUFBQThILEdBQ0FwSSxPQUFBTSxHQUFBLGNBQUEyUixHQUNBalMsT0FBQU0sR0FBQSxvQkFBQXlWLEdBQ0EvVixPQUFBTSxHQUFBLFlBQUFrSixHQUNBeEosT0FBQU0sR0FBQSxhQUFBd0ssR0FDQTlLLE9BQUFNLEdBQUEsYUFBQVAsSUFJQW1SLFFBQUFBIiwiZmlsZSI6ImNvbXBhcmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gREVQRU5ERU5DSUVTIDogRGF0YVByb2Nlc3NvciwgR3JvdXBlZEJhckdyYXBoTW9kdWxlLCBWZWN0b3JHcmFwaE1vZHVsZSwgQm94UGxvdE1vZHVsZVxyXG5cclxuLyoqXHJcbiAqIE9iamVjdCB0aGF0IGhhbmRsZXMgbG9naWMgZm9yIHVwZGF0aW5nIGFuZCBjcmVhdGluZyBhbGwgb2YgdGhlIGdyYXBocyBvbiB0aGUgZGFzaGJvYXJkIGFjcm9zcyB0aGUgdGFic1xyXG4gKlxyXG4gKiBAcGFyYW0gaWQge1N0cmluZ30gdGhlIGlkIG9mIHRoZSBzZWxlY3Rpb25cclxuICogQHBhcmFtIGNvbWJpbmVkUm93cyB7T2JqZWN0W119IHRoZSByZXN1bHQgb2Ygcm93czEgZGl2aWRlZCBieSByb3dzMlxyXG4gKiBAcGFyYW0gcm93czEge09iamVjdFtdfSB0aGUgcm93cyBmb3IgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gcm93czIge09iamVjdFtdfSB0aGUgcm93cyBmb3IgdGhlIHNlbGVjdGlvbiBzZWxlY3Rpb25cclxuICogQHBhcmFtIHNlbGVjdGlvbjEge09iamVjdH0gdGhlIGZpcnN0IHNlYXJjaFxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uMiB7T2JqZWN0fSB0aGUgc2Vjb25kIHNlYXJjaFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBDb21iaW5lZEdyYXBoKGlkLCBjb21iaW5lZFJvd3MsIHJvd3MxLHJvd3MyLHNlbGVjdGlvbjEsc2VsZWN0aW9uMil7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuZ3JvdXBlZElEID0gJyNncm91cGVkLWJhci0nK2lkO1xyXG4gIHRoaXMuYm94SUQgPSAnI2JveHBsb3QtJytpZDtcclxuICB0aGlzLnZlY3RvcklEID0gJyN2ZWN0b3ItZ3JhcGgtJytpZDtcclxuICB0aGlzLnJvd3MxID0gcm93czE7XHJcbiAgdGhpcy5yb3dzMiA9IHJvd3MyO1xyXG4gIHRoaXMuY29tYmluZWRSb3dzID0gY29tYmluZWRSb3dzO1xyXG4gIHRoaXMuc2VsZWN0aW9uMSA9IHNlbGVjdGlvbjE7XHJcbiAgdGhpcy5zZWxlY3Rpb24yID0gc2VsZWN0aW9uMjtcclxuICB0aGlzLnVuaXQgPSB0aGlzLmdldFVuaXQoKTtcclxuXHJcblxyXG4gIC8vIENhY2hlIGRvbSBlbGVtZW50c1xyXG4gIHRoaXMuJHRpdGxlQmFyID0gJCgnI3RpdGxlLWJhci0nK2lkKTtcclxuICB0aGlzLiR0aXRsZUJveCA9ICQoJyN0aXRsZS1ib3gtJytpZCk7XHJcbiAgdGhpcy4kdGl0bGVWZWN0b3IgPSAkKCcjdGl0bGUtdmVjdG9yLScraWQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgaWYgdGhlIHRoZSBvYmplY3QgaXMgY29tYmluZWQgb3Igbm90XHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgY29tYmluZWRcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuaXNDb21iaW5lZCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGlkIG9mIHRoZSBjb21iaW5lZCBncmFwaHNcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgaWQgb2YgdGhlIGNvbWJpbmVkIGdyYXBoc1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRJRCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5pZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBvZiB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHRpdGxlIG9mIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uMVRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uMSA9PT0gbnVsbCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvbjEuc3ViQ2F0ZWdvcnk7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uMS5kZXNjcmlwdGlvbiArIFwiLCBcIiArIHRoaXMuc2VsZWN0aW9uMS5jYXRlZ29yeSArIFwiLCBcIiArIHN1YkNhdGVnb3J5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHRpdGxlIG9mIHRoZSBzZWNvbmQgc2VsZWN0aW9uXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHRpdGxlIG9mIHRoZSBzZWNvbmQgc2VsZWN0aW9uXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFNlbGVjdGlvbjJUaXRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgc3ViQ2F0ZWdvcnkgPSB0aGlzLnNlbGVjdGlvbjIgPT09IG51bGwgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb24yLnN1YkNhdGVnb3J5O1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbjIuZGVzY3JpcHRpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbjIuY2F0ZWdvcnkgKyBcIiwgIFwiICsgc3ViQ2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIGNvbWJpbmVkIGdyYXBoXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGNvbWJpbmVkIHVuaXRzIGZvciB0aGUgc2VsZWN0aW9uc1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRVbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3MxWzBdLnVuaXRzICsgXCIgLyBcIiArIHRoaXMucm93czJbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0IGZvciB0aGUgc2VsZWN0aW9uc1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRVbml0MSA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzMVswXS51bml0cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IGZvciB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0IGZvciB0aGUgc2VsZWN0aW9uc1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRVbml0MiA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzMlswXS51bml0cztcclxufVxyXG5cclxuXHJcblxyXG4vKipcclxuICogSW5zZXJ0cyB0aGUgdGl0bGVzIGZvciB0aGUgZ3JhcGhzIGludG8gdGhlIERPTSBlbGVtZW50c1xyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5pbnNlcnRUaXRsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHJhdGlvSFRNTCA9ICc8aDQ+UmF0aW8gJyt0aGlzLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKycgLyAnK3RoaXMuaWQuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCkgKyc8L2g0PidcclxuICB2YXIgczEgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj48c3BhbiBzdHlsZT1cIkNvbG9yOiBibGFjaztcIj4nK3RoaXMuaWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrJzogPC9zcGFuPicrdGhpcy5nZXRTZWxlY3Rpb24xVGl0bGUoKSsnPC9oND4nO1xyXG4gIHZhciBzMiA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPjxzcGFuIHN0eWxlPVwiQ29sb3I6IGJsYWNrO1wiPicrdGhpcy5pZC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKSsnOiA8L3NwYW4+Jyt0aGlzLmdldFNlbGVjdGlvbjJUaXRsZSgpKyc8L2g0Pic7XHJcblxyXG4gIC8vIHZhciB0aXRsZUhUTUwgPSAnPGg0IGNsYXNzPVwiY29tYmluZWQtdGl0bGVcIj4nK3RoaXMuZ2V0U2VsZWN0aW9uMVRpdGxlKCkrJzxicj48c3BhbiBjbGFzcz1cIm92ZXJcIj5vdmVyPC9zcGFuPjxicj4nK3RoaXMuZ2V0U2VsZWN0aW9uMlRpdGxlKCkrJzwvaDQ+J1xyXG5cclxuICB0aGlzLiR0aXRsZUJhci5hcHBlbmQocmF0aW9IVE1MKTtcclxuICB0aGlzLiR0aXRsZUJhci5hcHBlbmQoczEpO1xyXG4gIHRoaXMuJHRpdGxlQmFyLmFwcGVuZChzMik7XHJcblxyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZChyYXRpb0hUTUwpO1xyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZChzMSk7XHJcbiAgdGhpcy4kdGl0bGVCb3guYXBwZW5kKHMyKTtcclxuXHJcblxyXG4gIHRoaXMuJHRpdGxlVmVjdG9yLmFwcGVuZChyYXRpb0hUTUwpO1xyXG4gIHRoaXMuJHRpdGxlVmVjdG9yLmFwcGVuZChzMSk7XHJcbiAgdGhpcy4kdGl0bGVWZWN0b3IuYXBwZW5kKHMyKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBHcmFwaHNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ3JlYXRlIHRoZSBncm91cGVkIGJhciBncmFwaFxyXG4gICAgdmFyIGdyb3VwZWREYXRhID0gZHAuY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCh0aGlzLmNvbWJpbmVkUm93cyk7XHJcbiAgICBHcm91cGVkQmFyTW9kdWxlLmNyZWF0ZWRHcm91cGVkQmFyR3JhcGgoZ3JvdXBlZERhdGEuZGF0YSxncm91cGVkRGF0YS5rZXlzLHRoaXMudW5pdCwgdGhpcy5ncm91cGVkSUQpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgYm94IHBsb3QgZ3JhcGhcclxuICAgIHZhciBib3hwbG90RGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JCb3hQbG90KHRoaXMuY29tYmluZWRSb3dzKTtcclxuICAgIEJveFBsb3RNb2R1bGUuY3JlYXRlQm94UGxvdChib3hwbG90RGF0YSwgdGhpcy5ib3hJRCwgdGhpcy51bml0KTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIHZlY3RvciBncmFwaFxyXG4gICAgdmFyIHZlY3RvckdyYXBoRGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JWZWN0b3JHcmFwaCh0aGlzLnJvd3MxLCB0aGlzLnJvd3MyKTtcclxuICAgIFZlY3Rvck1vZHVsZS5jcmVhdGVWZWN0b3JHcmFwaCh2ZWN0b3JHcmFwaERhdGEsdGhpcy5nZXRVbml0MigpLHRoaXMuZ2V0VW5pdDEoKSx0aGlzLnZlY3RvcklEKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDYWxsZWQgd2hlbiB0aGUgcm93cyBhcmUgdXBkYXRlZCBieSBDUElcclxuICpcclxuICogQHBhcmFtIHJvd3MgdGhlIG5ldyBjb21iaW5lZCByb3dzXHJcbiAqIEBwYXJhbSB0aGUgbmV3IHJvd3MgZm9yIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICogQHBhcmFtIHJvd3MyIHRoZSBuZXcgcm93cyBmb3IgdGhlIHNlY29uZCBzZWxlY3Rpb25cclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJvd3MsIHJvd3MxLHJvd3MyKSB7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnJvd3MxID0gcm93czE7XHJcbiAgdGhpcy5yb3dzMiA9IHJvd3MyO1xyXG4gIHRoaXMuY3JlYXRlKCk7XHJcbn1cclxuIiwidmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgY29udGFpbnMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHRvIG1hbmlwdWxhdGUgZGF0YSBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gKiAqL1xyXG5mdW5jdGlvbiBEYXRhUHJvY2Vzc29yKCl7fVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIG9mIGNvcHkgb2YgdGhlIGRhdGFUYWJsZXMgb2JqZWN0LiBDb3BpZXMgZWFjaCB0YWJsZSBhbmQgaXRzIHZhbHVlcyBmb3IgZWFjaCByb3cuXHJcbiAqXHJcbiAqIEBwYXJhbSBkYXRhVGFibGVzIHtPYmplY3R9IGNvbnRhaW5zIDYgYXJyYXlzIG9mIHJvd3Mgb25lIGZvciBlYWNoIHRhYmxlLiBBdHRyaWJ1dGUgY2FuIGJlIHVuZGVmaW5lZCBpZiB0YWJsZSBkb2VzIG5vdCBleGlzdFxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBBIGNvcHkgb2YgdGhlIGRhdGFUYWJsZXMgb2JqZWN0XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNvcHlEYXRhVGFibGVzID0gZnVuY3Rpb24oZGF0YVRhYmxlcykge1xyXG4gIHZhciBvcmlnVGFibGVzID0gW2RhdGFUYWJsZXMudGFibGVBLGRhdGFUYWJsZXMudGFibGVCLGRhdGFUYWJsZXMudGFibGVDLGRhdGFUYWJsZXMudGFibGVELGRhdGFUYWJsZXMudGFibGVBQixkYXRhVGFibGVzLnRhYmxlQ0RdOyAvLyBBZGQgdGFibGVzIHRvIGFycmF5IHRvIGl0ZXJhdGUgb3ZlciB0aGVtXHJcbiAgdmFyIHRhYmxlcyA9IFtbXSxbXSxbXSxbXSxbXSxbXV07IC8vIEVtcHR5IGFycmF5cyB0byBpbnNlcnQgbmV3IHJvd3Mgd2l0aCB2YWx1ZXMgdGhhdCBhcmUgY29waWVzIG9mIHRoZSBvcmlnaW5hbFxyXG5cclxuICAvLyBJdGVyYXRlIG92ZXIgdGhlIG9yaWdpbmFsIHRhYmxlc1xyXG4gIGZvcih2YXIgaiA9IDA7IGogPCBvcmlnVGFibGVzLmxlbmd0aDsgaisrKXtcclxuICAgICAgdmFyIGEgPSBvcmlnVGFibGVzW2pdOyAvLyBHcmFiIHRoZSBjdXJyZW50IHRhYmxlIHdpdGggaW5kZXggaVxyXG4gICAgICBpZihhICE9PSB1bmRlZmluZWQpeyAvLyBJdCBtaWdodCBub3QgZXhpc3QgZHVlIHRvIGl0IG5vdCBiZWluZyBzZWxlY3RlZCBieSB0aGUgdXNlclxyXG4gICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspeyAvLyBGb3IgZXZlcnkgcm93IGNvcHkgYWxsIHRoZSBmaWVsZHNcclxuICAgICAgICAgICAgICB0YWJsZXNbal0ucHVzaCh7Y2F0ZWdvcnkgOmFbaV0uY2F0ZWdvcnksIGRlc2NyaXB0aW9uIDogYVtpXS5kZXNjcmlwdGlvbixkaXNjX3lyOiBhW2ldLmRpc2NfeXIsZWRiOiBhW2ldLmVkYixcclxuICAgICAgICAgICAgICAgICAgZmNhc3RfeXI6IGFbaV0uZmNhc3RfeXIsbmV0d29yazphW2ldLm5ldHdvcmssbm90ZTphW2ldLm5vdGUsb2JzX3lyOmFbaV0ub2JzX3lyLHBfa2V5OiBhW2ldLnBfa2V5LHNjaF9yZWY6YVtpXS5zY2hfcmVmLFxyXG4gICAgICAgICAgICAgICAgICBzY2hlZHVsZTphW2ldLnNjaGVkdWxlLHNlY3Rpb246YVtpXS5zZWN0aW9uLHN1Yl9jYXRlZ29yeTogYVtpXS5zdWJfY2F0ZWdvcnksdW5pdHM6YVtpXS51bml0cyx2YWx1ZTphW2ldLnZhbHVlfSlcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH1cclxuICByZXR1cm4gbmV3IERhdGFUYWJsZXModGFibGVzWzBdLHRhYmxlc1sxXSx0YWJsZXNbMl0sdGFibGVzWzNdLHRhYmxlc1s0XSx0YWJsZXNbNV0pOyAvLyBSZXR1cm4gdGhlIGNvcHlcclxufVxyXG5cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY29weVJvd3MgPSBmdW5jdGlvbiAocm93cykge1xyXG4gICAgdmFyIG5ld1Jvd3MgPSBbXTtcclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihyKXtcclxuICAgICAgbmV3Um93cy5wdXNoKHt2YWx1ZSA6IHIudmFsdWUsIGNhdGVnb3J5IDpyLmNhdGVnb3J5LCBkZXNjcmlwdGlvbiA6IHIuZGVzY3JpcHRpb24sZGlzY195cjogci5kaXNjX3lyLGVkYjogci5lZGIsXHJcbiAgICAgICAgICBmY2FzdF95cjogci5mY2FzdF95cixuZXR3b3JrOiByLm5ldHdvcmssbm90ZTogIHIubm90ZSxvYnNfeXI6IHIub2JzX3lyLHBfa2V5OiByLnBfa2V5LHNjaF9yZWY6IHIuc2NoX3JlZixcclxuICAgICAgICAgIHNjaGVkdWxlOiByLnNjaGVkdWxlLHNlY3Rpb246IHIuc2VjdGlvbixzdWJfY2F0ZWdvcnk6IHIuc3ViX2NhdGVnb3J5LHVuaXRzOiByLnVuaXRzfSlcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ld1Jvd3M7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbmQgb2JqZWN0IHdpdGggdGhyZWUgYXJyYXlzIHRoYXQgYXJlIHVzZWQgdG8gaXRlcmF0ZSBvdmVyIGFuZCBhZGQgdGhlIGRhdGEgdG8gdGhlIHBhZ2UuIFRoZSBzdHJ1Y3R1cmUgc2ltcGxpZmllc1xyXG4gKiBjcmVhdGlvbiBvZiB0YWJsZSwgZ3JhcGhzIGFuZCBjb21iaW5lZCBncmFwaHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBkYXRhVGFibGVzIHtPYmplY3R9IGNvbnRhaW5zIDYgYXJyYXlzIG9mIHJvd3Mgb25lIGZvciBlYWNoIHRhYmxlLiBUYWJsZSBhcnJheSBjYW4gYmUgZW1wdHkgaWYgdGFibGUgZG9lcyBub3QgZXhpc3RcclxuICogQHJldHVybnMge29iamVjdH0gRGF0YSBzdHJ1Y3R1cmVcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlRGF0YVN0cnVjdHVyZXNXaXRoQ29weSA9IGZ1bmN0aW9uIChjb3B5T2ZEYXRhVGFibGVzKXtcclxuICAgIHZhciBzZWxlY3Rpb25EYXRhQXJyYXkgPSBbXTsgLy8gVXNlZCB0byBjcmVhdGUgdGhlIHJlZ3VsYXIgZ3JhcGhzXHJcbiAgICB2YXIgc2VsZWN0aW9uVGFibGVzQXJyYXkgPSBbXTsgLy8gVGFibGVzIGFsc28gY29udGFpbnMgY29tYmluZWQgZGF0YVxyXG4gICAgdmFyIGNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5ID0gW107IC8vIFVzZWQgdG8gY3JlYXRlIHZlY3RvciBncmFwaHNcclxuXHJcbiAgICAvLyBBbiBhcnJheSBvZiB0cnVlIG9yIGZhbHNlIHZhbHVlcyBpZiBhIHRhYmxlIGNvbnRhaW5zIHZhbHVlc1xyXG4gICAgdmFyIHNlbGVjdGVkUm93cyA9IFtjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQS5sZW5ndGggPiAwLGNvcHlPZkRhdGFUYWJsZXMudGFibGVCLmxlbmd0aCA+IDAsY29weU9mRGF0YVRhYmxlcy50YWJsZUMubGVuZ3RoID4gMCxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlRC5sZW5ndGggPiAwXTtcclxuXHJcbiAgICAvLyBBbiBhcnJheSB3aXRoIHRoZSB0YWJsZXMgZGF0YVxyXG4gICAgdmFyIHRhYmxlcyA9IFtjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQSxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQixjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQyxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlRCxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQUIsY29weU9mRGF0YVRhYmxlcy50YWJsZUNEXTtcclxuXHJcbiAgICAvLyBDcmVhdGVzIHRoZSA0IG5vcm1hbCB0YWJsZXMgYW5kIHRoZSBjb21iaW5lZCB0YWJsZXNcclxuICAgIHZhciBpZHMgPSBbJ2EnLCdiJywnYycsJ2QnLCdhYicsJ2NkJ107IC8vIFRoZSBpZCdzIGxpbmUgdXAgd2l0aCB0aGUgdGFibGVzIGFycmF5IHRvIGFkZCBhbiBpZCB0byBlYWNoIHJvd1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGVjdGVkUm93cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoc2VsZWN0ZWRSb3dzW2ldKXsgLy8gT25seSBnbyB0aHJvdWdoIHRhYmxlIGlmIGl0IGhhcyByb3dzXHJcbiAgICAgICAgICAgIHZhciBzdWJ0aXRsZSA9IHRhYmxlc1tpXVswXS5zZWN0aW9uICsgXCIsIFwiICsgdGFibGVzW2ldWzBdLmNhdGVnb3J5OyAvLyBDcmVhdGUgc3VidGl0bGUgd2l0aCBzZWN0aW9uIGFuZCBjYXRlZ29yeVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc3ViIGNhdGVnb3J5IGlzIG51bGwgaWYgc28ganVzdCB1c2UgZGVzY3JpcHRpb24gZWxzZSBhbHNvIHVzZSBzdWIgY2F0ZWdvcnlcclxuICAgICAgICAgICAgdmFyIHRpdGxlID0gdGFibGVzW2ldWzBdLnN1Yl9jYXRlZ29yeSA9PT0gbnVsbCA/IHRhYmxlc1tpXVswXS5kZXNjcmlwdGlvbiA6IHRhYmxlc1tpXVswXS5zdWJfY2F0ZWdvcnkgKyBcIiwgXCIgKyB0YWJsZXNbaV1bMF0uZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgYSByb3cgYWxvbmcgd2l0aCB0aGUgaWQgb2YgdGhlIHRhYmxlIHRoZSB0aXRsZSwgc3VidGl0bGUgYW5kIHVuaXQgdG8gYm90aCB0YWJsZSBhbmQgc2VsZWN0aW9uIGFycmF5c1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25UYWJsZXNBcnJheS5wdXNoKG5ldyBTZWxlY3RlZFRhYmxlRGF0YSh0YWJsZXNbaV0saWRzW2ldLHRpdGxlLHN1YnRpdGxlLCB0YWJsZXNbaV1bMF0udW5pdHMpKTtcclxuICAgICAgICAgICAgc2VsZWN0aW9uRGF0YUFycmF5LnB1c2gobmV3IFNlbGVjdGlvbkRhdGEodGFibGVzW2ldLCB0aXRsZSwgc3VidGl0bGUgLHRhYmxlc1tpXVswXS51bml0cyxpZHNbaV0pKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBjb21iaW5lZCBzcGVjaWFsIGNhc2UsIGlmIEEgb3IgQyBleGlzdCBpdCBpcyBwb3NzaWJsZSBhIGNvbWJpbmVkIHRhYmxlIG5lZWRzIHRvIGJlIGNyZWF0ZWRcclxuICAgICAgICAgICAgaWYoaWRzW2ldID09PSAnYScgfHwgaWRzW2ldID09PSAnYycpe1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZWN0ZWRSb3dzW2krMV0peyAvLyBDaGVjayB0aGF0IGEgc2VsZWN0aW9ucyBoYXMgYmVlbiBtYWRlIGlmIHNvIGNyZWF0ZSB0aGUgY29tYmluZWQgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICB2YXIganVtcCA9IGkgPT09IDAgPyA0IDogMzsgLy8gSWYgMCBuZWVkIHRvIGp1bXAgdG8gdGhlIGxvY2F0aW9uIG9mIGFiIHRhYmxlIGVsc2UganVtcCB0byBsb2NhdGlvbiBvZiBjZCB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJUaXRsZUp1bXAgPSB0YWJsZXNbaSsxXVswXS5zZWN0aW9uICsgXCIsIFwiICsgdGFibGVzW2krMV1bMF0uY2F0ZWdvcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlSnVtcCA9IHRhYmxlc1tpKzFdWzBdLnN1Yl9jYXRlZ29yeSA9PT0gbnVsbCA/IHRhYmxlc1tpKzFdWzBdLmRlc2NyaXB0aW9uIDogdGFibGVzW2krMV1bMF0uc3ViX2NhdGVnb3J5ICsgXCIsIFwiICsgdGFibGVzW2krMV1bMF0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uVGFibGVzQXJyYXkucHVzaChuZXcgU2VsZWN0ZWRUYWJsZURhdGEodGFibGVzW2kranVtcF0saWRzW2kranVtcF0sIHRpdGxlICsgXCIsIFwiICsgc3VidGl0bGUsIHRpdGxlSnVtcCArIFwiLCBcIiArIHN1YlRpdGxlSnVtcCwgdGFibGVzW2krMV1bMF0udW5pdHMpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21iaW5lZFNlbGVjdGlvbkRhdGFBcnJheS5wdXNoKG5ldyBTZWxlY3Rpb25EYXRhQ29tYmluZWQodGFibGVzW2kranVtcF0sdGFibGVzW2ldLHRhYmxlc1tpKzFdLCB0aXRsZSArIFwiIFwiICsgc3VidGl0bGUsIHRpdGxlSnVtcCArIFwiIFwiICsgc3ViVGl0bGVKdW1wLHRhYmxlc1tpXVswXS51bml0cyx0YWJsZXNbaSsxXVswXS51bml0cyxpZHNbaStqdW1wXSkpOyAvLyBUT0RPIGFzayBob3cgdG8gZm9ybWF0IHRpdGxlcyBmb3IgY29tYmluZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgRGF0YVN0cnVjdHVyZShzZWxlY3Rpb25EYXRhQXJyYXksc2VsZWN0aW9uVGFibGVzQXJyYXksY29tYmluZWRTZWxlY3Rpb25EYXRhQXJyYXkpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0aGUgc2VsZWN0aW9ucyB0aGUgdXNlciBoYXMgbWFkZSBhcmUgY29tcGxldGUuIEZvciBleGFtcGxlIGlmIGEgc2VsZWN0aW9uIGlzIG1hZGUgZm9yIGEgc2VjdGlvbiBpbiBhIHJvdyB0aGUgY2F0ZWdvcnlcclxuICogYWxzbyBoYXMgdG8gYmUgY2hvc2VuIGFsb25nIHdpdGggYSBkZXNjcmlwdGlvbiBhbmQgc3ViIGNhdGVnb3J5IGlmIGl0IGV4aXN0cy5cclxuICpcclxuICogQHBhcmFtIHNlbGVjdGlvbnMge09iamVjdH0gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBzZWN0aW9ucyBmb3IgZWFjaCByb3csIGFuIGFycmF5IG9mIDQgc2VsZWN0aW9uIHJvd3NcclxuICogQHBhcmFtIHZhbGlkT3B0aW9ucyB7T2JqZWN0fSBjb250YWlucyBpZiBhIHJvdyBoYXMgYSBzdWIgY2F0ZWdvcnkgb3Igbm90IGZhbHNlIGlmIG5vIHN1YiBjYXRlZ29yeVxyXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBhIHZhbGlkIHNlYXJjaCBmYWxzZSBpZiBub3RcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUudmFsaWRhdGVTZWFyY2hQYXJhbXMgPSBmdW5jdGlvbiAoc2VsZWN0aW9ucywgdmFsaWRPcHRpb25zKXtcclxuICAgIHZhciByZXR1cm5WYWwgPSB0cnVlO1xyXG4gICAgc2VsZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtLCBpKSB7XHJcbiAgICAgICAgaWYoZWxlbS5zdWJDYXRlZ29yeSA9PT0gXCJcIiAmJiB2YWxpZE9wdGlvbnNbaV0peyAvLyBWYWxpZCBvcHRpb25zIGhvbGRzIGlmIHRoZXJlIGlzIGEgcG9zc2libGUgb3B0aW9uIHRvIGNob29zZWZyb20gaW4gdGhlIHNlbGVjdCBkcm9wIGRvd25cclxuICAgICAgICAgICAgcmV0dXJuVmFsID0gZmFsc2U7IC8vIFRoZXJlIGlzIGEgcG9zc2libGUgc3ViIGNhdGVnb3J5IHNvIGl0IGhhcyB0byBiZSBjaG9zZW4gZnJvbVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2tzIGlmIG9uZSBvZiB0aGUgc2VsZWN0aW9ucyBpcyBlbXB0eVxyXG4gICAgICAgIGlmKGVsZW0uc2VjdGlvbiA9PT0gXCJcIiB8fCBlbGVtLmNhdGVnb3J5ID09PSBcIlwiIHx8IGVsZW0uZGVzY3JpcHRpb24gPT09IFwiXCIpe1xyXG4gICAgICAgICAgICAvLyBOb3cgY2hlY2sgaWYgb25lIG9mIHRoZSBzZWxlY3Rpb25zIGlzIG5vdCBlbXB0eVxyXG4gICAgICAgICAgICBpZihlbGVtLnNlY3Rpb24gIT09IFwiXCIgfHwgZWxlbS5jYXRlZ29yeSAhPT0gXCJcIiB8fCBlbGVtLmRlc2NyaXB0aW9uICE9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIHJldHVyblZhbCA9IGZhbHNlOyAvLyBBIHJvdyBjYW5ub3QgaGF2ZSBvbmUgaXRlbSBzZWxlY3RlZCBhbmQgYW5vdGhlciBlbXB0eVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmV0dXJuVmFsO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIHJvdyBmcm9tIHRoZSBkYXRhYmFzZSBtYXRjaGVzIHRoZSBzZWxlY3Rpb24gZnJvbSB0aGUgdXNlci4gVGhpcyBpcyB1c2VkIGJlY2F1c2UgdGhlIHVzZXIgY2FuIG1ha2UgZm91ciBkaWZmZXJlbnRcclxuICogc2VsZWN0aW9ucyBhbmQgdGhlIHF1ZXJ5IGZvciB0aGUgZGF0YWJhc2UgcmV0dW5zIGFsbCB0aGUgcm93cyBmb3IgYWxsIHRoZSBzZWN0aW9ucy5cclxuICpcclxuICogQHBhcmFtIERCUm93IHtPYmplY3R9IEEgcm93IGZyb20gdGhlIGRhdGFiYXNlIGNvbnRhaW5zIGFsbCB0aGUgZmllbGRzXHJcbiAqIEBwYXJhbSBTZWxlY3Rpb24ge09iamVjdH0gY29udGFpbnMgc2VjdGlvbiwgY2F0ZWdvcnksIHN1YiBjYXRlZ29yeSBhbmQgZGVzY3JpcHRpb24gZnJvbSBhIHVzZXIgc2VsZWN0aW9uXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgZGF0YWJhc2Ugcm93IGJlbG9uZ3MgdG8gdGhlIHVzZXIgc2VsZWN0aW9uXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLm1hdGNoREJSb3cgPSBmdW5jdGlvbiAoREJSb3csIHNlbGVjdGlvbikge1xyXG4gIGlmKERCUm93LnNlY3Rpb24gPT09IHNlbGVjdGlvbi5zZWN0aW9uICYmIERCUm93LmNhdGVnb3J5ID09PSBzZWxlY3Rpb24uY2F0ZWdvcnkgJiYgREJSb3cuZGVzY3JpcHRpb24gPT09IHNlbGVjdGlvbi5kZXNjcmlwdGlvbil7XHJcbiAgICAgIGlmKERCUm93LnN1Yl9jYXRlZ29yeSAhPT0gbnVsbCl7XHJcbiAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnN1YkNhdGVnb3J5ID09PSBEQlJvdy5zdWJfY2F0ZWdvcnk7IC8vIFN1YiBjYXQgY291bGQgYmUgbnVsbCBidXQgd291bGQgc3RpbGwgbWF0Y2hcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VsZWN0aW9uLnN1YkNhdGVnb3J5ID09PSBcIlwiOyAvLyBIYXMgdG8gYWxzbyBiZSBlbXB0eVxyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGFrZXMgcm93cyBmcm9tIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdCBhbmQgc3BsaXRzIGludG8gY29ycmVzcG9uZGluZyB0YWJsZS4gVXNlcyB0aGUgbWF0Y2hEQlJvdyBmdW5jdGlvbiB0byBtYXRjaFxyXG4gKiBhIHJvdyB0byBhIHNlbGVjdGlvbi4gT25jZSBmaWx0ZXJlZCBjcmVhdGVzIGFuZCBvYmplY3QgY29udGFpbmluZyBlYWNoIHRhYmxlIGFuZCB0aGUgcm93c1xyXG4gKlxyXG4gKiBBbHNvIGNyZWF0ZXMgdGhlIGNvbWJpbmVkIHRhYmxlcyBieSB1c2luZyB0aGUgY29tYmluZVRhYmxlIGZ1bmN0aW9uIGFuZCBhZGRzIHRoZSBjb21iaW5lZCB0YWJsZXMgdG8gdGhlIHJldHVybmVkXHJcbiAqIG9iamVjdC5cclxuICpcclxuICogTm90ZSBhbnkgbnVsbCB2YWx1ZXMgaW4gdGhlIHJvd3MgYXJlIGNoYW5nZWQgdG8gMFxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBBbGwgdGhlIHJvd3MgZnJvbSB0aGUgdXNlcnMgc2VsZWN0aW9uc1xyXG4gKiBAcGFyYW0gc2VhcmNoIHtPYmplY3R9IG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb3VyIGRpZmZlcmVudCBzZWxlY3Rpb25zIHRoZSB1c2VyIG1heSBoYXZlIG1hZGVcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBwcm9wZXJ0eSBmb3IgZWFjaCB0YWJsZSB3aGljaCBpcyBhbiBhcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIHJvd3NcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuZmlsdGVyUm93c1RvVGFibGVzID0gZnVuY3Rpb24gKHJvd3MsIHNlYXJjaCkge1xyXG5cclxuICAvLyBDcmVhdGUgZm91ciBhcnJheXMgZm9yIHRoZSBkaWZmZXJlbnQgcm93cyB0aGF0IGJlbG9uZyB0byBlYWNoIG9mIHRoZSBzZWFyY2hlc1xyXG4gIHZhciBhUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmFUYWJsZSk7fSk7XHJcbiAgdmFyIGJSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guYlRhYmxlKTt9KTtcclxuICB2YXIgY1Jvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5jVGFibGUpO30pO1xyXG4gIHZhciBkUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmRUYWJsZSk7fSk7XHJcblxyXG4gIC8vIFNldCBhbGwgbnVsbCB2YWx1ZXMgaW4gcm93cyB0byAwXHJcbiAgYVJvd3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLnZhbHVlID09PSBudWxsKXtlLnZhbHVlID0gMDt9fSk7XHJcbiAgYlJvd3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLnZhbHVlID09PSBudWxsKXtlLnZhbHVlID0gMDt9fSk7XHJcbiAgY1Jvd3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLnZhbHVlID09PSBudWxsKXtlLnZhbHVlID0gMDt9fSk7XHJcbiAgZFJvd3MuZm9yRWFjaChmdW5jdGlvbihlKXtpZihlLnZhbHVlID09PSBudWxsKXtlLnZhbHVlID0gMDt9fSk7XHJcblxyXG5cclxuICB2YXIgdGFibGVzID0gW107XHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2EnLCByb3dzIDogYVJvd3MsIHNlYXJjaCA6IHNlYXJjaC5hVGFibGV9KTtcclxuICB9XHJcblxyXG4gIC8vIENyZWF0ZSBjb21iaW5lZCB0YWJsZXMgaWYgcG9zc2libGVcclxuICBpZihhUm93cy5sZW5ndGggPiAwICYmIGJSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB2YXIgYWJSb3dzID0gZHAuY29tYmluZVRhYmxlcyhhUm93cyxiUm93cyk7XHJcbiAgfVxyXG5cclxuICBpZihjUm93cy5sZW5ndGggPiAwICYmIGRSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB2YXIgY2RSb3dzID0gZHAuY29tYmluZVRhYmxlcyhjUm93cyxkUm93cyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbmV3IERhdGFUYWJsZXMoYVJvd3MsYlJvd3MsY1Jvd3MsZFJvd3MsIGFiUm93cywgY2RSb3dzKTtcclxufVxyXG5cclxuXHJcblxyXG4vLyBTVEFSVCBORVdcclxuLyoqXHJcbiAqIFRha2VzIHJvd3MgZnJvbSBkYXRhYmFzZSBxdWVyeSByZXN1bHQgYW5kIHNwbGl0cyBpbnRvIGNvcnJlc3BvbmRpbmcgdGFibGUuIFVzZXMgdGhlIG1hdGNoREJSb3cgZnVuY3Rpb24gdG8gbWF0Y2hcclxuICogYSByb3cgdG8gYSBzZWxlY3Rpb24uIE9uY2UgZmlsdGVyZWQgY3JlYXRlcyBhbmQgb2JqZWN0IGNvbnRhaW5pbmcgZWFjaCB0YWJsZSBhbmQgdGhlIHJvd3NcclxuICpcclxuICogQWxzbyBjcmVhdGVzIHRoZSBjb21iaW5lZCB0YWJsZXMgYnkgdXNpbmcgdGhlIGNvbWJpbmVUYWJsZSBmdW5jdGlvbiBhbmQgYWRkcyB0aGUgY29tYmluZWQgdGFibGVzIHRvIHRoZSByZXR1cm5lZFxyXG4gKiBvYmplY3QuXHJcbiAqXHJcbiAqIE5vdGUgYW55IG51bGwgdmFsdWVzIGluIHRoZSByb3dzIGFyZSBjaGFuZ2VkIHRvIDBcclxuICpcclxuICogQHBhcmFtIHJvd3Mge09iamVjdH0gQWxsIHRoZSByb3dzIGZyb20gdGhlIHVzZXJzIHNlbGVjdGlvbnNcclxuICogQHBhcmFtIHNlYXJjaCB7T2JqZWN0fSBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZm91ciBkaWZmZXJlbnQgc2VsZWN0aW9ucyB0aGUgdXNlciBtYXkgaGF2ZSBtYWRlXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgcHJvcGVydHkgZm9yIGVhY2ggdGFibGUgd2hpY2ggaXMgYW4gYXJyYXkgd2l0aCB0aGUgY29ycmVzcG9uZGluZyByb3dzXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkgPSBmdW5jdGlvbiAocm93cywgc2VhcmNoKSB7XHJcblxyXG4gIC8vIENyZWF0ZSBmb3VyIGFycmF5cyBmb3IgdGhlIGRpZmZlcmVudCByb3dzIHRoYXQgYmVsb25nIHRvIGVhY2ggb2YgdGhlIHNlYXJjaGVzXHJcbiAgdmFyIGFSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guYVRhYmxlKTt9KTtcclxuICB2YXIgYlJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5iVGFibGUpO30pO1xyXG4gIHZhciBjUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmNUYWJsZSk7fSk7XHJcbiAgdmFyIGRSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guZFRhYmxlKTt9KTtcclxuXHJcbiAgLy8gU2V0IGFsbCBudWxsIHZhbHVlcyBpbiByb3dzIHRvIDBcclxuICBhUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBiUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBjUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuXHJcbiAgLy8gQ3JlYXRlIGNvbWJpbmVkIHRhYmxlcyBpZiBwb3NzaWJsZVxyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDAgJiYgYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBhYlJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGFSb3dzLGJSb3dzKTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICB9XHJcblxyXG4gIHZhciBjb3B5ID0gdGhpcy5jb3B5RGF0YVRhYmxlcyhuZXcgRGF0YVRhYmxlcyhhUm93cyxiUm93cyxjUm93cyxkUm93cyxhYlJvd3MsY2RSb3dzKSk7XHJcblxyXG4gIHZhciB0YWJsZXMgPSBbXTtcclxuICBpZihhUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYScsIHJvd3MgOiBjb3B5LnRhYmxlQSwgc2VhcmNoIDogc2VhcmNoLmFUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgaWYoYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2InLCByb3dzIDogY29weS50YWJsZUIsIHNlYXJjaCA6IHNlYXJjaC5iVGFibGUsIGNvbWJpbmVkIDogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdjJywgcm93cyA6IGNvcHkudGFibGVDLCBzZWFyY2ggOiBzZWFyY2guY1RhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBpZihkUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnZCcsIHJvd3MgOiBjb3B5LnRhYmxlRCwgc2VhcmNoIDogc2VhcmNoLmRUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICAvLyBDcmVhdGUgY29tYmluZWQgdGFibGVzIGlmIHBvc3NpYmxlXHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCAmJiBiUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdGFibGVzLnB1c2goeyBpZCA6ICdhYicsIHJvd3MgOiBjb3B5LnRhYmxlQUIsIHRhYmxlMVJvd3MgOiBjb3B5LnRhYmxlQSwgdGFibGUyUm93cyA6IGNvcHkudGFibGVCLCBzZWFyY2ggOiBzZWFyY2guYVRhYmxlLCBzZWFyY2gyIDogc2VhcmNoLmJUYWJsZSwgY29tYmluZWQgOiB0cnVlfSk7XHJcbiAgfVxyXG5cclxuICBpZihjUm93cy5sZW5ndGggPiAwICYmIGRSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB2YXIgY2RSb3dzID0gZHAuY29tYmluZVRhYmxlcyhjUm93cyxkUm93cyk7XHJcbiAgICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnY2QnLCByb3dzIDogY29weS50YWJsZUNELCB0YWJsZTFSb3dzIDogY29weS50YWJsZUMsIHRhYmxlMlJvd3MgOiBjb3B5LnRhYmxlRCwgc2VhcmNoIDogc2VhcmNoLmNUYWJsZSwgc2VhcmNoMiA6IHNlYXJjaC5kVGFibGUsIGNvbWJpbmVkIDogdHJ1ZX0pO1xyXG4gIH1cclxuICByZXR1cm4gdGFibGVzO1xyXG59XHJcbi8vIEVORCBORVdcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIENvbWJpbmVzIHRoZSB0d28gdGFibGVzIGJ5IGdvaW5nIHRocm91Z2ggZWFjaCByb3cgYW5kIGRpdmlkaW5nIHRoZSB2YWx1ZSBvZiB0YWJsZTEgdG8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgZnJvbVxyXG4gKiBhIHJvdyBpbiB0YWJsZSAyXHJcbiAqXHJcbiAqIE5vdGUgaWYgdGFibGUgMiB2YWx1ZSBpcyAwIGl0IGlzIGRpdmlkZWQgYnkgMSBpbnN0ZWFkXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZTFSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gb25lIHRhYmxlXHJcbiAqIEBwYXJhbSB0YWJsZTJSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gYW5vdGhlciB0YWJsZVxyXG4gKiBAcmV0dXJucyB7T2piZWN0W119IEFuIGFycmF5IG9mIHJvd3MgYXMgYSByZXN1bHQgb2YgY29tYmluaW5nIHRhYmxlMSBhbmQgdGFibGUyXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNvbWJpbmVUYWJsZXMgPSBmdW5jdGlvbih0YWJsZTFSb3dzLCB0YWJsZTJSb3dzKSB7XHJcbiAgdmFyIGNvbWJpbmVkID0gW107XHJcbiAgdmFyIGF0ID0gdGFibGUxUm93cztcclxuICB2YXIgYnQgPSB0YWJsZTJSb3dzO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgYXQubGVuZ3RoOyBpKyspe1xyXG4gICAgICBmb3IodmFyIGogPSAwOyBqIDwgYnQubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgaWYoYXRbaV0uZWRiID09PSBidFtqXS5lZGIgJiYgYXRbaV0ub2JzX3lyID09PSBidFtqXS5vYnNfeXIgJiYgYXRbaV0uZGlzY195ciA9PT0gYnRbal0uZGlzY195cil7XHJcbiAgICAgICAgICAgICAgY29tYmluZWQucHVzaCh7IGRpc2NfeXIgOiBidFtqXS5kaXNjX3lyICxcclxuICAgICAgICAgICAgICAgICAgZWRiIDogYnRbal0uZWRiLFxyXG4gICAgICAgICAgICAgICAgICBvYnNfeXIgOiBidFtqXS5vYnNfeXIsXHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlIDogYXRbaV0udmFsdWUgLyAoYnRbal0udmFsdWUgPT09ICcwJyB8fCBidFtqXS52YWx1ZSA9PT0gMCA/IDEgOiBidFtqXS52YWx1ZSksIC8vIERpdmlkZSB0aGUgdmFsdWUgaWYgdmEgaWYgZGl2aWRpbmcgYnkgMCBtYWtlIGl0IDFcclxuICAgICAgICAgICAgICAgICAgc2VjdGlvbiA6IGJ0W2pdLnNlY3Rpb24gKyBcIlwiICsgYnRbal0uZGVzY3JpcHRpb24gKyBcIiBvdmVyIFwiLCAvLyBCaXQgb2YgYSBoYWNrIGFzIGRlc2NyaXB0aW9uIGlzIGluc2VydGVkIGFmdGVyIHNlY3Rpb24sIHRoaXMgd2F5IGJvdGggdGl0bGVzIGFyZSBhZGRlZCB0byB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IGF0W2ldLnNlY3Rpb24gKyBcIiBcIiArIGF0W2ldLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICB1bml0QSA6IGF0W2ldLnVuaXRzLFxyXG4gICAgICAgICAgICAgICAgICB1bml0QiA6IGJ0W2pdLnVuaXRzLFxyXG4gICAgICAgICAgICAgICAgICB1bml0IDogYXRbaV0udW5pdHMgK1wiIC8gXCIgKyAgYnRbal0udW5pdHNcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBicmVhazsgLy8gY2FuIGV4aXQgdGhlIGxvb3BcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH1cclxuICByZXR1cm4gY29tYmluZWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHVzZWQgYnkgdGhlIHZlY3RvciBncmFwaC4gRWFjaCBlbnRyeSBpbiB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGVkYiBhbiBhcnJheSBvZiB5ZWFycyB3aXRoIHRoZSB2YWx1ZSBmcm9tXHJcbiAqIHRhYmxlIGEgYW5kIHRhYmxlIGIuXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZTFSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gb25lIHRhYmxlXHJcbiAqIEBwYXJhbSB0YWJsZTJSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gYW5vdGhlciB0YWJsZVxyXG4gKiBAcmV0dXJucyB7T2piZWN0W119IERhdGEgZm9yIHRoZSB2ZWN0b3IgZ3JhcGggaW4gdGhlIGZvcm0gW3sgRURCLCBbIHsgeWVhcjEsIHZhbHVlQSwgdmFsdWVCIH0sIHt5ZWFyMiwgdmFsdWVBLCB2YWx1ZUIgfSwuLi5dfV1cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoID0gZnVuY3Rpb24odGFibGUxUm93cyx0YWJsZTJSb3dzKSB7XHJcbiAgICB2YXIgYXQgPSB0YWJsZTFSb3dzO1xyXG4gICAgdmFyIGJ0ID0gdGFibGUyUm93cztcclxuICAgIHZhciBlZGJEb25lID0gW107IC8vIFRoZSBlZGJzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZFxyXG4gICAgdmFyIHZlY0RhdGEgPSBbXTsgLy8gVGhlIGZpbmFsIGVudHJ5IGluIHRoZSBmb3JtIHsgRURCLCBbIHsgeWVhcjEsIHZhbHVlQSwgdmFsdWVCIH0sIHt5ZWFyMiwgdmFsdWVBLCB2YWx1ZUIgfV19XHJcblxyXG4gICAgdmFyIGF2YWlsYWJsZU9ic1llYXJzID0gW107IC8vIFRoZSB5ZWFycyBmb3IgYm90aCB0YWJsZSAxIGFuZCB0YWJsZSAyXHJcbiAgICB0YWJsZTFSb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdzEpIHtcclxuICAgICAgICBpZighYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMocm93MS5vYnNfeXIpKXtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlY29uZCBzZXQgb2Ygcm93cyBhbHNvIGNvbnRhaW5zIHRoZSB5ZWFyXHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZTJSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICBpZih0YWJsZTJSb3dzW2ldLm9ic195ciA9PT0gcm93MS5vYnNfeXIpe1xyXG4gICAgICAgICAgICAgICAgICBhdmFpbGFibGVPYnNZZWFycy5wdXNoKHJvdzEub2JzX3lyKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR28gdGhyb3VnaCBldmVyeSByb3dcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgRURCIGhhcyBhbHJlYWR5IGJlZW4gcHJvY2Vzc2VkXHJcbiAgICAgICAgaWYgKCFlZGJEb25lLmluY2x1ZGVzKGF0W2ldLmVkYikpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIEdyYWIgYWxsIHRoZSByb3dzIGZvciB0aGUgY3VycmVudCBlZGIgaW4gYm90aCB0YWJsZXNcclxuICAgICAgICAgICAgdmFyIGVkYlJvd3NBdCA9IGF0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZWRiID09PSBhdFtpXS5lZGJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBlZGJSb3dzQnQgPSBidC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmVkYiA9PT0gYXRbaV0uZWRiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlZGJEb25lLnB1c2goYXRbaV0uZWRiKTsgLy8gQWRkIHllYXIgdG8gZG9uZSBzbyBpdCBpcyBub3QgcmVwZWF0ZWRcclxuICAgICAgICAgICAgdmFyIHllYXJzRG9uZSA9IFtdOyAvLyBQcm9jZXNzZWQgeWVhcnNcclxuICAgICAgICAgICAgdmFyIGVkYlllYXJBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MgaW4gZWRiXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWRiUm93c0F0Lmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaXQgaGFzIG5vdCBiZWVuIHByb2Nlc3NlZFxyXG4gICAgICAgICAgICAgICAgaWYgKCF5ZWFyc0RvbmUuaW5jbHVkZXMoZWRiUm93c0F0W2pdLmRpc2NfeXIpICYmIGF2YWlsYWJsZU9ic1llYXJzLmluY2x1ZGVzKGVkYlJvd3NBdFtqXS5kaXNjX3lyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXJzRG9uZS5wdXNoKGVkYlJvd3NBdFtqXS5kaXNjX3lyKTsgLy8gQWRkIHRvIHByb2Nlc3NlZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIGhhdmUgdG8gcm93cyBmb3IgYSBwYXJ0aWN1bGFyIHllYXIgZm9yIGEgcGFydGljdWxhciBlZGIgbm93IHdlIGNhbiBjcmVhdGUgdGhlIGVudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJSb3dzQXQgPSBlZGJSb3dzQXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRpc2NfeXIgPT09IGVkYlJvd3NBdFtqXS5kaXNjX3lyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJSb3dzQnQgPSBlZGJSb3dzQnQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRpc2NfeXIgPT09IGVkYlJvd3NBdFtqXS5kaXNjX3lyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCEoeWVhclJvd3NBdC5sZW5ndGggPT0geWVhclJvd3NCdC5sZW5ndGggKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgeWVhclJvd3NBdC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGJZZWFyQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiAreWVhclJvd3NBdFtrXS5kaXNjX3lyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBOiAreWVhclJvd3NBdFtrXS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQjogK3llYXJSb3dzQnRba10udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVkYlllYXJBcnJheS5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLnllYXIgLSBiLnllYXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2ZWNEYXRhLnB1c2goe2VkYjogYXRbaV0uZWRiLCB5ZWFyczogZWRiWWVhckFycmF5fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZlY0RhdGE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHdoaWNoIGlzIHRoZW4gdXNlZCBieSB0aGUgYm94IHBsb3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZVJvd3Mge09iamVjdH0gVGhlIHJvd3MgZnJvbSB0aGUgdGFibGUgdGhlIGJveCBwbG90IGlzIHZpc3VhbGlzaW5nXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIGJveCBwbG90XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZURhdGFGb3JCb3hQbG90ID0gZnVuY3Rpb24gKHRhYmxlUm93cyl7XHJcbiAgICB2YXIgeWVhcnNEb25lID0gW107IC8vIFllYXJzIHByb2Nlc3NlZFxyXG4gICAgdmFyIHllYXJzID0gW107IC8vIFdpbGwgY29udGFpbiBhbiBhcnJheSBvZiByb3dzIGZvciBlYWNoIHllYXJcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFibGVSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZigheWVhcnNEb25lLmluY2x1ZGVzKHRhYmxlUm93c1tpXS5vYnNfeXIpKXtcclxuICAgICAgICAgICAgeWVhcnMucHVzaCh0YWJsZVJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9ic195ciA9PT0gdGFibGVSb3dzW2ldLm9ic195cn0pKTtcclxuICAgICAgICAgICAgeWVhcnNEb25lLnB1c2godGFibGVSb3dzW2ldLm9ic195cik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBkYXRhID0gW107IC8vIEVhY2ggZW50cnkgd2lsbCBiZSBhbiBhcnJheSB3aGVyZSBhcnJheVswXSA9IHllYXIgYW5kIGFycmF5WzFdID0gdmFsdWVzIGZvciB0aGF0IHllYXJcclxuICAgIHZhciBzVmFsdWVzID0gW107IC8vIERhdGEgZm9yIHRoZSBzY2F0dGVyIHBsb3Qgb24gdG9wIG9mIGJveCBwbG90XHJcbiAgICB2YXIgbWluID0gSW5maW5pdHk7XHJcbiAgICB2YXIgbWF4ID0gLUluZmluaXR5O1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB5ZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gW107XHJcbiAgICAgICAgZW50cnlbMF0gPSBcIlwiK3llYXJzW2ldWzBdLm9ic195cjsgLy8gTmFtZSBvZiB0aGUgYm94IHBsb3QgY29udmVydCB5ZWFyIHRvIHN0cmluZ1xyXG4gICAgICAgIHZhciB5ZWFyID0gXCJcIit5ZWFyc1tpXVswXS5vYnNfeXI7XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgeWVhcnNbaV0ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICB2YXIgY3VyVmFsdWUgPSAreWVhcnNbaV1bal0udmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBlZGIgPSB5ZWFyc1tpXVtqXS5lZGI7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VyVmFsdWUgPiBtYXgpe1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gY3VyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1clZhbHVlIDwgbWluKXtcclxuICAgICAgICAgICAgICAgIG1pbiA9IGN1clZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGN1clZhbHVlKTtcclxuICAgICAgICAgICAgc1ZhbHVlcy5wdXNoKHt5ZWFyIDogeWVhciAsZWRiIDogZWRiLCB2YWx1ZSA6IGN1clZhbHVlfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVudHJ5WzFdID0gdmFsdWVzO1xyXG4gICAgICAgIGRhdGEucHVzaChlbnRyeSk7XHJcbiAgICB9XHJcbiAgICBkYXRhLnNvcnQoZnVuY3Rpb24oYSxiKXtcclxuICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7bWluIDogbWluLCBtYXggOiBtYXgsIGRhdGEgOiBkYXRhLCBzY2F0dGVyRGF0YSA6IHNWYWx1ZXN9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIGRhdGEgZnJvbSB0aGUgdGFibGUgcm93cyB3aGljaCBpcyB0aGVuIHVzZWQgYnkgdGhlIGdyb3VwZWQgYmFyIGdyYXBoLlxyXG4gKlxyXG4gKiBAcGFyYW0gdG93cyB7T2JqZWN0fSBUaGUgcm93cyBmcm9tIHRoZSB0YWJsZSB0aGUgYmFyIGdyYXBoIGlzIHZpc3VhbGlzaW5nXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIGJhciBncmFwaFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhRm9yR3JvdXBlZEdyYXBoID0gZnVuY3Rpb24ocm93cyl7XHJcbiAgICB2YXIgYXZhaWxhYmxlT2JzWWVhcnMgPSBbXTtcclxuXHJcbiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICBpZighYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMoZWxlbS5vYnNfeXIpKWF2YWlsYWJsZU9ic1llYXJzLnB1c2goZWxlbS5vYnNfeXIpO1xyXG4gICAgfSk7XHJcbiAgICBhdmFpbGFibGVPYnNZZWFycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuICthIC0gK2I7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgdmFyIGVkYkRvbmUgPSBbXTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoIWVkYkRvbmUuaW5jbHVkZXMocm93c1tpXS5lZGIpKXtcclxuICAgICAgICAgICAgZWRiRG9uZS5wdXNoKHJvd3NbaV0uZWRiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHsgXCJlZGJcIiA6IHJvd3NbaV0uZWRifTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5W3Jvd3NbaV0ub2JzX3lyXSA9ICtyb3dzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goZW50cnkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGFbal0uZWRiID09PSByb3dzW2ldLmVkYil7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtqXVtyb3dzW2ldLm9ic195cl0gPSArcm93c1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7ZGF0YSA6IGRhdGEsIGtleXMgOiBhdmFpbGFibGVPYnNZZWFyc307XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU29ydHMgdGhlIHNlY3Rpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHtPYmplY3R9IGRhdGEgb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHNlY3Rpb25zIGFycmF5XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLnNvcnRTZWN0aW9ucyA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICBkYXRhLnNlY3Rpb25zLnNvcnQoZnVuY3Rpb24oYSxiKXtcclxuICAgICAgLy8gRmlyc3QgY2hlY2sgc2ltcGxlIGNhc2Ugb2YgbnVtYmVyIGRpZmZlcmVuY2VcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB3aGlsZSghaXNOYU4oYS5jaGFyQXQoaSkpKXtpKyt9XHJcbiAgICAgIHZhciBudW1iZXJBID0gYS5zdWJzdHJpbmcoMCxpKTsgLy8gR2V0cyB0aGUgbnVtYmVyIGZyb20gdGhlIHNlY3Rpb25cclxuXHJcbiAgICAgIGkgPSAwO1xyXG4gICAgICB3aGlsZSghaXNOYU4oYi5jaGFyQXQoaSkpKXtpKyt9XHJcbiAgICAgIHZhciBudW1iZXJCID0gYi5zdWJzdHJpbmcoMCxpKTtcclxuXHJcbiAgICAgIGlmKG51bWJlckEgIT09IG51bWJlckIpIHtcclxuICAgICAgICAgIHJldHVybiBudW1iZXJBIC0gbnVtYmVyQjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gW2EsYl0uc29ydCgpWzBdID09PSBhID8gLTEgOiAxOyAvLyBTb3J0IHR3byBuYW1lcyBhbmQgcmV0dXJuIHRoZSBmaXJzdFxyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFwcGxpZXMgYSBDUEkgY29uc3VtZXIgcHJpY2UgaW5kZXggcGVyY2VudGFnZSB0byBlYWNoIG9mIHRoZSByb3dzIHZhbHVlcy4gVGhlIGNwaVZhbHVlcyBjb250YWlucyBhIHZhbHVlIGZvciBlYWNoIG9mIHRoZSB5ZWFycy5cclxuICpcclxuICogVGhlIENQSSBpcyBhcHBsb2VkIGJ5IHN0YXJ0aW5nIGF0IHRoZSB5ZWFyIHRoZSB2YWx1ZSB3YXMgb2JzZXJ2ZWQgYXQgY29tcG91bmRpbmcgdGhlIGNwaSB2YWx1ZXMgdW50aWwgdGhlIGxhc3QgeWVhciBpbiB0aGVcclxuICogY3BpVmFsdWVzIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHJvd3Mge09iamVjdH0gVGhlIHJvd3MgY3BpIHdpbGwgYmUgYXBwbGllZCB0b1xyXG4gKiBAcGFyYW0gY3BpIHZhbHVlcyB7T2JqZWN0fSBUaGUgdmFsdWVzIHRvIGFkZCB0byBlYWNoIHllYXJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuYXBwbHlDUElUb1RhYmxlUm93cyA9IGZ1bmN0aW9uKHJvd3MsIGNwaVZhbHVlcyl7XHJcbiAgICAvLyBGaW5kIHRoZSBtaW4gYW5kIG1heCB5ZWFyIGZyb20gdGhlIGRhdGFcclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihlbGVtLCBpbmRleCl7IC8vIEdyYWIgZXZlcnkgUm93XHJcbiAgICAgICAgdmFyIHllYXIgPSByb3dzW2luZGV4XS5vYnNfeXI7IC8vIEdyYWIgdGhlIHllYXIgb2YgdGhlIGNlbGwgYnkgY2hlY2tpbmcgdGhlIGNsYXNzXHJcbiAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gcm93c1tpbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcGlWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZih5ZWFyIDw9IGNwaVZhbHVlc1tpXS55ZWFyKXtcclxuICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gdmFsdWVPZkNlbGwgKiAoMSArIChjcGlWYWx1ZXNbaV0udmFsdWUgLyAxMDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByb3dzW2luZGV4XS52YWx1ZSA9IHZhbHVlT2ZDZWxsOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQWRkcyBpbiBhIHNlY3Rpb24sIGNhdGVnb3J5LCBzdWIgY2F0ZWdvcnksIG9yIGRlc2NyaXB0aW9uIHRvIGEgcm93IGluIHNlbGVjdGlvbnMuIFRoZSBpZCBpcyB1c2VkIHRvXHJcbiAqIHdvcmsgb3V0IHdoaWNoIHJvdyBpdCBnb2VzIGluLiBUaGUgdHlwZSBpcyB1c2VkIGZvciB3b3JraW5nIG91dCB3aGljaCBwcm9wZXJ0eSB0byBzZXRcclxuICpcclxuICogQHBhcmFtIGlkIHtOdW1iZXJ9IHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uIHJvd1xyXG4gKiBAcGFyYW0gdHlwZSB7U3RyaW5nfSB0aGUgdHlwZSBvZiBzZWxlY3Rpb24gc2VjdGlvbiwgY2F0ZWdvcnkgZXRjLlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9ucyB7T2JqZWN0W119IFRoZSBhcnJheSBvZiByb3dzIHRvIHNldCB0aGUgc2VsZWN0aW9uIGluXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmFkZFRvU2VsZWN0aW9uID0gZnVuY3Rpb24gKGlkLHR5cGUsZGF0YSxzZWxlY3Rpb25zKSB7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGVjdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNlbGVjdGlvbnNbaV0uaWQrXCJcIiA9PT0gaWQrXCJcIil7IC8vIENvbnZlcnQgdGhlbSBib3RoIHRvIHN0cmluZ3NcclxuICAgICAgICAgICAgaWYodHlwZSA9PT0gXCJzZWN0aW9uXCIpe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uc1tpXS5zZWN0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiY2F0ZWdvcnlcIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLmNhdGVnb3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwic3ViY2F0ZWdvcnlcIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLnN1YkNhdGVnb3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiZGVzY3JpcHRpb25cIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLmRlc2NyaXB0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBXb3JrcyBvdXQgdGhlIHRvdGFsIGZvciBlYWNoIHJlZ2lvbiBiYXNlZCBvbiB0aGUgZWRiIGZvciBlYWNoIHJvdyBhbmQgd2hpY2ggcmVnaW9uIGl0IGlzIHBhcnQgb2ZcclxuICpcclxuICogQHBhcmFtIHRhYmxlUm93cyB7T2JqZWN0W119IHRoZSByb3dzIGZyb20gYSB0YWJsZVxyXG4gKiBAcGFyYW0gcmVnaW9ucyB7T2JqZWN0W119IEFuIGFycmF5IG9mIHJlZ2lvbnMgYW5kIHdoaWNoIGVkYnMgbWFrZSB1cCB0aGF0IHJlZ2lvblxyXG4gKiBAcGFyYW0gYXZhaWxhYmxlWWVhcnMge09iamVjdFtdfSBUaGUgeWVhcnMgdGhhdCB0b3RhbHMgc2hvdWxkIGJlIGNyZWF0ZWQgZm9yXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IGNvbnRhaW5zIGVhY2ggcmVnaW9uIGFuZCBhbiBhcnJheSBvZiB5ZWFycyBhbG9uZyB3aXRoIHRvdGFscyBmb3IgdGhhdCB5ZWFyXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZVRhYmxlVG90YWxzID0gZnVuY3Rpb24gKHRhYmxlUm93cywgcmVnaW9ucywgYXZhaWxhYmxlT2JzWWVhcnMpIHtcclxuICAgIHZhciByZWdpb25TdHJpbmdzID0gW1wiblwiLFwidW5pXCIsXCJlbmlcIiwgXCJzd25pXCIsIFwic1wiLCBcInVzaVwiLCBcImxzaVwiXTsgLy8gQWxsIHRoZSByZWdpb25zXHJcbiAgICB2YXIgdG90YWxzID0ge307IC8vIHJlZyA6IFwiXCIgLCB5ZWFycyA6IFtdXHJcblxyXG4gICAgLy8gR28gdGhyb3VnaCBldmVyeSB5ZWFyXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXZhaWxhYmxlT2JzWWVhcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIC8vIEdldCB0aGUgcm93cyBmb3IgdGhlIGN1cnJlbnQgeWVhclxyXG4gICAgICAgIHRhYmxlUm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUub2JzX3lyID09PSBhdmFpbGFibGVPYnNZZWFyc1tpXTt9KS5mb3JFYWNoKGZ1bmN0aW9uKHJvdyl7XHJcblxyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGVhY2ggb2YgdGhlIHJlZ2lvbnNcclxuICAgICAgICAgICAgcmVnaW9uU3RyaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKHJlZ2lvblN0cmluZyl7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCByb3cgZWRiIGlzIGluc2lkZSB0aGUgY3VycmVudCByZXFpb24gZ3JhYiB0aGUgdmFsdWUgZnJvbSB0aGUgcm93IGFuZCBhZGQgaXQgaW4gdGhlIGFycmF5IGZvciB0aGUgY3VycmVudCB5ZWFyXHJcbiAgICAgICAgICAgICAgICBpZihyZWdpb25zW3JlZ2lvblN0cmluZ10uaW5jbHVkZXMocm93LmVkYikpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRvdGFsc1tyZWdpb25TdHJpbmddID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbHNbcmVnaW9uU3RyaW5nXSA9IFsrcm93LnZhbHVlXTsgLy8gRmlyc3QgdGltZSB0aGlzIHJlcWlvbiBoYXMgYmVlbiBmb3VuZCBzbyBoYXZlIHRvIGNyZWF0ZSB0aGUgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpID09PSB0b3RhbHNbcmVnaW9uU3RyaW5nXS5sZW5ndGgpeyAvLyBUaGlzIG1lYW5zIHdlIGhhdmUgbW92ZWQgb250byBhIG5ldyB5ZWFyIHNvIGhhdmUgdG8gY3JlYXRlIGEgbmV3IHNsb3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddLnB1c2goK3Jvdy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbHNbcmVnaW9uU3RyaW5nXSBbaV0gKz0gKyAoK3Jvdy52YWx1ZSk7IC8vIFN0aWxsIGluIHRoZSBmaXJzdCB5ZWFyIHdpdGggYSBkaWZmZXJlbnQgZWRiIGluIHRoZSBzYW1lIHJlZ2lvbiBzbyBqdXN0IGFkZCB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdmFyIG56ID0gW107IC8vIFRvIGZpbmQgdGhlIHRvdGFscyBvZiBOWiBhZGQgbm9ydGggYW5kIHNvdXRoIHRlZ2V0aGVyXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXZhaWxhYmxlT2JzWWVhcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIG56LnB1c2godG90YWxzW1wiblwiXVtpXSArIHRvdGFsc1tcInNcIl1baV0pO1xyXG4gICAgfVxyXG4gICAgdG90YWxzW1wibnpcIl0gPSBuejsgLy8gQWRkIHRoZSBOWiBwcm9wZXJ0eSB0byB0b3RhbHNcclxuICAgIHJldHVybiB0b3RhbHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGhlIGRhdGEgc3RydWN0dXJlIG9iamVjdFxyXG4gKlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uc0RhdGEge09iamVjdFtdfSBVc2VkIGZvciBjcmVhdGluZyByZWd1bGFyIGdyYXBoc1xyXG4gKiBAcGFyYW0gc2VsZWN0aW9uVGFibGV7T2JqZWN0W119IFVzZWQgZm9yIGNyZWF0aW5nIHRoZSBodG1sIHRhYmxlc1xyXG4gKiBAcGFyYW0gY29tYmluZURhdGEge09iamVjdFtdfSBVc2VkIGZvciB0aGUgdmVjdG9yIGdyYXBoc1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBEYXRhU3RydWN0dXJlKHNlbGVjdGlvbkRhdGEsIHNlbGVjdGlvblRhYmxlLCBjb21iaW5lRGF0YSl7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkRhdGEgPSBzZWxlY3Rpb25EYXRhOyAvLyBDb250YWlucyB0aGUgcm93cywgaWQsIHRpdGxlLCBzdWJ0aXRsZSBhbWQgaW5pdCBmb3IgZWFjaCBzZWxlY3Rpb25cclxuICAgIHRoaXMuc2VsZWN0aW9uVGFibGUgPSBzZWxlY3Rpb25UYWJsZTsgLy8gQ29udGFpbnMgdGhlIHJvd3MsIGlkLCB0aXRsZSwgc3VidGl0bGUgYW1kIGluaXQgZm9yIGVhY2ggdGFibGVcclxuICAgIHRoaXMuY29tYmluZURhdGEgPSBjb21iaW5lRGF0YTsgLy8gQ29udGFpbnMgY29tYmluZWQgcm93cyBhbG9uZyB3aXRoIHRpdGxlcyBhbmQgdW5pdHNcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgZm9yIGhvbGRpbmcgdGhlIHVzZXJzIHNlbGVjdGlvbnMgZWFjaCBwcm9wZXJ0eSBjb250YWlucyBhXHJcbiAqIHNlY3Rpb24sIGNhdGVnb3J5LCBzdWIgY2F0ZWdvcnkgYW5kIGRlc2NyaXB0aW9uLiBUaGV5IGNhbiBiZSBlbXB0eSBzdHJpbmdzXHJcbiAqXHJcbiAqIEBwYXJhbSBhIHtPYmplY3R9IEEgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBiIHtPYmplY3R9IEIgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBjIHtPYmplY3R9IEMgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBkIHtPYmplY3R9IEQgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbihhLGIsYyxkKXtcclxuICAgIHRoaXMuYVRhYmxlID0gYTtcclxuICAgIHRoaXMuYlRhYmxlID0gYjtcclxuICAgIHRoaXMuY1RhYmxlID0gYztcclxuICAgIHRoaXMuZFRhYmxlID0gZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgZm9yIGhvbGRpbmcgdGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gZWFjaCBvZiB0aGUgdGFibGUgc2VsZWN0aW9ucy5cclxuICogQWxzbyBjb250YWlucyB0aGUgY29tYmluZWQgdGFibGVzLiBFYWNoIG9mIHRoZSBhcnJheXMgY291bGQgYmUgZW1wdHkgaWYgbm9cclxuICogc2VsZWN0aW9uIHdhcyBtYWRlIGZvciBhIHRhYmxlXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZUEge09iamVjdFtdfSBBIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVCIHtPYmplY3RbXX0gQiBzZWxlY3Rpb25cclxuICogQHBhcmFtIHRhYmxlQyB7T2JqZWN0W119IEMgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUQge09iamVjdFtdfSBEIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVBQiB7T2JqZWN0W119IEFCIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVDRCB7T2JqZWN0W119IENEIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5mdW5jdGlvbiBEYXRhVGFibGVzKHRhYmxlQSx0YWJsZUIsdGFibGVDLHRhYmxlRCx0YWJsZUFCLHRhYmxlQ0Qpe1xyXG4gICAgdGhpcy50YWJsZUEgPSB0YWJsZUE7XHJcbiAgICB0aGlzLnRhYmxlQiA9IHRhYmxlQjtcclxuICAgIHRoaXMudGFibGVDID0gdGFibGVDO1xyXG4gICAgdGhpcy50YWJsZUQgPSB0YWJsZUQ7XHJcbiAgICB0aGlzLnRhYmxlQUIgPSB0YWJsZUFCO1xyXG4gICAgdGhpcy50YWJsZUNEID0gdGFibGVDRDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDb250YWlucyBkYXRhIGZvciBhIHBhcnRpY3VsYXIgc2VsZWN0aW9uLiBUaGUgcm93cyB0aGF0IGJlbG9uZyB0byB0aGUgc2VjdGlvbnMgYW5kXHJcbiAqIHRoZSBzaGFyZWQgdGl0bGUgc3VidGl0bGUgYW5kIHVuaXQuXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbkRhdGEocm93cyx0aXRsZSxzdWJUaXRsZSx1bml0LGlkKXtcclxuICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLnN1YlRpdGxlID0gc3ViVGl0bGU7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnVuaXQgPSB1bml0O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIGJvdGggdGFibGVzIGFuZCB0aGUgY29tYmluZWQgcm93c1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBTZWxlY3Rpb25EYXRhQ29tYmluZWQocm93cywgdGFibGUxUm93cyx0YWJsZTJSb3dzLHRpdGxlMSx0aXRsZTIsdW5pdDEsdW5pdDIsaWQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93czsgLy8gQ29tYmluZWQgcm93c1xyXG4gICAgdGhpcy50aXRsZTEgPSB0aXRsZTE7XHJcbiAgICB0aGlzLnRpdGxlMiA9IHRpdGxlMjtcclxuICAgIHRoaXMudW5pdDEgPSB1bml0MTtcclxuICAgIHRoaXMudW5pdDIgPSB1bml0MjtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudGFibGUxUm93cyA9IHRhYmxlMVJvd3M7XHJcbiAgICB0aGlzLnRhYmxlMlJvd3MgPSB0YWJsZTJSb3dzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIHRoZSBzZWN0aW9ucyBhbmRcclxuICogdGhlIHNoYXJlZCB0aXRsZSBzdWJ0aXRsZSBhbmQgdW5pdC4gVXNlZCB0byBnZW5lcmF0ZSBodG1sIHRhYmxlc1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBTZWxlY3RlZFRhYmxlRGF0YShyb3dzLGlkLCB0aXRsZSwgc3ViVGl0bGUsIHVuaXQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuc3ViVGl0bGUgPSBzdWJUaXRsZTtcclxuICAgIHRoaXMudW5pdCA9IHVuaXQ7XHJcbn1cclxuIiwiLy8gREVQRU5ERU5DSUVTIDogRGF0YVByb2Nlc3NvciwgR3JvdXBlZEJhckdyYXBoLCBib3hQbG90XHJcblxyXG5cclxuLyoqXHJcbiAqIEdyYXBoIG9iamVjdCB0byBjb250cm9sIHRoZSBncmFwaHMgZm9yIHNpbmdsZSBzZWxlY3Rpb25zXHJcbiAqXHJcbiAqIEBpZCB0aGUgaWQgb2YgdGhlIHNlbGVjdGlvblxyXG4gKiBAcm93cyB7T2JqZWN0W119IHRoZSByb3dzIGZvciB0aGUgc2VsZWN0aW9uXHJcbiAqIEBzZWxlY3Rpb24ge09iamVjdH0gdGhlIGRldGFpbHMgb2YgdGhlIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5mdW5jdGlvbiBHcmFwaChpZCxyb3dzLHNlbGVjdGlvbikge1xyXG4gIHRoaXMuaWQgPSBpZDtcclxuICB0aGlzLmdyb3VwZWRJRCA9ICcjZ3JvdXBlZC1iYXItJytpZDtcclxuICB0aGlzLmJveElEID0gJyNib3hwbG90LScraWQ7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcclxuICB0aGlzLnRpdGxlID0gdGhpcy5nZXRUaXRsZSgpO1xyXG4gIHRoaXMuc3ViVGl0bGUgPSB0aGlzLmdldFN1YlRpdGxlKCk7XHJcbiAgdGhpcy51bml0ID0gdGhpcy5nZXRVbml0KCk7XHJcblxyXG4gIC8vIENhY2hlIGRvbSBlbGVtZW50c1xyXG4gIHRoaXMuJHRpdGxlQmFyID0gJCgnI3RpdGxlLWJhci0nK2lkKTtcclxuICB0aGlzLiR0aXRsZUJveCA9ICQoJyN0aXRsZS1ib3gtJytpZCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyBpZiB0aGUgb2JqZWN0IGlzIGNvbWJpbmVkXHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGNvbWJpbmVkIG9yIG5vdFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuaXNDb21iaW5lZCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBvZiB0aGUgZ3JhcGhcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0VW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGlkIG9mIHRoZSBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBpZFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0SUQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuaWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgZm9yIHRoZSBncmFwaHNcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdGl0bGVcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbi5kZXNjcmlwdGlvbiArIFwiLCBcIiArIHRoaXMuc2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHN1YiB0aXRsZSBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBzdWIgdGl0bGVcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFN1YlRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbi5zZWN0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRVbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3NbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogSW5zZXJ0cyB0aGUgdGl0bGVzIGZvciB0aGUgZ3JhcGhzIGludG8gdGhlIERPTVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuaW5zZXJ0VGl0bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuJHRpdGxlQmFyLmFwcGVuZCgnPGgzIGNsYXNzPVwidGl0bGVcIj4nK3RoaXMudGl0bGUrJzwvaDM+JykuYXBwZW5kKCc8aDQgY2xhc3M9XCJzdWJUaXRsZVwiPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQoJzxoMyBjbGFzcz1cInRpdGxlXCI+Jyt0aGlzLnRpdGxlKyc8L2gzPicpLmFwcGVuZCgnPGg0IGNsYXNzPVwic3ViVGl0bGVcIj4nK3RoaXMuc3ViVGl0bGUrJzwvaDQ+Jyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSB1c2luZyBkYXRhIHByb2Nlc3NvciBhbmQgaW5zZXJ0cyBpbnRvIERPTVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZGF0YSBmb3IgdGhlIGdyb3VwZWQgZ3JhcGggYW5kIGRpc3BsYXkgaXRcclxuICAgIHZhciBncm91cGVkRGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGgodGhpcy5yb3dzKTtcclxuICAgIEdyb3VwZWRCYXJNb2R1bGUuY3JlYXRlZEdyb3VwZWRCYXJHcmFwaChncm91cGVkRGF0YS5kYXRhLGdyb3VwZWREYXRhLmtleXMsdGhpcy51bml0LHRoaXMuZ3JvdXBlZElEKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGRhdGEgZm9yIGJveHBsb3QgYW5kIHNob3cgdGhlIGdyYXBoXHJcbiAgICB2YXIgYm94RGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JCb3hQbG90KHRoaXMucm93cyk7XHJcbiAgICBCb3hQbG90TW9kdWxlLmNyZWF0ZUJveFBsb3QoYm94RGF0YSwgdGhpcy5ib3hJRCwgdGhpcy51bml0KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyB0aGUgbmV3IHJvd3MgYW5kIHVwZGF0ZXMgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdFtdfSByb3dzIHRoZSBuZXcgcm93c1xyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJvd3MpIHtcclxuICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICB0aGlzLmNyZWF0ZSgpO1xyXG59XHJcbiIsIi8vIENvbnRhaW5zIGluZm9ybWF0aW9uIGZvciBhIHJvdyBvZiBzZWxlY3Rpb25zXHJcbi8vIFJlY2lldmVzIGV2ZW50cyBmcm9tIHNlbGVjdG9ycyB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlcyBhbmQgdXBkYXRlcyBpdCdzIHN0YXRlXHJcbi8vIFNlbmQgb3V0IGV2ZW50cyB3aGVuIHNlbGVjdG9ycyBjaGFuZ2UgYW5kIG90aGVyIHNlbGVjdG9ycyBzaG91bGQgYmUgbm90aWZpZWRcclxuZnVuY3Rpb24gU2VsZWN0aW9uUm93Q29udHJvbGxlcihpZCl7XHJcbiAgICB0aGlzLmlkTnVtYiA9IGlkO1xyXG4gICAgdGhpcy5yb3dTZWxlY3Rpb25zID0geyBpZCA6IGlkLCBzZWN0aW9uIDogXCJcIiwgY2F0ZWdvcnkgOiBcIlwiLCBzdWJDYXRlZ29yeSA6IFwiXCIsIGRlc2NyaXB0aW9uIDogXCJcIiB9O1xyXG5cclxuICAgIHRoaXMuc2V0SW5pdGlhbFN0YXRlID0gZnVuY3Rpb24gKHJvd0RhdGEpIHtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zID0gcm93RGF0YTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSB7IGlkIDogdGhpcy5pZCwgc2VjdGlvbiA6IFwiXCIsIGNhdGVnb3J5IDogXCJcIiwgc3ViQ2F0ZWdvcnkgOiBcIlwiLCBkZXNjcmlwdGlvbiA6IFwiXCIgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbGlkU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZih0aGlzLnJvd1NlbGVjdGlvbnMuc2VjdGlvbiAhPT0gXCJcIiAmJiB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPT09IFwiXCIpe1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgICAgdmFyIHVybFNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAoZS5pZCA9PT0gaWQpfSlbMF07XHJcblxyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc2VjdGlvbiA9IHVybFNlbGVjdGlvbi5zZWN0aW9uO1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuY2F0ZWdvcnkgPSB1cmxTZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IHVybFNlbGVjdGlvbi5zdWJDYXRlZ29yeTtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gdXJsU2VsZWN0aW9uLmRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlU2VjdGlvbiA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc3ViQ2F0ZWdvcnkgPSBcIlwiO1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gXCJcIjtcclxuICAgICAgICAgIC8vIFNldCB0aGUgbmV3IHNlbGVjdGVkIHNlY3Rpb25cclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uID0gdXBkYXRlLnNlY3Rpb247XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19TRUNUSU9OXCIsIHtpZCA6IHRoaXMuaWROdW1iLCBzZWxlY3Rpb24gOiB0aGlzLnJvd1NlbGVjdGlvbnN9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVDYXRlZ29yeSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSBcIlwiO1xyXG5cclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IHVwZGF0ZS5jYXRlZ29yeTtcclxuICAgICAgICAgIGV2ZW50cy5lbWl0KFwiTkVXX0NBVEVHT1JZXCIsIHtpZCA6IHRoaXMuaWROdW1iLCBzZWxlY3Rpb24gOiB0aGlzLnJvd1NlbGVjdGlvbnN9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTdWJDYXRlZ29yeSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gdXBkYXRlLnN1YkNhdGVnb3J5O1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfU1VCQ0FURUdPUllcIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gdXBkYXRlLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfREVTQ1JJUFRJT05cIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldFJvd1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb3dTZWxlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGFueSBvZiB0aGVzZSBldmVudHMgY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uXHJcbiAgICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgdGhpcy51cGRhdGVTZWN0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiQ0FURUdPUllfQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZUNhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiU1VCQ0FURUdPUllfQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZVN1YkNhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiREVTQ1JJUFRJT05fQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuIiwiLy8gUmVsaWVzIG9uXHJcbi8vIEpRVUVSWVxyXG4vLyBEYXRhQmFzZVxyXG4vLyBFdmVudHNcclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU2VjdGlvbiBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIFNlY3Rpb25TZWxlY3QoaWROdW1iKXtcclxuICAgIHRoaXMuaWROdW1iID0gaWROdW1iO1xyXG4gICAgdGhpcy5pZCA9IFwiI3NlY3Rpb24tc2VsZWN0XCIraWROdW1iOyAvLyBUaGUgZWxlbWVudCBpZFxyXG4gICAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTsgLy8gU2VsZWN0ZXRzIGFuZCBjYWNoZXMgdGhlIGVsZW1lbnRcclxuXHJcbiAgICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuICAgICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG5cclxuICAgICAgLy8gR3JhYiBzZWN0aW9uIGZyb20gREIgYW5kIGFkZCB0byBkcm9wZG93blxyXG4gICAgICBEYXRhYmFzZS5nZXRTZWN0aW9uc0Zyb21EYXRhYmFzZShmdW5jdGlvbihzZWN0aW9ucyl7XHJcbiAgICAgICAgZHAuc29ydFNlY3Rpb25zKHtzZWN0aW9ucyA6IHNlY3Rpb25zfSk7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELHNlY3Rpb25zLHNlbGVjdGlvbi5zZWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFdoZW4gdGhlIHNlbGVjdG9yIGlzIGNsaWNrZWQgc2VuZCBvdXQgYSBzZWN0aW9uIGNoYW5nZWQgZXZlbnRcclxuICAgIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudHMuZW1pdChcIlNFQ1RJT05fQ0hBTkdFRFwiLCB7c2VjdGlvbiA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExpc3RlbiB0byB0aGVzZSBldmVudHNcclxuICAgIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykgKTtcclxuICAgIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuLy8gTWFuYWdlcyBhIFNlY3Rpb24gZHJvcGRvd24gbWVudVxyXG5mdW5jdGlvbiBDYXRlZ29yeVNlbGVjdChpZE51bWIpe1xyXG4gIHRoaXMuaWROdW1iID0gaWROdW1iO1xyXG4gIHRoaXMuaWQgPSBcIiNjYXRlZ29yeS1zZWxlY3RcIit0aGlzLmlkTnVtYjtcclxuICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpO1xyXG5cclxuXHJcbiAgLy8gUmVzcG9pbmRzIHRvIGFuIGV2ZW50IHRoYXQgaW5kaWNhdGVzIGRhdGEgaXMgYXZhbGFibGUgZm9yIHRoZSBkcm9wIGRvd25cclxuICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG4gICAgdmFyIHBhc3NJRCA9IHRoaXMuaWRcclxuXHJcbiAgICAvLyBHcmFiIGNhdGVnb3JpZXMgZnJvbSBEQiBhbmQgYWRkIHRvIHRoZSBkcm9wZG93blxyXG4gICAgRGF0YWJhc2UuZ2V0Q2F0ZWdvcmllc0Zyb21EYXRhYmFzZShzZWxlY3Rpb24uc2VjdGlvbiwgZnVuY3Rpb24gKGNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGNhdGVnb3JpZXMsc2VsZWN0aW9uLmNhdGVnb3J5KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiB0aGUgc2VsZWN0b3IgaXMgY2xpY2tlZCBzZW5kIG91dCBhIHNlY3Rpb24gY2hhbmdlZCBldmVudFxyXG4gIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnRzLmVtaXQoXCJDQVRFR09SWV9DSEFOR0VEXCIsIHtjYXRlZ29yeSA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIFdoZW4gYSBzZWN0aW9uIGNoYW5nZXMgdGhpcyBmaW5kcyB0aGUgY2F0ZWdvcmllcyByZXF1aXJlZFxyXG4gIHRoaXMuc2VjdGlvbkNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgIHRoaXMuJHNlbGVjdC5odG1sKCcnKTsgLy8gQ2xlYXIgb3V0IG9sZCBvcHRpb25zXHJcbiAgICAgICAgdmFyIHBhc3NJRCA9IHRoaXMuaWRcclxuXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0Q2F0ZWdvcmllc0Zyb21EYXRhYmFzZSh1cGRhdGUuc2VsZWN0aW9uLnNlY3Rpb24sIGZ1bmN0aW9uIChjYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGNhdGVnb3JpZXMsXCJcIik7IC8vIE1pZ2h0IGNoYW5nZSB0aGlzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBCaW5kIGZ1bmN0aW9uIHRvIHJlc3BvbmQgdG8gdXBkYXRlXHJcbiAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHMgd2UgY2FyZSBhYm91dFxyXG4gIGV2ZW50cy5vbihcIk5FV19TRUNUSU9OXCIsIHRoaXMuc2VjdGlvbkNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTdWJjYXRlZ29yeSBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIFN1YkNhdGVnb3J5U2VsZWN0KGlkTnVtYil7XHJcbiAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgdGhpcy5pZCA9IFwiI3N1YmNhdGVnb3J5LXNlbGVjdFwiK3RoaXMuaWROdW1iO1xyXG4gIHRoaXMuJHNlbGVjdCA9ICQodGhpcy5pZCk7XHJcblxyXG5cclxuICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcbiAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuXHJcbiAgICBEYXRhYmFzZS5nZXRTdWJDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBzZWxlY3Rpb24uY2F0ZWdvcnksIGZ1bmN0aW9uIChzdWJDYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxzdWJDYXRlZ29yaWVzLHNlbGVjdGlvbi5zdWJDYXRlZ29yeSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIExpc3RlbnMgdG8gYSBjaGFuZ2UgaW4gYSBjYXRlZ29yeVxyXG4gIHRoaXMuY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpO1xyXG4gICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuICAgICAgdmFyIHBhc3NJRE51bWIgPSB0aGlzLmlkTnVtYjtcclxuXHJcbiAgICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UodXBkYXRlLnNlbGVjdGlvbi5zZWN0aW9uLHVwZGF0ZS5zZWxlY3Rpb24uY2F0ZWdvcnksIGZ1bmN0aW9uIChzdWJDYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsc3ViQ2F0ZWdvcmllcyxcIlwiKTsgLy8gTWlnaHQgY2hhbmdlIHRoaXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHtzdWJDYXRlZ29yeSA6IFwiXCIsIGlkIDogcGFzc0lETnVtYn0pOy8vIEJZIHNlbmRpbmcgb3V0IHRoaXMgZXZlbnQgZGVzY3JpcHRpb24gaXMgbm90aWZpZWQgd2l0aCBlbXB0eSBzdWJDYXRlZ29yeVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiB3ZSBhcmUgdXBkYXRlZCBieSB0aGUgdXNlciBzZW5kIG91dCBhbiBldmVudFxyXG4gIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnRzLmVtaXQoXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHtzdWJDYXRlZ29yeSA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIEJpbmQgZnVuY3Rpb24gdG8gcmVzcG9uZCB0byB1cGRhdGVcclxuICB0aGlzLiRzZWxlY3Qub24oJ2NoYW5nZScsIHRoaXMudXBkYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gTGlzdGVuIHRvIGV2ZW50cyB3ZSBjYXJlIGFib3V0XHJcbiAgZXZlbnRzLm9uKFwiU0VDVElPTl9DSEFOR0VEXCIsIGNsZWFyTXlzZWxmLmJpbmQodGhpcykpOyAvLyBUT0RPIHRlc3RcclxuICBldmVudHMub24oXCJORVdfQ0FURUdPUllcIiwgdGhpcy5jYXRlZ29yeUNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU3ViY2F0ZWdvcnkgZHJvcGRvd24gbWVudVxyXG5mdW5jdGlvbiBEZXNjcmlwdGlvblNlbGVjdChpZCl7XHJcbiAgdGhpcy5pZE51bWIgPSBpZDtcclxuICB0aGlzLmlkID0gXCIjZGVzY3JpcHRpb24tc2VsZWN0XCIraWQ7XHJcbiAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTtcclxuXHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIkRFU0NSSVBUSU9OX0NIQU5HRURcIiwgIHtkZXNjcmlwdGlvbiA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vXHJcbiAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgIHZhciBzZWxlY3Rpb24gPSB1cmxTZWxlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pZCA9PT0gaWR9KVswXTtcclxuICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgIERhdGFiYXNlLmdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZShzZWxlY3Rpb24uc2VjdGlvbiwgc2VsZWN0aW9uLmNhdGVnb3J5LCBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnksIGZ1bmN0aW9uIChkZXNjcmlwdGlvbnMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGRlc2NyaXB0aW9ucyxzZWxlY3Rpb24uZGVzY3JpcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvL1xyXG4gIHRoaXMuc3ViQ2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0RGVzY3JpcHRpb25zRnJvbURhdGFiYXNlKHVwZGF0ZS5zZWxlY3Rpb24uc2VjdGlvbix1cGRhdGUuc2VsZWN0aW9uLmNhdGVnb3J5LHVwZGF0ZS5zZWxlY3Rpb24uc3ViQ2F0ZWdvcnksIGZ1bmN0aW9uKGRlc2NyaXB0aW9ucyl7XHJcbiAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsZGVzY3JpcHRpb25zLFwiXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQmluZCBmdW5jdGlvbiB0byByZXNwb25kIHRvIGV2ZW50c1xyXG4gIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzIGZyb20gYW55IG9mIHRoZSBvdGhlciBzZWxlY3Rpb25zIGNoYW5naW5nIG9uIG91ciByb3dcclxuICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7IC8vIFRPRE8gdGVzdFxyXG4gIGV2ZW50cy5vbihcIkNBVEVHT1JZX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7XHJcbiAgZXZlbnRzLm9uKFwiTkVXX1NVQkNBVEVHT1JZXCIsIHRoaXMuc3ViQ2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbiAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbi8vIENsZWFycyB0aGUgb3B0aW9ucyBmcm9tIHRoZSBzZWxlY3RcclxuZnVuY3Rpb24gY2xlYXJNeXNlbGYodXBkYXRlKSB7XHJcbiAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgIHRoaXMuJHNlbGVjdC5odG1sKCcnKTtcclxuICAgICAgdGhpcy4kc2VsZWN0LnNlbGVjdHBpY2tlcigncmVmcmVzaCcpOyAvLyBSZWZyZXNoIHRoZSBzZWxlY3Rpb25zXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdGhlIGRyb3AgZG93biBvcHRpb25zIHRvIG9uZSBvZiB0aGUgc2VsZWN0b3JzXHJcbiAqXHJcbiAqIEBwYXJhbSBzZWxlY3RvcklEIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgZHJvcCBkb3duXHJcbiAqIEBwYXJhbSBvcHRpb25zIHtTdHJpbmdbXX0gdGhlIG9wdGlvbnMgdG8gYWRkXHJcbiAqIEBwYXJhbSBzZWxlY3RlZE9wdGlvbiB7U3RyaW5nfSB0aGUgb3B0aW9uIHRoYXQgc2hvdWxkIGJlIHNldCBhcyBzZWxlY3RlZFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBhZGRPcHRpb25zVG9TZWxlY3RvcihzZWxlY3RvcklELCBvcHRpb25zLCBzZWxlY3RlZE9wdGlvbil7XHJcbiAgJChzZWxlY3RvcklEKS5odG1sKCcnKTsgLy8gRW1wdHkgdGVtcCBvcHRpb25zXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgaWYob3B0aW9uc1tpXSA9PT0gbnVsbCljb250aW51ZTtcclxuICAgIGlmKG9wdGlvbnNbaV0gPT09IHNlbGVjdGVkT3B0aW9uKXtcclxuICAgICAgJChzZWxlY3RvcklEKS5hcHBlbmQoJzxvcHRpb24gc2VsZWN0ZWQ+JyArIG9wdGlvbnNbaV0gKyAnPC9vcHRpb24+Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKHNlbGVjdG9ySUQpLmFwcGVuZCgnPG9wdGlvbj4nICsgb3B0aW9uc1tpXSArICc8L29wdGlvbj4nKTtcclxuICAgIH1cclxuICB9XHJcbiAgJChzZWxlY3RvcklEKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTsgLy8gUmVmcmVzaCB0aGUgc2VsZWN0aW9uc1xyXG59XHJcbiIsIi8qKlxyXG4qIENyZWF0ZXMgYSB0YWJsZSBvYmplY3RcclxuKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSB0YWJsZSBhLCBiLCBjLCBkXHJcbiogQHBhcmFtIHJvd3MgdGhlIHJvd3Mgb2YgZGF0YSBmb3IgdGhlIHRhYmxlXHJcbiogQHBhcmFtIHVuaXQgdGhlIHVuaXQgb2YgdGhlIGRhdGFcclxuKiBAcGFyYW0gc2VsZWN0aW9uIHtPYmplY3R9IGlmIG5vdCBjb21iaW5lZCBlbHNlIHtPYmplY3RbXX0gdGhlIHNlbGVjdGlvbiBtYWRlIGJ5IHRoZSB1c2VyIHRvIGZpbmQgdGhlIGRhdGFcclxuKi9cclxuZnVuY3Rpb24gVGFibGUoaWQsIHJvd3MsIHNlbGVjdGlvbiwgaXNDb21iaW5lZCl7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuaXNDb21iaW5lZCA9IGlzQ29tYmluZWQ7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnVuaXQgPSByb3dzWzBdLnVuaXRzO1xyXG4gIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIHRpdGxlc1xyXG4gIHRoaXMudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgdGhpcy5zdWJUaXRsZSA9IHRoaXMuZ2V0U3ViVGl0bGUoKTtcclxuXHJcbiAgLy8gVXNlZCB0byBmb3JtYXQgbnVtYmVycyBkaXNwbGF5ZWRcclxuICB0aGlzLmRwRm9ybWF0ID0gZDMuZm9ybWF0KFwiLjRyXCIpO1xyXG5cclxuICAvLyBGaW5kIHRoZSBhdmFpbGFibGUgeWVhcnNcclxuICB0aGlzLmF2YWlsYWJsZVllYXJzID0gdGhpcy5nZXRBdmFpbGFibGVZZWFycygpO1xyXG5cclxuICAvLyBVc2VkIHRvIHN0b3JlIG9yaWdpbmFsIGNlbGwgdmFsdWVzXHJcbiAgdGhpcy5ub0NQSUNlbGxzID0gW107XHJcblxyXG4gIC8vIENhY2hlIERPTSBlbGVtZW50c1xyXG4gIHRoaXMuJHRhYmxlID0gJCgnI3RhYmxlLScraWQpO1xyXG4gIHRoaXMuJHRvdGFsc1RhYmxlID0gJCgnI3RhYmxlLXRvdGFsLScraWQpO1xyXG4gIHRoaXMuJHRpdGxlID0gJCgnI3RpdGxlLScraWQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHRpdGxlIGZvciB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aXRsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXtcclxuICAgIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uWzBdID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uWzBdLnN1YkNhdGVnb3J5O1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uWzBdLmNhdGVnb3J5ICsgXCIsIFwiICsgc3ViQ2F0ZWdvcnkgKyBcIiwgXCIrIHRoaXMuc2VsZWN0aW9uWzBdLmRlc2NyaXB0aW9uO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gKHRoaXMuc3ViQ2F0ZWdvcnkgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvbi5zdWJDYXRlZ29yeSArIFwiLCBcIikgKyBcIiBcIisgdGhpcy5zZWxlY3Rpb24uZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHN1YnRpdGxlIGZvciB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSBzdWJ0aXRsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuZ2V0U3ViVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXtcclxuICAgIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uWzFdID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uWzFdLnN1YkNhdGVnb3J5O1xyXG4gICAgcmV0dXJuICB0aGlzLnNlbGVjdGlvblsxXS5jYXRlZ29yeSArIFwiLCBcIiArIHN1YkNhdGVnb3J5ICsgXCIsIFwiKyB0aGlzLnNlbGVjdGlvblsxXS5kZXNjcmlwdGlvbjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLnNlY3Rpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbi5jYXRlZ29yeTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgcm93cyBhbmQgdGhlIHJlY2FsY3VsYXRlcyB0b3RhbCB0YWJsZVxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB0aGUgbmV3IHJvd3MgZm9yIHRoZSB0YWJsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJvd3MpIHtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMuY3JlYXRlVG90YWxzVGFibGUodHJ1ZSwgXCJcIik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU2hvd3MgYSBiYXIgZ3JhcGggd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHNlbGVjdGVkIHJvd1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXBkYXRlIHRoZSBvYmplY3QgdG8gaG9sZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcm93IGNsaWNrZWRcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLnRvdGFsc1Jvd1NlbGVjdGVkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gIHZhciByb3dOdW1iICA9IHVwZGF0ZS5yb3dJRC5jaGFyQXQodXBkYXRlLnJvd0lELmxlbmd0aC0xKTtcclxuICB2YXIgZGF0YVJvd0lEID0gXCJyb3ctdG90LVwiK3RoaXMuaWQrXCJcIityb3dOdW1iO1xyXG5cclxuICBTaW5nbGVCYXJNb2R1bGUuc2hvd0JhcldpdGhSb3dFbGVtKGRhdGFSb3dJRCx1cGRhdGUucmVnaW9uLFwiI2Jhci10b3RhbC1cIit0aGlzLmlkLFwiI2hlYWQtcm93LXRvdGFscy1cIit0aGlzLmlkLFwiI3RhYmxlLXRvdGFsLVwiK3RoaXMuaWQsdGhpcy51bml0KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIGJhciBncmFwaCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc2VsZWN0ZWQgcm93XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB1cGRhdGUgdGhlIG9iamVjdCB0byBob2xkIGluZm9ybWF0aW9uIGFib3V0IHRoZSByb3cgY2xpY2tlZFxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUucm93Q2xpY2tlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gIHZhciByb3dOdW1iID0gZXZlbnQucm93SUQuc2xpY2UoLTEpO1xyXG4vLyBOZWVkIHRvIGFjY291bnQgZm9yIG51bWJlcnMgZ3JlYXRlciB0aGFuIDEwXHJcbmlmKCFpc05hTihldmVudC5yb3dJRC5zbGljZSgtMikpKXtcclxuICByb3dOdW1iID0gZXZlbnQucm93SUQuc2xpY2UoLTIpO1xyXG59XHJcbiAgU2luZ2xlQmFyTW9kdWxlLnNob3dCYXJXaXRoUm93RWxlbSgncm93Jyt0aGlzLmlkICsnJytyb3dOdW1iLGV2ZW50LmVkYixcIiNiYXItXCIrdGhpcy5pZCxcIiNoZWFkLXJvdy1cIit0aGlzLmlkLFwiI3RhYmxlLVwiK3RoaXMuaWQsdGhpcy51bml0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHllYXJzIG9mIGRhdGEgaW4gdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ1tdfSBUaGUgYXJyYXkgb2YgeWVhcnNcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmdldEF2YWlsYWJsZVllYXJzID0gZnVuY3Rpb24gKCkge1xyXG4gIGF2YWlsYWJsZVllYXJzID0gW107XHJcbiAgdmFyIGF2YWlsYWJsZVllYXJzID0gW107XHJcbiAgdGhpcy5yb3dzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgaWYoIWF2YWlsYWJsZVllYXJzLmluY2x1ZGVzKGVsZW0ub2JzX3lyKSlhdmFpbGFibGVZZWFycy5wdXNoKGVsZW0ub2JzX3lyKTtcclxuICB9KTtcclxuICBhdmFpbGFibGVZZWFycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IC8vIFNvcnQgdGhlIHllYXJzXHJcbiAgICAgIHJldHVybiArYSAtICtiO1xyXG4gIH0pO1xyXG4gIHJldHVybiBhdmFpbGFibGVZZWFycztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIENQSSBjYW4gYmUgYXBwbGllZCB0byB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7Qm9vbGVhbn0gY2FuIGFwcGx5IGNwaSBvciBub3RcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmNhbkFwcGx5Q1BJID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZClyZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIHRoaXMudW5pdC5pbmNsdWRlcygnJCcpOyAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgcmlnaHQgbGF0ZXJcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBBcHBsaWVzIENQSSB0byBhbGwgdmFsdWVzIGluIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gSG9sZHMgcGVyY2VudGFnZSBvZiBDUEkgZm9yIGVhY2ggeWVhclxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuYXBwbHlDUEkgPSBmdW5jdGlvbiAoY3BpVmFsdWVzKSB7XHJcbiAgaWYodGhpcy5ub0NQSUNlbGxzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0aGlzLnJldmVydENQSSgpO1xyXG4gIH1cclxuXHJcbiAgdmFyICRjYWNoZWRDZWxscyA9IHRoaXMuJHRhYmxlLmZpbmQoJy5jZWxsJyk7XHJcblxyXG4gIC8vIEZpcnN0IGJhY2t1cCB0aGUgY3BpQ2VsbHNcclxuICB2YXIgbm9DUElDZWxscyA9IHRoaXMubm9DUElDZWxscztcclxuICB2YXIgaWQgPSB0aGlzLmlkO1xyXG4gICRjYWNoZWRDZWxscy5lYWNoKGZ1bmN0aW9uKCl7IC8vIEJhY2t1cCB0aGUgdmFsdWVzIGZyb20gdGhlIGNlbGxzXHJcbiAgICAgIG5vQ1BJQ2VsbHMucHVzaCh7aWQgOiAkKHRoaXMpLmF0dHIoJ2lkJyksIHZhbHVlIDogJCh0aGlzKS50ZXh0KCl9KTtcclxuICB9KTtcclxuXHJcbiAgdmFyIG1pblllYXIgPSBJbmZpbml0eTtcclxuICB2YXIgbWF4WWVhciA9IC1JbmZpbml0eTtcclxuICAkY2FjaGVkQ2VsbHMuZWFjaChmdW5jdGlvbigpeyAvL2NlbGwgb3IgdGhcclxuICAgICAgdmFyIHllYXIgPSArJCh0aGlzKS5hdHRyKFwiY2xhc3NcIikuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgbWluWWVhciA9IHllYXIgPCBtaW5ZZWFyID8geWVhciA6IG1pblllYXI7XHJcbiAgICAgIG1heFllYXIgPSB5ZWFyID4gbWF4WWVhciA/IHllYXIgOiBtYXhZZWFyO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgICAgJGNhY2hlZENlbGxzLmVhY2goZnVuY3Rpb24oKXsgLy8gR3JhYiBldmVyeSBjZWxsXHJcbiAgICAgICAgICB2YXIgeWVhciA9ICskKHRoaXMpLmF0dHIoXCJjbGFzc1wiKS5zcGxpdCgnICcpWzFdOyAvLyBHcmFiIHRoZSB5ZWFyIG9mIHRoZSBjZWxsIGJ5IGNoZWNraW5nIHRoZSBjbGFzc1xyXG4gICAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gJCh0aGlzKS5hdHRyKFwib3JpZ3ZhbHVlXCIpO1xyXG4gICAgICBmb3IodmFyIGN1ciA9IG1pblllYXI7IGN1ciA8PW1heFllYXI7IGN1cisrKXsgLy8gR28gdGhyb3VnaCBlYWNoIHBvc3NpYmxlIHllYXJcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwaVZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgaWYoY3BpVmFsdWVzW2ldLnllYXIgPT09IGN1cil7XHJcbiAgICAgICAgICAgICAgICAgIGlmKHllYXIgPD0gY3VyKXtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gdmFsdWVPZkNlbGwgKiAoMSArIChjcGlWYWx1ZXNbaV0udmFsdWUgLyAxMDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gZm9ybWF0KHZhbHVlT2ZDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgICAkKHRoaXMpLnRleHQodmFsdWVPZkNlbGwpOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgICB9KTtcclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLnJldmVydENQSSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZih0aGlzLm5vQ1BJQ2VsbHMubGVuZ3RoID4gMCl7XHJcbiAgICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgIHRoaXMubm9DUElDZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICQoJyMnK2UuaWQpLnRleHQoZm9ybWF0KGUudmFsdWUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLmluc2VydFRpdGxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZCl7XHJcbiAgICB2YXIgczEgPSB0aGlzLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgdmFyIHMyID0gdGhpcy5pZC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTtcclxuICAgIHRoaXMuJHRpdGxlLmFwcGVuZCgnPGgzPlJhdGlvIGFuYWx5c2lzICcrczErJyAvICcrczIrJzwvaDQ+Jyk7XHJcbiAgICB0aGlzLiR0aXRsZS5hcHBlbmQoJzxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJjb2xvcjogYmxhY2s7XCI+JytzMSsnOiA8L3NwYW4+Jyt0aGlzLnRpdGxlKyc8L2g0PjxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJjb2xvcjogYmxhY2s7XCI+JytzMisnOiA8L3NwYW4+Jyt0aGlzLnN1YlRpdGxlKyc8L2g0PicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLiR0aXRsZS5hcHBlbmQoJzxoMiBjbGFzcz1cInRpdGxlXCI+Jyt0aGlzLnRpdGxlKyc8L2gyPicpLmFwcGVuZCgnPGg0IGNsYXNzPVwic3ViVGl0bGVcIj4nK3RoaXMuc3ViVGl0bGUrJzwvaDQ+Jyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vIE9ubHkgY2FsbGVkIG9uY2UgdG8gY3JlYXRlIHRoZSB0YWJsZVxyXG5UYWJsZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciB0YWJsZURhdGEgPSB0aGlzLmNyZWF0ZVRhYmxlRGF0YSAodGhpcy5yb3dzKTsgLy8gR3JhYiB0aGUgZGF0YSBpbiB0aGUgZm9ybSB3ZSB3YW50XHJcblxyXG4gIC8vIGNyZWF0ZSB0aGUgeWVhcnMgY2VsbHNcclxuICB2YXIgeWVhcnMgPSBcIlwiO1xyXG4gIHRhYmxlRGF0YVswXS55ZWFycy5mb3JFYWNoKGZ1bmN0aW9uKHkpe1xyXG4gICAgeWVhcnMgKz0gXCI8dGg+XCIgKyB5LnllYXIgKyBcIjwvdGg+XCI7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFwcGVuZCB0aGUgaGVhZCByb3dcclxuICB0aGlzLiR0YWJsZS5hcHBlbmQoJzx0ciBpZD1cImhlYWQtcm93LScrdGhpcy5pZCsnXCIgY2xhc3M9XCJ0YWJsZS1yb3cgdGFibGUtaGVhZFwiPiA8dGg+RURCPC90aD4nKyB5ZWFycyArICc8L3RyPicpO1xyXG5cclxuICAvLyBHbyB0aHJvdWdoIGFuZCBjcmVhdGUgYSByb3cgZm9yIGVhY2ggZWRiXHJcbiAgdmFyIGNlbGxDb3VudCA9IDA7XHJcbiAgdmFyIHJvd0NvdW50ID0gIDA7XHJcbiAgdmFyIGNlbGxWYWx1ZXMgPSBbXTsgLy8gQWxsIHRoZSBjZWxsIHZhbHVlc1xyXG5cclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlRGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICB2YXIgZGF0YVJvdyA9IHRhYmxlRGF0YVtpXTtcclxuICAgIHZhciBlZGIgPSBkYXRhUm93LmVkYjtcclxuICAgIHZhciB5ZWFycyA9IGRhdGFSb3cueWVhcnM7XHJcbiAgICB2YXIgcm93PSBcIjx0ciBjbGFzcz0ndGFibGUtcm93JyBpZD1yb3dcIit0aGlzLmlkK3Jvd0NvdW50K1wiPjx0aCBjbGFzcz0nZWRiLWNlbGwnPlwiICsgZWRiICsgXCI8L3RoPlwiOy8vIEluc2VydHMgdGhlIGNlbGwgd2l0aCB0aGUgZWRiIG5hbWVcclxuXHJcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgeWVhcnMubGVuZ3RoOyBqKyspe1xyXG4gICAgICB2YXIgeWVhckRhdGEgPSB5ZWFyc1tqXTtcclxuICAgICAgcm93ICs9IFwiPHRoIG9yaWdWYWx1ZT0nXCIrIHllYXJEYXRhLnZhbHVlICtcIicgY2xhc3M9J2NlbGwgXCIreWVhckRhdGEueWVhcitcIicgaWQ9J3RcIit0aGlzLmlkK1wiXCIrY2VsbENvdW50K1wiJz5cIiArIHRoaXMuZHBGb3JtYXQoeWVhckRhdGEudmFsdWUpICsgXCI8L3RoPlwiO1xyXG4gICAgICBjZWxsVmFsdWVzLnB1c2goeyBpZCA6IFwiI3RcIit0aGlzLmlkK1wiXCIrY2VsbENvdW50LCB2YWx1ZSA6IHllYXJEYXRhLnZhbHVlIH0pO1xyXG4gICAgICBjZWxsQ291bnQrKztcclxuICAgIH1cclxuICAgIHRoaXMuJHRhYmxlLmFwcGVuZChyb3cgKyAnPC90cj4nKTtcclxuXHJcbiAgICAkKFwiI3Jvd1wiK3RoaXMuaWQrcm93Q291bnQpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciByb3dOdW1iID0gdGhpcy5pZC5zbGljZSgtMSk7XHJcbiAgICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgbnVtYmVycyBncmVhdGVyIHRoYW4gMTBcclxuICAgICAgaWYoIWlzTmFOKHRoaXMuaWQuc2xpY2UoLTIpKSl7XHJcbiAgICAgICAgcm93TnVtYiA9IHRoaXMuaWQuc2xpY2UoLTIpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBlZGIgPSAkKFwiI1wiK3RoaXMuaWQrXCIgLmVkYi1jZWxsXCIpLnRleHQoKTtcclxuICAgICAgZXZlbnRzLmVtaXQoJ1JPV19DTElDS0VEJywgeyByb3dJRCA6IHRoaXMuaWQsIHJvd051bWIgOiByb3dOdW1iLCBlZGIgOiBlZGJ9KTtcclxuICAgIH0pO1xyXG4gICAgcm93Q291bnQrKztcclxuICB9XHJcbiAgdGhpcy5jZWxsVmFsdWVzID0gY2VsbFZhbHVlcztcclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLmNyZWF0ZVRvdGFsc1RhYmxlID0gZnVuY3Rpb24odXBkYXRlLCBzZWxlY3RlZFRvdGFsUm93KSB7XHJcblxyXG4gIHZhciB0b3RhbHMgPSBkcC5jcmVhdGVUYWJsZVRvdGFscyh0aGlzLnJvd3MsIFRhYmxlc01vZHVsZS5yZWdpb25zLCB0aGlzLmF2YWlsYWJsZVllYXJzKTtcclxuICB2YXIgbmFtZXMgPSB7biA6IFwiTm9ydGggSXNsYW5kXCIsIHVuaSA6IFwiVXBwZXIgTm9ydGggSXNsYW5kXCIsIGVuaSA6IFwiRWFzdGVybiBOb3J0aCBJc2xhbmRcIiwgc3duaSA6IFwiU291dGgtV2VzdCBOb3J0aCBJc2xhbmRcIiwgcyA6IFwiU291dGggSXNsYW5kXCIsIHVzaSA6IFwiVXBwZXIgU291dGggSXNsYW5kXCIsIGxzaSA6IFwiTG93ZXIgU291dGggSXNsYW5kXCIsIG56IDogXCJOZXcgWmVhbGFuZFwifTtcclxuXHJcbiAgdmFyIHRvdGFsQ2VsbHMgPSBbXTtcclxuICAvLyBJbnNlcnQgQ2FwdGlvbiBmb3IgdGFibGVcclxuICB2YXIgeWVhcnMgPSBcIlwiO1xyXG4gIHRoaXMuYXZhaWxhYmxlWWVhcnMuZm9yRWFjaChmdW5jdGlvbiAoeWVhcikge1xyXG4gICAgICB5ZWFycyArPSBcIjx0aD5cIiArIHllYXIgKyBcIjwvdGg+XCI7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBjZWxsQ291bnQgPSAwOyAvLyBVc2VkIGZvciBpZCBjZWxsc1xyXG4gIHZhciByb3dDb3VudCA9IDA7IC8vIFVzZWQgZm9yIGlkIHJvd3NcclxuXHJcbiAgaWYodXBkYXRlKXtcclxuICAgICAgdGhpcy4kdG90YWxzVGFibGUuaHRtbCgnJyk7IC8vIENsZWFyIGxhc3QgdGFibGVcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgdG8gY2FsY3VsYXRlIGF2ZXJhZ2Ugb3IgdG90YWxcclxuICB2YXIgbnVtYmVyT2ZDb21wYW5pZXMgPSAyOTtcclxuXHJcbiAgdGhpcy4kdG90YWxzVGFibGUuYXBwZW5kKCc8dHIgaWQ9XCJoZWFkLXJvdy10b3RhbHMtJyt0aGlzLmlkKydcIiBjbGFzcz1cInRhYmxlLXJvdyB0YWJsZS1oZWFkXCI+IDx0aD5SZWdpb248L3RoPicrIHllYXJzICsgJzwvdHI+Jyk7XHJcblxyXG4gIGZvciAodmFyIHByb3BlcnR5IGluIHRvdGFscykge1xyXG4gICAgICBpZiAodG90YWxzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgdmFyIHJvdz0gXCI8dHIgY2xhc3M9J3RhYmxlLXJvdycgaWQ9cm93LXRvdC1cIit0aGlzLmlkK3Jvd0NvdW50K1wiPlwiO1xyXG5cclxuICAgICAgICAgIC8vVE9ETyAoTm90ZSB3aGVuIHVwZGF0ZWQgb3JpZ1ZhbHVlIHdpbGwgYmUgdGhlIHVwZGF0ZWQgdmFsdWUgbm90IHRoZSBvcmlnaW5hbClcclxuXHJcbiAgICAgICAgICAvLyBJbnNlcnQgbmFtZSBpbiBjb2x1bW4gYW5kIGFzc2lnbiBhbiBpZCB0byB0aGUgcm93XHJcbiAgICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLm5vQ1BJQ2VsbHM7XHJcbiAgICAgICAgICByb3cgKz0gXCI8dGggY2xhc3M9J3JlZy1jZWxsJz5cIiArIG5hbWVzW3Byb3BlcnR5XSArIFwiPC90aD5cIjtcclxuICAgICAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICAgICAgdG90YWxzW3Byb3BlcnR5XS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICB2YXIgYXZnO1xyXG4gICAgICAgICAgICAgIGlmKHByb3BlcnR5ID09PSBcIm56XCIpe1xyXG4gICAgICAgICAgICAgICAgICBhdmcgPSB2YWx1ZSAvIG51bWJlck9mQ29tcGFuaWVzO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGF2ZyA9IHZhbHVlIC8gVGFibGVzTW9kdWxlLnJlZ2lvbnNbcHJvcGVydHldLmxlbmd0aDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJvdyArPSBcIjx0aCBpZD0ndC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCtcIicgb3JpZ1ZhbHVlPSdcIisgYXZnICtcIicgY2xhc3M9J2NlbGwnPlwiICsgZm9ybWF0KGF2ZykgKyBcIjwvdGg+XCI7XHJcbiAgICAgICAgICAgICAgdG90YWxDZWxscy5wdXNoKHtpZCA6IFwiI3QtdG90YWxcIitwYXNzSUQrXCJcIitjZWxsQ291bnQsIHZhbHVlIDphdmd9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gVE9ETyBjaGVjayBpZiBiZXR0ZXIgd2F5XHJcbiAgICAgICAgICAgICAgY2VsbHMucHVzaCh7aWQgOiBcInQtdG90YWxcIitwYXNzSUQrXCJcIitjZWxsQ291bnQsIHZhbHVlIDogYXZnfSk7XHJcblxyXG4gICAgICAgICAgICAgIGNlbGxDb3VudCsrO1xyXG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy4kdG90YWxzVGFibGUuYXBwZW5kKHJvdyArICc8L3RyPicpO1xyXG4gICAgICAgICAgJChcIiNyb3ctdG90LVwiK3RoaXMuaWQrcm93Q291bnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gJChcIiNcIit0aGlzLmlkICtcIiAucmVnLWNlbGxcIikudGV4dCgpO1xyXG4gICAgICAgICAgICBldmVudHMuZW1pdChcIlRPVEFMX1JPV19DTElDS0VEXCIsIHtyb3dJRCA6IHRoaXMuaWQsIHJlZ2lvbiA6IHJlZ30pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByb3dDb3VudCsrO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIGlmKHNlbGVjdGVkVG90YWxSb3cgIT09XCJcIil7XHJcbiAgICAgICQoJyMnK3NlbGVjdGVkVG90YWxSb3cpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpO1xyXG4gIH1cclxuICB0aGlzLnRvdGFsQ2VsbFZhbHVlcyA9IHRvdGFsQ2VsbHM7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblRhYmxlLnByb3RvdHlwZS5jcmVhdGVUYWJsZURhdGEgPSBmdW5jdGlvbiAocm93cykge1xyXG4gIC8vIENyZWF0ZSBhcnJheSB3aXRoIHVuaXF1ZSBFREJTXHJcbiAgdmFyIGVkYnMgPSB7fTtcclxuICByb3dzLmZvckVhY2ggKGZ1bmN0aW9uKHIpe1xyXG4gICAgaWYoZWRic1tyLmVkYl0gPT09IHVuZGVmaW5lZCllZGJzW3IuZWRiXSA9IHIuZWRiO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZGF0YSA9IFtdO1xyXG5cclxuICAvLyBGaWx0ZXIgcm93cyBieSBlYWNoIEVEQlxyXG4gIGZvciAodmFyIGVkYiBpbiBlZGJzKSB7XHJcbiAgICBpZiAoZWRicy5oYXNPd25Qcm9wZXJ0eShlZGIpKSB7XHJcbiAgICAgIHZhciBlZGJZZWFycyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiByLmVkYiA9PT0gZWRic1tlZGJdIH0pO1xyXG5cclxuICAgICAgdmFyIHllYXJzID0gW107XHJcbiAgICAgIGVkYlllYXJzLmZvckVhY2goZnVuY3Rpb24oeSl7XHJcbiAgICAgICAgeWVhcnMucHVzaCh7IHllYXIgOiB5Lm9ic195ciwgdmFsdWUgOiB5LnZhbHVlIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNvcnQgeWVhcnNcclxuICAgICAgeWVhcnMuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgIHJldHVybiBhLnllYXIgPiBiLnllYXI7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBkYXRhLnB1c2goeyBlZGIgOiBlZGJzW2VkYl0sIHllYXJzIDogeWVhcnN9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcblxyXG4vLyBDYWxsZWQgd2hlbiB2YWx1ZXMgaW4gdGhlIHRhYmxlIHVwZGF0ZVxyXG5UYWJsZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuYXBwbHlHcmFkaWVudENTUyh0aGlzLmNlbGxWYWx1ZXMpO1xyXG4gIHRoaXMuYXBwbHlHcmFkaWVudENTUyh0aGlzLnRvdGFsQ2VsbFZhbHVlcyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogaGlnaGxpZ2h0cyB0aGUgY2VsbCBiYXNlZCBvbiB0aGUgcGVyY2VudGFnZSBvZiB0aGUgbWF4IHZhbHVlIGluIHRoZSB0YWJsZSB1bmxlc3MgYWxyZWFkeSBhIHBlcmNlbnRhZ2VcclxuICpcclxuICogQHBhcmFtIGNlbGxWYWx1ZXMge09iamVjdFtdfSB2YWx1ZSBvZiBhIGNlbGwgYW5kIHRoZSB0YWJsZSBjZWxsIGlkXHJcbiAqIEBwYXJhbSBwZXJjZW50IHtCb29sZWFufSBpZiBub3QgYSBwZXJjZW50IGl0IHNob3VsZCBiZSBoaWdobGlnaHRlZCBiYXNlZCBvbiB0aGUgcGVyY2VudGFnZSBvZiB0aGUgbWF4IHZhbHVlIGluIHRoZSBjZWxsXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5hcHBseUdyYWRpZW50Q1NTID0gZnVuY3Rpb24oY2VsbFZhbHVlcykge1xyXG4gIHZhciBwZXJjZW50ID0gZmFsc2U7IC8vIFRPRE8gZml4IGxhdGVyXHJcbiAgLy8gRmluZCB0aGUgbWF4IHZhbHVlXHJcbiAgdmFyIG1heENlbGxWYWx1ZSA9IC1JbmZpbml0eTtcclxuICBjZWxsVmFsdWVzLmZvckVhY2goZnVuY3Rpb24oZWxlbSl7XHJcbiAgICAgIG1heENlbGxWYWx1ZSA9ICtlbGVtLnZhbHVlID4gbWF4Q2VsbFZhbHVlID8gK2VsZW0udmFsdWUgOiBtYXhDZWxsVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFwbGxpZSBjc3MgdG8gZWFjaCBjZWxsXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNlbGxWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICB2YXIgdmFsdWUgPSAocGVyY2VudCA/IHZhbHVlIDogKCgrY2VsbFZhbHVlc1tpXS52YWx1ZSAvIG1heENlbGxWYWx1ZSkqMTAwKSk7IC8vIElmIHBlcmNlbnRhZ2UgbWV0cmljIGp1c3QgdXNlIHZhbHVkXHJcbiAgICAgICQoY2VsbFZhbHVlc1tpXS5pZCkuY3NzKHtcclxuICAgICAgICAgICAgICBcImJhY2tncm91bmRcIiA6IFwiLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCByaWdodCB0b3AsIGNvbG9yLXN0b3AoXCIgKyB2YWx1ZSArXCIlLCM3YmJmZDYpLCBjb2xvci1zdG9wKFwiICsgdmFsdWUgK1wiJSwjRkZGKSlcIixcclxuICAgICAgICAgIH1cclxuICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiLy8gREVQRU5ERU5DSUVTIERhdGFQcm9jZXNzb3IsIERhdGFiYXNlLCBFdmVudHNcclxuXHJcbi8vIEludGVybmV0IEV4cGxvcmVyIGNvbXBhdGliaWxpdHlcclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKSB7XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuYXBwbHkodGhpcywgYXJndW1lbnRzKSAhPT0gLTE7XHJcbiAgICB9O1xyXG59XHJcblxyXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJpbmNsdWRlc1wiLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgbmV3QXJyID0gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbCA9PSBvYmo7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3QXJyLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8gRW5kIEludGVybmV0IGV4cGxvcmVyIGNvbXBhdGliaWxpdHlcclxuXHJcbnZhciBDb21wYXJlTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIEluaXQgdGhlIGRhdGEgcHJvY2Vzc29yXHJcbiAgdmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuXHJcbiAgLy8gT2JqZWN0IHRoYXQgaG9sZHMgYWxsIHRoZSByb3dzIGZvciBlYWNoIHRhYmxlIGFsb25nIHdpdGggYSBjb3B5XHJcbiAgdmFyIGJhY2t1cCA9IHt9O1xyXG5cclxuICAvLyBTZWFyY2ggZXJyb3Igc3RhdGVcclxuICB2YXIgZXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgLy8gQ2FjaGUgZG9tIGVsZW1lbnRzXHJcbiAgdmFyICRzZWFyY2hFcnJvciA9ICQoJyNlcnJvci1kaXYnKTtcclxuXHJcbiAgLyoqXHJcbiAgICogVHVybnMgb2JqZWN0IGluIHVybCBzdHJpbmdcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvYmoge09iamVjdH0gdGhlIG9iamVjdCB0byB0dXJuIGludG8gdXJsXHJcbiAgICogKi9cclxuICB2YXIgc2VyaWFsaXNlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgdmFyIHN0ciA9IFtdO1xyXG4gICAgZm9yKHZhciBwIGluIG9iailcclxuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwKSkge1xyXG4gICAgICAgIHN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwXSkpO1xyXG4gICAgICB9XHJcbiAgICByZXR1cm4gc3RyLmpvaW4oXCImXCIpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWQsIGNoZWNrcyBpZiBhIHZhbGlkIHNlYXJjaCBzZWxlY3Rpb24gaXMgbWFkZVxyXG4gICAqIGlmIHNvIGluc2VydHMgdGhlIHNlYXJjaCBpbnRvIHRoZSB1cmwgdG8gc2VhcmNoLlxyXG4gICAqICovXHJcbiAgdmFyIHNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghc2VsZWN0aW9uUm93cy5jYW5TZWFyY2goKSkge1xyXG4gICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgJHNlYXJjaEVycm9yLmFwcGVuZCgnPGg0IHN0eWxlPVwiY29sb3IgOiByZWQ7XCI+UGFydGlhbCBSb3cgU2VsZWN0ZWQ8L2g0PicpO1xyXG4gICAgICAgIGVycm9yID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47IC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBzZWxlY3Rpb24gaXMgdmFsaWRcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcm93cz0ge307XHJcbiAgICBzZWxlY3Rpb25Sb3dzLmdldEFsbFNlbGVjdGlvbkRhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uKHNlbGVjdGlvbil7XHJcbiAgICAgIGlmKHNlbGVjdGlvbi5zZWN0aW9uICE9PSBcIlwiKXtcclxuICAgICAgICAgIHJvd3NbXCJzXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5zZWN0aW9uO1xyXG4gICAgICAgICAgcm93c1tcImNcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLmNhdGVnb3J5O1xyXG4gICAgICAgICAgcm93c1tcInNjXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5zdWJDYXRlZ29yeTtcclxuICAgICAgICAgIHJvd3NbXCJkXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShcImNvbXBhcmU/XCIgKyBzZXJpYWxpc2Uocm93cykpOyAvLyBSZXBsYWNlIHRoZSB1cmwgd2l0aCB0aGUgc2VsZWN0aW9ucyB1cmxcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgd2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQgd2l0aCBhIHNlYXJjaCBpbiB0aGUgdXJsLCBmZXRjaGVzIHRoZSByZWxldmFudCBkYXRhIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICogdXNpbmcgdGhlIGRiIG1vZHVsZVxyXG4gICAqICovXHJcbiAgdmFyIGxvYWRTZWFyY2hGcm9tVVJMID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHNlbGVjdGlvblJvd3MuaW5pdCh1cmxTZWxlY3Rpb25zLHRydWUpOyAvLyBTZXQgdXBzIHRoZSBzZWxlY3Rpb24gcm93c1xyXG5cclxuICAgIERhdGFiYXNlLmdldFJvd3NGb3JTZWFyY2godXJsU2VsZWN0aW9ucywgZnVuY3Rpb24ocm93cyl7XHJcblxyXG4gICAgICAvLyBUT0RPIFFVSUNLIEZJTkQgQSBCRVRURVIgV0FZIFxyXG4gICAgICBpZihyb3dzLmxlbmd0aCA+IDAgJiYgcm93c1swXS5mY2FzdF95ciAhPT0gbnVsbCl7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgICAgci5vYnNfeXIgPSByLmZjYXN0X3lyO1xyXG4gICAgICAgIH0pOyAgXHJcbiAgICAgIH0gIFxyXG5cclxuICAgICAgLy8gc2V0IHRoZSByb3dzIHRhYmxlcyBhbmQgY3JlYXRlIGEgY29weVxyXG4gICAgICBiYWNrdXAuc2VsZWN0aW9uICA9IG5ldyBTZWxlY3Rpb24odXJsU2VsZWN0aW9uc1swXSx1cmxTZWxlY3Rpb25zWzFdLHVybFNlbGVjdGlvbnNbMl0sdXJsU2VsZWN0aW9uc1szXSk7XHJcbiAgICAgIGJhY2t1cC5yb3dzID0gcm93c1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cyA9IGRwLmZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkocm93cyxiYWNrdXAuc2VsZWN0aW9uKTtcclxuICAgICAgLy8gY29uc29sZS5sb2cocm93cyk7XHJcblxyXG4gICAgICBcclxuICAgICAgdmFyIGNvbWJpbmVkRGF0YSA9IFtdO1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe1xyXG4gICAgICAgIGlmKHQuaWQgPT09ICdhJyl7XHJcbiAgICAgICAgICAkKCcjdGFiLWEnKS5hZGRDbGFzcyhcImluIGFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodC5pZCA9PT0gJ2FiJyB8fCB0LmlkID09PSAnY2QnKXtcclxuICAgICAgICAgIGNvbWJpbmVkRGF0YS5wdXNoKHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICQoJyNmdWxsLWRhc2gtJysgdC5pZCkuc2hvdygpO1xyXG4gICAgICAgICAgJCgnI3RhYi0nK3QuaWQpLmFkZENsYXNzKFwiaW4gYWN0aXZlXCIpOyAvLyBNYWtlIGFsbCBhY3RpdmUgdG8gZ2V0IHNpemVzIGZvciBncmFwaHNcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZihjb21iaW5lZERhdGEubGVuZ3RoID09PSAyKXtcclxuICAgICAgICBzaG93RnVsbFZlY3RvckdyYXBoKGNvbWJpbmVkRGF0YSwgdXJsU2VsZWN0aW9ucywgW2JhY2t1cC5zb3J0ZWRSb3dzWzBdLnJvd3NbMF0udW5pdHMsYmFja3VwLnNvcnRlZFJvd3NbMV0ucm93c1swXS51bml0cyxiYWNrdXAuc29ydGVkUm93c1syXS5yb3dzWzBdLnVuaXRzLGJhY2t1cC5zb3J0ZWRSb3dzWzNdLnJvd3NbMF0udW5pdHMgXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIGJvdGggQUIgYW5kIENEIGV4aXN0XHJcbiAgICAgIC8vIEVtaXQgYW4gZXZlbnQgd2l0aCB0aGUgZGF0YVxyXG4gICAgICBldmVudHMuZW1pdChcIklOSVRfREFUQVwiLCB7ZGF0YSA6IGJhY2t1cC5zb3J0ZWRSb3dzfSk7XHJcblxyXG4gICAgICAvLyBTZXQgZGVmYXVsdCByb3dzIHNlbGVjdGVkXHJcbiAgICAgIGV2ZW50cy5lbWl0KCdST1dfQ0xJQ0tFRCcsICB7cm93SUQ6IFwicm93YTBcIiwgcm93TnVtYjogMCwgZWRiOiBcIkFscGluZSBFbmVyZ3lcIn0pO1xyXG4gICAgICBldmVudHMuZW1pdChcIlRPVEFMX1JPV19DTElDS0VEXCIsIHtyb3dJRDogXCJyb3ctdG90LWEwXCIsIHJlZ2lvbjogXCJTb3V0aCBJc2xhbmRcIn0pO1xyXG5cclxuICAgICAgLy8gTWFrZSBhbGwgYWNjZXB0IGEgYWN0aXZlXHJcbiAgICAgIGJhY2t1cC5zb3J0ZWRSb3dzLmZvckVhY2goZnVuY3Rpb24odCl7XHJcbiAgICAgICAgaWYodC5pZCAhPT0gJ2EnKXtcclxuICAgICAgICAgICQoJyN0YWItJyt0LmlkKS5yZW1vdmVDbGFzcyhcImluIGFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgIGdvVG9CeVNjcm9sbCgnI3RvcC10YWInKTsgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciBnb1RvQnlTY3JvbGwgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoaWQpLm9mZnNldCgpLnRvcH0sJ3Nsb3cnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBhcHBseSBjcGkgYnV0dG9uIGlzIGNsaWNrZWQuIEZpcnN0IGNoZWNrc1xyXG4gICAqIGlmIGNwaSBpbnB1dCBpcyB2YWxpZCB0aGVuIGNvcGllcyByb3dzIGFuZCBhcHBsaWVzIGNwaSB0byBjb3B5XHJcbiAgICogKi9cclxuICB2YXIgYXBwbHlDUEkgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKENQSU1vZHVsZS5pc1ZhbGlkKCkgJiYgYmFja3VwLnNlbGVjdGlvbiAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdmFyIGNvcHlPZlJvd3MgID0gZHAuY29weVJvd3MoYmFja3VwLnJvd3MpO1xyXG4gICAgICBhcHBseUNQSVRvVGFibGVSb3dzKGNvcHlPZlJvd3MsQ1BJTW9kdWxlLmdldENQSVZhbHVlcygpKTtcclxuICAgICAgdmFyIG5ld0RhdGEgPSBkcC5maWx0ZXJSb3dzVG9UYWJsZXNBbmRDb3B5KGNvcHlPZlJvd3MsYmFja3VwLnNlbGVjdGlvbik7XHJcblxyXG4gICAgICAvLyBTZW5kIGV2ZW50IHRvIHVwZGF0ZSB0YWJsZSBhbmQgZ3JhcGhzXHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiUk9XX1VQREFURVwiLCB7ZGF0YSA6IG5ld0RhdGEgfSk7XHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiQVBQTFlfQ1BJXCIsIHtjcGlWYWx1ZXMgOiBDUElNb2R1bGUuZ2V0Q1BJVmFsdWVzKCl9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBcHBsaWVzIGNwaSB2YWx1ZXMgdG8gdGhlIHJvd3MgYnkgY2hhbmluZyB0aGUgdmFsdWUgaW4gZWFjaCByb3cgd2l0aCB0aGUgY29tcG91bmRlZCBjcGkgdmFsdWVzXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcm93cyB7T2JqZWN0W119IHRoZSByb3dzXHJcbiAgICogQHBhcmFtIGNwaVZhbHVlcyB7T2JqZWN0W119IGNvbnRhaW5zIHRoZSBjcGkgZm9yIGVhY2ggeWVhclxyXG4gICAqICovXHJcbiAgdmFyIGFwcGx5Q1BJVG9UYWJsZVJvd3MgPSBmdW5jdGlvbiAocm93cywgY3BpVmFsdWVzKSB7XHJcbiAgICB2YXIgYXBwbGljYWJsZVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihyKXtcclxuICAgICAgcmV0dXJuIHIudW5pdHMuaW5jbHVkZXMoJyQnKTtcclxuICAgIH0pO1xyXG4gICAgaWYoYXBwbGljYWJsZVJvd3MubGVuZ3RoID09PSAwKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgdGhlIG1pbiBhbmQgbWF4IHllYXIgZnJvbSB0aGUgZGF0YVxyXG4gICAgdmFyIG1pblllYXIgPSBhcHBsaWNhYmxlUm93cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xyXG4gICAgICByZXR1cm4gcHJldi5kaXNjX3lyIDwgY3Vyci5kaXNjX3lyID8gcHJldiA6IGN1cnI7XHJcbiAgICB9KS5vYnNfeXI7XHJcblxyXG4gICAgdmFyIG1heFllYXIgPSBhcHBsaWNhYmxlUm93cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xyXG4gICAgICByZXR1cm4gcHJldi5kaXNjX3lyID4gY3Vyci5kaXNjX3lyID8gcHJldiA6IGN1cnI7XHJcbiAgICB9KS5vYnNfeXI7XHJcblxyXG4gICAgZm9yKHZhciBjdXIgPSBtaW5ZZWFyOyBjdXIgPD1tYXhZZWFyOyBjdXIrKyl7IC8vIEdvIHRocm91Z2ggZWFjaCBwb3NzaWJsZSB5ZWFyXHJcbiAgICAgIGFwcGxpY2FibGVSb3dzLmZvckVhY2goZnVuY3Rpb24oZWxlbSwgaW5kZXgpeyAvLyBHcmFiIGV2ZXJ5IFJvd1xyXG4gICAgICAgIHZhciB5ZWFyID0gYXBwbGljYWJsZVJvd3NbaW5kZXhdLm9ic195cjsgLy8gR3JhYiB0aGUgeWVhciBvZiB0aGUgY2VsbCBieSBjaGVja2luZyB0aGUgY2xhc3NcclxuICAgICAgICB2YXIgdmFsdWVPZkNlbGwgPSBhcHBsaWNhYmxlUm93c1tpbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcGlWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgaWYoY3BpVmFsdWVzW2ldLnllYXIgPT09IGN1cil7XHJcbiAgICAgICAgICAgIGlmKHllYXIgPD0gY3VyKXtcclxuICAgICAgICAgICAgICB2YWx1ZU9mQ2VsbCA9IHZhbHVlT2ZDZWxsICogKDEgKyAoY3BpVmFsdWVzW2ldLnZhbHVlIC8gMTAwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXBwbGljYWJsZVJvd3NbaW5kZXhdLnZhbHVlID0gdmFsdWVPZkNlbGw7IC8vIENQSSBBcHBsaWVkIHZhbHVlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8vIEFycmF5IHdpdGggYm90aCB0aGluZ3MgaW4gaXRcclxuICBmdW5jdGlvbiBzaG93RnVsbFZlY3RvckdyYXBoKGRhdGEsIHNlbGVjdGlvbnMsIHVuaXRzKSB7XHJcblxyXG4gICAgICAgIC8vIEdyYWIgYSB0aXRsZVxyXG4gICAgICAgIHZhciBhdGl0bGUgPSBzZWxlY3Rpb25zWzBdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1swXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMF0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgdmFyIGJ0aXRsZSA9IHNlbGVjdGlvbnNbMV0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzFdLnN1YkNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1sxXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICB2YXIgY3RpdGxlID0gc2VsZWN0aW9uc1syXS5jYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMl0uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzJdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHZhciBkdGl0bGUgPSBzZWxlY3Rpb25zWzNdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1szXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbM10uZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIHZhciByYXRpbyA9ICc8aDM+IFJhdGlvIChBIC8gQiApIG92ZXIgKCBDIC8gRCApIDwvaDM+J1xyXG4gICAgICAgIHZhciBzcGFuQSA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkE6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuQiA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkI6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuQyA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkM6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuRCA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkQ6IDwvc3Bhbj4nO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGNvbWJpbmVBID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuQSsnICcrIGF0aXRsZSArJzwvaDQ+JztcclxuICAgICAgICB2YXIgY29tYmluZUIgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj4nK3NwYW5CKycgJysgYnRpdGxlICsnPC9oND4nO1xyXG4gICAgICAgIHZhciBjb21iaW5lQyA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPicrc3BhbkMrJyAnKyBjdGl0bGUgKyc8L2g0Pic7XHJcbiAgICAgICAgdmFyIGNvbWJpbmVEID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuRCsnICcrIGR0aXRsZSArJzwvaDQ+JztcclxuXHJcbiAgICAgICAgJCgnI3RpdGxlLXZlY3Rvci1hYmNkJykuYXBwZW5kKHJhdGlvKS5hcHBlbmQoY29tYmluZUEpLmFwcGVuZChjb21iaW5lQikuYXBwZW5kKGNvbWJpbmVDKS5hcHBlbmQoY29tYmluZUQpO1xyXG5cclxuICAgICAgICBWZWN0b3JNb2R1bGUuY3JlYXRlVmVjdG9yR3JhcGgoZHAuY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoKGRhdGFbMF0ucm93cyxkYXRhWzFdLnJvd3MpLCB1bml0c1swXSArIFwiIC8gXCIgKyB1bml0c1sxXSAsdW5pdHNbMl0gKyBcIiAvIFwiICsgdW5pdHNbM10gLFwiI3ZlY3Rvci1ncmFwaC1hYmNkXCIpO1xyXG4gICAgICAgICQoJyN2ZWN0b3ItZnVsbC1hYmNkJykuc2hvdygpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHJldmVydCBjcGkgaXMgY2xpY2tlZCBzZW5kIG91dCBldmVudHMgd2l0aCB0b1xyXG4gICAqIG5vdGlmeSB0aGF0IGNwaSBuZWVkcyB0byBiZSByZXZlcnRlZFxyXG4gICAqICovXHJcbiAgdmFyIHJldmVydENQSSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGV2ZW50cy5lbWl0KFwiUk9XX1VQREFURVwiLCB7ZGF0YSA6IGJhY2t1cC5zb3J0ZWRSb3dzIH0pO1xyXG4gICAgZXZlbnRzLmVtaXQoXCJSRVZFUlRfQ1BJXCIsIHtjcGlWYWx1ZXMgOiBcIlwifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxvYWRTZWFyY2hGcm9tVVJMIDogbG9hZFNlYXJjaEZyb21VUkwsXHJcbiAgICBzZWFyY2ggOiBzZWFyY2gsXHJcbiAgICBhcHBseUNQSSA6IGFwcGx5Q1BJLFxyXG4gICAgcmV2ZXJ0Q1BJIDogcmV2ZXJ0Q1BJXHJcbiAgfVxyXG59KSgpO1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KCBmdW5jdGlvbigpIHtcclxuICAgIC8vIEhpZ2hsaWdodCB0aGUgc2VsZWN0ZWQgbGlua1xyXG4gICAgJChcIi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKFwiI2JlbmNobWFya3MtbGlua1wiKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjc2VhcmNoLWJ0bi1jb21wYXJlJykuY2xpY2soZnVuY3Rpb24oKXsgLy8gTGlzdGVuZXIgdG8gc2VhcmNoIGJ1dHRvblxyXG4gICAgICAgIENvbXBhcmVNb2R1bGUuc2VhcmNoKCk7IC8vIFNlYXJjaCBlbmNvZGVzIHRoZSBzZWxlY3Rpb25zIGludG8gdGhlIHVybCBhbmQgc2VuZHMgdG8gc2VydmVyXHJcbiAgICB9KTtcclxuICAgICQoJ2NwaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgIENvbXBhcmVNb2R1bGUuYXBwbHlDUEkoKTtcclxuICAgIH0pO1xyXG59KTtcclxuIiwidmFyIENQSU1vZHVsZSA9IChmdW5jdGlvbigpe1xyXG5cclxuICAvLyBHcmFwaCBhbmQgY2FjaGVcclxudmFyICRjcGlGb3JtID0gJCgnI2NwaS1mb3JtJyk7XHJcblxyXG4vLyBzZXQgdXAgdmFsaWRhdGlvbiBydWxlc1xyXG4kLnZhbGlkYXRvci5zZXREZWZhdWx0cyh7XHJcbiAgICAgICAgZXJyb3JDbGFzcyA6ICdoZWxwLWJsb2NrJyxcclxuICAgICAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7JChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmFkZENsYXNzKCdoYXMtZXJyb3InKX0sXHJcbiAgICAgICAgdW5oaWdobGlnaHQgOmZ1bmN0aW9uIChlbGVtZW50KSB7JChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLnJlbW92ZUNsYXNzKCdoYXMtZXJyb3InKX1cclxuICAgIH1cclxuKTtcclxuXHJcbi8vIFNldCB0aGUgcnVsZXMgZm9yIGVhY2ggaW5wdXRcclxudmFyIGNwaVJ1bGVzID0ge3JlcXVpcmVkIDogdHJ1ZSwgbnVtYmVyIDogdHJ1ZSwgbWluIDogMC4xLCBtYXggOiAxMDB9O1xyXG52YXIgbWVzc2FnZVNldCA9IHtcclxuICAgIHJlcXVpcmVkIDogXCJQbGVhc2UgZW50ZXIgYSBwZXJjZW50YWdlXCIsXHJcbiAgICBudW1iZXIgOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlclwiLFxyXG4gICAgbWluIDogXCJQbGVhc2UgZW50ZXIgYSBwZXJjZW50YWdlIGdyZWF0ZXIgdGhhbiAwXCIsXHJcbiAgICBtYXggOiBcIlBsZWFzZSBlbnRlciBhIHBlcmNlbnRhZ2UgbGVzcyB0aGFuIDEwMFwiXHJcbn07XHJcblxyXG5cclxuJGNwaUZvcm0udmFsaWRhdGUoe1xyXG4gICAgcnVsZXMgOiB7WTIwMTIgOiBjcGlSdWxlcyxZMjAxMyA6IGNwaVJ1bGVzLFkyMDE0IDogY3BpUnVsZXMsWTIwMTUgOiBjcGlSdWxlcyxZMjAxNiA6IGNwaVJ1bGVzfSxcclxuICAgIG1lc3NhZ2VzIDoge1kyMDEyIDogbWVzc2FnZVNldCxZMjAxMyA6IG1lc3NhZ2VTZXQsWTIwMTQgOiBtZXNzYWdlU2V0LFkyMDE1IDogbWVzc2FnZVNldCxZMjAxNiA6IG1lc3NhZ2VTZXR9XHJcbn0pO1xyXG5cclxudmFyIGdldENQSVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gIFt7eWVhciA6IDIwMTIsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxMicpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTMsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxMycpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTQsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNCcpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTUsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNScpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTYsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNicpLnZhbCgpfV1cclxufVxyXG5cclxudmFyIGlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJGNwaUZvcm0udmFsaWQoKTtcclxufVxyXG5cclxuXHJcbnJldHVybiB7XHJcbiAgZ2V0Q1BJVmFsdWVzIDogZ2V0Q1BJVmFsdWVzLFxyXG4gIGlzVmFsaWQgOiBpc1ZhbGlkXHJcbn1cclxuXHJcbn0pKCk7XHJcbiIsIi8vIERFUEVOREVOQ0lFUyA6IEdyYXBoLCBDb21iaW5lZEdyYXBoXHJcblxyXG52YXIgR3JhcGhNb2R1bGUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgLy8gSG9sZHMgdGhlIGdyYXBoIG9iamVjdHNcclxuICB2YXIgZ3JhcGhzID0gW107XHJcblxyXG4gIC8vIEJsdWUgY29sb3Igc2NhbGVcclxuICB2YXIgeiA9IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKFtcIiNCQkRFRkJcIiwgXCIjNjRCNUY2XCIsIFwiIzE5NzZEMlwiLCBcIiMxNTY1QzBcIiwgXCIjMEQ0N0ExXCIsIFwiI2QwNzQzY1wiLCBcIiNmZjhjMDBcIl0pO1xyXG5cclxuICAvLyBSZWQgY29sb3Igc2NhbGUgZm9yIG5lZ2F0aXZlIHZhbHVlc1xyXG4gIHZhciB6UmVkID0gZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoW1wiI0ZGNzM3M1wiLCBcIiNGRjRDNENcIiwgXCIjRkYyNjI2XCIsIFwiI0IyMDAwMFwiLCBcIiNEOTAwMDBcIiwgXCIjZDA3NDNjXCIsIFwiI2ZmOGMwMFwiXSk7XHJcblxyXG4gIC8vIEdyZWVuIGNvbG9yIHNjYWxlIGZvciBzZWxlY3RlZCB2YWx1ZXNcclxuICB2YXIgelNlbGVjdGVkID0gZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoW1wiI0MxRkZDMVwiLCBcIiM5MEVFOTBcIiwgXCIjNUJDODVCXCIsIFwiIzMxQTIzMVwiLCBcIiMxMzdCMTNcIiwgXCIjZDA3NDNjXCIsIFwiI2ZmOGMwMFwiXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpc2VzIGFsbCBvZiB0aGUgZ3JhcGhzIG9uIHRoZSBwYWdlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9ICB1cGRhdGUsIGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSBmb3IgZWFjaCBvZiB0aGUgZ3JhcGhzXHJcbiAgICogKi9cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGdyYXBoc1xyXG4gICAgdXBkYXRlLmRhdGEuZm9yRWFjaCAoZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgaWYodGFibGVEYXRhLmNvbWJpbmVkKXtcclxuICAgICAgICBncmFwaHMucHVzaChuZXcgQ29tYmluZWRHcmFwaCh0YWJsZURhdGEuaWQsdGFibGVEYXRhLnJvd3MsdGFibGVEYXRhLnRhYmxlMVJvd3MsdGFibGVEYXRhLnRhYmxlMlJvd3MsICB0YWJsZURhdGEuc2VhcmNoLCB0YWJsZURhdGEuc2VhcmNoMikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdyYXBocy5wdXNoKG5ldyBHcmFwaCh0YWJsZURhdGEuaWQsdGFibGVEYXRhLnJvd3MsdGFibGVEYXRhLnNlYXJjaCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIEluc2VydCB0aGUgdGl0bGVzIGFuZCBjcmVhdGUgdGhlIGdyYXBoc1xyXG4gICAgZ3JhcGhzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgIGcuaW5zZXJ0VGl0bGVzKCk7XHJcbiAgICAgIGcuY3JlYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgYWxsIHRoZSBncmFwaHMgd2l0aCB0aGUgbmV3IHJvd3NcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgdXBkYXRlLCBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgZm9yIGVhY2ggb2YgdGhlIGdyYXBoc1xyXG4gICAqICovXHJcbiAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgZ3JhcGhzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgICAgaWYoZy5nZXRJRCgpID09PSB0YWJsZURhdGEuaWQpe1xyXG4gICAgICAgICAgaWYoZy5pc0NvbWJpbmVkKCkpe1xyXG4gICAgICAgICAgICBnLnVwZGF0ZSh0YWJsZURhdGEucm93cywgdGFibGVEYXRhLnRhYmxlMVJvd3MsIHRhYmxlRGF0YS50YWJsZTJSb3dzKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gYSByb3cgaXMgY2xpY2tlZFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9ICBldmVudCwgY29udGFpbnMgdGhlIEVEQlxyXG4gICAqICovXHJcbiAgdmFyIHJvd0NsaWNrZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmKGV2ZW50LnVuc2VsZWN0KSB7XHJcbiAgICAgIGQzLnNlbGVjdEFsbChcIi5saW5lLXNlbGVjdGVkLXRhYmxlXCIpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuICAgICAgZDMuc2VsZWN0QWxsKFwiLnZlYy1kb3Qtc2VsZWN0ZWRcIikuY2xhc3NlZChcInZlYy1kb3Qtc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYWxyZWFkeVNlbGVjdGVkID0gZmFsc2U7IC8vIFRPRE8gZml4XHJcblxyXG4gICAgLy8gQmVmb3JlIHdlIHJlbW92ZSB0aGUgY2xhc3Mgd2UgbmVlZCB0byBhcHBseSB0aGUgY29ycmVjdCBjb2xvciBzY2FsZVxyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmJhci1zZWxlY3RlZFwiKS5kYXR1bShmdW5jdGlvbihkKSB7cmV0dXJuIGQ7IH0pXHJcbiAgICAuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge3JldHVybiB6KGQua2V5KTsgfSk7XHJcblxyXG4gICAgLy8gU2VsZWN0IGFsbCByZWN0YW5nbGUgd2l0aCB0aGUgc2VsZWN0ZWQgY2xhc3MgYW5kIHJlbW92ZSBjbGFzc1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmJhci1zZWxlY3RlZFwiKS5jbGFzc2VkKFwiYmFyLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuXHJcbiAgICBpZihhbHJlYWR5U2VsZWN0ZWQpe3JldHVybjt9IC8vIFRoZSBjYXNlIHdoZXJlIHRoZSByb3cgaXMgdW5zZWxlY3RlZCBidXQgbm90aGluZyBlbHNlIGlzIHNlbGVjdGVkXHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKFwicmVjdC5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpXHJcbiAgICAuY2xhc3NlZChcImJhci1zZWxlY3RlZFwiLCB0cnVlKSAvLyBTZWxlY3QgYWxsIHJlY3RhbmdsZSB3aXRoIHRoZSBjb3JyZWN0IEVEQiBhbmQgb3V0bGluZSBiYXJzIGFuZCBhZGQgc2VsZWN0ZWQgY2xhc3NcclxuICAgIC5kYXR1bShmdW5jdGlvbihkKSB7cmV0dXJuIGQ7IH0pIC8vIEdyYWIgdGhlIGRhdGEgYm91bmQgdG8gdGhlIGVsZW1lbnRzXHJcbiAgICAuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge3JldHVybiB6U2VsZWN0ZWQoZC5rZXkpOyB9KTsgLy8gQXBwbHkgdGhlIGdyZWVuIGNvbG9yIHNjYWxlIGJhc2VkIG9uIHRoZSBrZXlcclxuXHJcbiAgICAvLyBTZWxlY3QgYWxsIGxpbmVzIHdpdGggdGhlIHNlbGVjdGVkIGNsYXNzIGFuZCByZW1vdmUgY2xhc3NcclxuICAgIGQzLnNlbGVjdEFsbChcIi5saW5lLXNlbGVjdGVkLXRhYmxlXCIpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdEFsbChcIi52ZWMtZG90LXNlbGVjdGVkXCIpLmNsYXNzZWQoXCJ2ZWMtZG90LXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuXHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKFwibGluZS5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkLXRhYmxlXCIsIHRydWUpO1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmRvdC5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpLmNsYXNzZWQoXCJ2ZWMtZG90LXNlbGVjdGVkXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHNcclxuICBldmVudHMub24oXCJJTklUX0RBVEFcIiwgaW5pdCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX0NMSUNLRURcIiwgcm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX1VQREFURVwiLCB1cGRhdGUpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdXBkYXRlIDogdXBkYXRlXHJcbiAgfVxyXG59KSgpO1xyXG4iLCJcclxudmFyIHNlbGVjdGlvblJvd3MgPSAgKGZ1bmN0aW9uKCl7XHJcbiAgICAvLyBGaXJzdCBjcmVhdGUgdGhlIGVtcHR5IHNlbGVjdGlvbmRhdGFyb3dzIHdoaWNoIGFyZSB1c2VkIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbGVjdGlvbnNcclxuICAgIHZhciByb3dzRGF0YSA9IFtuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigwKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigxKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigyKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigzKV07XHJcblxyXG4gICAgLy8gTmV4dCBjcmVhdGUgdGhlIG9iamVjdCB0aGF0IGhvbGQgdGhlIGxvZ2ljIGZvciB0aGUgc2VsZWN0b3JzXHJcblxyXG4gICAgdmFyIHNlbGVjdG9ycyA9IFtdO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgIHNlbGVjdG9ycy5wdXNoKHsgcyA6IG5ldyBTZWN0aW9uU2VsZWN0KGkpLCBjIDogbmV3IENhdGVnb3J5U2VsZWN0KGkpLCBzYyA6IG5ldyBTdWJDYXRlZ29yeVNlbGVjdChpKSwgZCA6IG5ldyBEZXNjcmlwdGlvblNlbGVjdChpKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBnZXRBbGxTZWxlY3Rpb25EYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICByb3dzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgIHNlbGVjdGlvbnMucHVzaChyLmdldFJvd1NlbGVjdGlvbigpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgY2FuU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb3dzRGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICBpZighcm93c0RhdGFbaV0udmFsaWRTZWxlY3Rpb24oKSlyZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgaW4gb3B0aW9ucyBmb3IgZWFjaCBzZWxlY3Rpb24gZHJvcCBkb3duIGZyb20gYSBzZWFyY2guXHJcbiAgICAgKiBXaGVuIHRoZSBwYWdlIGlzIGxvYWRlZCBmcm9tIGEgc2VhcmNoIHRoZSBvcHRpb24gZm9yIHRoYXQgc2VhcmNoIG5lZWQgdG8gYmUgaW5zZXJ0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uIHtPYmplY3R9IG9uZSByb3cgb2Ygc2VsZWN0aW9ucyAoc2VjdGlvbiwgY2F0ZWdvcnkgZXRjKVxyXG4gICAgICogKi9cclxuICAgIHZhciBzZXRTZWxlY3Rpb25zRnJvbVVSTCA9IGZ1bmN0aW9uKHNlbGVjdGlvbil7XHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlIGNhdGVnb3JpZXMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb25cclxuICAgICAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBmdW5jdGlvbiAoY2F0ZWdvcmllcyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNjYXRlZ29yeS1zZWxlY3QnK3NlbGVjdGlvbi5pZCxjYXRlZ29yaWVzLCBzZWxlY3Rpb24uY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgfX0pO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFsbCB0aGUgIHN1YiBjYXRlZ29yaWVzIGFzc29jaWF0ZWQgd2l0aCBzZWxlY3RlZCBzZWN0aW9uIGFuZCBjYXRlZ29yeVxyXG4gICAgICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sIHNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgICAgICBzZWFyY2hEYXRhLnZhbGlkT3B0aW9uc1tzZWxlY3Rpb24uaWRdID0gdHJ1ZTsgLy8gVGhlcmUgYXJlIG9wdGlvbnMgZm9yIHRoaXMgcm93IGFuZCBzdWIgY2F0ZWdvcnlcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNzdWJzZWN0aW9uLXNlbGVjdCcrc2VsZWN0aW9uLmlkLHN1YkNhdGVnb3JpZXMsc2VsZWN0aW9uLnN1YkNhdGVnb3J5KTtcclxuICAgICAgICAgIH19KTtcclxuXHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlICBkZXNjcmlwdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb24sIGNhdGVnb3J5LCBhbmQgc3Vic2VjdGlvbnNcclxuICAgICAgICBEYXRhYmFzZS5nZXREZXNjcmlwdGlvbnNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sc2VsZWN0aW9uLmNhdGVnb3J5LHNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24gKGRlc2NyaXB0aW9ucyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNkZXNjcmlwdGlvbi1zZWxlY3QnK3NlbGVjdGlvbi5pZCxkZXNjcmlwdGlvbnMsc2VsZWN0aW9uLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgIH19KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zLCB3aXRoU2VhcmNoKSB7XHJcbiAgICAgIGlmKHdpdGhTZWFyY2gpe1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJJTklUX1NFTEVDVElPTlNcIiwgdXJsU2VsZWN0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSnVzdCBmaWxsIHRoZSBzZWN0aW9uIHNlbGVjdG9ycyB3aXRoIHNlY3Rpb25zXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0U2VjdGlvbnNGcm9tRGF0YWJhc2UoZnVuY3Rpb24oc2VjdGlvbnMpe1xyXG4gICAgICAgICAgdmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuICAgICAgICAgIGRwLnNvcnRTZWN0aW9ucyh7c2VjdGlvbnMgOiBzZWN0aW9uc30pOyAvLyBUT0RPIGZpeFxyXG5cclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcignI3NlY3Rpb24tc2VsZWN0JytpLHNlY3Rpb25zLCcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKHJvd051bWJlcikge1xyXG4gICAgICAgIHJvd3NEYXRhW3Jvd051bWJlcl0uY2xlYXIoKTtcclxuICAgICAgICAkKCcjZGVzY3JpcHRpb24tc2VsZWN0Jytyb3dOdW1iZXIrJywjc3ViY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIrJywjY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIpLmh0bWwoJycpO1xyXG4gICAgICAgICQoJyNzZWN0aW9uLXNlbGVjdCcrcm93TnVtYmVyKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAkKFwiLnNlbGVjdHBpY2tlclwiKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdChbXSxmYWxzZSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZXRBbGxTZWxlY3Rpb25EYXRhIDogZ2V0QWxsU2VsZWN0aW9uRGF0YSxcclxuICAgICAgc2V0U2VsZWN0aW9uc0Zyb21VUkwgOiBzZXRTZWxlY3Rpb25zRnJvbVVSTCxcclxuICAgICAgaW5pdCA6IGluaXQsXHJcbiAgICAgIGNsZWFyIDogY2xlYXIsXHJcbiAgICAgIGNhblNlYXJjaCA6IGNhblNlYXJjaFxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCJ2YXIgVGFibGVzTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIFRoZSBFREJzIHRoYXQgYmVsb25nIHRvIGVhY2ggcmVnaW9uXHJcbiAgdmFyIHJlZ2lvbnMgPSB7XHJcbiAgICBuIDogW1wiQ2VudHJhbGluZXNcIixcIkNvdW50aWVzIFBvd2VyXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJFbGVjdHJhXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFxyXG4gICAgICAgICBcIlBvd2VyY29cIixcIlNjYW5wb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlVuaXNvbiBOZXR3b3Jrc1wiLFwiVmVjdG9yIExpbmVzXCIsXHJcbiAgICAgICAgIFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiLFwiV2VsbGluZ3RvbiBFbGVjdHJpY2l0eVwiXSxcclxuICAgIHVuaSA6IFtcIkNvdW50aWVzIFBvd2VyXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlZlY3RvciBMaW5lc1wiLFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiXSxcclxuICAgIGVuaSA6IFtcIkNlbnRyYWxpbmVzXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJTY2FucG93ZXJcIixcIlVuaXNvbiBOZXR3b3Jrc1wiXSxcclxuICAgIHN3bmkgOiBbXCJFbGVjdHJhXCIsXCJQb3dlcmNvXCIsXCJXZWxsaW5ndG9uIEVsZWN0cmljaXR5XCJdLFxyXG4gICAgcyA6IFtcIkFscGluZSBFbmVyZ3lcIixcIkF1cm9yYSBFbmVyZ3lcIixcIkJ1bGxlciBFbGVjdHJpY2l0eVwiLFwiRWxlY3RyaWNpdHkgQXNoYnVydG9uXCIsXCJFbGVjdHJpY2l0eSBJbnZlcmNhcmdpbGxcIixcclxuICAgICAgICAgXCJNYWluUG93ZXIgTlpcIixcIk1hcmxib3JvdWdoIExpbmVzXCIsXCJOZWxzb24gRWxlY3RyaWNpdHlcIixcIk5ldHdvcmsgVGFzbWFuXCIsXHJcbiAgICAgICAgIFwiTmV0d29yayBXYWl0YWtpXCIsXCJPcmlvbiBOWlwiLFwiT3RhZ29OZXRcIixcIlRoZSBQb3dlciBDb21wYW55XCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICB1c2kgOiBbXCJBbHBpbmUgRW5lcmd5XCIsXCJCdWxsZXIgRWxlY3RyaWNpdHlcIixcIk1haW5Qb3dlciBOWlwiLFwiTWFybGJvcm91Z2ggTGluZXNcIixcIk5lbHNvbiBFbGVjdHJpY2l0eVwiLFwiTmV0d29yayBUYXNtYW5cIixcIk9yaW9uIE5aXCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICBsc2kgOiBbXCJBdXJvcmEgRW5lcmd5XCIsXCJFbGVjdHJpY2l0eSBBc2hidXJ0b25cIixcIkVsZWN0cmljaXR5IEludmVyY2FyZ2lsbFwiLFwiTmV0d29yayBXYWl0YWtpXCIsXCJPdGFnb05ldFwiLFwiVGhlIFBvd2VyIENvbXBhbnlcIl1cclxuICB9O1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIG1haW4gdGFibGVcclxuICB2YXIgc2VsZWN0ZWRSb3cgPSBcIlwiO1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIHRvdGFsc1xyXG4gIHZhciBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuXHJcbiAgLy8gSG9sZHMgdGhlIHRhYmxlIG9iamVjdHNcclxuICB2YXIgdGFibGVzID0gW107XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSB0YWJsZXMgdXNpbmcgdGhlIHRhYmxlIGRhdGFcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRhYmxlcyBkYXRhXHJcbiAgICogKi9cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2ggKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIGlmKHRhYmxlRGF0YS5jb21iaW5lZCl7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCwgdGFibGVEYXRhLnJvd3MsIFt0YWJsZURhdGEuc2VhcmNoLCB0YWJsZURhdGEuc2VhcmNoMiBdLCB0cnVlKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCx0YWJsZURhdGEucm93cyx0YWJsZURhdGEuc2VhcmNoLGZhbHNlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAvLyBDcmVhdGUgZWFjaCBvZiB0aGUgdGFibGVzIGFsb25nIHdpdGggYSB0aGUgdG90YWxzIHRhYmxlXHJcbiAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5pbnNlcnRUaXRsZXMoKTtcclxuICAgICAgdGFibGUuY3JlYXRlKCk7XHJcbiAgICAgIHRhYmxlLmNyZWF0ZVRvdGFsc1RhYmxlKGZhbHNlLCBzZWxlY3RlZFRvdGFsUm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlbmRlciBlYWNoIG9mIHRoZSB0YWJsZXNcclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXt0YWJsZS5yZW5kZXIoKTt9KTtcclxuICB9XHJcblxyXG4gIC8vIENhbGxlZCB3aGVuIGEgcm93IGNsaWNrZWQgZXZlbnQgb2Njb3Vyc1xyXG4gIHZhciByb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgaWYoc2VsZWN0ZWRSb3cgPT09IHVwZGF0ZS5yb3dJRCl7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit1cGRhdGUuZWRiK1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICAgIHJvd1NlbGVjdGVkID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkUm93ICE9PSBcIlwiKXtcclxuICAgICAgdmFyIHRleHQgPSAkKFwiI1wiK3NlbGVjdGVkUm93K1wiIC5lZGItY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit0ZXh0K1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZFJvdyA9IHVwZGF0ZS5yb3dJRDtcclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5lZGItY2VsbDpjb250YWlucygnXCIrdXBkYXRlLmVkYitcIicpXCIpLnBhcmVudCgpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucm93Q2xpY2tlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgdG90YWxSb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIHJlZ2lvbiA9IHVwZGF0ZS5yZWdpb247XHJcblxyXG4gICAgaWYoc2VsZWN0ZWRUb3RhbFJvdyA9PT0gdXBkYXRlLnJvd0lEKXtcclxuICAgICAgdmFyIG9sZFJlZyA9ICQoXCIjXCIrdXBkYXRlLnJvd0lEK1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcblxyXG4gICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICQodGhpcykudGV4dCgpID09PSByZWdpb247XHJcbiAgICAgIH0pLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG4gICAgICBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkVG90YWxSb3cgIT09IFwiXCIpe1xyXG4gICAgICAgIHZhciBvbGRSZWcgPSAkKFwiI1wiK3NlbGVjdGVkVG90YWxSb3crXCIgLnJlZy1jZWxsXCIpLnRleHQoKTtcclxuICAgICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrb2xkUmVnK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkgPT09IG9sZFJlZztcclxuICAgICAgICB9KS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcInJvdy1zZWxlY3RlZFwiKTsgLy8gU2VsZWN0cyBlZGIgcm93IGluIGFsbCB0YWJsZXNcclxuICAgIH1cclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gcmVnaW9uO1xyXG4gICAgfSkucGFyZW50KCkuYWRkQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcblxyXG4gICAgLy8gaWYgaWQgZW5kcyB3aXRoIGxldHRlciBzZXQgdG8gaWRcclxuICAgIHNlbGVjdGVkVG90YWxSb3cgPSB1cGRhdGUucm93SUQ7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS50b3RhbHNSb3dTZWxlY3RlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgdmFyIGFwcGx5Q1BJID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIGNwaVZhbHVlcyA9IHVwZGF0ZS5jcGlWYWx1ZXM7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIGlmKHRhYmxlLmNhbkFwcGx5Q1BJKCkpe1xyXG4gICAgICAgIHRhYmxlLmFwcGx5Q1BJKGNwaVZhbHVlcyk7XHJcbiAgICAgICAgdGFibGUuY3JlYXRlVG90YWxzVGFibGUodHJ1ZSwgc2VsZWN0ZWRUb3RhbFJvdyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciByZXZlcnRDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIHRhYmxlLnJldmVydENQSSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgICAgaWYoZy5pZCA9PT0gdGFibGVEYXRhLmlkKXtcclxuICAgICAgICAgIGlmKGcuaXNDb21iaW5lZCl7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzLCB0YWJsZURhdGEudGFibGUxUm93cywgdGFibGVEYXRhLnRhYmxlMlJvd3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy51cGRhdGUodGFibGVEYXRhLnJvd3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHNcclxuICBldmVudHMub24oXCJJTklUX0RBVEFcIiwgaW5pdCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX0NMSUNLRURcIiwgcm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiVE9UQUxfUk9XX0NMSUNLRURcIiwgdG90YWxSb3dDbGlja2VkKTtcclxuICBldmVudHMub24oXCJBUFBMWV9DUElcIiwgYXBwbHlDUEkpO1xyXG4gIGV2ZW50cy5vbihcIlJFVkVSVF9DUElcIiwgcmV2ZXJ0Q1BJKTsgLy8gV0hBVD9cclxuICBldmVudHMub24oXCJST1dfVVBEQVRFXCIsIHVwZGF0ZSk7XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVnaW9ucyA6IHJlZ2lvbnNcclxuICB9XHJcbn0pKCk7XHJcbiJdfQ==
