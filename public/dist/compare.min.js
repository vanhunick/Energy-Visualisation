function CombinedGraph(t,e,i,o,s,r){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.vectorID="#vector-graph-"+t,this.rows1=i,this.rows2=o,this.combinedRows=e,this.selection1=s,this.selection2=r,this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t),this.$titleVector=$("#title-vector-"+t)}function DataProcessor(){}function DataStructure(t,e,i){this.selectionData=t,this.selectionTable=e,this.combineData=i}function Selection(t,e,i,o){this.aTable=t,this.bTable=e,this.cTable=i,this.dTable=o}function DataTables(t,e,i,o,s,r){this.tableA=t,this.tableB=e,this.tableC=i,this.tableD=o,this.tableAB=s,this.tableCD=r}function SelectionData(t,e,i,o,s){this.rows=t,this.title=e,this.subTitle=i,this.id=s,this.unit=o}function SelectionDataCombined(t,e,i,o,s,r,n,a){this.rows=t,this.title1=o,this.title2=s,this.unit1=r,this.unit2=n,this.id=a,this.table1Rows=e,this.table2Rows=i}function SelectedTableData(t,e,i,o,s){this.rows=t,this.id=e,this.title=i,this.subTitle=o,this.unit=s}function Graph(t,e,i){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.rows=e,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t)}function SelectionRowController(t){this.idNumb=t,this.rowSelections={id:t,section:"",category:"",subCategory:"",description:""},this.setInitialState=function(t){this.rowSelections=t},this.clear=function(){this.rowSelections={id:this.id,section:"",category:"",subCategory:"",description:""}},this.validSelection=function(){return""===this.rowSelections.section||""!==this.rowSelections.description},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0];this.rowSelections.section=i.section,this.rowSelections.category=i.category,this.rowSelections.subCategory=i.subCategory,this.rowSelections.description=i.description},this.updateSection=function(t){t.id===this.idNumb&&(this.rowSelections.category="",this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.section=t.section,events.emit("NEW_SECTION",{id:this.idNumb,selection:this.rowSelections}))},this.updateCategory=function(t){t.id===this.idNumb&&(this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.category=t.category,events.emit("NEW_CATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateSubCategory=function(t){t.id===this.idNumb&&(this.rowSelections.description="",this.rowSelections.subCategory=t.subCategory,events.emit("NEW_SUBCATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateDescription=function(t){t.id===this.idNumb&&(this.rowSelections.description=t.description,events.emit("NEW_DESCRIPTION",{id:this.idNumb,selection:this.rowSelections}))},this.getRowSelection=function(){return this.rowSelections},events.on("SECTION_CHANGED",this.updateSection.bind(this)),events.on("CATEGORY_CHANGED",this.updateCategory.bind(this)),events.on("SUBCATEGORY_CHANGED",this.updateSubCategory.bind(this)),events.on("DESCRIPTION_CHANGED",this.updateDescription.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SectionSelect(t){this.idNumb=t,this.id="#section-select"+t,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=this.id,o=t.filter(function(t){return t.id===e})[0];Database.getSectionsFromDatabase(function(t){dp.sortSections({sections:t}),addOptionsToSelector(i,t,o.section)})},this.updated=function(t){events.emit("SECTION_CHANGED",{section:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function CategorySelect(t){this.idNumb=t,this.id="#category-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getCategoriesFromDatabase(i.section,function(t,e){e||addOptionsToSelector(o,t,i.category)})},this.updated=function(t){events.emit("CATEGORY_CHANGED",{category:this.$select.find("option:selected").text(),id:this.idNumb})},this.sectionChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id;Database.getCategoriesFromDatabase(t.selection.section,function(t,i){i||addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("NEW_SECTION",this.sectionChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SubCategorySelect(t){this.idNumb=t,this.id="#subcategory-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getSubCategoriesFromDatabase(i.section,i.category,function(t,e){e||addOptionsToSelector(o,t,i.subCategory)})},this.categoryChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id,i=this.idNumb;Database.getSubCategoriesFromDatabase(t.selection.section,t.selection.category,function(t,o){o?events.emit("SUBCATEGORY_CHANGED",{subCategory:"",id:i}):addOptionsToSelector(e,t,"")})}},this.updated=function(t){events.emit("SUBCATEGORY_CHANGED",{subCategory:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("NEW_CATEGORY",this.categoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function DescriptionSelect(t){this.idNumb=t,this.id="#description-select"+t,this.$select=$(this.id),this.updated=function(t){events.emit("DESCRIPTION_CHANGED",{description:this.$select.find("option:selected").text(),id:this.idNumb})},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getDescriptionsFromDatabase(i.section,i.category,i.subCategory,function(t,e){e||addOptionsToSelector(o,t,i.description)})},this.subCategoryChangedListener=function(t){if(t.id===this.idNumb){var e=this.id;Database.getDescriptionsFromDatabase(t.selection.section,t.selection.category,t.selection.subCategory,function(t){addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("CATEGORY_CHANGED",clearMyself.bind(this)),events.on("NEW_SUBCATEGORY",this.subCategoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function clearMyself(t){t.id===this.idNumb&&(this.$select.html(""),this.$select.selectpicker("refresh"))}function addOptionsToSelector(t,e,i){$(t).html("");for(var o=0;o<e.length;o++)null!==e[o]&&(e[o]===i?$(t).append("<option selected>"+e[o]+"</option>"):$(t).append("<option>"+e[o]+"</option>"));$(t).selectpicker("refresh")}function Table(t,e,i,o){console.log(t),this.id=t,this.isCombined=o,this.rows=e,this.unit=e[0].units,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.dpFormat=d3.format(".4r"),this.availableYears=this.getAvailableYears(),this.noCPICells=[],this.$table=$("#table-"+t),this.$totalsTable=$("#table-total-"+t),this.$title=$("#title-"+t)}CombinedGraph.prototype.isCombined=function(){return!0},CombinedGraph.prototype.getID=function(){return this.id},CombinedGraph.prototype.getSelection1Title=function(){var t=null===this.selection1?"":this.selection1.subCategory;return this.selection1.description+", "+this.selection1.category+", "+t},CombinedGraph.prototype.getSelection2Title=function(){var t=null===this.selection2?"":this.selection2.subCategory;return this.selection2.description+", "+this.selection2.category+",  "+t},CombinedGraph.prototype.getUnit=function(){return this.rows1[0].units+" / "+this.rows2[0].units},CombinedGraph.prototype.getUnit1=function(){return this.rows1[0].units},CombinedGraph.prototype.getUnit2=function(){return this.rows2[0].units},CombinedGraph.prototype.insertTitles=function(){var t="<h4>Ratio "+this.id.charAt(0).toUpperCase()+" / "+this.id.charAt(1).toUpperCase()+"</h4>",e='<h4 class="title"><span style="Color: black;">'+this.id.charAt(0).toUpperCase()+": </span>"+this.getSelection1Title()+"</h4>",i='<h4 class="title"><span style="Color: black;">'+this.id.charAt(1).toUpperCase()+": </span>"+this.getSelection2Title()+"</h4>";this.$titleBar.append(t),this.$titleBar.append(e),this.$titleBar.append(i),this.$titleBox.append(t),this.$titleBox.append(e),this.$titleBox.append(i),this.$titleVector.append(t),this.$titleVector.append(e),this.$titleVector.append(i)},CombinedGraph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.combinedRows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.combinedRows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit);var i=dp.createDataForVectorGraph(this.rows1,this.rows2);VectorModule.createVectorGraph(i,this.getUnit2(),this.getUnit1(),this.vectorID)},CombinedGraph.prototype.update=function(t,e,i){this.rows=t,this.rows1=e,this.rows2=i,this.create()},String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t){var e=this.filter(function(e){return e==t});return e.length>0}});var CompareModule=function(){function t(t,i,o){var s=i[0].category+", "+i[0].subCategory+", "+i[0].description,r=i[1].category+", "+i[1].subCategory+", "+i[1].description,n=i[2].category+", "+i[2].subCategory+", "+i[2].description,a=i[3].category+", "+i[3].subCategory+", "+i[3].description,c="<h3> Ratio (A / B ) over ( C / D ) </h3>",l='<span class="letter">A: </span>',h='<span class="letter">B: </span>',u='<span class="letter">C: </span>',d='<span class="letter">D: </span>',p='<h4 class="title">'+l+" "+s+"</h4>",b='<h4 class="title">'+h+" "+r+"</h4>",f='<h4 class="title">'+u+" "+n+"</h4>",v='<h4 class="title">'+d+" "+a+"</h4>";$("#title-vector-abcd").append(c).append(p).append(b).append(f).append(v),VectorModule.createVectorGraph(e.createDataForVectorGraph(t[0].rows,t[1].rows),o[0]+" / "+o[1],o[2]+" / "+o[3],"#vector-graph-abcd"),$("#vector-full-abcd").show()}var e=new DataProcessor,i={},o=!1,s=$("#error-div"),r=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},n=function(){if(!selectionRows.canSearch())return void(o||(s.append('<h4 style="color : red;">Partial Row Selected</h4>'),o=!0));var t={};selectionRows.getAllSelectionData().forEach(function(e){""!==e.section&&(t["s"+e.id]=e.section,t["c"+e.id]=e.category,t["sc"+e.id]=e.subCategory,t["d"+e.id]=e.description)}),window.location.replace("compare?"+r(t))},a=function(o){selectionRows.init(o,!0),Database.getRowsForSearch(o,function(s){s.length>0&&null!==s[0].fcast_yr&&s.forEach(function(t){t.obs_yr=t.fcast_yr}),i.selection=new Selection(o[0],o[1],o[2],o[3]),i.rows=s,i.sortedRows=e.filterRowsToTablesAndCopy(s,i.selection);var r=[];i.sortedRows.forEach(function(t){"a"===t.id&&$("#tab-a").addClass("in active"),"ab"!==t.id&&"cd"!==t.id||r.push(t),$("#full-dash-"+t.id).show(),$("#tab-"+t.id).addClass("in active")}),2===r.length&&t(r,o,[i.sortedRows[0].rows[0].units,i.sortedRows[1].rows[0].units,i.sortedRows[2].rows[0].units,i.sortedRows[3].rows[0].units]),events.emit("INIT_DATA",{data:i.sortedRows}),events.emit("ROW_CLICKED",{rowID:"rowa0",rowNumb:0,edb:"Alpine Energy"}),events.emit("TOTAL_ROW_CLICKED",{rowID:"row-tot-a0",region:"South Island"}),i.sortedRows.forEach(function(t){"a"!==t.id&&$("#tab-"+t.id).removeClass("in active")}),c("#top-tab")})},c=function(t){$("html,body").animate({scrollTop:$(t).offset().top},"slow")},l=function(){if(CPIModule.isValid()&&void 0!==i.selection){var t=e.copyRows(i.rows);h(t,CPIModule.getCPIValues());var o=e.filterRowsToTablesAndCopy(t,i.selection);events.emit("ROW_UPDATE",{data:o}),events.emit("APPLY_CPI",{cpiValues:CPIModule.getCPIValues()})}},h=function(t,e){var i=t.filter(function(t){return t.units.includes("$")});if(0!==i.length)for(var o=i.reduce(function(t,e){return t.disc_yr<e.disc_yr?t:e}).obs_yr,s=i.reduce(function(t,e){return t.disc_yr>e.disc_yr?t:e}).obs_yr,r=o;r<=s;r++)i.forEach(function(t,o){for(var s=i[o].obs_yr,n=i[o].value,a=0;a<e.length;a++)e[a].year===r&&s<=r&&(n*=1+e[a].value/100);i[o].value=n})},u=function(){events.emit("ROW_UPDATE",{data:i.sortedRows}),events.emit("REVERT_CPI",{cpiValues:""})};return{loadSearchFromURL:a,search:n,applyCPI:l,revertCPI:u}}();$(document).ready(function(){$(".nav-link").removeClass("active"),$("#benchmarks-link").addClass("active"),$("#search-btn-compare").click(function(){CompareModule.search()}),$("cpi").click(function(){CompareModule.applyCPI()})});var CPIModule=function(){var t=$("#cpi-form");$.validator.setDefaults({errorClass:"help-block",highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")}});var e={required:!0,number:!0,min:.1,max:100},i={required:"Please enter a percentage",number:"Please enter a valid number",min:"Please enter a percentage greater than 0",max:"Please enter a percentage less than 100"};t.validate({rules:{Y2012:e,Y2013:e,Y2014:e,Y2015:e,Y2016:e},messages:{Y2012:i,Y2013:i,Y2014:i,Y2015:i,Y2016:i}});var o=function(){return[{year:2012,value:+t.find("#Y2012").val()},{year:2013,value:+t.find("#Y2013").val()},{year:2014,value:+t.find("#Y2014").val()},{year:2015,value:+t.find("#Y2015").val()},{year:2016,value:+t.find("#Y2016").val()}]},s=function(){return t.valid()};return{getCPIValues:o,isValid:s}}(),dp=new DataProcessor;DataProcessor.prototype.copyDataTables=function(t){for(var e=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],i=[[],[],[],[],[],[]],o=0;o<e.length;o++){var s=e[o];if(void 0!==s)for(var r=0;r<s.length;r++)i[o].push({category:s[r].category,description:s[r].description,disc_yr:s[r].disc_yr,edb:s[r].edb,fcast_yr:s[r].fcast_yr,network:s[r].network,note:s[r].note,obs_yr:s[r].obs_yr,p_key:s[r].p_key,sch_ref:s[r].sch_ref,schedule:s[r].schedule,section:s[r].section,sub_category:s[r].sub_category,units:s[r].units,value:s[r].value})}return new DataTables(i[0],i[1],i[2],i[3],i[4],i[5])},DataProcessor.prototype.copyRows=function(t){var e=[];return t.forEach(function(t){e.push({value:t.value,category:t.category,description:t.description,disc_yr:t.disc_yr,edb:t.edb,fcast_yr:t.fcast_yr,network:t.network,note:t.note,obs_yr:t.obs_yr,p_key:t.p_key,sch_ref:t.sch_ref,schedule:t.schedule,section:t.section,sub_category:t.sub_category,units:t.units})}),e},DataProcessor.prototype.createDataStructuresWithCopy=function(t){for(var e=[],i=[],o=[],s=[t.tableA.length>0,t.tableB.length>0,t.tableC.length>0,t.tableD.length>0],r=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],n=["a","b","c","d","ab","cd"],a=0;a<s.length;a++)if(s[a]){var c=r[a][0].section+", "+r[a][0].category,l=null===r[a][0].sub_category?r[a][0].description:r[a][0].sub_category+", "+r[a][0].description;if(i.push(new SelectedTableData(r[a],n[a],l,c,r[a][0].units)),e.push(new SelectionData(r[a],l,c,r[a][0].units,n[a])),("a"===n[a]||"c"===n[a])&&s[a+1]){var h=0===a?4:3,u=r[a+1][0].section+", "+r[a+1][0].category,d=null===r[a+1][0].sub_category?r[a+1][0].description:r[a+1][0].sub_category+", "+r[a+1][0].description;i.push(new SelectedTableData(r[a+h],n[a+h],l+", "+c,d+", "+u,r[a+1][0].units)),o.push(new SelectionDataCombined(r[a+h],r[a],r[a+1],l+" "+c,d+" "+u,r[a][0].units,r[a+1][0].units,n[a+h]))}}return new DataStructure(e,i,o)},DataProcessor.prototype.validateSearchParams=function(t,e){var i=!0;return t.forEach(function(t,o){""===t.subCategory&&e[o]&&(i=!1),""!==t.section&&""!==t.category&&""!==t.description||""===t.section&&""===t.category&&""===t.description||(i=!1)}),i},DataProcessor.prototype.matchDBRow=function(t,e){return t.section===e.section&&t.category===e.category&&t.description===e.description&&(""!==t.sub_category?e.subCategory===t.sub_category:""===e.subCategory)},DataProcessor.prototype.filterRowsToTables=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)});var n=[];if(i.length>0&&n.push({id:"a",rows:i,search:e.aTable}),i.length>0&&o.length>0)var a=dp.combineTables(i,o);if(s.length>0&&r.length>0)var c=dp.combineTables(s,r);return new DataTables(i,o,s,r,a,c)},DataProcessor.prototype.filterRowsToTablesAndCopy=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});if(i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)}),i.length>0&&o.length>0)var n=dp.combineTables(i,o);if(s.length>0&&r.length>0)var a=dp.combineTables(s,r);var c=this.copyDataTables(new DataTables(i,o,s,r,n,a)),l=[];if(i.length>0&&l.push({id:"a",rows:c.tableA,search:e.aTable,combined:!1}),o.length>0&&l.push({id:"b",rows:c.tableB,search:e.bTable,combined:!1}),s.length>0&&l.push({id:"c",rows:c.tableC,search:e.cTable,combined:!1}),r.length>0&&l.push({id:"d",rows:c.tableD,search:e.dTable,combined:!1}),i.length>0&&o.length>0&&l.push({id:"ab",rows:c.tableAB,table1Rows:c.tableA,table2Rows:c.tableB,search:e.aTable,search2:e.bTable,combined:!0}),s.length>0&&r.length>0){var a=dp.combineTables(s,r);l.push({id:"cd",rows:c.tableCD,table1Rows:c.tableC,table2Rows:c.tableD,search:e.cTable,search2:e.dTable,combined:!0})}return l},DataProcessor.prototype.combineTables=function(t,e){for(var i=[],o=t,s=e,r=0;r<o.length;r++)for(var n=0;n<s.length;n++)if(o[r].edb===s[n].edb&&o[r].obs_yr===s[n].obs_yr&&o[r].disc_yr===s[n].disc_yr){i.push({disc_yr:s[n].disc_yr,edb:s[n].edb,obs_yr:s[n].obs_yr,value:o[r].value/("0"===s[n].value||0===s[n].value?1:s[n].value),section:s[n].section+""+s[n].description+" over ",description:o[r].section+" "+o[r].description,unitA:o[r].units,unitB:s[n].units,unit:o[r].units+" / "+s[n].units});break}return i},DataProcessor.prototype.createDataForVectorGraph=function(t,e){var i=t,o=e,s=[],r=[],n=[];t.forEach(function(t){if(!n.includes(t.obs_yr))for(var i=0;i<e.length;i++)if(e[i].obs_yr===t.obs_yr){n.push(t.obs_yr);break}});for(var a=0;a<i.length;a++)if(!s.includes(i[a].edb)){var c=i.filter(function(t){return t.edb===i[a].edb}),l=o.filter(function(t){return t.edb===i[a].edb});s.push(i[a].edb);for(var h=[],u=[],d=0;d<c.length;d++)if(!h.includes(c[d].disc_yr)&&n.includes(c[d].disc_yr)){h.push(c[d].disc_yr);var p=c.filter(function(t){return t.disc_yr===c[d].disc_yr}),b=l.filter(function(t){return t.disc_yr===c[d].disc_yr});if(p.length!=b.length)return[];for(var f=0;f<p.length;f++)u.push({year:+p[f].disc_yr,valueA:+p[f].value,valueB:+b[f].value})}u.sort(function(t,e){return t.year-e.year}),r.push({edb:i[a].edb,years:u})}return r},DataProcessor.prototype.createDataForBoxPlot=function(t){for(var e=[],i=[],o=0;o<t.length;o++)e.includes(t[o].obs_yr)||(i.push(t.filter(function(e){return e.obs_yr===t[o].obs_yr})),e.push(t[o].obs_yr));for(var s=[],r=[],n=1/0,a=-(1/0),o=0;o<i.length;o++){var c=[];c[0]=""+i[o][0].obs_yr;for(var l=""+i[o][0].obs_yr,h=[],u=0;u<i[o].length;u++){var d=+i[o][u].value,p=i[o][u].edb;d>a&&(a=d),d<n&&(n=d),h.push(d),r.push({year:l,edb:p,value:d})}c[1]=h,s.push(c)}return s.sort(function(t,e){return t[0]-e[0]}),{min:n,max:a,data:s,scatterData:r}},DataProcessor.prototype.createDataForGroupedGraph=function(t){var e=[];t.forEach(function(t){e.includes(t.obs_yr)||e.push(t.obs_yr)}),e.sort(function(t,e){return+t-+e});for(var i=[],o=[],s=0;s<t.length;s++)if(o.includes(t[s].edb))for(var r=0;r<i.length;r++)i[r].edb===t[s].edb&&(i[r][t[s].obs_yr]=+t[s].value);else{o.push(t[s].edb);var n={edb:t[s].edb};n[t[s].obs_yr]=+t[s].value,i.push(n)}return{data:i,keys:e}},DataProcessor.prototype.sortSections=function(t){t.sections.sort(function(t,e){for(var i=0;!isNaN(t.charAt(i));)i++;var o=t.substring(0,i);for(i=0;!isNaN(e.charAt(i));)i++;var s=e.substring(0,i);return o!==s?o-s:[t,e].sort()[0]===t?-1:1})},DataProcessor.prototype.applyCPIToTableRows=function(t,e){t.forEach(function(i,o){for(var s=t[o].obs_yr,r=t[o].value,n=0;n<e.length;n++)s<=e[n].year&&(r*=1+e[n].value/100);t[o].value=r})},DataProcessor.prototype.addToSelection=function(t,e,i,o){for(var s=0;s<o.length;s++)o[s].id+""==t+""&&("section"===e?o[s].section=i:"category"===e?o[s].category=i:"subcategory"===e?o[s].subCategory=i:"description"===e&&(o[s].description=i))},DataProcessor.prototype.createTableTotals=function(t,e,i){for(var o=["n","uni","eni","swni","s","usi","lsi"],s={},r=0;r<i.length;r++)t.filter(function(t){return t.obs_yr===i[r]}).forEach(function(t){o.forEach(function(i){e[i].includes(t.edb)&&(void 0===s[i]?s[i]=[+t.value]:r===s[i].length?s[i].push(+t.value):s[i][r]+=+ +t.value)})});for(var n=[],r=0;r<i.length;r++)n.push(s.n[r]+s.s[r]);return s.nz=n,s},Graph.prototype.isCombined=function(){return!1},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.getID=function(){return this.id},Graph.prototype.getTitle=function(){return this.selection.description+", "+this.selection.subCategory},Graph.prototype.getSubTitle=function(){return this.selection.section+", "+this.selection.category},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.insertTitles=function(){this.$titleBar.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>"),this.$titleBox.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Graph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.rows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.rows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit)},Graph.prototype.update=function(t){this.rows=t,this.create()};var GraphModule=function(){var t=[],e=d3.scaleOrdinal().range(["#BBDEFB","#64B5F6","#1976D2","#1565C0","#0D47A1","#d0743c","#ff8c00"]),i=(d3.scaleOrdinal().range(["#FF7373","#FF4C4C","#FF2626","#B20000","#D90000","#d0743c","#ff8c00"]),d3.scaleOrdinal().range(["#C1FFC1","#90EE90","#5BC85B","#31A231","#137B13","#d0743c","#ff8c00"])),o=function(e){e.data.forEach(function(e){e.combined?t.push(new CombinedGraph(e.id,e.rows,e.table1Rows,e.table2Rows,e.search,e.search2)):t.push(new Graph(e.id,e.rows,e.search))}),t.forEach(function(t){t.insertTitles(),t.create()})},s=function(e){e.data.forEach(function(e){t.forEach(function(t){t.getID()===e.id&&(t.isCombined()?t.update(e.rows,e.table1Rows,e.table2Rows):t.update(e.rows))})})},r=function(t){return t.unselect?(d3.selectAll(".line-selected-table").classed("line-selected",!1),void d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1)):(alreadySelected=!1,d3.selectAll(".bar-selected").datum(function(t){return t}).attr("fill",function(t){return e(t.key)}),d3.selectAll(".bar-selected").classed("bar-selected",!1),void(alreadySelected||(d3.selectAll("rect."+t.edb.replace(/ /g,"")).classed("bar-selected",!0).datum(function(t){return t}).attr("fill",function(t){return i(t.key)}),d3.selectAll(".line-selected-table").classed("line-selected",!1),d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1),d3.selectAll("line."+t.edb.replace(/ /g,"")).classed("line-selected-table",!0),d3.selectAll(".dot."+t.edb.replace(/ /g,"")).classed("vec-dot-selected",!0))))};return events.on("INIT_DATA",o),events.on("ROW_CLICKED",r),events.on("ROW_UPDATE",s),{update:s}}(),selectionRows=function(){for(var t=[new SelectionRowController(0),new SelectionRowController(1),new SelectionRowController(2),new SelectionRowController(3)],e=[],i=0;i<4;i++)e.push({s:new SectionSelect(i),c:new CategorySelect(i),sc:new SubCategorySelect(i),d:new DescriptionSelect(i)});var o=function(){var e=[];return t.forEach(function(t){e.push(t.getRowSelection())}),e},s=function(){for(var e=0;e<t.length;e++)if(!t[e].validSelection())return!1;return!0},r=function(t){Database.getCategoriesFromDatabase(t.section,function(e,i){i||addOptionsToSelector("#category-select"+t.id,e,t.category)}),Database.getSubCategoriesFromDatabase(t.section,t.category,function(e,i){i||(searchData.validOptions[t.id]=!0,addOptionsToSelector("#subsection-select"+t.id,e,t.subCategory))}),Database.getDescriptionsFromDatabase(t.section,t.category,t.subCategory,function(e,i){i||addOptionsToSelector("#description-select"+t.id,e,t.description)})},n=function(t,e){e?events.emit("INIT_SELECTIONS",t):Database.getSectionsFromDatabase(function(t){var e=new DataProcessor;e.sortSections({sections:t});for(var i=0;i<4;i++)addOptionsToSelector("#section-select"+i,t,"")})},a=function(e){t[e].clear(),$("#description-select"+e+",#subcategory-select"+e+",#category-select"+e).html(""),$("#section-select"+e).find("option:selected").removeAttr("selected"),$(".selectpicker").selectpicker("refresh")};return n([],!1),{getAllSelectionData:o,setSelectionsFromURL:r,init:n,clear:a,canSearch:s}}();Table.prototype.getTitle=function(){if(this.isCombined){var t=null===this.selection[0]?"":this.selection[0].subCategory;return this.selection[0].category+", "+t+", "+this.selection[0].description}return(void 0===this.subCategory?"":this.selection.subCategory+", ")+" "+this.selection.description},Table.prototype.getSubTitle=function(){if(this.isCombined){var t=null===this.selection[1]?"":this.selection[1].subCategory;return this.selection[1].category+", "+t+", "+this.selection[1].description}return this.selection.section+", "+this.selection.category},Table.prototype.update=function(t){this.rows=t,this.createTotalsTable(!0,"")},Table.prototype.totalsRowSelected=function(t){var e=t.rowID.charAt(t.rowID.length-1),i="row-tot-"+this.id+e;SingleBarModule.showBarWithRowElem(i,t.region,"#bar-total-"+this.id,"#head-row-totals-"+this.id,"#table-total-"+this.id,this.unit)},Table.prototype.rowClicked=function(t){var e=t.rowID.slice(-1);isNaN(t.rowID.slice(-2))||(e=t.rowID.slice(-2)),SingleBarModule.showBarWithRowElem("row"+this.id+e,t.edb,"#bar-"+this.id,"#head-row-"+this.id,"#table-"+this.id,this.unit)},Table.prototype.getAvailableYears=function(){t=[];var t=[];return this.rows.forEach(function(e){t.includes(e.obs_yr)||t.push(e.obs_yr)}),t.sort(function(t,e){return+t-+e}),t},Table.prototype.canApplyCPI=function(){return!this.isCombined&&this.unit.includes("$")},Table.prototype.applyCPI=function(t){this.noCPICells.length>0&&this.revertCPI();var e=this.$table.find(".cell"),i=this.noCPICells;this.id;e.each(function(){i.push({id:$(this).attr("id"),value:$(this).text()})});var o=1/0,s=-(1/0);e.each(function(){var t=+$(this).attr("class").split(" ")[1];o=t<o?t:o,s=t>s?t:s});var r=this.dpFormat;e.each(function(){for(var e=+$(this).attr("class").split(" ")[1],i=$(this).attr("origvalue"),n=o;n<=s;n++)for(var a=0;a<t.length;a++)t[a].year===n&&e<=n&&(i*=1+t[a].value/100,i=r(i));$(this).text(i)})},Table.prototype.revertCPI=function(){if(this.noCPICells.length>0){var t=this.dpFormat;this.noCPICells.forEach(function(e){$("#"+e.id).text(t(e.value))})}},Table.prototype.insertTitles=function(){if(this.isCombined){var t=this.id.charAt(0).toUpperCase(),e=this.id.charAt(1).toUpperCase();this.$title.append("<h3>Ratio analysis "+t+" / "+e+"</h4>"),this.$title.append('<h4 class="title"><span style="color: black;">'+t+": </span>"+this.title+'</h4><h4 class="title"><span style="color: black;">'+e+": </span>"+this.subTitle+"</h4>")}else this.$title.append('<h2 class="title">'+this.title+"</h2>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Table.prototype.create=function(){var t=this.createTableData(this.rows),e="";t[0].years.forEach(function(t){e+="<th>"+t.year+"</th>"}),this.$table.append('<tr id="head-row-'+this.id+'" class="table-row table-head"> <th>EDB</th>'+e+"</tr>");for(var i=0,o=0,s=[],r=0;r<t.length;r++){for(var n=t[r],a=n.edb,e=n.years,c="<tr class='table-row' id=row"+this.id+o+"><th class='edb-cell'>"+a+"</th>",l=0;l<e.length;l++){var h=e[l];c+="<th origValue='"+h.value+"' class='cell "+h.year+"' id='t"+this.id+i+"'>"+this.dpFormat(h.value)+"</th>",s.push({id:"#t"+this.id+i,value:h.value}),i++}this.$table.append(c+"</tr>"),$("#row"+this.id+o).click(function(){var t=this.id.slice(-1);isNaN(this.id.slice(-2))||(t=this.id.slice(-2));var e=$("#"+this.id+" .edb-cell").text();events.emit("ROW_CLICKED",{rowID:this.id,rowNumb:t,edb:e})}),o++}this.cellValues=s},Table.prototype.createTotalsTable=function(t,e){var i=dp.createTableTotals(this.rows,TablesModule.regions,this.availableYears),o={n:"North Island",uni:"Upper North Island",eni:"Eastern North Island",swni:"South-West North Island",s:"South Island",usi:"Upper South Island",lsi:"Lower South Island",nz:"New Zealand"},s=[],r="";this.availableYears.forEach(function(t){r+="<th>"+t+"</th>"});var n=0,a=0;t&&this.$totalsTable.html("");var c=29;this.$totalsTable.append('<tr id="head-row-totals-'+this.id+'" class="table-row table-head"> <th>Region</th>'+r+"</tr>");for(var l in i)if(i.hasOwnProperty(l)){var h="<tr class='table-row' id=row-tot-"+this.id+a+">",u=this.dpFormat,d=this.noCPICells;h+="<th class='reg-cell'>"+o[l]+"</th>";var p=this.id;i[l].forEach(function(t){var e;e="nz"===l?t/c:t/TablesModule.regions[l].length,h+="<th id='t-total"+p+n+"' origValue='"+e+"' class='cell'>"+u(e)+"</th>",s.push({id:"#t-total"+p+n,value:e}),d.push({id:"t-total"+p+n,value:e}),n++}),this.$totalsTable.append(h+"</tr>"),$("#row-tot-"+this.id+a).click(function(){var t=$("#"+this.id+" .reg-cell").text();events.emit("TOTAL_ROW_CLICKED",{rowID:this.id,region:t})}),a++}""!==e&&$("#"+e).addClass("row-selected"),this.totalCellValues=s},Table.prototype.createTableData=function(t){var e={};t.forEach(function(t){void 0===e[t.edb]&&(e[t.edb]=t.edb)});var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=t.filter(function(t){return t.edb===e[o]}),r=[];s.forEach(function(t){r.push({year:t.obs_yr,value:t.value})}),r.sort(function(t,e){return t.year>e.year}),i.push({edb:e[o],years:r})}return i},Table.prototype.render=function(){this.applyGradientCSS(this.cellValues),this.applyGradientCSS(this.totalCellValues)},Table.prototype.applyGradientCSS=function(t){var e=!1,i=-(1/0);t.forEach(function(t){i=+t.value>i?+t.value:i});for(var o=0;o<t.length;o++){var s=e?s:+t[o].value/i*100;$(t[o].id).css({background:"-webkit-gradient(linear, left top, right top, color-stop("+s+"%,#7bbfd6), color-stop("+s+"%,#FFF))"})}};var TablesModule=function(){var t={n:["Centralines","Counties Power","Eastland Network","Electra","Horizon Energy","Northpower","Powerco","Scanpower","The Lines Company","Top Energy","Unison Networks","Vector Lines","Waipa Networks","WEL Networks","Wellington Electricity"],uni:["Counties Power","Horizon Energy","Northpower","The Lines Company","Top Energy","Vector Lines","Waipa Networks","WEL Networks"],eni:["Centralines","Eastland Network","Scanpower","Unison Networks"],swni:["Electra","Powerco","Wellington Electricity"],s:["Alpine Energy","Aurora Energy","Buller Electricity","Electricity Ashburton","Electricity Invercargill","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Network Waitaki","Orion NZ","OtagoNet","The Power Company","Westpower"],usi:["Alpine Energy","Buller Electricity","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Orion NZ","Westpower"],lsi:["Aurora Energy","Electricity Ashburton","Electricity Invercargill","Network Waitaki","OtagoNet","The Power Company"]
},e="",i="",o=[],s=function(t){t.data.forEach(function(t){t.combined?o.push(new Table(t.id,t.rows,[t.search,t.search2],!0)):o.push(new Table(t.id,t.rows,t.search,!1))}),o.forEach(function(t){t.insertTitles(),t.create(),t.createTotalsTable(!1,i)}),o.forEach(function(t){t.render()})},r=function(t){if(e===t.rowID)return $(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().removeClass("row-selected"),void(rowSelected="");if(""!==e){var i=$("#"+e+" .edb-cell").text();$(".table-row").find(".edb-cell:contains('"+i+"')").parent().removeClass("row-selected")}e=t.rowID,$(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().addClass("row-selected"),o.forEach(function(e){e.rowClicked(t)})},n=function(t){var e=t.region;if(i===t.rowID){var s=$("#"+t.rowID+" .reg-cell").text();return $(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().removeClass("row-selected"),void(i="")}if(""!==i){var s=$("#"+i+" .reg-cell").text();$(".table-row").find(".reg-cell:contains('"+s+"')").filter(function(){return $(this).text()===s}).parent().removeClass("row-selected")}$(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().addClass("row-selected"),i=t.rowID,o.forEach(function(e){e.totalsRowSelected(t)})},a=function(t){var e=t.cpiValues;o.forEach(function(t){t.canApplyCPI()&&(t.applyCPI(e),t.createTotalsTable(!0,i))}),o.forEach(function(t){t.render()})},c=function(){o.forEach(function(t){t.revertCPI()}),o.forEach(function(t){t.render()})},l=function(t){t.data.forEach(function(t){o.forEach(function(e){e.id===t.id&&(e.isCombined?e.update(t.rows,t.table1Rows,t.table2Rows):e.update(t.rows))})})};return events.on("INIT_DATA",s),events.on("ROW_CLICKED",r),events.on("TOTAL_ROW_CLICKED",n),events.on("APPLY_CPI",a),events.on("REVERT_CPI",c),events.on("ROW_UPDATE",l),{regions:t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbWJpbmVkR3JhcGguanMiLCJEYXRhUHJvY2Vzc29yLmpzIiwiR3JhcGguanMiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyLmpzIiwiU2VsZWN0TWFuYWdlci5qcyIsIlRhYmxlLmpzIiwiQ29tcGFyZU1vZHVsZS5qcyIsIkNQSU1vZHVsZS5qcyIsIkdyYXBoTW9kdWxlLmpzIiwiU2VsZWN0aW9uUm93c0NvbnRyb2xsZXIuanMiLCJUYWJsZU1vZHVsZS5qcyJdLCJuYW1lcyI6WyJDb21iaW5lZEdyYXBoIiwiaWQiLCJjb21iaW5lZFJvd3MiLCJyb3dzMSIsInJvd3MyIiwic2VsZWN0aW9uMSIsInNlbGVjdGlvbjIiLCJ0aGlzIiwiZ3JvdXBlZElEIiwiYm94SUQiLCJ2ZWN0b3JJRCIsInVuaXQiLCJnZXRVbml0IiwiJHRpdGxlQmFyIiwiJCIsIiR0aXRsZUJveCIsIiR0aXRsZVZlY3RvciIsIkRhdGFQcm9jZXNzb3IiLCJEYXRhU3RydWN0dXJlIiwic2VsZWN0aW9uRGF0YSIsInNlbGVjdGlvblRhYmxlIiwiY29tYmluZURhdGEiLCJTZWxlY3Rpb24iLCJhIiwiYiIsImMiLCJkIiwiYVRhYmxlIiwiYlRhYmxlIiwiY1RhYmxlIiwiZFRhYmxlIiwiRGF0YVRhYmxlcyIsInRhYmxlQSIsInRhYmxlQiIsInRhYmxlQyIsInRhYmxlRCIsInRhYmxlQUIiLCJ0YWJsZUNEIiwiU2VsZWN0aW9uRGF0YSIsInJvd3MiLCJ0aXRsZSIsInN1YlRpdGxlIiwiU2VsZWN0aW9uRGF0YUNvbWJpbmVkIiwidGFibGUxUm93cyIsInRhYmxlMlJvd3MiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJ1bml0MSIsInVuaXQyIiwiU2VsZWN0ZWRUYWJsZURhdGEiLCJHcmFwaCIsInNlbGVjdGlvbiIsImdldFRpdGxlIiwiZ2V0U3ViVGl0bGUiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyIiwiaWROdW1iIiwicm93U2VsZWN0aW9ucyIsInNlY3Rpb24iLCJjYXRlZ29yeSIsInN1YkNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJzZXRJbml0aWFsU3RhdGUiLCJyb3dEYXRhIiwiY2xlYXIiLCJ2YWxpZFNlbGVjdGlvbiIsImluaXRFdmVudExpc3RlbmVyIiwidXJsU2VsZWN0aW9ucyIsInVybFNlbGVjdGlvbiIsImZpbHRlciIsImUiLCJ1cGRhdGVTZWN0aW9uIiwidXBkYXRlIiwiZXZlbnRzIiwiZW1pdCIsInVwZGF0ZUNhdGVnb3J5IiwidXBkYXRlU3ViQ2F0ZWdvcnkiLCJ1cGRhdGVEZXNjcmlwdGlvbiIsImdldFJvd1NlbGVjdGlvbiIsIm9uIiwiYmluZCIsIlNlY3Rpb25TZWxlY3QiLCIkc2VsZWN0IiwicGFzc0lEIiwiRGF0YWJhc2UiLCJnZXRTZWN0aW9uc0Zyb21EYXRhYmFzZSIsInNlY3Rpb25zIiwiZHAiLCJzb3J0U2VjdGlvbnMiLCJhZGRPcHRpb25zVG9TZWxlY3RvciIsInVwZGF0ZWQiLCJldmVudCIsImZpbmQiLCJ0ZXh0IiwiQ2F0ZWdvcnlTZWxlY3QiLCJnZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlIiwiY2F0ZWdvcmllcyIsIm5vUmVzdWx0Iiwic2VjdGlvbkNoYW5nZWRMaXN0ZW5lciIsImh0bWwiLCJTdWJDYXRlZ29yeVNlbGVjdCIsImdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UiLCJzdWJDYXRlZ29yaWVzIiwiY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIiLCJwYXNzSUROdW1iIiwiY2xlYXJNeXNlbGYiLCJEZXNjcmlwdGlvblNlbGVjdCIsImdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZSIsImRlc2NyaXB0aW9ucyIsInN1YkNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyIiwic2VsZWN0cGlja2VyIiwic2VsZWN0b3JJRCIsIm9wdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJUYWJsZSIsImlzQ29tYmluZWQiLCJjb25zb2xlIiwibG9nIiwidW5pdHMiLCJkcEZvcm1hdCIsImQzIiwiZm9ybWF0IiwiYXZhaWxhYmxlWWVhcnMiLCJnZXRBdmFpbGFibGVZZWFycyIsIm5vQ1BJQ2VsbHMiLCIkdGFibGUiLCIkdG90YWxzVGFibGUiLCIkdGl0bGUiLCJwcm90b3R5cGUiLCJnZXRJRCIsImdldFNlbGVjdGlvbjFUaXRsZSIsImdldFNlbGVjdGlvbjJUaXRsZSIsImdldFVuaXQxIiwiZ2V0VW5pdDIiLCJpbnNlcnRUaXRsZXMiLCJyYXRpb0hUTUwiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInMxIiwiczIiLCJjcmVhdGUiLCJncm91cGVkRGF0YSIsImNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGgiLCJHcm91cGVkQmFyTW9kdWxlIiwiY3JlYXRlZEdyb3VwZWRCYXJHcmFwaCIsImRhdGEiLCJrZXlzIiwiYm94cGxvdERhdGEiLCJjcmVhdGVEYXRhRm9yQm94UGxvdCIsIkJveFBsb3RNb2R1bGUiLCJjcmVhdGVCb3hQbG90IiwidmVjdG9yR3JhcGhEYXRhIiwiY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoIiwiVmVjdG9yTW9kdWxlIiwiY3JlYXRlVmVjdG9yR3JhcGgiLCJTdHJpbmciLCJpbmNsdWRlcyIsImluZGV4T2YiLCJhcHBseSIsImFyZ3VtZW50cyIsIkFycmF5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwidmFsdWUiLCJvYmoiLCJuZXdBcnIiLCJlbCIsIkNvbXBhcmVNb2R1bGUiLCJzaG93RnVsbFZlY3RvckdyYXBoIiwic2VsZWN0aW9ucyIsImF0aXRsZSIsImJ0aXRsZSIsImN0aXRsZSIsImR0aXRsZSIsInJhdGlvIiwic3BhbkEiLCJzcGFuQiIsInNwYW5DIiwic3BhbkQiLCJjb21iaW5lQSIsImNvbWJpbmVCIiwiY29tYmluZUMiLCJjb21iaW5lRCIsInNob3ciLCJiYWNrdXAiLCJlcnJvciIsIiRzZWFyY2hFcnJvciIsInNlcmlhbGlzZSIsInN0ciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwic2VhcmNoIiwic2VsZWN0aW9uUm93cyIsImNhblNlYXJjaCIsImdldEFsbFNlbGVjdGlvbkRhdGEiLCJmb3JFYWNoIiwid2luZG93IiwibG9jYXRpb24iLCJyZXBsYWNlIiwibG9hZFNlYXJjaEZyb21VUkwiLCJpbml0IiwiZ2V0Um93c0ZvclNlYXJjaCIsImZjYXN0X3lyIiwiciIsIm9ic195ciIsInNvcnRlZFJvd3MiLCJmaWx0ZXJSb3dzVG9UYWJsZXNBbmRDb3B5IiwiY29tYmluZWREYXRhIiwidCIsImFkZENsYXNzIiwicm93SUQiLCJyb3dOdW1iIiwiZWRiIiwicmVnaW9uIiwicmVtb3ZlQ2xhc3MiLCJnb1RvQnlTY3JvbGwiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwiYXBwbHlDUEkiLCJDUElNb2R1bGUiLCJpc1ZhbGlkIiwidW5kZWZpbmVkIiwiY29weU9mUm93cyIsImNvcHlSb3dzIiwiYXBwbHlDUElUb1RhYmxlUm93cyIsImdldENQSVZhbHVlcyIsIm5ld0RhdGEiLCJjcGlWYWx1ZXMiLCJhcHBsaWNhYmxlUm93cyIsIm1pblllYXIiLCJyZWR1Y2UiLCJwcmV2IiwiY3VyciIsImRpc2NfeXIiLCJtYXhZZWFyIiwiY3VyIiwiZWxlbSIsImluZGV4IiwieWVhciIsInZhbHVlT2ZDZWxsIiwicmV2ZXJ0Q1BJIiwiZG9jdW1lbnQiLCJyZWFkeSIsImNsaWNrIiwiJGNwaUZvcm0iLCJ2YWxpZGF0b3IiLCJzZXREZWZhdWx0cyIsImVycm9yQ2xhc3MiLCJoaWdobGlnaHQiLCJlbGVtZW50IiwiY2xvc2VzdCIsInVuaGlnaGxpZ2h0IiwiY3BpUnVsZXMiLCJyZXF1aXJlZCIsIm51bWJlciIsIm1pbiIsIm1heCIsIm1lc3NhZ2VTZXQiLCJ2YWxpZGF0ZSIsInJ1bGVzIiwiWTIwMTIiLCJZMjAxMyIsIlkyMDE0IiwiWTIwMTUiLCJZMjAxNiIsIm1lc3NhZ2VzIiwidmFsIiwidmFsaWQiLCJjb3B5RGF0YVRhYmxlcyIsImRhdGFUYWJsZXMiLCJvcmlnVGFibGVzIiwidGFibGVzIiwiaiIsIm5ldHdvcmsiLCJub3RlIiwicF9rZXkiLCJzY2hfcmVmIiwic2NoZWR1bGUiLCJzdWJfY2F0ZWdvcnkiLCJuZXdSb3dzIiwiY3JlYXRlRGF0YVN0cnVjdHVyZXNXaXRoQ29weSIsImNvcHlPZkRhdGFUYWJsZXMiLCJzZWxlY3Rpb25EYXRhQXJyYXkiLCJzZWxlY3Rpb25UYWJsZXNBcnJheSIsImNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5Iiwic2VsZWN0ZWRSb3dzIiwiaWRzIiwic3VidGl0bGUiLCJqdW1wIiwic3ViVGl0bGVKdW1wIiwidGl0bGVKdW1wIiwidmFsaWRhdGVTZWFyY2hQYXJhbXMiLCJ2YWxpZE9wdGlvbnMiLCJyZXR1cm5WYWwiLCJtYXRjaERCUm93IiwiREJSb3ciLCJmaWx0ZXJSb3dzVG9UYWJsZXMiLCJhUm93cyIsImJSb3dzIiwiY1Jvd3MiLCJkUm93cyIsImFiUm93cyIsImNvbWJpbmVUYWJsZXMiLCJjZFJvd3MiLCJjb3B5IiwiY29tYmluZWQiLCJzZWFyY2gyIiwiYXQiLCJidCIsInVuaXRBIiwidW5pdEIiLCJlZGJEb25lIiwidmVjRGF0YSIsImF2YWlsYWJsZU9ic1llYXJzIiwicm93MSIsImVkYlJvd3NBdCIsImVkYlJvd3NCdCIsInllYXJzRG9uZSIsImVkYlllYXJBcnJheSIsInllYXJSb3dzQXQiLCJ5ZWFyUm93c0J0IiwiayIsInZhbHVlQSIsInZhbHVlQiIsInNvcnQiLCJ5ZWFycyIsInRhYmxlUm93cyIsInNWYWx1ZXMiLCJJbmZpbml0eSIsImVudHJ5IiwidmFsdWVzIiwiY3VyVmFsdWUiLCJzY2F0dGVyRGF0YSIsImlzTmFOIiwibnVtYmVyQSIsInN1YnN0cmluZyIsIm51bWJlckIiLCJhZGRUb1NlbGVjdGlvbiIsInR5cGUiLCJjcmVhdGVUYWJsZVRvdGFscyIsInJlZ2lvbnMiLCJyZWdpb25TdHJpbmdzIiwidG90YWxzIiwicm93IiwicmVnaW9uU3RyaW5nIiwibnoiLCJib3hEYXRhIiwiR3JhcGhNb2R1bGUiLCJncmFwaHMiLCJ6Iiwic2NhbGVPcmRpbmFsIiwicmFuZ2UiLCJ6U2VsZWN0ZWQiLCJ0YWJsZURhdGEiLCJnIiwicm93Q2xpY2tlZCIsInVuc2VsZWN0Iiwic2VsZWN0QWxsIiwiY2xhc3NlZCIsImFscmVhZHlTZWxlY3RlZCIsImRhdHVtIiwiYXR0ciIsImtleSIsInJvd3NEYXRhIiwic2VsZWN0b3JzIiwicyIsInNjIiwic2V0U2VsZWN0aW9uc0Zyb21VUkwiLCJzZWFyY2hEYXRhIiwid2l0aFNlYXJjaCIsInJvd051bWJlciIsInJlbW92ZUF0dHIiLCJjcmVhdGVUb3RhbHNUYWJsZSIsInRvdGFsc1Jvd1NlbGVjdGVkIiwiZGF0YVJvd0lEIiwiU2luZ2xlQmFyTW9kdWxlIiwic2hvd0JhcldpdGhSb3dFbGVtIiwic2xpY2UiLCJjYW5BcHBseUNQSSIsIiRjYWNoZWRDZWxscyIsImVhY2giLCJzcGxpdCIsImNyZWF0ZVRhYmxlRGF0YSIsInkiLCJjZWxsQ291bnQiLCJyb3dDb3VudCIsImNlbGxWYWx1ZXMiLCJkYXRhUm93IiwieWVhckRhdGEiLCJzZWxlY3RlZFRvdGFsUm93IiwiVGFibGVzTW9kdWxlIiwibmFtZXMiLCJuIiwidW5pIiwiZW5pIiwic3duaSIsInVzaSIsImxzaSIsInRvdGFsQ2VsbHMiLCJudW1iZXJPZkNvbXBhbmllcyIsInByb3BlcnR5IiwiY2VsbHMiLCJhdmciLCJyZWciLCJ0b3RhbENlbGxWYWx1ZXMiLCJlZGJzIiwiZWRiWWVhcnMiLCJyZW5kZXIiLCJhcHBseUdyYWRpZW50Q1NTIiwicGVyY2VudCIsIm1heENlbGxWYWx1ZSIsImNzcyIsImJhY2tncm91bmQiLCJzZWxlY3RlZFJvdyIsInRhYmxlIiwicGFyZW50Iiwicm93U2VsZWN0ZWQiLCJ0b3RhbFJvd0NsaWNrZWQiLCJvbGRSZWciXSwibWFwcGluZ3MiOiJBQVlBLFFBQUFBLGVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFOLEdBQUFBLEVBQ0FNLEtBQUFDLFVBQUEsZ0JBQUFQLEVBQ0FNLEtBQUFFLE1BQUEsWUFBQVIsRUFDQU0sS0FBQUcsU0FB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QXdXLEVBQUF4VyxLQUNBeVcsRUFBQXJQLFdBQ0FxUCxFQUFBblMsT0FBQWtTLEVBQUFsVSxLQUFBa1UsRUFBQTlULFdBQUE4VCxFQUFBN1QsWUFFQThULEVBQUFuUyxPQUFBa1MsRUFBQWxVLFdBZ0JBLE9BUkFpQyxRQUFBTSxHQUFBLFlBQUFnSSxHQUNBdEksT0FBQU0sR0FBQSxjQUFBNlIsR0FDQW5TLE9BQUFNLEdBQUEsb0JBQUEyVixHQUNBalcsT0FBQU0sR0FBQSxZQUFBb0osR0FDQTFKLE9BQUFNLEdBQUEsYUFBQTBLLEdBQ0FoTCxPQUFBTSxHQUFBLGFBQUFQLElBSUFxUixRQUFBQSIsImZpbGUiOiJjb21wYXJlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIERFUEVOREVOQ0lFUyA6IERhdGFQcm9jZXNzb3IsIEdyb3VwZWRCYXJHcmFwaE1vZHVsZSwgVmVjdG9yR3JhcGhNb2R1bGUsIEJveFBsb3RNb2R1bGVcclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgdGhhdCBoYW5kbGVzIGxvZ2ljIGZvciB1cGRhdGluZyBhbmQgY3JlYXRpbmcgYWxsIG9mIHRoZSBncmFwaHMgb24gdGhlIGRhc2hib2FyZCBhY3Jvc3MgdGhlIHRhYnNcclxuICpcclxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBjb21iaW5lZFJvd3Mge09iamVjdFtdfSB0aGUgcmVzdWx0IG9mIHJvd3MxIGRpdmlkZWQgYnkgcm93czJcclxuICogQHBhcmFtIHJvd3MxIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICogQHBhcmFtIHJvd3MyIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBzZWxlY3Rpb24gc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb24xIHtPYmplY3R9IHRoZSBmaXJzdCBzZWFyY2hcclxuICogQHBhcmFtIHNlbGVjdGlvbjIge09iamVjdH0gdGhlIHNlY29uZCBzZWFyY2hcclxuICogKi9cclxuZnVuY3Rpb24gQ29tYmluZWRHcmFwaChpZCwgY29tYmluZWRSb3dzLCByb3dzMSxyb3dzMixzZWxlY3Rpb24xLHNlbGVjdGlvbjIpe1xyXG4gIHRoaXMuaWQgPSBpZDtcclxuICB0aGlzLmdyb3VwZWRJRCA9ICcjZ3JvdXBlZC1iYXItJytpZDtcclxuICB0aGlzLmJveElEID0gJyNib3hwbG90LScraWQ7XHJcbiAgdGhpcy52ZWN0b3JJRCA9ICcjdmVjdG9yLWdyYXBoLScraWQ7XHJcbiAgdGhpcy5yb3dzMSA9IHJvd3MxO1xyXG4gIHRoaXMucm93czIgPSByb3dzMjtcclxuICB0aGlzLmNvbWJpbmVkUm93cyA9IGNvbWJpbmVkUm93cztcclxuICB0aGlzLnNlbGVjdGlvbjEgPSBzZWxlY3Rpb24xO1xyXG4gIHRoaXMuc2VsZWN0aW9uMiA9IHNlbGVjdGlvbjI7XHJcbiAgdGhpcy51bml0ID0gdGhpcy5nZXRVbml0KCk7XHJcblxyXG5cclxuICAvLyBDYWNoZSBkb20gZWxlbWVudHNcclxuICB0aGlzLiR0aXRsZUJhciA9ICQoJyN0aXRsZS1iYXItJytpZCk7XHJcbiAgdGhpcy4kdGl0bGVCb3ggPSAkKCcjdGl0bGUtYm94LScraWQpO1xyXG4gIHRoaXMuJHRpdGxlVmVjdG9yID0gJCgnI3RpdGxlLXZlY3Rvci0nK2lkKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIHRoZSB0aGUgb2JqZWN0IGlzIGNvbWJpbmVkIG9yIG5vdFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGNvbWJpbmVkXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmlzQ29tYmluZWQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgY29tYmluZWQgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGlkIG9mIHRoZSBjb21iaW5lZCBncmFwaHNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0SUQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuaWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgb2YgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZSBvZiB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFNlbGVjdGlvbjFUaXRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgc3ViQ2F0ZWdvcnkgPSB0aGlzLnNlbGVjdGlvbjEgPT09IG51bGwgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb24xLnN1YkNhdGVnb3J5O1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbjEuZGVzY3JpcHRpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbjEuY2F0ZWdvcnkgKyBcIiwgXCIgKyBzdWJDYXRlZ29yeTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBvZiB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZSBvZiB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRTZWxlY3Rpb24yVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHN1YkNhdGVnb3J5ID0gdGhpcy5zZWxlY3Rpb24yID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uMi5zdWJDYXRlZ29yeTtcclxuICByZXR1cm4gdGhpcy5zZWxlY3Rpb24yLmRlc2NyaXB0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24yLmNhdGVnb3J5ICsgXCIsICBcIiArIHN1YkNhdGVnb3J5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHVuaXQgZm9yIHRoZSBjb21iaW5lZCBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBjb21iaW5lZCB1bml0cyBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzMVswXS51bml0cyArIFwiIC8gXCIgKyB0aGlzLnJvd3MyWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHVuaXQgZm9yIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdCBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdDEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93czFbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIHNlY29uZCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdCBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdDIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93czJbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEluc2VydHMgdGhlIHRpdGxlcyBmb3IgdGhlIGdyYXBocyBpbnRvIHRoZSBET00gZWxlbWVudHNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuaW5zZXJ0VGl0bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciByYXRpb0hUTUwgPSAnPGg0PlJhdGlvICcrdGhpcy5pZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSsnIC8gJyt0aGlzLmlkLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpICsnPC9oND4nXHJcbiAgdmFyIHMxID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJDb2xvcjogYmxhY2s7XCI+Jyt0aGlzLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKyc6IDwvc3Bhbj4nK3RoaXMuZ2V0U2VsZWN0aW9uMVRpdGxlKCkrJzwvaDQ+JztcclxuICB2YXIgczIgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj48c3BhbiBzdHlsZT1cIkNvbG9yOiBibGFjaztcIj4nK3RoaXMuaWQuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCkrJzogPC9zcGFuPicrdGhpcy5nZXRTZWxlY3Rpb24yVGl0bGUoKSsnPC9oND4nO1xyXG5cclxuICAvLyB2YXIgdGl0bGVIVE1MID0gJzxoNCBjbGFzcz1cImNvbWJpbmVkLXRpdGxlXCI+Jyt0aGlzLmdldFNlbGVjdGlvbjFUaXRsZSgpKyc8YnI+PHNwYW4gY2xhc3M9XCJvdmVyXCI+b3Zlcjwvc3Bhbj48YnI+Jyt0aGlzLmdldFNlbGVjdGlvbjJUaXRsZSgpKyc8L2g0PidcclxuXHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKHJhdGlvSFRNTCk7XHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKHMxKTtcclxuICB0aGlzLiR0aXRsZUJhci5hcHBlbmQoczIpO1xyXG5cclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQocmF0aW9IVE1MKTtcclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQoczEpO1xyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZChzMik7XHJcblxyXG5cclxuICB0aGlzLiR0aXRsZVZlY3Rvci5hcHBlbmQocmF0aW9IVE1MKTtcclxuICB0aGlzLiR0aXRsZVZlY3Rvci5hcHBlbmQoczEpO1xyXG4gIHRoaXMuJHRpdGxlVmVjdG9yLmFwcGVuZChzMik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgR3JhcGhzXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIENyZWF0ZSB0aGUgZ3JvdXBlZCBiYXIgZ3JhcGhcclxuICAgIHZhciBncm91cGVkRGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGgodGhpcy5jb21iaW5lZFJvd3MpO1xyXG4gICAgR3JvdXBlZEJhck1vZHVsZS5jcmVhdGVkR3JvdXBlZEJhckdyYXBoKGdyb3VwZWREYXRhLmRhdGEsZ3JvdXBlZERhdGEua2V5cyx0aGlzLnVuaXQsIHRoaXMuZ3JvdXBlZElEKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGJveCBwbG90IGdyYXBoXHJcbiAgICB2YXIgYm94cGxvdERhdGEgPSBkcC5jcmVhdGVEYXRhRm9yQm94UGxvdCh0aGlzLmNvbWJpbmVkUm93cyk7XHJcbiAgICBCb3hQbG90TW9kdWxlLmNyZWF0ZUJveFBsb3QoYm94cGxvdERhdGEsIHRoaXMuYm94SUQsIHRoaXMudW5pdCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSB2ZWN0b3IgZ3JhcGhcclxuICAgIHZhciB2ZWN0b3JHcmFwaERhdGEgPSBkcC5jcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgodGhpcy5yb3dzMSwgdGhpcy5yb3dzMik7XHJcbiAgICBWZWN0b3JNb2R1bGUuY3JlYXRlVmVjdG9yR3JhcGgodmVjdG9yR3JhcGhEYXRhLHRoaXMuZ2V0VW5pdDIoKSx0aGlzLmdldFVuaXQxKCksdGhpcy52ZWN0b3JJRCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2FsbGVkIHdoZW4gdGhlIHJvd3MgYXJlIHVwZGF0ZWQgYnkgQ1BJXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHRoZSBuZXcgY29tYmluZWQgcm93c1xyXG4gKiBAcGFyYW0gdGhlIG5ldyByb3dzIGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSByb3dzMiB0aGUgbmV3IHJvd3MgZm9yIHRoZSBzZWNvbmQgc2VsZWN0aW9uXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChyb3dzLCByb3dzMSxyb3dzMikge1xyXG4gIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgdGhpcy5yb3dzMSA9IHJvd3MxO1xyXG4gIHRoaXMucm93czIgPSByb3dzMjtcclxuICB0aGlzLmNyZWF0ZSgpO1xyXG59XHJcbiIsInZhciBkcCA9IG5ldyBEYXRhUHJvY2Vzc29yKCk7XHJcblxyXG4vKipcclxuICogT2JqZWN0IGNvbnRhaW5zIGEgbnVtYmVyIG9mIGZ1bmN0aW9ucyB0byBtYW5pcHVsYXRlIGRhdGEgZnJvbSB0aGUgZGF0YWJhc2VcclxuICogKi9cclxuZnVuY3Rpb24gRGF0YVByb2Nlc3Nvcigpe31cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBvZiBjb3B5IG9mIHRoZSBkYXRhVGFibGVzIG9iamVjdC4gQ29waWVzIGVhY2ggdGFibGUgYW5kIGl0cyB2YWx1ZXMgZm9yIGVhY2ggcm93LlxyXG4gKlxyXG4gKiBAcGFyYW0gZGF0YVRhYmxlcyB7T2JqZWN0fSBjb250YWlucyA2IGFycmF5cyBvZiByb3dzIG9uZSBmb3IgZWFjaCB0YWJsZS4gQXR0cmlidXRlIGNhbiBiZSB1bmRlZmluZWQgaWYgdGFibGUgZG9lcyBub3QgZXhpc3RcclxuICogQHJldHVybnMge29iamVjdH0gQSBjb3B5IG9mIHRoZSBkYXRhVGFibGVzIG9iamVjdFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jb3B5RGF0YVRhYmxlcyA9IGZ1bmN0aW9uKGRhdGFUYWJsZXMpIHtcclxuICB2YXIgb3JpZ1RhYmxlcyA9IFtkYXRhVGFibGVzLnRhYmxlQSxkYXRhVGFibGVzLnRhYmxlQixkYXRhVGFibGVzLnRhYmxlQyxkYXRhVGFibGVzLnRhYmxlRCxkYXRhVGFibGVzLnRhYmxlQUIsZGF0YVRhYmxlcy50YWJsZUNEXTsgLy8gQWRkIHRhYmxlcyB0byBhcnJheSB0byBpdGVyYXRlIG92ZXIgdGhlbVxyXG4gIHZhciB0YWJsZXMgPSBbW10sW10sW10sW10sW10sW11dOyAvLyBFbXB0eSBhcnJheXMgdG8gaW5zZXJ0IG5ldyByb3dzIHdpdGggdmFsdWVzIHRoYXQgYXJlIGNvcGllcyBvZiB0aGUgb3JpZ2luYWxcclxuXHJcbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSBvcmlnaW5hbCB0YWJsZXNcclxuICBmb3IodmFyIGogPSAwOyBqIDwgb3JpZ1RhYmxlcy5sZW5ndGg7IGorKyl7XHJcbiAgICAgIHZhciBhID0gb3JpZ1RhYmxlc1tqXTsgLy8gR3JhYiB0aGUgY3VycmVudCB0YWJsZSB3aXRoIGluZGV4IGlcclxuICAgICAgaWYoYSAhPT0gdW5kZWZpbmVkKXsgLy8gSXQgbWlnaHQgbm90IGV4aXN0IGR1ZSB0byBpdCBub3QgYmVpbmcgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKXsgLy8gRm9yIGV2ZXJ5IHJvdyBjb3B5IGFsbCB0aGUgZmllbGRzXHJcbiAgICAgICAgICAgICAgdGFibGVzW2pdLnB1c2goe2NhdGVnb3J5IDphW2ldLmNhdGVnb3J5LCBkZXNjcmlwdGlvbiA6IGFbaV0uZGVzY3JpcHRpb24sZGlzY195cjogYVtpXS5kaXNjX3lyLGVkYjogYVtpXS5lZGIsXHJcbiAgICAgICAgICAgICAgICAgIGZjYXN0X3lyOiBhW2ldLmZjYXN0X3lyLG5ldHdvcms6YVtpXS5uZXR3b3JrLG5vdGU6YVtpXS5ub3RlLG9ic195cjphW2ldLm9ic195cixwX2tleTogYVtpXS5wX2tleSxzY2hfcmVmOmFbaV0uc2NoX3JlZixcclxuICAgICAgICAgICAgICAgICAgc2NoZWR1bGU6YVtpXS5zY2hlZHVsZSxzZWN0aW9uOmFbaV0uc2VjdGlvbixzdWJfY2F0ZWdvcnk6IGFbaV0uc3ViX2NhdGVnb3J5LHVuaXRzOmFbaV0udW5pdHMsdmFsdWU6YVtpXS52YWx1ZX0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG5ldyBEYXRhVGFibGVzKHRhYmxlc1swXSx0YWJsZXNbMV0sdGFibGVzWzJdLHRhYmxlc1szXSx0YWJsZXNbNF0sdGFibGVzWzVdKTsgLy8gUmV0dXJuIHRoZSBjb3B5XHJcbn1cclxuXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNvcHlSb3dzID0gZnVuY3Rpb24gKHJvd3MpIHtcclxuICAgIHZhciBuZXdSb3dzID0gW107XHJcbiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24ocil7XHJcbiAgICAgIG5ld1Jvd3MucHVzaCh7dmFsdWUgOiByLnZhbHVlLCBjYXRlZ29yeSA6ci5jYXRlZ29yeSwgZGVzY3JpcHRpb24gOiByLmRlc2NyaXB0aW9uLGRpc2NfeXI6IHIuZGlzY195cixlZGI6IHIuZWRiLFxyXG4gICAgICAgICAgZmNhc3RfeXI6IHIuZmNhc3RfeXIsbmV0d29yazogci5uZXR3b3JrLG5vdGU6ICByLm5vdGUsb2JzX3lyOiByLm9ic195cixwX2tleTogci5wX2tleSxzY2hfcmVmOiByLnNjaF9yZWYsXHJcbiAgICAgICAgICBzY2hlZHVsZTogci5zY2hlZHVsZSxzZWN0aW9uOiByLnNlY3Rpb24sc3ViX2NhdGVnb3J5OiByLnN1Yl9jYXRlZ29yeSx1bml0czogci51bml0c30pXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXdSb3dzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW5kIG9iamVjdCB3aXRoIHRocmVlIGFycmF5cyB0aGF0IGFyZSB1c2VkIHRvIGl0ZXJhdGUgb3ZlciBhbmQgYWRkIHRoZSBkYXRhIHRvIHRoZSBwYWdlLiBUaGUgc3RydWN0dXJlIHNpbXBsaWZpZXNcclxuICogY3JlYXRpb24gb2YgdGFibGUsIGdyYXBocyBhbmQgY29tYmluZWQgZ3JhcGhzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZGF0YVRhYmxlcyB7T2JqZWN0fSBjb250YWlucyA2IGFycmF5cyBvZiByb3dzIG9uZSBmb3IgZWFjaCB0YWJsZS4gVGFibGUgYXJyYXkgY2FuIGJlIGVtcHR5IGlmIHRhYmxlIGRvZXMgbm90IGV4aXN0XHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IERhdGEgc3RydWN0dXJlXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZURhdGFTdHJ1Y3R1cmVzV2l0aENvcHkgPSBmdW5jdGlvbiAoY29weU9mRGF0YVRhYmxlcyl7XHJcbiAgICB2YXIgc2VsZWN0aW9uRGF0YUFycmF5ID0gW107IC8vIFVzZWQgdG8gY3JlYXRlIHRoZSByZWd1bGFyIGdyYXBoc1xyXG4gICAgdmFyIHNlbGVjdGlvblRhYmxlc0FycmF5ID0gW107IC8vIFRhYmxlcyBhbHNvIGNvbnRhaW5zIGNvbWJpbmVkIGRhdGFcclxuICAgIHZhciBjb21iaW5lZFNlbGVjdGlvbkRhdGFBcnJheSA9IFtdOyAvLyBVc2VkIHRvIGNyZWF0ZSB2ZWN0b3IgZ3JhcGhzXHJcblxyXG4gICAgLy8gQW4gYXJyYXkgb2YgdHJ1ZSBvciBmYWxzZSB2YWx1ZXMgaWYgYSB0YWJsZSBjb250YWlucyB2YWx1ZXNcclxuICAgIHZhciBzZWxlY3RlZFJvd3MgPSBbY29weU9mRGF0YVRhYmxlcy50YWJsZUEubGVuZ3RoID4gMCxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQi5sZW5ndGggPiAwLGNvcHlPZkRhdGFUYWJsZXMudGFibGVDLmxlbmd0aCA+IDAsY29weU9mRGF0YVRhYmxlcy50YWJsZUQubGVuZ3RoID4gMF07XHJcblxyXG4gICAgLy8gQW4gYXJyYXkgd2l0aCB0aGUgdGFibGVzIGRhdGFcclxuICAgIHZhciB0YWJsZXMgPSBbY29weU9mRGF0YVRhYmxlcy50YWJsZUEsY29weU9mRGF0YVRhYmxlcy50YWJsZUIsY29weU9mRGF0YVRhYmxlcy50YWJsZUMsY29weU9mRGF0YVRhYmxlcy50YWJsZUQsY29weU9mRGF0YVRhYmxlcy50YWJsZUFCLGNvcHlPZkRhdGFUYWJsZXMudGFibGVDRF07XHJcblxyXG4gICAgLy8gQ3JlYXRlcyB0aGUgNCBub3JtYWwgdGFibGVzIGFuZCB0aGUgY29tYmluZWQgdGFibGVzXHJcbiAgICB2YXIgaWRzID0gWydhJywnYicsJ2MnLCdkJywnYWInLCdjZCddOyAvLyBUaGUgaWQncyBsaW5lIHVwIHdpdGggdGhlIHRhYmxlcyBhcnJheSB0byBhZGQgYW4gaWQgdG8gZWFjaCByb3dcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzZWxlY3RlZFJvd3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNlbGVjdGVkUm93c1tpXSl7IC8vIE9ubHkgZ28gdGhyb3VnaCB0YWJsZSBpZiBpdCBoYXMgcm93c1xyXG4gICAgICAgICAgICB2YXIgc3VidGl0bGUgPSB0YWJsZXNbaV1bMF0uc2VjdGlvbiArIFwiLCBcIiArIHRhYmxlc1tpXVswXS5jYXRlZ29yeTsgLy8gQ3JlYXRlIHN1YnRpdGxlIHdpdGggc2VjdGlvbiBhbmQgY2F0ZWdvcnlcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHN1YiBjYXRlZ29yeSBpcyBudWxsIGlmIHNvIGp1c3QgdXNlIGRlc2NyaXB0aW9uIGVsc2UgYWxzbyB1c2Ugc3ViIGNhdGVnb3J5XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IHRhYmxlc1tpXVswXS5zdWJfY2F0ZWdvcnkgPT09IG51bGwgPyB0YWJsZXNbaV1bMF0uZGVzY3JpcHRpb24gOiB0YWJsZXNbaV1bMF0uc3ViX2NhdGVnb3J5ICsgXCIsIFwiICsgdGFibGVzW2ldWzBdLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGEgcm93IGFsb25nIHdpdGggdGhlIGlkIG9mIHRoZSB0YWJsZSB0aGUgdGl0bGUsIHN1YnRpdGxlIGFuZCB1bml0IHRvIGJvdGggdGFibGUgYW5kIHNlbGVjdGlvbiBhcnJheXNcclxuICAgICAgICAgICAgc2VsZWN0aW9uVGFibGVzQXJyYXkucHVzaChuZXcgU2VsZWN0ZWRUYWJsZURhdGEodGFibGVzW2ldLGlkc1tpXSx0aXRsZSxzdWJ0aXRsZSwgdGFibGVzW2ldWzBdLnVuaXRzKSk7XHJcbiAgICAgICAgICAgIHNlbGVjdGlvbkRhdGFBcnJheS5wdXNoKG5ldyBTZWxlY3Rpb25EYXRhKHRhYmxlc1tpXSwgdGl0bGUsIHN1YnRpdGxlICx0YWJsZXNbaV1bMF0udW5pdHMsaWRzW2ldKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgY29tYmluZWQgc3BlY2lhbCBjYXNlLCBpZiBBIG9yIEMgZXhpc3QgaXQgaXMgcG9zc2libGUgYSBjb21iaW5lZCB0YWJsZSBuZWVkcyB0byBiZSBjcmVhdGVkXHJcbiAgICAgICAgICAgIGlmKGlkc1tpXSA9PT0gJ2EnIHx8IGlkc1tpXSA9PT0gJ2MnKXtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGVjdGVkUm93c1tpKzFdKXsgLy8gQ2hlY2sgdGhhdCBhIHNlbGVjdGlvbnMgaGFzIGJlZW4gbWFkZSBpZiBzbyBjcmVhdGUgdGhlIGNvbWJpbmVkIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGp1bXAgPSBpID09PSAwID8gNCA6IDM7IC8vIElmIDAgbmVlZCB0byBqdW1wIHRvIHRoZSBsb2NhdGlvbiBvZiBhYiB0YWJsZSBlbHNlIGp1bXAgdG8gbG9jYXRpb24gb2YgY2QgdGFibGVcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVGl0bGVKdW1wID0gdGFibGVzW2krMV1bMF0uc2VjdGlvbiArIFwiLCBcIiArIHRhYmxlc1tpKzFdWzBdLmNhdGVnb3J5O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZUp1bXAgPSB0YWJsZXNbaSsxXVswXS5zdWJfY2F0ZWdvcnkgPT09IG51bGwgPyB0YWJsZXNbaSsxXVswXS5kZXNjcmlwdGlvbiA6IHRhYmxlc1tpKzFdWzBdLnN1Yl9jYXRlZ29yeSArIFwiLCBcIiArIHRhYmxlc1tpKzFdWzBdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblRhYmxlc0FycmF5LnB1c2gobmV3IFNlbGVjdGVkVGFibGVEYXRhKHRhYmxlc1tpK2p1bXBdLGlkc1tpK2p1bXBdLCB0aXRsZSArIFwiLCBcIiArIHN1YnRpdGxlLCB0aXRsZUp1bXAgKyBcIiwgXCIgKyBzdWJUaXRsZUp1bXAsIHRhYmxlc1tpKzFdWzBdLnVuaXRzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tYmluZWRTZWxlY3Rpb25EYXRhQXJyYXkucHVzaChuZXcgU2VsZWN0aW9uRGF0YUNvbWJpbmVkKHRhYmxlc1tpK2p1bXBdLHRhYmxlc1tpXSx0YWJsZXNbaSsxXSwgdGl0bGUgKyBcIiBcIiArIHN1YnRpdGxlLCB0aXRsZUp1bXAgKyBcIiBcIiArIHN1YlRpdGxlSnVtcCx0YWJsZXNbaV1bMF0udW5pdHMsdGFibGVzW2krMV1bMF0udW5pdHMsaWRzW2kranVtcF0pKTsgLy8gVE9ETyBhc2sgaG93IHRvIGZvcm1hdCB0aXRsZXMgZm9yIGNvbWJpbmVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IERhdGFTdHJ1Y3R1cmUoc2VsZWN0aW9uRGF0YUFycmF5LHNlbGVjdGlvblRhYmxlc0FycmF5LGNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIHNlbGVjdGlvbnMgdGhlIHVzZXIgaGFzIG1hZGUgYXJlIGNvbXBsZXRlLiBGb3IgZXhhbXBsZSBpZiBhIHNlbGVjdGlvbiBpcyBtYWRlIGZvciBhIHNlY3Rpb24gaW4gYSByb3cgdGhlIGNhdGVnb3J5XHJcbiAqIGFsc28gaGFzIHRvIGJlIGNob3NlbiBhbG9uZyB3aXRoIGEgZGVzY3JpcHRpb24gYW5kIHN1YiBjYXRlZ29yeSBpZiBpdCBleGlzdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25zIHtPYmplY3R9IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgc2VjdGlvbnMgZm9yIGVhY2ggcm93LCBhbiBhcnJheSBvZiA0IHNlbGVjdGlvbiByb3dzXHJcbiAqIEBwYXJhbSB2YWxpZE9wdGlvbnMge09iamVjdH0gY29udGFpbnMgaWYgYSByb3cgaGFzIGEgc3ViIGNhdGVnb3J5IG9yIG5vdCBmYWxzZSBpZiBubyBzdWIgY2F0ZWdvcnlcclxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYSB2YWxpZCBzZWFyY2ggZmFsc2UgaWYgbm90XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLnZhbGlkYXRlU2VhcmNoUGFyYW1zID0gZnVuY3Rpb24gKHNlbGVjdGlvbnMsIHZhbGlkT3B0aW9ucyl7XHJcbiAgICB2YXIgcmV0dXJuVmFsID0gdHJ1ZTtcclxuICAgIHNlbGVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSwgaSkge1xyXG4gICAgICAgIGlmKGVsZW0uc3ViQ2F0ZWdvcnkgPT09IFwiXCIgJiYgdmFsaWRPcHRpb25zW2ldKXsgLy8gVmFsaWQgb3B0aW9ucyBob2xkcyBpZiB0aGVyZSBpcyBhIHBvc3NpYmxlIG9wdGlvbiB0byBjaG9vc2Vmcm9tIGluIHRoZSBzZWxlY3QgZHJvcCBkb3duXHJcbiAgICAgICAgICAgIHJldHVyblZhbCA9IGZhbHNlOyAvLyBUaGVyZSBpcyBhIHBvc3NpYmxlIHN1YiBjYXRlZ29yeSBzbyBpdCBoYXMgdG8gYmUgY2hvc2VuIGZyb21cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrcyBpZiBvbmUgb2YgdGhlIHNlbGVjdGlvbnMgaXMgZW1wdHlcclxuICAgICAgICBpZihlbGVtLnNlY3Rpb24gPT09IFwiXCIgfHwgZWxlbS5jYXRlZ29yeSA9PT0gXCJcIiB8fCBlbGVtLmRlc2NyaXB0aW9uID09PSBcIlwiKXtcclxuICAgICAgICAgICAgLy8gTm93IGNoZWNrIGlmIG9uZSBvZiB0aGUgc2VsZWN0aW9ucyBpcyBub3QgZW1wdHlcclxuICAgICAgICAgICAgaWYoZWxlbS5zZWN0aW9uICE9PSBcIlwiIHx8IGVsZW0uY2F0ZWdvcnkgIT09IFwiXCIgfHwgZWxlbS5kZXNjcmlwdGlvbiAhPT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5WYWwgPSBmYWxzZTsgLy8gQSByb3cgY2Fubm90IGhhdmUgb25lIGl0ZW0gc2VsZWN0ZWQgYW5kIGFub3RoZXIgZW1wdHlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJldHVyblZhbDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSByb3cgZnJvbSB0aGUgZGF0YWJhc2UgbWF0Y2hlcyB0aGUgc2VsZWN0aW9uIGZyb20gdGhlIHVzZXIuIFRoaXMgaXMgdXNlZCBiZWNhdXNlIHRoZSB1c2VyIGNhbiBtYWtlIGZvdXIgZGlmZmVyZW50XHJcbiAqIHNlbGVjdGlvbnMgYW5kIHRoZSBxdWVyeSBmb3IgdGhlIGRhdGFiYXNlIHJldHVucyBhbGwgdGhlIHJvd3MgZm9yIGFsbCB0aGUgc2VjdGlvbnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBEQlJvdyB7T2JqZWN0fSBBIHJvdyBmcm9tIHRoZSBkYXRhYmFzZSBjb250YWlucyBhbGwgdGhlIGZpZWxkc1xyXG4gKiBAcGFyYW0gU2VsZWN0aW9uIHtPYmplY3R9IGNvbnRhaW5zIHNlY3Rpb24sIGNhdGVnb3J5LCBzdWIgY2F0ZWdvcnkgYW5kIGRlc2NyaXB0aW9uIGZyb20gYSB1c2VyIHNlbGVjdGlvblxyXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBhIGRhdGFiYXNlIHJvdyBiZWxvbmdzIHRvIHRoZSB1c2VyIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5tYXRjaERCUm93ID0gZnVuY3Rpb24gKERCUm93LCBzZWxlY3Rpb24pIHtcclxuICBpZihEQlJvdy5zZWN0aW9uID09PSBzZWxlY3Rpb24uc2VjdGlvbiAmJiBEQlJvdy5jYXRlZ29yeSA9PT0gc2VsZWN0aW9uLmNhdGVnb3J5ICYmIERCUm93LmRlc2NyaXB0aW9uID09PSBzZWxlY3Rpb24uZGVzY3JpcHRpb24pe1xyXG4gICAgICBpZihEQlJvdy5zdWJfY2F0ZWdvcnkgIT09ICcnKXtcclxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IERCUm93LnN1Yl9jYXRlZ29yeTsgLy8gU3ViIGNhdCBjb3VsZCBiZSBudWxsIGJ1dCB3b3VsZCBzdGlsbCBtYXRjaFxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IFwiXCI7IC8vIEhhcyB0byBhbHNvIGJlIGVtcHR5XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyByb3dzIGZyb20gZGF0YWJhc2UgcXVlcnkgcmVzdWx0IGFuZCBzcGxpdHMgaW50byBjb3JyZXNwb25kaW5nIHRhYmxlLiBVc2VzIHRoZSBtYXRjaERCUm93IGZ1bmN0aW9uIHRvIG1hdGNoXHJcbiAqIGEgcm93IHRvIGEgc2VsZWN0aW9uLiBPbmNlIGZpbHRlcmVkIGNyZWF0ZXMgYW5kIG9iamVjdCBjb250YWluaW5nIGVhY2ggdGFibGUgYW5kIHRoZSByb3dzXHJcbiAqXHJcbiAqIEFsc28gY3JlYXRlcyB0aGUgY29tYmluZWQgdGFibGVzIGJ5IHVzaW5nIHRoZSBjb21iaW5lVGFibGUgZnVuY3Rpb24gYW5kIGFkZHMgdGhlIGNvbWJpbmVkIHRhYmxlcyB0byB0aGUgcmV0dXJuZWRcclxuICogb2JqZWN0LlxyXG4gKlxyXG4gKiBOb3RlIGFueSBudWxsIHZhbHVlcyBpbiB0aGUgcm93cyBhcmUgY2hhbmdlZCB0byAwXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHtPYmplY3R9IEFsbCB0aGUgcm93cyBmcm9tIHRoZSB1c2VycyBzZWxlY3Rpb25zXHJcbiAqIEBwYXJhbSBzZWFyY2gge09iamVjdH0gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZvdXIgZGlmZmVyZW50IHNlbGVjdGlvbnMgdGhlIHVzZXIgbWF5IGhhdmUgbWFkZVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHByb3BlcnR5IGZvciBlYWNoIHRhYmxlIHdoaWNoIGlzIGFuIGFycmF5IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5maWx0ZXJSb3dzVG9UYWJsZXMgPSBmdW5jdGlvbiAocm93cywgc2VhcmNoKSB7XHJcblxyXG4gIC8vIENyZWF0ZSBmb3VyIGFycmF5cyBmb3IgdGhlIGRpZmZlcmVudCByb3dzIHRoYXQgYmVsb25nIHRvIGVhY2ggb2YgdGhlIHNlYXJjaGVzXHJcbiAgdmFyIGFSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guYVRhYmxlKTt9KTtcclxuICB2YXIgYlJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5iVGFibGUpO30pO1xyXG4gIHZhciBjUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmNUYWJsZSk7fSk7XHJcbiAgdmFyIGRSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guZFRhYmxlKTt9KTtcclxuXHJcbiAgLy8gU2V0IGFsbCBudWxsIHZhbHVlcyBpbiByb3dzIHRvIDBcclxuICBhUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBiUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBjUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuXHJcblxyXG4gIHZhciB0YWJsZXMgPSBbXTtcclxuICBpZihhUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYScsIHJvd3MgOiBhUm93cywgc2VhcmNoIDogc2VhcmNoLmFUYWJsZX0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGNvbWJpbmVkIHRhYmxlcyBpZiBwb3NzaWJsZVxyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDAgJiYgYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBhYlJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGFSb3dzLGJSb3dzKTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgRGF0YVRhYmxlcyhhUm93cyxiUm93cyxjUm93cyxkUm93cywgYWJSb3dzLCBjZFJvd3MpO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIFNUQVJUIE5FV1xyXG4vKipcclxuICogVGFrZXMgcm93cyBmcm9tIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdCBhbmQgc3BsaXRzIGludG8gY29ycmVzcG9uZGluZyB0YWJsZS4gVXNlcyB0aGUgbWF0Y2hEQlJvdyBmdW5jdGlvbiB0byBtYXRjaFxyXG4gKiBhIHJvdyB0byBhIHNlbGVjdGlvbi4gT25jZSBmaWx0ZXJlZCBjcmVhdGVzIGFuZCBvYmplY3QgY29udGFpbmluZyBlYWNoIHRhYmxlIGFuZCB0aGUgcm93c1xyXG4gKlxyXG4gKiBBbHNvIGNyZWF0ZXMgdGhlIGNvbWJpbmVkIHRhYmxlcyBieSB1c2luZyB0aGUgY29tYmluZVRhYmxlIGZ1bmN0aW9uIGFuZCBhZGRzIHRoZSBjb21iaW5lZCB0YWJsZXMgdG8gdGhlIHJldHVybmVkXHJcbiAqIG9iamVjdC5cclxuICpcclxuICogTm90ZSBhbnkgbnVsbCB2YWx1ZXMgaW4gdGhlIHJvd3MgYXJlIGNoYW5nZWQgdG8gMFxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBBbGwgdGhlIHJvd3MgZnJvbSB0aGUgdXNlcnMgc2VsZWN0aW9uc1xyXG4gKiBAcGFyYW0gc2VhcmNoIHtPYmplY3R9IG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb3VyIGRpZmZlcmVudCBzZWxlY3Rpb25zIHRoZSB1c2VyIG1heSBoYXZlIG1hZGVcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBwcm9wZXJ0eSBmb3IgZWFjaCB0YWJsZSB3aGljaCBpcyBhbiBhcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIHJvd3NcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuZmlsdGVyUm93c1RvVGFibGVzQW5kQ29weSA9IGZ1bmN0aW9uIChyb3dzLCBzZWFyY2gpIHtcclxuXHJcbiAgLy8gQ3JlYXRlIGZvdXIgYXJyYXlzIGZvciB0aGUgZGlmZmVyZW50IHJvd3MgdGhhdCBiZWxvbmcgdG8gZWFjaCBvZiB0aGUgc2VhcmNoZXNcclxuICB2YXIgYVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5hVGFibGUpO30pO1xyXG4gIHZhciBiUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmJUYWJsZSk7fSk7XHJcbiAgdmFyIGNSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guY1RhYmxlKTt9KTtcclxuICB2YXIgZFJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5kVGFibGUpO30pO1xyXG5cclxuICAvLyBTZXQgYWxsIG51bGwgdmFsdWVzIGluIHJvd3MgdG8gMFxyXG4gIGFSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGJSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGNSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGRSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG5cclxuICAvLyBDcmVhdGUgY29tYmluZWQgdGFibGVzIGlmIHBvc3NpYmxlXHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCAmJiBiUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGFiUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoYVJvd3MsYlJvd3MpO1xyXG4gIH1cclxuXHJcbiAgaWYoY1Jvd3MubGVuZ3RoID4gMCAmJiBkUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGNkUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoY1Jvd3MsZFJvd3MpO1xyXG4gIH1cclxuXHJcbiAgdmFyIGNvcHkgPSB0aGlzLmNvcHlEYXRhVGFibGVzKG5ldyBEYXRhVGFibGVzKGFSb3dzLGJSb3dzLGNSb3dzLGRSb3dzLGFiUm93cyxjZFJvd3MpKTtcclxuXHJcbiAgdmFyIHRhYmxlcyA9IFtdO1xyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdhJywgcm93cyA6IGNvcHkudGFibGVBLCBzZWFyY2ggOiBzZWFyY2guYVRhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBpZihiUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYicsIHJvd3MgOiBjb3B5LnRhYmxlQiwgc2VhcmNoIDogc2VhcmNoLmJUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgaWYoY1Jvd3MubGVuZ3RoID4gMCl7XHJcbiAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2MnLCByb3dzIDogY29weS50YWJsZUMsIHNlYXJjaCA6IHNlYXJjaC5jVGFibGUsIGNvbWJpbmVkIDogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIGlmKGRSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdkJywgcm93cyA6IGNvcHkudGFibGVELCBzZWFyY2ggOiBzZWFyY2guZFRhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIC8vIENyZWF0ZSBjb21iaW5lZCB0YWJsZXMgaWYgcG9zc2libGVcclxuICBpZihhUm93cy5sZW5ndGggPiAwICYmIGJSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2FiJywgcm93cyA6IGNvcHkudGFibGVBQiwgdGFibGUxUm93cyA6IGNvcHkudGFibGVBLCB0YWJsZTJSb3dzIDogY29weS50YWJsZUIsIHNlYXJjaCA6IHNlYXJjaC5hVGFibGUsIHNlYXJjaDIgOiBzZWFyY2guYlRhYmxlLCBjb21iaW5lZCA6IHRydWV9KTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICAgICAgdGFibGVzLnB1c2goeyBpZCA6ICdjZCcsIHJvd3MgOiBjb3B5LnRhYmxlQ0QsIHRhYmxlMVJvd3MgOiBjb3B5LnRhYmxlQywgdGFibGUyUm93cyA6IGNvcHkudGFibGVELCBzZWFyY2ggOiBzZWFyY2guY1RhYmxlLCBzZWFyY2gyIDogc2VhcmNoLmRUYWJsZSwgY29tYmluZWQgOiB0cnVlfSk7XHJcbiAgfVxyXG4gIHJldHVybiB0YWJsZXM7XHJcbn1cclxuLy8gRU5EIE5FV1xyXG5cclxuXHJcblxyXG4vKipcclxuICogQ29tYmluZXMgdGhlIHR3byB0YWJsZXMgYnkgZ29pbmcgdGhyb3VnaCBlYWNoIHJvdyBhbmQgZGl2aWRpbmcgdGhlIHZhbHVlIG9mIHRhYmxlMSB0byB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBmcm9tXHJcbiAqIGEgcm93IGluIHRhYmxlIDJcclxuICpcclxuICogTm90ZSBpZiB0YWJsZSAyIHZhbHVlIGlzIDAgaXQgaXMgZGl2aWRlZCBieSAxIGluc3RlYWRcclxuICpcclxuICogQHBhcmFtIHRhYmxlMVJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBvbmUgdGFibGVcclxuICogQHBhcmFtIHRhYmxlMlJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBhbm90aGVyIHRhYmxlXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gQW4gYXJyYXkgb2Ygcm93cyBhcyBhIHJlc3VsdCBvZiBjb21iaW5pbmcgdGFibGUxIGFuZCB0YWJsZTJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY29tYmluZVRhYmxlcyA9IGZ1bmN0aW9uKHRhYmxlMVJvd3MsIHRhYmxlMlJvd3MpIHtcclxuICB2YXIgY29tYmluZWQgPSBbXTtcclxuICB2YXIgYXQgPSB0YWJsZTFSb3dzO1xyXG4gIHZhciBidCA9IHRhYmxlMlJvd3M7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBhdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBidC5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICBpZihhdFtpXS5lZGIgPT09IGJ0W2pdLmVkYiAmJiBhdFtpXS5vYnNfeXIgPT09IGJ0W2pdLm9ic195ciAmJiBhdFtpXS5kaXNjX3lyID09PSBidFtqXS5kaXNjX3lyKXtcclxuICAgICAgICAgICAgICBjb21iaW5lZC5wdXNoKHsgZGlzY195ciA6IGJ0W2pdLmRpc2NfeXIgLFxyXG4gICAgICAgICAgICAgICAgICBlZGIgOiBidFtqXS5lZGIsXHJcbiAgICAgICAgICAgICAgICAgIG9ic195ciA6IGJ0W2pdLm9ic195cixcclxuICAgICAgICAgICAgICAgICAgdmFsdWUgOiBhdFtpXS52YWx1ZSAvIChidFtqXS52YWx1ZSA9PT0gJzAnIHx8IGJ0W2pdLnZhbHVlID09PSAwID8gMSA6IGJ0W2pdLnZhbHVlKSwgLy8gRGl2aWRlIHRoZSB2YWx1ZSBpZiB2YSBpZiBkaXZpZGluZyBieSAwIG1ha2UgaXQgMVxyXG4gICAgICAgICAgICAgICAgICBzZWN0aW9uIDogYnRbal0uc2VjdGlvbiArIFwiXCIgKyBidFtqXS5kZXNjcmlwdGlvbiArIFwiIG92ZXIgXCIsIC8vIEJpdCBvZiBhIGhhY2sgYXMgZGVzY3JpcHRpb24gaXMgaW5zZXJ0ZWQgYWZ0ZXIgc2VjdGlvbiwgdGhpcyB3YXkgYm90aCB0aXRsZXMgYXJlIGFkZGVkIHRvIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIDogYXRbaV0uc2VjdGlvbiArIFwiIFwiICsgYXRbaV0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgIHVuaXRBIDogYXRbaV0udW5pdHMsXHJcbiAgICAgICAgICAgICAgICAgIHVuaXRCIDogYnRbal0udW5pdHMsXHJcbiAgICAgICAgICAgICAgICAgIHVuaXQgOiBhdFtpXS51bml0cyArXCIgLyBcIiArICBidFtqXS51bml0c1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGJyZWFrOyAvLyBjYW4gZXhpdCB0aGUgbG9vcFxyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBjb21iaW5lZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIGZyb20gdGhlIHRhYmxlIHJvd3MgdXNlZCBieSB0aGUgdmVjdG9yIGdyYXBoLiBFYWNoIGVudHJ5IGluIHRoZSBhcnJheSBjb250YWlucyB0aGUgZWRiIGFuIGFycmF5IG9mIHllYXJzIHdpdGggdGhlIHZhbHVlIGZyb21cclxuICogdGFibGUgYSBhbmQgdGFibGUgYi5cclxuICpcclxuICogQHBhcmFtIHRhYmxlMVJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBvbmUgdGFibGVcclxuICogQHBhcmFtIHRhYmxlMlJvd3Mge09iamVjdH0gQW4gYXJyYXkgb2Ygcm93cyB0aGF0IGJlbG9uZyB0byBhbm90aGVyIHRhYmxlXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIHZlY3RvciBncmFwaCBpbiB0aGUgZm9ybSBbeyBFREIsIFsgeyB5ZWFyMSwgdmFsdWVBLCB2YWx1ZUIgfSwge3llYXIyLCB2YWx1ZUEsIHZhbHVlQiB9LC4uLl19XVxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGggPSBmdW5jdGlvbih0YWJsZTFSb3dzLHRhYmxlMlJvd3MpIHtcclxuICAgIC8vIFRPRE8gd29yayBvdXQgT0JTIGFuZCBGQ0FTVFxyXG5cclxuICAgIHZhciBhdCA9IHRhYmxlMVJvd3M7XHJcbiAgICB2YXIgYnQgPSB0YWJsZTJSb3dzO1xyXG4gICAgdmFyIGVkYkRvbmUgPSBbXTsgLy8gVGhlIGVkYnMgdGhhdCBoYXZlIGJlZW4gcHJvY2Vzc2VkXHJcbiAgICB2YXIgdmVjRGF0YSA9IFtdOyAvLyBUaGUgZmluYWwgZW50cnkgaW4gdGhlIGZvcm0geyBFREIsIFsgeyB5ZWFyMSwgdmFsdWVBLCB2YWx1ZUIgfSwge3llYXIyLCB2YWx1ZUEsIHZhbHVlQiB9XX1cclxuXHJcbiAgICB2YXIgYXZhaWxhYmxlT2JzWWVhcnMgPSBbXTsgLy8gVGhlIHllYXJzIGZvciBib3RoIHRhYmxlIDEgYW5kIHRhYmxlIDJcclxuICAgIHRhYmxlMVJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93MSkge1xyXG4gICAgICAgIGlmKCFhdmFpbGFibGVPYnNZZWFycy5pbmNsdWRlcyhyb3cxLm9ic195cikpe1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2Vjb25kIHNldCBvZiByb3dzIGFsc28gY29udGFpbnMgdGhlIHllYXJcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlMlJvd3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgIGlmKHRhYmxlMlJvd3NbaV0ub2JzX3lyID09PSByb3cxLm9ic195cil7XHJcbiAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZU9ic1llYXJzLnB1c2gocm93MS5vYnNfeXIpO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IHJvd1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBFREIgaGFzIGFscmVhZHkgYmVlbiBwcm9jZXNzZWRcclxuICAgICAgICBpZiAoIWVkYkRvbmUuaW5jbHVkZXMoYXRbaV0uZWRiKSkge1xyXG5cclxuICAgICAgICAgICAgLy8gR3JhYiBhbGwgdGhlIHJvd3MgZm9yIHRoZSBjdXJyZW50IGVkYiBpbiBib3RoIHRhYmxlc1xyXG4gICAgICAgICAgICB2YXIgZWRiUm93c0F0ID0gYXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5lZGIgPT09IGF0W2ldLmVkYlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGVkYlJvd3NCdCA9IGJ0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZWRiID09PSBhdFtpXS5lZGJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGVkYkRvbmUucHVzaChhdFtpXS5lZGIpOyAvLyBBZGQgeWVhciB0byBkb25lIHNvIGl0IGlzIG5vdCByZXBlYXRlZFxyXG4gICAgICAgICAgICB2YXIgeWVhcnNEb25lID0gW107IC8vIFByb2Nlc3NlZCB5ZWFyc1xyXG4gICAgICAgICAgICB2YXIgZWRiWWVhckFycmF5ID0gW107XHJcblxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcm93cyBpbiBlZGJcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlZGJSb3dzQXQubGVuZ3RoOyBqKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpdCBoYXMgbm90IGJlZW4gcHJvY2Vzc2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoIXllYXJzRG9uZS5pbmNsdWRlcyhlZGJSb3dzQXRbal0uZGlzY195cikgJiYgYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMoZWRiUm93c0F0W2pdLmRpc2NfeXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVhcnNEb25lLnB1c2goZWRiUm93c0F0W2pdLmRpc2NfeXIpOyAvLyBBZGQgdG8gcHJvY2Vzc2VkXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgaGF2ZSB0byByb3dzIGZvciBhIHBhcnRpY3VsYXIgeWVhciBmb3IgYSBwYXJ0aWN1bGFyIGVkYiBub3cgd2UgY2FuIGNyZWF0ZSB0aGUgZW50cnlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhclJvd3NBdCA9IGVkYlJvd3NBdC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGlzY195ciA9PT0gZWRiUm93c0F0W2pdLmRpc2NfeXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeWVhclJvd3NCdCA9IGVkYlJvd3NCdC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuZGlzY195ciA9PT0gZWRiUm93c0F0W2pdLmRpc2NfeXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoISh5ZWFyUm93c0F0Lmxlbmd0aCA9PSB5ZWFyUm93c0J0Lmxlbmd0aCApKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB5ZWFyUm93c0F0Lmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkYlllYXJBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHllYXI6ICt5ZWFyUm93c0F0W2tdLmRpc2NfeXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUE6ICt5ZWFyUm93c0F0W2tdLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVCOiAreWVhclJvd3NCdFtrXS52YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWRiWWVhckFycmF5LnNvcnQoZnVuY3Rpb24gKGEsYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEueWVhciAtIGIueWVhcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZlY0RhdGEucHVzaCh7ZWRiOiBhdFtpXS5lZGIsIHllYXJzOiBlZGJZZWFyQXJyYXl9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmVjRGF0YTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIGZyb20gdGhlIHRhYmxlIHJvd3Mgd2hpY2ggaXMgdGhlbiB1c2VkIGJ5IHRoZSBib3ggcGxvdC5cclxuICpcclxuICogQHBhcmFtIHRhYmxlUm93cyB7T2JqZWN0fSBUaGUgcm93cyBmcm9tIHRoZSB0YWJsZSB0aGUgYm94IHBsb3QgaXMgdmlzdWFsaXNpbmdcclxuICogQHJldHVybnMge09qYmVjdFtdfSBEYXRhIGZvciB0aGUgYm94IHBsb3RcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlRGF0YUZvckJveFBsb3QgPSBmdW5jdGlvbiAodGFibGVSb3dzKXtcclxuICAgIHZhciB5ZWFyc0RvbmUgPSBbXTsgLy8gWWVhcnMgcHJvY2Vzc2VkXHJcbiAgICB2YXIgeWVhcnMgPSBbXTsgLy8gV2lsbCBjb250YWluIGFuIGFycmF5IG9mIHJvd3MgZm9yIGVhY2ggeWVhclxyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZVJvd3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKCF5ZWFyc0RvbmUuaW5jbHVkZXModGFibGVSb3dzW2ldLm9ic195cikpe1xyXG4gICAgICAgICAgICB5ZWFycy5wdXNoKHRhYmxlUm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUub2JzX3lyID09PSB0YWJsZVJvd3NbaV0ub2JzX3lyfSkpO1xyXG4gICAgICAgICAgICB5ZWFyc0RvbmUucHVzaCh0YWJsZVJvd3NbaV0ub2JzX3lyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGEgPSBbXTsgLy8gRWFjaCBlbnRyeSB3aWxsIGJlIGFuIGFycmF5IHdoZXJlIGFycmF5WzBdID0geWVhciBhbmQgYXJyYXlbMV0gPSB2YWx1ZXMgZm9yIHRoYXQgeWVhclxyXG4gICAgdmFyIHNWYWx1ZXMgPSBbXTsgLy8gRGF0YSBmb3IgdGhlIHNjYXR0ZXIgcGxvdCBvbiB0b3Agb2YgYm94IHBsb3RcclxuICAgIHZhciBtaW4gPSBJbmZpbml0eTtcclxuICAgIHZhciBtYXggPSAtSW5maW5pdHk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHllYXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICB2YXIgZW50cnkgPSBbXTtcclxuICAgICAgICBlbnRyeVswXSA9IFwiXCIreWVhcnNbaV1bMF0ub2JzX3lyOyAvLyBOYW1lIG9mIHRoZSBib3ggcGxvdCBjb252ZXJ0IHllYXIgdG8gc3RyaW5nXHJcbiAgICAgICAgdmFyIHllYXIgPSBcIlwiK3llYXJzW2ldWzBdLm9ic195cjtcclxuICAgICAgICB2YXIgdmFsdWVzID0gW107XHJcblxyXG4gICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCB5ZWFyc1tpXS5sZW5ndGg7IGorKyl7XHJcbiAgICAgICAgICAgIHZhciBjdXJWYWx1ZSA9ICt5ZWFyc1tpXVtqXS52YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGVkYiA9IHllYXJzW2ldW2pdLmVkYjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJWYWx1ZSA+IG1heCl7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBjdXJWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY3VyVmFsdWUgPCBtaW4pe1xyXG4gICAgICAgICAgICAgICAgbWluID0gY3VyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFsdWVzLnB1c2goY3VyVmFsdWUpO1xyXG4gICAgICAgICAgICBzVmFsdWVzLnB1c2goe3llYXIgOiB5ZWFyICxlZGIgOiBlZGIsIHZhbHVlIDogY3VyVmFsdWV9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW50cnlbMV0gPSB2YWx1ZXM7XHJcbiAgICAgICAgZGF0YS5wdXNoKGVudHJ5KTtcclxuICAgIH1cclxuICAgIGRhdGEuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgIHJldHVybiBhWzBdIC0gYlswXTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHttaW4gOiBtaW4sIG1heCA6IG1heCwgZGF0YSA6IGRhdGEsIHNjYXR0ZXJEYXRhIDogc1ZhbHVlc307XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHdoaWNoIGlzIHRoZW4gdXNlZCBieSB0aGUgZ3JvdXBlZCBiYXIgZ3JhcGguXHJcbiAqXHJcbiAqIEBwYXJhbSB0b3dzIHtPYmplY3R9IFRoZSByb3dzIGZyb20gdGhlIHRhYmxlIHRoZSBiYXIgZ3JhcGggaXMgdmlzdWFsaXNpbmdcclxuICogQHJldHVybnMge09qYmVjdFtdfSBEYXRhIGZvciB0aGUgYmFyIGdyYXBoXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGggPSBmdW5jdGlvbihyb3dzKXtcclxuICAgIHZhciBhdmFpbGFibGVPYnNZZWFycyA9IFtdO1xyXG5cclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIGlmKCFhdmFpbGFibGVPYnNZZWFycy5pbmNsdWRlcyhlbGVtLm9ic195cikpYXZhaWxhYmxlT2JzWWVhcnMucHVzaChlbGVtLm9ic195cik7XHJcbiAgICB9KTtcclxuICAgIGF2YWlsYWJsZU9ic1llYXJzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gK2EgLSArYjtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBkYXRhID0gW107XHJcbiAgICB2YXIgZWRiRG9uZSA9IFtdO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZighZWRiRG9uZS5pbmNsdWRlcyhyb3dzW2ldLmVkYikpe1xyXG4gICAgICAgICAgICBlZGJEb25lLnB1c2gocm93c1tpXS5lZGIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0geyBcImVkYlwiIDogcm93c1tpXS5lZGJ9O1xyXG5cclxuICAgICAgICAgICAgZW50cnlbcm93c1tpXS5vYnNfeXJdID0gK3Jvd3NbaV0udmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGEucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YVtqXS5lZGIgPT09IHJvd3NbaV0uZWRiKXtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhW2pdW3Jvd3NbaV0ub2JzX3lyXSA9ICtyb3dzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtkYXRhIDogZGF0YSwga2V5cyA6IGF2YWlsYWJsZU9ic1llYXJzfTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTb3J0cyB0aGUgc2VjdGlvbnNcclxuICpcclxuICogQHBhcmFtIHJvd3Mge09iamVjdH0gZGF0YSBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgc2VjdGlvbnMgYXJyYXlcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuc29ydFNlY3Rpb25zID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gIGRhdGEuc2VjdGlvbnMuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAvLyBGaXJzdCBjaGVjayBzaW1wbGUgY2FzZSBvZiBudW1iZXIgZGlmZmVyZW5jZVxyXG4gICAgICB2YXIgaSA9IDA7XHJcbiAgICAgIHdoaWxlKCFpc05hTihhLmNoYXJBdChpKSkpe2krK31cclxuICAgICAgdmFyIG51bWJlckEgPSBhLnN1YnN0cmluZygwLGkpOyAvLyBHZXRzIHRoZSBudW1iZXIgZnJvbSB0aGUgc2VjdGlvblxyXG5cclxuICAgICAgaSA9IDA7XHJcbiAgICAgIHdoaWxlKCFpc05hTihiLmNoYXJBdChpKSkpe2krK31cclxuICAgICAgdmFyIG51bWJlckIgPSBiLnN1YnN0cmluZygwLGkpO1xyXG5cclxuICAgICAgaWYobnVtYmVyQSAhPT0gbnVtYmVyQikge1xyXG4gICAgICAgICAgcmV0dXJuIG51bWJlckEgLSBudW1iZXJCO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbYSxiXS5zb3J0KClbMF0gPT09IGEgPyAtMSA6IDE7IC8vIFNvcnQgdHdvIG5hbWVzIGFuZCByZXR1cm4gdGhlIGZpcnN0XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQXBwbGllcyBhIENQSSBjb25zdW1lciBwcmljZSBpbmRleCBwZXJjZW50YWdlIHRvIGVhY2ggb2YgdGhlIHJvd3MgdmFsdWVzLiBUaGUgY3BpVmFsdWVzIGNvbnRhaW5zIGEgdmFsdWUgZm9yIGVhY2ggb2YgdGhlIHllYXJzLlxyXG4gKlxyXG4gKiBUaGUgQ1BJIGlzIGFwcGxvZWQgYnkgc3RhcnRpbmcgYXQgdGhlIHllYXIgdGhlIHZhbHVlIHdhcyBvYnNlcnZlZCBhdCBjb21wb3VuZGluZyB0aGUgY3BpIHZhbHVlcyB1bnRpbCB0aGUgbGFzdCB5ZWFyIGluIHRoZVxyXG4gKiBjcGlWYWx1ZXMgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBUaGUgcm93cyBjcGkgd2lsbCBiZSBhcHBsaWVkIHRvXHJcbiAqIEBwYXJhbSBjcGkgdmFsdWVzIHtPYmplY3R9IFRoZSB2YWx1ZXMgdG8gYWRkIHRvIGVhY2ggeWVhclxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5hcHBseUNQSVRvVGFibGVSb3dzID0gZnVuY3Rpb24ocm93cywgY3BpVmFsdWVzKXtcclxuICAgIC8vIEZpbmQgdGhlIG1pbiBhbmQgbWF4IHllYXIgZnJvbSB0aGUgZGF0YVxyXG4gICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW0sIGluZGV4KXsgLy8gR3JhYiBldmVyeSBSb3dcclxuICAgICAgICB2YXIgeWVhciA9IHJvd3NbaW5kZXhdLm9ic195cjsgLy8gR3JhYiB0aGUgeWVhciBvZiB0aGUgY2VsbCBieSBjaGVja2luZyB0aGUgY2xhc3NcclxuICAgICAgICB2YXIgdmFsdWVPZkNlbGwgPSByb3dzW2luZGV4XS52YWx1ZTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwaVZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKHllYXIgPD0gY3BpVmFsdWVzW2ldLnllYXIpe1xyXG4gICAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSB2YWx1ZU9mQ2VsbCAqICgxICsgKGNwaVZhbHVlc1tpXS52YWx1ZSAvIDEwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvd3NbaW5kZXhdLnZhbHVlID0gdmFsdWVPZkNlbGw7IC8vIENQSSBBcHBsaWVkIHZhbHVlXHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGluIGEgc2VjdGlvbiwgY2F0ZWdvcnksIHN1YiBjYXRlZ29yeSwgb3IgZGVzY3JpcHRpb24gdG8gYSByb3cgaW4gc2VsZWN0aW9ucy4gVGhlIGlkIGlzIHVzZWQgdG9cclxuICogd29yayBvdXQgd2hpY2ggcm93IGl0IGdvZXMgaW4uIFRoZSB0eXBlIGlzIHVzZWQgZm9yIHdvcmtpbmcgb3V0IHdoaWNoIHByb3BlcnR5IHRvIHNldFxyXG4gKlxyXG4gKiBAcGFyYW0gaWQge051bWJlcn0gdGhlIGlkIG9mIHRoZSBzZWxlY3Rpb24gcm93XHJcbiAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9IHRoZSB0eXBlIG9mIHNlbGVjdGlvbiBzZWN0aW9uLCBjYXRlZ29yeSBldGMuXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25zIHtPYmplY3RbXX0gVGhlIGFycmF5IG9mIHJvd3MgdG8gc2V0IHRoZSBzZWxlY3Rpb24gaW5cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuYWRkVG9TZWxlY3Rpb24gPSBmdW5jdGlvbiAoaWQsdHlwZSxkYXRhLHNlbGVjdGlvbnMpIHtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZWN0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoc2VsZWN0aW9uc1tpXS5pZCtcIlwiID09PSBpZCtcIlwiKXsgLy8gQ29udmVydCB0aGVtIGJvdGggdG8gc3RyaW5nc1xyXG4gICAgICAgICAgICBpZih0eXBlID09PSBcInNlY3Rpb25cIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLnNlY3Rpb24gPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJjYXRlZ29yeVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uY2F0ZWdvcnkgPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJzdWJjYXRlZ29yeVwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uc3ViQ2F0ZWdvcnkgPSBkYXRhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gXCJkZXNjcmlwdGlvblwiKXtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbnNbaV0uZGVzY3JpcHRpb24gPSBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFdvcmtzIG91dCB0aGUgdG90YWwgZm9yIGVhY2ggcmVnaW9uIGJhc2VkIG9uIHRoZSBlZGIgZm9yIGVhY2ggcm93IGFuZCB3aGljaCByZWdpb24gaXQgaXMgcGFydCBvZlxyXG4gKlxyXG4gKiBAcGFyYW0gdGFibGVSb3dzIHtPYmplY3RbXX0gdGhlIHJvd3MgZnJvbSBhIHRhYmxlXHJcbiAqIEBwYXJhbSByZWdpb25zIHtPYmplY3RbXX0gQW4gYXJyYXkgb2YgcmVnaW9ucyBhbmQgd2hpY2ggZWRicyBtYWtlIHVwIHRoYXQgcmVnaW9uXHJcbiAqIEBwYXJhbSBhdmFpbGFibGVZZWFycyB7T2JqZWN0W119IFRoZSB5ZWFycyB0aGF0IHRvdGFscyBzaG91bGQgYmUgY3JlYXRlZCBmb3JcclxuICogQHJldHVybnMge09iamVjdH0gY29udGFpbnMgZWFjaCByZWdpb24gYW5kIGFuIGFycmF5IG9mIHllYXJzIGFsb25nIHdpdGggdG90YWxzIGZvciB0aGF0IHllYXJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlVGFibGVUb3RhbHMgPSBmdW5jdGlvbiAodGFibGVSb3dzLCByZWdpb25zLCBhdmFpbGFibGVPYnNZZWFycykge1xyXG4gICAgdmFyIHJlZ2lvblN0cmluZ3MgPSBbXCJuXCIsXCJ1bmlcIixcImVuaVwiLCBcInN3bmlcIiwgXCJzXCIsIFwidXNpXCIsIFwibHNpXCJdOyAvLyBBbGwgdGhlIHJlZ2lvbnNcclxuICAgIHZhciB0b3RhbHMgPSB7fTsgLy8gcmVnIDogXCJcIiAsIHllYXJzIDogW11cclxuXHJcbiAgICAvLyBHbyB0aHJvdWdoIGV2ZXJ5IHllYXJcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhdmFpbGFibGVPYnNZZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgLy8gR2V0IHRoZSByb3dzIGZvciB0aGUgY3VycmVudCB5ZWFyXHJcbiAgICAgICAgdGFibGVSb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5vYnNfeXIgPT09IGF2YWlsYWJsZU9ic1llYXJzW2ldO30pLmZvckVhY2goZnVuY3Rpb24ocm93KXtcclxuXHJcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggZWFjaCBvZiB0aGUgcmVnaW9uc1xyXG4gICAgICAgICAgICByZWdpb25TdHJpbmdzLmZvckVhY2goZnVuY3Rpb24ocmVnaW9uU3RyaW5nKXtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHJvdyBlZGIgaXMgaW5zaWRlIHRoZSBjdXJyZW50IHJlcWlvbiBncmFiIHRoZSB2YWx1ZSBmcm9tIHRoZSByb3cgYW5kIGFkZCBpdCBpbiB0aGUgYXJyYXkgZm9yIHRoZSBjdXJyZW50IHllYXJcclxuICAgICAgICAgICAgICAgIGlmKHJlZ2lvbnNbcmVnaW9uU3RyaW5nXS5pbmNsdWRlcyhyb3cuZWRiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodG90YWxzW3JlZ2lvblN0cmluZ10gPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddID0gWytyb3cudmFsdWVdOyAvLyBGaXJzdCB0aW1lIHRoaXMgcmVxaW9uIGhhcyBiZWVuIGZvdW5kIHNvIGhhdmUgdG8gY3JlYXRlIHRoZSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkgPT09IHRvdGFsc1tyZWdpb25TdHJpbmddLmxlbmd0aCl7IC8vIFRoaXMgbWVhbnMgd2UgaGF2ZSBtb3ZlZCBvbnRvIGEgbmV3IHllYXIgc28gaGF2ZSB0byBjcmVhdGUgYSBuZXcgc2xvdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxzW3JlZ2lvblN0cmluZ10ucHVzaCgrcm93LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddIFtpXSArPSArICgrcm93LnZhbHVlKTsgLy8gU3RpbGwgaW4gdGhlIGZpcnN0IHllYXIgd2l0aCBhIGRpZmZlcmVudCBlZGIgaW4gdGhlIHNhbWUgcmVnaW9uIHNvIGp1c3QgYWRkIHRoZSB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB2YXIgbnogPSBbXTsgLy8gVG8gZmluZCB0aGUgdG90YWxzIG9mIE5aIGFkZCBub3J0aCBhbmQgc291dGggdGVnZXRoZXJcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhdmFpbGFibGVPYnNZZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgbnoucHVzaCh0b3RhbHNbXCJuXCJdW2ldICsgdG90YWxzW1wic1wiXVtpXSk7XHJcbiAgICB9XHJcbiAgICB0b3RhbHNbXCJuelwiXSA9IG56OyAvLyBBZGQgdGhlIE5aIHByb3BlcnR5IHRvIHRvdGFsc1xyXG4gICAgcmV0dXJuIHRvdGFscztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgZGF0YSBzdHJ1Y3R1cmUgb2JqZWN0XHJcbiAqXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25zRGF0YSB7T2JqZWN0W119IFVzZWQgZm9yIGNyZWF0aW5nIHJlZ3VsYXIgZ3JhcGhzXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb25UYWJsZXtPYmplY3RbXX0gVXNlZCBmb3IgY3JlYXRpbmcgdGhlIGh0bWwgdGFibGVzXHJcbiAqIEBwYXJhbSBjb21iaW5lRGF0YSB7T2JqZWN0W119IFVzZWQgZm9yIHRoZSB2ZWN0b3IgZ3JhcGhzXHJcbiAqICovXHJcbmZ1bmN0aW9uIERhdGFTdHJ1Y3R1cmUoc2VsZWN0aW9uRGF0YSwgc2VsZWN0aW9uVGFibGUsIGNvbWJpbmVEYXRhKXtcclxuICAgIHRoaXMuc2VsZWN0aW9uRGF0YSA9IHNlbGVjdGlvbkRhdGE7IC8vIENvbnRhaW5zIHRoZSByb3dzLCBpZCwgdGl0bGUsIHN1YnRpdGxlIGFtZCBpbml0IGZvciBlYWNoIHNlbGVjdGlvblxyXG4gICAgdGhpcy5zZWxlY3Rpb25UYWJsZSA9IHNlbGVjdGlvblRhYmxlOyAvLyBDb250YWlucyB0aGUgcm93cywgaWQsIHRpdGxlLCBzdWJ0aXRsZSBhbWQgaW5pdCBmb3IgZWFjaCB0YWJsZVxyXG4gICAgdGhpcy5jb21iaW5lRGF0YSA9IGNvbWJpbmVEYXRhOyAvLyBDb250YWlucyBjb21iaW5lZCByb3dzIGFsb25nIHdpdGggdGl0bGVzIGFuZCB1bml0c1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE9iamVjdCBmb3IgaG9sZGluZyB0aGUgdXNlcnMgc2VsZWN0aW9ucyBlYWNoIHByb3BlcnR5IGNvbnRhaW5zIGFcclxuICogc2VjdGlvbiwgY2F0ZWdvcnksIHN1YiBjYXRlZ29yeSBhbmQgZGVzY3JpcHRpb24uIFRoZXkgY2FuIGJlIGVtcHR5IHN0cmluZ3NcclxuICpcclxuICogQHBhcmFtIGEge09iamVjdH0gQSBzZWxlY3Rpb25cclxuICogQHBhcmFtIGIge09iamVjdH0gQiBzZWxlY3Rpb25cclxuICogQHBhcmFtIGMge09iamVjdH0gQyBzZWxlY3Rpb25cclxuICogQHBhcmFtIGQge09iamVjdH0gRCBzZWxlY3Rpb25cclxuICogKi9cclxuZnVuY3Rpb24gU2VsZWN0aW9uKGEsYixjLGQpe1xyXG4gICAgdGhpcy5hVGFibGUgPSBhO1xyXG4gICAgdGhpcy5iVGFibGUgPSBiO1xyXG4gICAgdGhpcy5jVGFibGUgPSBjO1xyXG4gICAgdGhpcy5kVGFibGUgPSBkO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE9iamVjdCBmb3IgaG9sZGluZyB0aGUgcm93cyB0aGF0IGJlbG9uZyB0byBlYWNoIG9mIHRoZSB0YWJsZSBzZWxlY3Rpb25zLlxyXG4gKiBBbHNvIGNvbnRhaW5zIHRoZSBjb21iaW5lZCB0YWJsZXMuIEVhY2ggb2YgdGhlIGFycmF5cyBjb3VsZCBiZSBlbXB0eSBpZiBub1xyXG4gKiBzZWxlY3Rpb24gd2FzIG1hZGUgZm9yIGEgdGFibGVcclxuICpcclxuICogQHBhcmFtIHRhYmxlQSB7T2JqZWN0W119IEEgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUIge09iamVjdFtdfSBCIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVDIHtPYmplY3RbXX0gQyBzZWxlY3Rpb25cclxuICogQHBhcmFtIHRhYmxlRCB7T2JqZWN0W119IEQgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUFCIHtPYmplY3RbXX0gQUIgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUNEIHtPYmplY3RbXX0gQ0Qgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIERhdGFUYWJsZXModGFibGVBLHRhYmxlQix0YWJsZUMsdGFibGVELHRhYmxlQUIsdGFibGVDRCl7XHJcbiAgICB0aGlzLnRhYmxlQSA9IHRhYmxlQTtcclxuICAgIHRoaXMudGFibGVCID0gdGFibGVCO1xyXG4gICAgdGhpcy50YWJsZUMgPSB0YWJsZUM7XHJcbiAgICB0aGlzLnRhYmxlRCA9IHRhYmxlRDtcclxuICAgIHRoaXMudGFibGVBQiA9IHRhYmxlQUI7XHJcbiAgICB0aGlzLnRhYmxlQ0QgPSB0YWJsZUNEO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIHRoZSBzZWN0aW9ucyBhbmRcclxuICogdGhlIHNoYXJlZCB0aXRsZSBzdWJ0aXRsZSBhbmQgdW5pdC5cclxuICogKi9cclxuZnVuY3Rpb24gU2VsZWN0aW9uRGF0YShyb3dzLHRpdGxlLHN1YlRpdGxlLHVuaXQsaWQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuc3ViVGl0bGUgPSBzdWJUaXRsZTtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudW5pdCA9IHVuaXQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ29udGFpbnMgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIHNlbGVjdGlvbi4gVGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gYm90aCB0YWJsZXMgYW5kIHRoZSBjb21iaW5lZCByb3dzXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbkRhdGFDb21iaW5lZChyb3dzLCB0YWJsZTFSb3dzLHRhYmxlMlJvd3MsdGl0bGUxLHRpdGxlMix1bml0MSx1bml0MixpZCl7XHJcbiAgICB0aGlzLnJvd3MgPSByb3dzOyAvLyBDb21iaW5lZCByb3dzXHJcbiAgICB0aGlzLnRpdGxlMSA9IHRpdGxlMTtcclxuICAgIHRoaXMudGl0bGUyID0gdGl0bGUyO1xyXG4gICAgdGhpcy51bml0MSA9IHVuaXQxO1xyXG4gICAgdGhpcy51bml0MiA9IHVuaXQyO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy50YWJsZTFSb3dzID0gdGFibGUxUm93cztcclxuICAgIHRoaXMudGFibGUyUm93cyA9IHRhYmxlMlJvd3M7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ29udGFpbnMgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIHNlbGVjdGlvbi4gVGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gdGhlIHNlY3Rpb25zIGFuZFxyXG4gKiB0aGUgc2hhcmVkIHRpdGxlIHN1YnRpdGxlIGFuZCB1bml0LiBVc2VkIHRvIGdlbmVyYXRlIGh0bWwgdGFibGVzXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGVkVGFibGVEYXRhKHJvd3MsaWQsIHRpdGxlLCBzdWJUaXRsZSwgdW5pdCl7XHJcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5zdWJUaXRsZSA9IHN1YlRpdGxlO1xyXG4gICAgdGhpcy51bml0ID0gdW5pdDtcclxufVxyXG4iLCIvLyBERVBFTkRFTkNJRVMgOiBEYXRhUHJvY2Vzc29yLCBHcm91cGVkQmFyR3JhcGgsIGJveFBsb3RcclxuXHJcblxyXG4vKipcclxuICogR3JhcGggb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGdyYXBocyBmb3Igc2luZ2xlIHNlbGVjdGlvbnNcclxuICpcclxuICogQGlkIHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqIEByb3dzIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBzZWxlY3Rpb25cclxuICogQHNlbGVjdGlvbiB7T2JqZWN0fSB0aGUgZGV0YWlscyBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIEdyYXBoKGlkLHJvd3Msc2VsZWN0aW9uKSB7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuZ3JvdXBlZElEID0gJyNncm91cGVkLWJhci0nK2lkO1xyXG4gIHRoaXMuYm94SUQgPSAnI2JveHBsb3QtJytpZDtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xyXG4gIHRoaXMudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgdGhpcy5zdWJUaXRsZSA9IHRoaXMuZ2V0U3ViVGl0bGUoKTtcclxuICB0aGlzLnVuaXQgPSB0aGlzLmdldFVuaXQoKTtcclxuXHJcbiAgLy8gQ2FjaGUgZG9tIGVsZW1lbnRzXHJcbiAgdGhpcy4kdGl0bGVCYXIgPSAkKCcjdGl0bGUtYmFyLScraWQpO1xyXG4gIHRoaXMuJHRpdGxlQm94ID0gJCgnI3RpdGxlLWJveC0nK2lkKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIHRoZSBvYmplY3QgaXMgY29tYmluZWRcclxuICpcclxuICogQHJldHVybiB7Qm9vbGVhbn0gY29tYmluZWQgb3Igbm90XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5pc0NvbWJpbmVkID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IG9mIHRoZSBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRVbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3NbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIGdyYXBoXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGlkXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRJRCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5pZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLmRlc2NyaXB0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24uc3ViQ2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgc3ViIHRpdGxlIGZvciB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHN1YiB0aXRsZVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0U3ViVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLnNlY3Rpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbi5jYXRlZ29yeTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB1bml0IGZvciB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIHVuaXRcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFVuaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93c1swXS51bml0cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnRzIHRoZSB0aXRsZXMgZm9yIHRoZSBncmFwaHMgaW50byB0aGUgRE9NXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5pbnNlcnRUaXRsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKCc8aDMgY2xhc3M9XCJ0aXRsZVwiPicrdGhpcy50aXRsZSsnPC9oMz4nKS5hcHBlbmQoJzxoNCBjbGFzcz1cInN1YlRpdGxlXCI+Jyt0aGlzLnN1YlRpdGxlKyc8L2g0PicpO1xyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZCgnPGgzIGNsYXNzPVwidGl0bGVcIj4nK3RoaXMudGl0bGUrJzwvaDM+JykuYXBwZW5kKCc8aDQgY2xhc3M9XCJzdWJUaXRsZVwiPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSBkYXRhIHVzaW5nIGRhdGEgcHJvY2Vzc29yIGFuZCBpbnNlcnRzIGludG8gRE9NXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBkYXRhIGZvciB0aGUgZ3JvdXBlZCBncmFwaCBhbmQgZGlzcGxheSBpdFxyXG4gICAgdmFyIGdyb3VwZWREYXRhID0gZHAuY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCh0aGlzLnJvd3MpO1xyXG4gICAgR3JvdXBlZEJhck1vZHVsZS5jcmVhdGVkR3JvdXBlZEJhckdyYXBoKGdyb3VwZWREYXRhLmRhdGEsZ3JvdXBlZERhdGEua2V5cyx0aGlzLnVuaXQsdGhpcy5ncm91cGVkSUQpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZGF0YSBmb3IgYm94cGxvdCBhbmQgc2hvdyB0aGUgZ3JhcGhcclxuICAgIHZhciBib3hEYXRhID0gZHAuY3JlYXRlRGF0YUZvckJveFBsb3QodGhpcy5yb3dzKTtcclxuICAgIEJveFBsb3RNb2R1bGUuY3JlYXRlQm94UGxvdChib3hEYXRhLCB0aGlzLmJveElELCB0aGlzLnVuaXQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFRha2VzIHRoZSBuZXcgcm93cyBhbmQgdXBkYXRlcyB0aGUgZ3JhcGhzXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0W119IHJvd3MgdGhlIG5ldyByb3dzXHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocm93cykge1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMuY3JlYXRlKCk7XHJcbn1cclxuIiwiLy8gQ29udGFpbnMgaW5mb3JtYXRpb24gZm9yIGEgcm93IG9mIHNlbGVjdGlvbnNcclxuLy8gUmVjaWV2ZXMgZXZlbnRzIGZyb20gc2VsZWN0b3JzIHdoZW4gdGhlIHNlbGVjdGlvbiBjaGFuZ2VzIGFuZCB1cGRhdGVzIGl0J3Mgc3RhdGVcclxuLy8gU2VuZCBvdXQgZXZlbnRzIHdoZW4gc2VsZWN0b3JzIGNoYW5nZSBhbmQgb3RoZXIgc2VsZWN0b3JzIHNob3VsZCBiZSBub3RpZmllZFxyXG5mdW5jdGlvbiBTZWxlY3Rpb25Sb3dDb250cm9sbGVyKGlkKXtcclxuICAgIHRoaXMuaWROdW1iID0gaWQ7XHJcbiAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSB7IGlkIDogaWQsIHNlY3Rpb24gOiBcIlwiLCBjYXRlZ29yeSA6IFwiXCIsIHN1YkNhdGVnb3J5IDogXCJcIiwgZGVzY3JpcHRpb24gOiBcIlwiIH07XHJcblxyXG4gICAgdGhpcy5zZXRJbml0aWFsU3RhdGUgPSBmdW5jdGlvbiAocm93RGF0YSkge1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSByb3dEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucyA9IHsgaWQgOiB0aGlzLmlkLCBzZWN0aW9uIDogXCJcIiwgY2F0ZWdvcnkgOiBcIlwiLCBzdWJDYXRlZ29yeSA6IFwiXCIsIGRlc2NyaXB0aW9uIDogXCJcIiB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudmFsaWRTZWxlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmKHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uICE9PSBcIlwiICYmIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9PT0gXCJcIil7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgICB2YXIgdXJsU2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIChlLmlkID09PSBpZCl9KVswXTtcclxuXHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uID0gdXJsU2VsZWN0aW9uLnNlY3Rpb247XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IHVybFNlbGVjdGlvbi5jYXRlZ29yeTtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gdXJsU2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSB1cmxTZWxlY3Rpb24uZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTZWN0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmNhdGVnb3J5ID0gXCJcIjtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSBcIlwiO1xyXG4gICAgICAgICAgLy8gU2V0IHRoZSBuZXcgc2VsZWN0ZWQgc2VjdGlvblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnNlY3Rpb24gPSB1cGRhdGUuc2VjdGlvbjtcclxuICAgICAgICAgIGV2ZW50cy5lbWl0KFwiTkVXX1NFQ1RJT05cIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZUNhdGVnb3J5ID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gXCJcIjtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmNhdGVnb3J5ID0gdXBkYXRlLmNhdGVnb3J5O1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfQ0FURUdPUllcIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZVN1YkNhdGVnb3J5ID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gXCJcIjtcclxuXHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc3ViQ2F0ZWdvcnkgPSB1cGRhdGUuc3ViQ2F0ZWdvcnk7XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19TVUJDQVRFR09SWVwiLCB7aWQgOiB0aGlzLmlkTnVtYiwgc2VsZWN0aW9uIDogdGhpcy5yb3dTZWxlY3Rpb25zfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICAgICAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSB1cGRhdGUuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19ERVNDUklQVElPTlwiLCB7aWQgOiB0aGlzLmlkTnVtYiwgc2VsZWN0aW9uIDogdGhpcy5yb3dTZWxlY3Rpb25zfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2V0Um93U2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvd1NlbGVjdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgYW55IG9mIHRoZXNlIGV2ZW50cyBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb25cclxuICAgIGV2ZW50cy5vbihcIlNFQ1RJT05fQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZVNlY3Rpb24uYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJDQVRFR09SWV9DSEFOR0VEXCIsIHRoaXMudXBkYXRlQ2F0ZWdvcnkuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHRoaXMudXBkYXRlU3ViQ2F0ZWdvcnkuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJERVNDUklQVElPTl9DSEFOR0VEXCIsIHRoaXMudXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzKSk7XHJcbiAgICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG4iLCIvLyBSZWxpZXMgb25cclxuLy8gSlFVRVJZXHJcbi8vIERhdGFCYXNlXHJcbi8vIEV2ZW50c1xyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTZWN0aW9uIGRyb3Bkb3duIG1lbnVcclxuZnVuY3Rpb24gU2VjdGlvblNlbGVjdChpZE51bWIpe1xyXG4gICAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgICB0aGlzLmlkID0gXCIjc2VjdGlvbi1zZWxlY3RcIitpZE51bWI7IC8vIFRoZSBlbGVtZW50IGlkXHJcbiAgICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpOyAvLyBTZWxlY3RldHMgYW5kIGNhY2hlcyB0aGUgZWxlbWVudFxyXG5cclxuICAgIC8vIFJlc3BvaW5kcyB0byBhbiBldmVudCB0aGF0IGluZGljYXRlcyBkYXRhIGlzIGF2YWxhYmxlIGZvciB0aGUgZHJvcCBkb3duXHJcbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcblxyXG4gICAgICAvLyBHcmFiIHNlY3Rpb24gZnJvbSBEQiBhbmQgYWRkIHRvIGRyb3Bkb3duXHJcbiAgICAgIERhdGFiYXNlLmdldFNlY3Rpb25zRnJvbURhdGFiYXNlKGZ1bmN0aW9uKHNlY3Rpb25zKXtcclxuICAgICAgICBkcC5zb3J0U2VjdGlvbnMoe3NlY3Rpb25zIDogc2VjdGlvbnN9KTtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsc2VjdGlvbnMsc2VsZWN0aW9uLnNlY3Rpb24pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gV2hlbiB0aGUgc2VsZWN0b3IgaXMgY2xpY2tlZCBzZW5kIG91dCBhIHNlY3Rpb24gY2hhbmdlZCBldmVudFxyXG4gICAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiU0VDVElPTl9DSEFOR0VEXCIsIHtzZWN0aW9uIDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTGlzdGVuIHRvIHRoZXNlIGV2ZW50c1xyXG4gICAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSApO1xyXG4gICAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU2VjdGlvbiBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIENhdGVnb3J5U2VsZWN0KGlkTnVtYil7XHJcbiAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgdGhpcy5pZCA9IFwiI2NhdGVnb3J5LXNlbGVjdFwiK3RoaXMuaWROdW1iO1xyXG4gIHRoaXMuJHNlbGVjdCA9ICQodGhpcy5pZCk7XHJcblxyXG5cclxuICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcbiAgICB2YXIgcGFzc0lEID0gdGhpcy5pZFxyXG5cclxuICAgIC8vIEdyYWIgY2F0ZWdvcmllcyBmcm9tIERCIGFuZCBhZGQgdG8gdGhlIGRyb3Bkb3duXHJcbiAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBmdW5jdGlvbiAoY2F0ZWdvcmllcywgbm9SZXN1bHQpIHtcclxuICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsY2F0ZWdvcmllcyxzZWxlY3Rpb24uY2F0ZWdvcnkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvLyBXaGVuIHRoZSBzZWxlY3RvciBpcyBjbGlja2VkIHNlbmQgb3V0IGEgc2VjdGlvbiBjaGFuZ2VkIGV2ZW50XHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIkNBVEVHT1JZX0NIQU5HRURcIiwge2NhdGVnb3J5IDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiBhIHNlY3Rpb24gY2hhbmdlcyB0aGlzIGZpbmRzIHRoZSBjYXRlZ29yaWVzIHJlcXVpcmVkXHJcbiAgdGhpcy5zZWN0aW9uQ2hhbmdlZExpc3RlbmVyID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpOyAvLyBDbGVhciBvdXQgb2xkIG9wdGlvbnNcclxuICAgICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZFxyXG5cclxuICAgICAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHVwZGF0ZS5zZWxlY3Rpb24uc2VjdGlvbiwgZnVuY3Rpb24gKGNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsY2F0ZWdvcmllcyxcIlwiKTsgLy8gTWlnaHQgY2hhbmdlIHRoaXNcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEJpbmQgZnVuY3Rpb24gdG8gcmVzcG9uZCB0byB1cGRhdGVcclxuICB0aGlzLiRzZWxlY3Qub24oJ2NoYW5nZScsIHRoaXMudXBkYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gTGlzdGVuIHRvIGV2ZW50cyB3ZSBjYXJlIGFib3V0XHJcbiAgZXZlbnRzLm9uKFwiTkVXX1NFQ1RJT05cIiwgdGhpcy5zZWN0aW9uQ2hhbmdlZExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuLy8gTWFuYWdlcyBhIFN1YmNhdGVnb3J5IGRyb3Bkb3duIG1lbnVcclxuZnVuY3Rpb24gU3ViQ2F0ZWdvcnlTZWxlY3QoaWROdW1iKXtcclxuICB0aGlzLmlkTnVtYiA9IGlkTnVtYjtcclxuICB0aGlzLmlkID0gXCIjc3ViY2F0ZWdvcnktc2VsZWN0XCIrdGhpcy5pZE51bWI7XHJcbiAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTtcclxuXHJcblxyXG4gIC8vIFJlc3BvaW5kcyB0byBhbiBldmVudCB0aGF0IGluZGljYXRlcyBkYXRhIGlzIGF2YWxhYmxlIGZvciB0aGUgZHJvcCBkb3duXHJcbiAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgIHZhciBzZWxlY3Rpb24gPSB1cmxTZWxlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pZCA9PT0gaWR9KVswXTtcclxuICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sIHNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELHN1YkNhdGVnb3JpZXMsc2VsZWN0aW9uLnN1YkNhdGVnb3J5KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gTGlzdGVucyB0byBhIGNoYW5nZSBpbiBhIGNhdGVnb3J5XHJcbiAgdGhpcy5jYXRlZ29yeUNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICB0aGlzLiRzZWxlY3QuaHRtbCgnJyk7XHJcbiAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICB2YXIgcGFzc0lETnVtYiA9IHRoaXMuaWROdW1iO1xyXG5cclxuICAgICAgRGF0YWJhc2UuZ2V0U3ViQ2F0ZWdvcmllc0Zyb21EYXRhYmFzZSh1cGRhdGUuc2VsZWN0aW9uLnNlY3Rpb24sdXBkYXRlLnNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxzdWJDYXRlZ29yaWVzLFwiXCIpOyAvLyBNaWdodCBjaGFuZ2UgdGhpc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIlNVQkNBVEVHT1JZX0NIQU5HRURcIiwge3N1YkNhdGVnb3J5IDogXCJcIiwgaWQgOiBwYXNzSUROdW1ifSk7Ly8gQlkgc2VuZGluZyBvdXQgdGhpcyBldmVudCBkZXNjcmlwdGlvbiBpcyBub3RpZmllZCB3aXRoIGVtcHR5IHN1YkNhdGVnb3J5XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBXaGVuIHdlIGFyZSB1cGRhdGVkIGJ5IHRoZSB1c2VyIHNlbmQgb3V0IGFuIGV2ZW50XHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIlNVQkNBVEVHT1JZX0NIQU5HRURcIiwge3N1YkNhdGVnb3J5IDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gQmluZCBmdW5jdGlvbiB0byByZXNwb25kIHRvIHVwZGF0ZVxyXG4gIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzIHdlIGNhcmUgYWJvdXRcclxuICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7IC8vIFRPRE8gdGVzdFxyXG4gIGV2ZW50cy5vbihcIk5FV19DQVRFR09SWVwiLCB0aGlzLmNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG4gIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTdWJjYXRlZ29yeSBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIERlc2NyaXB0aW9uU2VsZWN0KGlkKXtcclxuICB0aGlzLmlkTnVtYiA9IGlkO1xyXG4gIHRoaXMuaWQgPSBcIiNkZXNjcmlwdGlvbi1zZWxlY3RcIitpZDtcclxuICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpO1xyXG5cclxuICB0aGlzLnVwZGF0ZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50cy5lbWl0KFwiREVTQ1JJUFRJT05fQ0hBTkdFRFwiLCAge2Rlc2NyaXB0aW9uIDogdGhpcy4kc2VsZWN0LmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikudGV4dCgpLCBpZCA6IHRoaXMuaWROdW1ifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy9cclxuICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG4gICAgdmFyIHBhc3NJRCA9IHRoaXMuaWQ7XHJcblxyXG4gICAgRGF0YWJhc2UuZ2V0RGVzY3JpcHRpb25zRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBzZWxlY3Rpb24uY2F0ZWdvcnksIHNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24gKGRlc2NyaXB0aW9ucywgbm9SZXN1bHQpIHtcclxuICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsZGVzY3JpcHRpb25zLHNlbGVjdGlvbi5kZXNjcmlwdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vXHJcbiAgdGhpcy5zdWJDYXRlZ29yeUNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgICAgICBEYXRhYmFzZS5nZXREZXNjcmlwdGlvbnNGcm9tRGF0YWJhc2UodXBkYXRlLnNlbGVjdGlvbi5zZWN0aW9uLHVwZGF0ZS5zZWxlY3Rpb24uY2F0ZWdvcnksdXBkYXRlLnNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24oZGVzY3JpcHRpb25zKXtcclxuICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxkZXNjcmlwdGlvbnMsXCJcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBCaW5kIGZ1bmN0aW9uIHRvIHJlc3BvbmQgdG8gZXZlbnRzXHJcbiAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHMgZnJvbSBhbnkgb2YgdGhlIG90aGVyIHNlbGVjdGlvbnMgY2hhbmdpbmcgb24gb3VyIHJvd1xyXG4gIGV2ZW50cy5vbihcIlNFQ1RJT05fQ0hBTkdFRFwiLCBjbGVhck15c2VsZi5iaW5kKHRoaXMpKTsgLy8gVE9ETyB0ZXN0XHJcbiAgZXZlbnRzLm9uKFwiQ0FURUdPUllfQ0hBTkdFRFwiLCBjbGVhck15c2VsZi5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJORVdfU1VCQ0FURUdPUllcIiwgdGhpcy5zdWJDYXRlZ29yeUNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuLy8gQ2xlYXJzIHRoZSBvcHRpb25zIGZyb20gdGhlIHNlbGVjdFxyXG5mdW5jdGlvbiBjbGVhck15c2VsZih1cGRhdGUpIHtcclxuICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpO1xyXG4gICAgICB0aGlzLiRzZWxlY3Quc2VsZWN0cGlja2VyKCdyZWZyZXNoJyk7IC8vIFJlZnJlc2ggdGhlIHNlbGVjdGlvbnNcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQWRkcyB0aGUgZHJvcCBkb3duIG9wdGlvbnMgdG8gb25lIG9mIHRoZSBzZWxlY3RvcnNcclxuICpcclxuICogQHBhcmFtIHNlbGVjdG9ySUQge1N0cmluZ30gdGhlIGlkIG9mIHRoZSBkcm9wIGRvd25cclxuICogQHBhcmFtIG9wdGlvbnMge1N0cmluZ1tdfSB0aGUgb3B0aW9ucyB0byBhZGRcclxuICogQHBhcmFtIHNlbGVjdGVkT3B0aW9uIHtTdHJpbmd9IHRoZSBvcHRpb24gdGhhdCBzaG91bGQgYmUgc2V0IGFzIHNlbGVjdGVkXHJcbiAqICovXHJcbmZ1bmN0aW9uIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHNlbGVjdG9ySUQsIG9wdGlvbnMsIHNlbGVjdGVkT3B0aW9uKXtcclxuICAkKHNlbGVjdG9ySUQpLmh0bWwoJycpOyAvLyBFbXB0eSB0ZW1wIG9wdGlvbnNcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKyl7XHJcbiAgICBpZihvcHRpb25zW2ldID09PSBudWxsKWNvbnRpbnVlO1xyXG4gICAgaWYob3B0aW9uc1tpXSA9PT0gc2VsZWN0ZWRPcHRpb24pe1xyXG4gICAgICAkKHNlbGVjdG9ySUQpLmFwcGVuZCgnPG9wdGlvbiBzZWxlY3RlZD4nICsgb3B0aW9uc1tpXSArICc8L29wdGlvbj4nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoc2VsZWN0b3JJRCkuYXBwZW5kKCc8b3B0aW9uPicgKyBvcHRpb25zW2ldICsgJzwvb3B0aW9uPicpO1xyXG4gICAgfVxyXG4gIH1cclxuICAkKHNlbGVjdG9ySUQpLnNlbGVjdHBpY2tlcigncmVmcmVzaCcpOyAvLyBSZWZyZXNoIHRoZSBzZWxlY3Rpb25zXHJcbn1cclxuIiwiLyoqXHJcbiogQ3JlYXRlcyBhIHRhYmxlIG9iamVjdFxyXG4qIEBwYXJhbSBpZCB0aGUgaWQgb2YgdGhlIHRhYmxlIGEsIGIsIGMsIGRcclxuKiBAcGFyYW0gcm93cyB0aGUgcm93cyBvZiBkYXRhIGZvciB0aGUgdGFibGVcclxuKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCBvZiB0aGUgZGF0YVxyXG4qIEBwYXJhbSBzZWxlY3Rpb24ge09iamVjdH0gaWYgbm90IGNvbWJpbmVkIGVsc2Uge09iamVjdFtdfSB0aGUgc2VsZWN0aW9uIG1hZGUgYnkgdGhlIHVzZXIgdG8gZmluZCB0aGUgZGF0YVxyXG4qL1xyXG5mdW5jdGlvbiBUYWJsZShpZCwgcm93cywgc2VsZWN0aW9uLCBpc0NvbWJpbmVkKXtcclxuICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuaXNDb21iaW5lZCA9IGlzQ29tYmluZWQ7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnVuaXQgPSByb3dzWzBdLnVuaXRzO1xyXG4gIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xyXG5cclxuICAvLyBDcmVhdGUgdGhlIHRpdGxlc1xyXG4gIHRoaXMudGl0bGUgPSB0aGlzLmdldFRpdGxlKCk7XHJcbiAgdGhpcy5zdWJUaXRsZSA9IHRoaXMuZ2V0U3ViVGl0bGUoKTtcclxuXHJcbiAgLy8gVXNlZCB0byBmb3JtYXQgbnVtYmVycyBkaXNwbGF5ZWRcclxuICB0aGlzLmRwRm9ybWF0ID0gZDMuZm9ybWF0KFwiLjRyXCIpO1xyXG5cclxuICAvLyBGaW5kIHRoZSBhdmFpbGFibGUgeWVhcnNcclxuICB0aGlzLmF2YWlsYWJsZVllYXJzID0gdGhpcy5nZXRBdmFpbGFibGVZZWFycygpO1xyXG5cclxuICAvLyBVc2VkIHRvIHN0b3JlIG9yaWdpbmFsIGNlbGwgdmFsdWVzXHJcbiAgdGhpcy5ub0NQSUNlbGxzID0gW107XHJcblxyXG4gIC8vIENhY2hlIERPTSBlbGVtZW50c1xyXG4gIHRoaXMuJHRhYmxlID0gJCgnI3RhYmxlLScraWQpO1xyXG4gIHRoaXMuJHRvdGFsc1RhYmxlID0gJCgnI3RhYmxlLXRvdGFsLScraWQpO1xyXG4gIHRoaXMuJHRpdGxlID0gJCgnI3RpdGxlLScraWQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHRpdGxlIGZvciB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aXRsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuZ2V0VGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXtcclxuICAgIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uWzBdID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uWzBdLnN1YkNhdGVnb3J5O1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uWzBdLmNhdGVnb3J5ICsgXCIsIFwiICsgc3ViQ2F0ZWdvcnkgKyBcIiwgXCIrIHRoaXMuc2VsZWN0aW9uWzBdLmRlc2NyaXB0aW9uO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gKHRoaXMuc3ViQ2F0ZWdvcnkgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvbi5zdWJDYXRlZ29yeSArIFwiLCBcIikgKyBcIiBcIisgdGhpcy5zZWxlY3Rpb24uZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHN1YnRpdGxlIGZvciB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSBzdWJ0aXRsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuZ2V0U3ViVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5pc0NvbWJpbmVkKXtcclxuICAgIHZhciBzdWJDYXRlZ29yeSA9IHRoaXMuc2VsZWN0aW9uWzFdID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uWzFdLnN1YkNhdGVnb3J5O1xyXG4gICAgcmV0dXJuICB0aGlzLnNlbGVjdGlvblsxXS5jYXRlZ29yeSArIFwiLCBcIiArIHN1YkNhdGVnb3J5ICsgXCIsIFwiKyB0aGlzLnNlbGVjdGlvblsxXS5kZXNjcmlwdGlvbjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uLnNlY3Rpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbi5jYXRlZ29yeTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgcm93cyBhbmQgdGhlIHJlY2FsY3VsYXRlcyB0b3RhbCB0YWJsZVxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB0aGUgbmV3IHJvd3MgZm9yIHRoZSB0YWJsZVxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJvd3MpIHtcclxuICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gIHRoaXMuY3JlYXRlVG90YWxzVGFibGUodHJ1ZSwgXCJcIik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU2hvd3MgYSBiYXIgZ3JhcGggd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHNlbGVjdGVkIHJvd1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXBkYXRlIHRoZSBvYmplY3QgdG8gaG9sZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcm93IGNsaWNrZWRcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLnRvdGFsc1Jvd1NlbGVjdGVkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gIHZhciByb3dOdW1iICA9IHVwZGF0ZS5yb3dJRC5jaGFyQXQodXBkYXRlLnJvd0lELmxlbmd0aC0xKTtcclxuICB2YXIgZGF0YVJvd0lEID0gXCJyb3ctdG90LVwiK3RoaXMuaWQrXCJcIityb3dOdW1iO1xyXG5cclxuICBTaW5nbGVCYXJNb2R1bGUuc2hvd0JhcldpdGhSb3dFbGVtKGRhdGFSb3dJRCx1cGRhdGUucmVnaW9uLFwiI2Jhci10b3RhbC1cIit0aGlzLmlkLFwiI2hlYWQtcm93LXRvdGFscy1cIit0aGlzLmlkLFwiI3RhYmxlLXRvdGFsLVwiK3RoaXMuaWQsdGhpcy51bml0KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBTaG93cyBhIGJhciBncmFwaCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc2VsZWN0ZWQgcm93XHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB1cGRhdGUgdGhlIG9iamVjdCB0byBob2xkIGluZm9ybWF0aW9uIGFib3V0IHRoZSByb3cgY2xpY2tlZFxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUucm93Q2xpY2tlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gIHZhciByb3dOdW1iID0gZXZlbnQucm93SUQuc2xpY2UoLTEpO1xyXG4vLyBOZWVkIHRvIGFjY291bnQgZm9yIG51bWJlcnMgZ3JlYXRlciB0aGFuIDEwXHJcbmlmKCFpc05hTihldmVudC5yb3dJRC5zbGljZSgtMikpKXtcclxuICByb3dOdW1iID0gZXZlbnQucm93SUQuc2xpY2UoLTIpO1xyXG59XHJcbiAgU2luZ2xlQmFyTW9kdWxlLnNob3dCYXJXaXRoUm93RWxlbSgncm93Jyt0aGlzLmlkICsnJytyb3dOdW1iLGV2ZW50LmVkYixcIiNiYXItXCIrdGhpcy5pZCxcIiNoZWFkLXJvdy1cIit0aGlzLmlkLFwiI3RhYmxlLVwiK3RoaXMuaWQsdGhpcy51bml0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHllYXJzIG9mIGRhdGEgaW4gdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ1tdfSBUaGUgYXJyYXkgb2YgeWVhcnNcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmdldEF2YWlsYWJsZVllYXJzID0gZnVuY3Rpb24gKCkge1xyXG4gIGF2YWlsYWJsZVllYXJzID0gW107XHJcbiAgdmFyIGF2YWlsYWJsZVllYXJzID0gW107XHJcbiAgdGhpcy5yb3dzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgaWYoIWF2YWlsYWJsZVllYXJzLmluY2x1ZGVzKGVsZW0ub2JzX3lyKSlhdmFpbGFibGVZZWFycy5wdXNoKGVsZW0ub2JzX3lyKTtcclxuICB9KTtcclxuICBhdmFpbGFibGVZZWFycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IC8vIFNvcnQgdGhlIHllYXJzXHJcbiAgICAgIHJldHVybiArYSAtICtiO1xyXG4gIH0pO1xyXG4gIHJldHVybiBhdmFpbGFibGVZZWFycztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIENQSSBjYW4gYmUgYXBwbGllZCB0byB0aGUgdGFibGVcclxuICpcclxuICogQHJldHVybiB7Qm9vbGVhbn0gY2FuIGFwcGx5IGNwaSBvciBub3RcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmNhbkFwcGx5Q1BJID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZClyZXR1cm4gZmFsc2U7XHJcbiAgcmV0dXJuIHRoaXMudW5pdC5pbmNsdWRlcygnJCcpOyAvLyBUT0RPIGNoZWNrIGlmIHRoaXMgaXMgcmlnaHQgbGF0ZXJcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBBcHBsaWVzIENQSSB0byBhbGwgdmFsdWVzIGluIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gSG9sZHMgcGVyY2VudGFnZSBvZiBDUEkgZm9yIGVhY2ggeWVhclxyXG4gKiAqL1xyXG5UYWJsZS5wcm90b3R5cGUuYXBwbHlDUEkgPSBmdW5jdGlvbiAoY3BpVmFsdWVzKSB7XHJcbiAgaWYodGhpcy5ub0NQSUNlbGxzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0aGlzLnJldmVydENQSSgpO1xyXG4gIH1cclxuXHJcbiAgdmFyICRjYWNoZWRDZWxscyA9IHRoaXMuJHRhYmxlLmZpbmQoJy5jZWxsJyk7XHJcblxyXG4gIC8vIEZpcnN0IGJhY2t1cCB0aGUgY3BpQ2VsbHNcclxuICB2YXIgbm9DUElDZWxscyA9IHRoaXMubm9DUElDZWxscztcclxuICB2YXIgaWQgPSB0aGlzLmlkO1xyXG4gICRjYWNoZWRDZWxscy5lYWNoKGZ1bmN0aW9uKCl7IC8vIEJhY2t1cCB0aGUgdmFsdWVzIGZyb20gdGhlIGNlbGxzXHJcbiAgICAgIG5vQ1BJQ2VsbHMucHVzaCh7aWQgOiAkKHRoaXMpLmF0dHIoJ2lkJyksIHZhbHVlIDogJCh0aGlzKS50ZXh0KCl9KTtcclxuICB9KTtcclxuXHJcbiAgdmFyIG1pblllYXIgPSBJbmZpbml0eTtcclxuICB2YXIgbWF4WWVhciA9IC1JbmZpbml0eTtcclxuICAkY2FjaGVkQ2VsbHMuZWFjaChmdW5jdGlvbigpeyAvL2NlbGwgb3IgdGhcclxuICAgICAgdmFyIHllYXIgPSArJCh0aGlzKS5hdHRyKFwiY2xhc3NcIikuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgbWluWWVhciA9IHllYXIgPCBtaW5ZZWFyID8geWVhciA6IG1pblllYXI7XHJcbiAgICAgIG1heFllYXIgPSB5ZWFyID4gbWF4WWVhciA/IHllYXIgOiBtYXhZZWFyO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgICAgJGNhY2hlZENlbGxzLmVhY2goZnVuY3Rpb24oKXsgLy8gR3JhYiBldmVyeSBjZWxsXHJcbiAgICAgICAgICB2YXIgeWVhciA9ICskKHRoaXMpLmF0dHIoXCJjbGFzc1wiKS5zcGxpdCgnICcpWzFdOyAvLyBHcmFiIHRoZSB5ZWFyIG9mIHRoZSBjZWxsIGJ5IGNoZWNraW5nIHRoZSBjbGFzc1xyXG4gICAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gJCh0aGlzKS5hdHRyKFwib3JpZ3ZhbHVlXCIpO1xyXG4gICAgICBmb3IodmFyIGN1ciA9IG1pblllYXI7IGN1ciA8PW1heFllYXI7IGN1cisrKXsgLy8gR28gdGhyb3VnaCBlYWNoIHBvc3NpYmxlIHllYXJcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwaVZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgaWYoY3BpVmFsdWVzW2ldLnllYXIgPT09IGN1cil7XHJcbiAgICAgICAgICAgICAgICAgIGlmKHllYXIgPD0gY3VyKXtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gdmFsdWVPZkNlbGwgKiAoMSArIChjcGlWYWx1ZXNbaV0udmFsdWUgLyAxMDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gZm9ybWF0KHZhbHVlT2ZDZWxsKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgICAkKHRoaXMpLnRleHQodmFsdWVPZkNlbGwpOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgICB9KTtcclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLnJldmVydENQSSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZih0aGlzLm5vQ1BJQ2VsbHMubGVuZ3RoID4gMCl7XHJcbiAgICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgIHRoaXMubm9DUElDZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICQoJyMnK2UuaWQpLnRleHQoZm9ybWF0KGUudmFsdWUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLmluc2VydFRpdGxlcyA9IGZ1bmN0aW9uKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZCl7XHJcbiAgICB2YXIgczEgPSB0aGlzLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgdmFyIHMyID0gdGhpcy5pZC5jaGFyQXQoMSkudG9VcHBlckNhc2UoKTtcclxuICAgIHRoaXMuJHRpdGxlLmFwcGVuZCgnPGgzPlJhdGlvIGFuYWx5c2lzICcrczErJyAvICcrczIrJzwvaDQ+Jyk7XHJcbiAgICB0aGlzLiR0aXRsZS5hcHBlbmQoJzxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJjb2xvcjogYmxhY2s7XCI+JytzMSsnOiA8L3NwYW4+Jyt0aGlzLnRpdGxlKyc8L2g0PjxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJjb2xvcjogYmxhY2s7XCI+JytzMisnOiA8L3NwYW4+Jyt0aGlzLnN1YlRpdGxlKyc8L2g0PicpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLiR0aXRsZS5hcHBlbmQoJzxoMiBjbGFzcz1cInRpdGxlXCI+Jyt0aGlzLnRpdGxlKyc8L2gyPicpLmFwcGVuZCgnPGg0IGNsYXNzPVwic3ViVGl0bGVcIj4nK3RoaXMuc3ViVGl0bGUrJzwvaDQ+Jyk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vIE9ubHkgY2FsbGVkIG9uY2UgdG8gY3JlYXRlIHRoZSB0YWJsZVxyXG5UYWJsZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciB0YWJsZURhdGEgPSB0aGlzLmNyZWF0ZVRhYmxlRGF0YSAodGhpcy5yb3dzKTsgLy8gR3JhYiB0aGUgZGF0YSBpbiB0aGUgZm9ybSB3ZSB3YW50XHJcblxyXG4gIC8vIGNyZWF0ZSB0aGUgeWVhcnMgY2VsbHNcclxuICB2YXIgeWVhcnMgPSBcIlwiO1xyXG4gIHRhYmxlRGF0YVswXS55ZWFycy5mb3JFYWNoKGZ1bmN0aW9uKHkpe1xyXG4gICAgeWVhcnMgKz0gXCI8dGg+XCIgKyB5LnllYXIgKyBcIjwvdGg+XCI7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFwcGVuZCB0aGUgaGVhZCByb3dcclxuICB0aGlzLiR0YWJsZS5hcHBlbmQoJzx0ciBpZD1cImhlYWQtcm93LScrdGhpcy5pZCsnXCIgY2xhc3M9XCJ0YWJsZS1yb3cgdGFibGUtaGVhZFwiPiA8dGg+RURCPC90aD4nKyB5ZWFycyArICc8L3RyPicpO1xyXG5cclxuICAvLyBHbyB0aHJvdWdoIGFuZCBjcmVhdGUgYSByb3cgZm9yIGVhY2ggZWRiXHJcbiAgdmFyIGNlbGxDb3VudCA9IDA7XHJcbiAgdmFyIHJvd0NvdW50ID0gIDA7XHJcbiAgdmFyIGNlbGxWYWx1ZXMgPSBbXTsgLy8gQWxsIHRoZSBjZWxsIHZhbHVlc1xyXG5cclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlRGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICB2YXIgZGF0YVJvdyA9IHRhYmxlRGF0YVtpXTtcclxuICAgIHZhciBlZGIgPSBkYXRhUm93LmVkYjtcclxuICAgIHZhciB5ZWFycyA9IGRhdGFSb3cueWVhcnM7XHJcbiAgICB2YXIgcm93PSBcIjx0ciBjbGFzcz0ndGFibGUtcm93JyBpZD1yb3dcIit0aGlzLmlkK3Jvd0NvdW50K1wiPjx0aCBjbGFzcz0nZWRiLWNlbGwnPlwiICsgZWRiICsgXCI8L3RoPlwiOy8vIEluc2VydHMgdGhlIGNlbGwgd2l0aCB0aGUgZWRiIG5hbWVcclxuXHJcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgeWVhcnMubGVuZ3RoOyBqKyspe1xyXG4gICAgICB2YXIgeWVhckRhdGEgPSB5ZWFyc1tqXTtcclxuICAgICAgcm93ICs9IFwiPHRoIG9yaWdWYWx1ZT0nXCIrIHllYXJEYXRhLnZhbHVlICtcIicgY2xhc3M9J2NlbGwgXCIreWVhckRhdGEueWVhcitcIicgaWQ9J3RcIit0aGlzLmlkK1wiXCIrY2VsbENvdW50K1wiJz5cIiArIHRoaXMuZHBGb3JtYXQoeWVhckRhdGEudmFsdWUpICsgXCI8L3RoPlwiO1xyXG4gICAgICBjZWxsVmFsdWVzLnB1c2goeyBpZCA6IFwiI3RcIit0aGlzLmlkK1wiXCIrY2VsbENvdW50LCB2YWx1ZSA6IHllYXJEYXRhLnZhbHVlIH0pO1xyXG4gICAgICBjZWxsQ291bnQrKztcclxuICAgIH1cclxuICAgIHRoaXMuJHRhYmxlLmFwcGVuZChyb3cgKyAnPC90cj4nKTtcclxuXHJcbiAgICAkKFwiI3Jvd1wiK3RoaXMuaWQrcm93Q291bnQpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciByb3dOdW1iID0gdGhpcy5pZC5zbGljZSgtMSk7XHJcbiAgICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgbnVtYmVycyBncmVhdGVyIHRoYW4gMTBcclxuICAgICAgaWYoIWlzTmFOKHRoaXMuaWQuc2xpY2UoLTIpKSl7XHJcbiAgICAgICAgcm93TnVtYiA9IHRoaXMuaWQuc2xpY2UoLTIpO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBlZGIgPSAkKFwiI1wiK3RoaXMuaWQrXCIgLmVkYi1jZWxsXCIpLnRleHQoKTtcclxuICAgICAgZXZlbnRzLmVtaXQoJ1JPV19DTElDS0VEJywgeyByb3dJRCA6IHRoaXMuaWQsIHJvd051bWIgOiByb3dOdW1iLCBlZGIgOiBlZGJ9KTtcclxuICAgIH0pO1xyXG4gICAgcm93Q291bnQrKztcclxuICB9XHJcbiAgdGhpcy5jZWxsVmFsdWVzID0gY2VsbFZhbHVlcztcclxufVxyXG5cclxuVGFibGUucHJvdG90eXBlLmNyZWF0ZVRvdGFsc1RhYmxlID0gZnVuY3Rpb24odXBkYXRlLCBzZWxlY3RlZFRvdGFsUm93KSB7XHJcblxyXG4gIHZhciB0b3RhbHMgPSBkcC5jcmVhdGVUYWJsZVRvdGFscyh0aGlzLnJvd3MsIFRhYmxlc01vZHVsZS5yZWdpb25zLCB0aGlzLmF2YWlsYWJsZVllYXJzKTtcclxuICB2YXIgbmFtZXMgPSB7biA6IFwiTm9ydGggSXNsYW5kXCIsIHVuaSA6IFwiVXBwZXIgTm9ydGggSXNsYW5kXCIsIGVuaSA6IFwiRWFzdGVybiBOb3J0aCBJc2xhbmRcIiwgc3duaSA6IFwiU291dGgtV2VzdCBOb3J0aCBJc2xhbmRcIiwgcyA6IFwiU291dGggSXNsYW5kXCIsIHVzaSA6IFwiVXBwZXIgU291dGggSXNsYW5kXCIsIGxzaSA6IFwiTG93ZXIgU291dGggSXNsYW5kXCIsIG56IDogXCJOZXcgWmVhbGFuZFwifTtcclxuXHJcbiAgdmFyIHRvdGFsQ2VsbHMgPSBbXTtcclxuICAvLyBJbnNlcnQgQ2FwdGlvbiBmb3IgdGFibGVcclxuICB2YXIgeWVhcnMgPSBcIlwiO1xyXG4gIHRoaXMuYXZhaWxhYmxlWWVhcnMuZm9yRWFjaChmdW5jdGlvbiAoeWVhcikge1xyXG4gICAgICB5ZWFycyArPSBcIjx0aD5cIiArIHllYXIgKyBcIjwvdGg+XCI7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBjZWxsQ291bnQgPSAwOyAvLyBVc2VkIGZvciBpZCBjZWxsc1xyXG4gIHZhciByb3dDb3VudCA9IDA7IC8vIFVzZWQgZm9yIGlkIHJvd3NcclxuXHJcbiAgaWYodXBkYXRlKXtcclxuICAgICAgdGhpcy4kdG90YWxzVGFibGUuaHRtbCgnJyk7IC8vIENsZWFyIGxhc3QgdGFibGVcclxuICB9XHJcblxyXG4gIC8vIFVzZWQgdG8gY2FsY3VsYXRlIGF2ZXJhZ2Ugb3IgdG90YWxcclxuICB2YXIgbnVtYmVyT2ZDb21wYW5pZXMgPSAyOTtcclxuXHJcbiAgdGhpcy4kdG90YWxzVGFibGUuYXBwZW5kKCc8dHIgaWQ9XCJoZWFkLXJvdy10b3RhbHMtJyt0aGlzLmlkKydcIiBjbGFzcz1cInRhYmxlLXJvdyB0YWJsZS1oZWFkXCI+IDx0aD5SZWdpb248L3RoPicrIHllYXJzICsgJzwvdHI+Jyk7XHJcblxyXG4gIGZvciAodmFyIHByb3BlcnR5IGluIHRvdGFscykge1xyXG4gICAgICBpZiAodG90YWxzLmhhc093blByb3BlcnR5KHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgdmFyIHJvdz0gXCI8dHIgY2xhc3M9J3RhYmxlLXJvdycgaWQ9cm93LXRvdC1cIit0aGlzLmlkK3Jvd0NvdW50K1wiPlwiO1xyXG5cclxuICAgICAgICAgIC8vVE9ETyAoTm90ZSB3aGVuIHVwZGF0ZWQgb3JpZ1ZhbHVlIHdpbGwgYmUgdGhlIHVwZGF0ZWQgdmFsdWUgbm90IHRoZSBvcmlnaW5hbClcclxuXHJcbiAgICAgICAgICAvLyBJbnNlcnQgbmFtZSBpbiBjb2x1bW4gYW5kIGFzc2lnbiBhbiBpZCB0byB0aGUgcm93XHJcbiAgICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5kcEZvcm1hdDtcclxuICAgICAgICB2YXIgY2VsbHMgPSB0aGlzLm5vQ1BJQ2VsbHM7XHJcbiAgICAgICAgICByb3cgKz0gXCI8dGggY2xhc3M9J3JlZy1jZWxsJz5cIiArIG5hbWVzW3Byb3BlcnR5XSArIFwiPC90aD5cIjtcclxuICAgICAgICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG4gICAgICAgICAgdG90YWxzW3Byb3BlcnR5XS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICB2YXIgYXZnO1xyXG4gICAgICAgICAgICAgIGlmKHByb3BlcnR5ID09PSBcIm56XCIpe1xyXG4gICAgICAgICAgICAgICAgICBhdmcgPSB2YWx1ZSAvIG51bWJlck9mQ29tcGFuaWVzO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGF2ZyA9IHZhbHVlIC8gVGFibGVzTW9kdWxlLnJlZ2lvbnNbcHJvcGVydHldLmxlbmd0aDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJvdyArPSBcIjx0aCBpZD0ndC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCtcIicgb3JpZ1ZhbHVlPSdcIisgYXZnICtcIicgY2xhc3M9J2NlbGwnPlwiICsgZm9ybWF0KGF2ZykgKyBcIjwvdGg+XCI7XHJcbiAgICAgICAgICAgICAgdG90YWxDZWxscy5wdXNoKHtpZCA6IFwiI3QtdG90YWxcIitwYXNzSUQrXCJcIitjZWxsQ291bnQsIHZhbHVlIDphdmd9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gVE9ETyBjaGVjayBpZiBiZXR0ZXIgd2F5XHJcbiAgICAgICAgICAgICAgY2VsbHMucHVzaCh7aWQgOiBcInQtdG90YWxcIitwYXNzSUQrXCJcIitjZWxsQ291bnQsIHZhbHVlIDogYXZnfSk7XHJcblxyXG4gICAgICAgICAgICAgIGNlbGxDb3VudCsrO1xyXG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy4kdG90YWxzVGFibGUuYXBwZW5kKHJvdyArICc8L3RyPicpO1xyXG4gICAgICAgICAgJChcIiNyb3ctdG90LVwiK3RoaXMuaWQrcm93Q291bnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnID0gJChcIiNcIit0aGlzLmlkICtcIiAucmVnLWNlbGxcIikudGV4dCgpO1xyXG4gICAgICAgICAgICBldmVudHMuZW1pdChcIlRPVEFMX1JPV19DTElDS0VEXCIsIHtyb3dJRCA6IHRoaXMuaWQsIHJlZ2lvbiA6IHJlZ30pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByb3dDb3VudCsrO1xyXG4gICAgICB9XHJcbiAgfVxyXG4gIGlmKHNlbGVjdGVkVG90YWxSb3cgIT09XCJcIil7XHJcbiAgICAgICQoJyMnK3NlbGVjdGVkVG90YWxSb3cpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpO1xyXG4gIH1cclxuICB0aGlzLnRvdGFsQ2VsbFZhbHVlcyA9IHRvdGFsQ2VsbHM7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblRhYmxlLnByb3RvdHlwZS5jcmVhdGVUYWJsZURhdGEgPSBmdW5jdGlvbiAocm93cykge1xyXG4gIC8vIENyZWF0ZSBhcnJheSB3aXRoIHVuaXF1ZSBFREJTXHJcbiAgdmFyIGVkYnMgPSB7fTtcclxuICByb3dzLmZvckVhY2ggKGZ1bmN0aW9uKHIpe1xyXG4gICAgaWYoZWRic1tyLmVkYl0gPT09IHVuZGVmaW5lZCllZGJzW3IuZWRiXSA9IHIuZWRiO1xyXG4gIH0pO1xyXG5cclxuICB2YXIgZGF0YSA9IFtdO1xyXG5cclxuICAvLyBGaWx0ZXIgcm93cyBieSBlYWNoIEVEQlxyXG4gIGZvciAodmFyIGVkYiBpbiBlZGJzKSB7XHJcbiAgICBpZiAoZWRicy5oYXNPd25Qcm9wZXJ0eShlZGIpKSB7XHJcbiAgICAgIHZhciBlZGJZZWFycyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiByLmVkYiA9PT0gZWRic1tlZGJdIH0pO1xyXG5cclxuICAgICAgdmFyIHllYXJzID0gW107XHJcbiAgICAgIGVkYlllYXJzLmZvckVhY2goZnVuY3Rpb24oeSl7XHJcbiAgICAgICAgeWVhcnMucHVzaCh7IHllYXIgOiB5Lm9ic195ciwgdmFsdWUgOiB5LnZhbHVlIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNvcnQgeWVhcnNcclxuICAgICAgeWVhcnMuc29ydChmdW5jdGlvbihhLGIpe1xyXG4gICAgICAgIHJldHVybiBhLnllYXIgPiBiLnllYXI7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBkYXRhLnB1c2goeyBlZGIgOiBlZGJzW2VkYl0sIHllYXJzIDogeWVhcnN9KTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcblxyXG4vLyBDYWxsZWQgd2hlbiB2YWx1ZXMgaW4gdGhlIHRhYmxlIHVwZGF0ZVxyXG5UYWJsZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuYXBwbHlHcmFkaWVudENTUyh0aGlzLmNlbGxWYWx1ZXMpO1xyXG4gIHRoaXMuYXBwbHlHcmFkaWVudENTUyh0aGlzLnRvdGFsQ2VsbFZhbHVlcyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogaGlnaGxpZ2h0cyB0aGUgY2VsbCBiYXNlZCBvbiB0aGUgcGVyY2VudGFnZSBvZiB0aGUgbWF4IHZhbHVlIGluIHRoZSB0YWJsZSB1bmxlc3MgYWxyZWFkeSBhIHBlcmNlbnRhZ2VcclxuICpcclxuICogQHBhcmFtIGNlbGxWYWx1ZXMge09iamVjdFtdfSB2YWx1ZSBvZiBhIGNlbGwgYW5kIHRoZSB0YWJsZSBjZWxsIGlkXHJcbiAqIEBwYXJhbSBwZXJjZW50IHtCb29sZWFufSBpZiBub3QgYSBwZXJjZW50IGl0IHNob3VsZCBiZSBoaWdobGlnaHRlZCBiYXNlZCBvbiB0aGUgcGVyY2VudGFnZSBvZiB0aGUgbWF4IHZhbHVlIGluIHRoZSBjZWxsXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5hcHBseUdyYWRpZW50Q1NTID0gZnVuY3Rpb24oY2VsbFZhbHVlcykge1xyXG4gIHZhciBwZXJjZW50ID0gZmFsc2U7IC8vIFRPRE8gZml4IGxhdGVyXHJcbiAgLy8gRmluZCB0aGUgbWF4IHZhbHVlXHJcbiAgdmFyIG1heENlbGxWYWx1ZSA9IC1JbmZpbml0eTtcclxuICBjZWxsVmFsdWVzLmZvckVhY2goZnVuY3Rpb24oZWxlbSl7XHJcbiAgICAgIG1heENlbGxWYWx1ZSA9ICtlbGVtLnZhbHVlID4gbWF4Q2VsbFZhbHVlID8gK2VsZW0udmFsdWUgOiBtYXhDZWxsVmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFwbGxpZSBjc3MgdG8gZWFjaCBjZWxsXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNlbGxWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICB2YXIgdmFsdWUgPSAocGVyY2VudCA/IHZhbHVlIDogKCgrY2VsbFZhbHVlc1tpXS52YWx1ZSAvIG1heENlbGxWYWx1ZSkqMTAwKSk7IC8vIElmIHBlcmNlbnRhZ2UgbWV0cmljIGp1c3QgdXNlIHZhbHVkXHJcbiAgICAgICQoY2VsbFZhbHVlc1tpXS5pZCkuY3NzKHtcclxuICAgICAgICAgICAgICBcImJhY2tncm91bmRcIiA6IFwiLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIGxlZnQgdG9wLCByaWdodCB0b3AsIGNvbG9yLXN0b3AoXCIgKyB2YWx1ZSArXCIlLCM3YmJmZDYpLCBjb2xvci1zdG9wKFwiICsgdmFsdWUgK1wiJSwjRkZGKSlcIixcclxuICAgICAgICAgIH1cclxuICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiLy8gREVQRU5ERU5DSUVTIERhdGFQcm9jZXNzb3IsIERhdGFiYXNlLCBFdmVudHNcclxuXHJcbi8vIEludGVybmV0IEV4cGxvcmVyIGNvbXBhdGliaWxpdHlcclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKSB7XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuYXBwbHkodGhpcywgYXJndW1lbnRzKSAhPT0gLTE7XHJcbiAgICB9O1xyXG59XHJcblxyXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJpbmNsdWRlc1wiLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB2YXIgbmV3QXJyID0gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbCA9PSBvYmo7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3QXJyLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8gRW5kIEludGVybmV0IGV4cGxvcmVyIGNvbXBhdGliaWxpdHlcclxuXHJcbnZhciBDb21wYXJlTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIEluaXQgdGhlIGRhdGEgcHJvY2Vzc29yXHJcbiAgdmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuXHJcbiAgLy8gT2JqZWN0IHRoYXQgaG9sZHMgYWxsIHRoZSByb3dzIGZvciBlYWNoIHRhYmxlIGFsb25nIHdpdGggYSBjb3B5XHJcbiAgdmFyIGJhY2t1cCA9IHt9O1xyXG5cclxuICAvLyBTZWFyY2ggZXJyb3Igc3RhdGVcclxuICB2YXIgZXJyb3IgPSBmYWxzZTtcclxuXHJcbiAgLy8gQ2FjaGUgZG9tIGVsZW1lbnRzXHJcbiAgdmFyICRzZWFyY2hFcnJvciA9ICQoJyNlcnJvci1kaXYnKTtcclxuXHJcbiAgLyoqXHJcbiAgICogVHVybnMgb2JqZWN0IGluIHVybCBzdHJpbmdcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvYmoge09iamVjdH0gdGhlIG9iamVjdCB0byB0dXJuIGludG8gdXJsXHJcbiAgICogKi9cclxuICB2YXIgc2VyaWFsaXNlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgdmFyIHN0ciA9IFtdO1xyXG4gICAgZm9yKHZhciBwIGluIG9iailcclxuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShwKSkge1xyXG4gICAgICAgIHN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwXSkpO1xyXG4gICAgICB9XHJcbiAgICByZXR1cm4gc3RyLmpvaW4oXCImXCIpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBzZWFyY2ggYnV0dG9uIGlzIGNsaWNrZWQsIGNoZWNrcyBpZiBhIHZhbGlkIHNlYXJjaCBzZWxlY3Rpb24gaXMgbWFkZVxyXG4gICAqIGlmIHNvIGluc2VydHMgdGhlIHNlYXJjaCBpbnRvIHRoZSB1cmwgdG8gc2VhcmNoLlxyXG4gICAqICovXHJcbiAgdmFyIHNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghc2VsZWN0aW9uUm93cy5jYW5TZWFyY2goKSkge1xyXG4gICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgJHNlYXJjaEVycm9yLmFwcGVuZCgnPGg0IHN0eWxlPVwiY29sb3IgOiByZWQ7XCI+UGFydGlhbCBSb3cgU2VsZWN0ZWQ8L2g0PicpO1xyXG4gICAgICAgIGVycm9yID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47IC8vIEZpcnN0IGNoZWNrIGlmIHRoZSBzZWxlY3Rpb24gaXMgdmFsaWRcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcm93cz0ge307XHJcbiAgICBzZWxlY3Rpb25Sb3dzLmdldEFsbFNlbGVjdGlvbkRhdGEoKS5mb3JFYWNoKGZ1bmN0aW9uKHNlbGVjdGlvbil7XHJcbiAgICAgIGlmKHNlbGVjdGlvbi5zZWN0aW9uICE9PSBcIlwiKXtcclxuICAgICAgICAgIHJvd3NbXCJzXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5zZWN0aW9uO1xyXG4gICAgICAgICAgcm93c1tcImNcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLmNhdGVnb3J5O1xyXG4gICAgICAgICAgcm93c1tcInNjXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5zdWJDYXRlZ29yeTtcclxuICAgICAgICAgIHJvd3NbXCJkXCIrc2VsZWN0aW9uLmlkXSA9IHNlbGVjdGlvbi5kZXNjcmlwdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShcImNvbXBhcmU/XCIgKyBzZXJpYWxpc2Uocm93cykpOyAvLyBSZXBsYWNlIHRoZSB1cmwgd2l0aCB0aGUgc2VsZWN0aW9ucyB1cmxcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgd2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQgd2l0aCBhIHNlYXJjaCBpbiB0aGUgdXJsLCBmZXRjaGVzIHRoZSByZWxldmFudCBkYXRhIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICogdXNpbmcgdGhlIGRiIG1vZHVsZVxyXG4gICAqICovXHJcbiAgdmFyIGxvYWRTZWFyY2hGcm9tVVJMID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHNlbGVjdGlvblJvd3MuaW5pdCh1cmxTZWxlY3Rpb25zLHRydWUpOyAvLyBTZXQgdXBzIHRoZSBzZWxlY3Rpb24gcm93c1xyXG5cclxuICAgIERhdGFiYXNlLmdldFJvd3NGb3JTZWFyY2godXJsU2VsZWN0aW9ucywgZnVuY3Rpb24ocm93cyl7XHJcblxyXG4gICAgICAvLyBUT0RPIFFVSUNLIEZJTkQgQSBCRVRURVIgV0FZIFxyXG4gICAgICBpZihyb3dzLmxlbmd0aCA+IDAgJiYgcm93c1swXS5mY2FzdF95ciAhPT0gbnVsbCl7XHJcbiAgICAgICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgICAgci5vYnNfeXIgPSByLmZjYXN0X3lyO1xyXG4gICAgICAgIH0pOyAgXHJcbiAgICAgIH0gIFxyXG5cclxuICAgICAgLy8gc2V0IHRoZSByb3dzIHRhYmxlcyBhbmQgY3JlYXRlIGEgY29weVxyXG4gICAgICBiYWNrdXAuc2VsZWN0aW9uICA9IG5ldyBTZWxlY3Rpb24odXJsU2VsZWN0aW9uc1swXSx1cmxTZWxlY3Rpb25zWzFdLHVybFNlbGVjdGlvbnNbMl0sdXJsU2VsZWN0aW9uc1szXSk7XHJcbiAgICAgIGJhY2t1cC5yb3dzID0gcm93c1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cyA9IGRwLmZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkocm93cyxiYWNrdXAuc2VsZWN0aW9uKTtcclxuICAgICAgLy8gY29uc29sZS5sb2cocm93cyk7XHJcblxyXG4gICAgICBcclxuICAgICAgdmFyIGNvbWJpbmVkRGF0YSA9IFtdO1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe1xyXG4gICAgICAgIGlmKHQuaWQgPT09ICdhJyl7XHJcbiAgICAgICAgICAkKCcjdGFiLWEnKS5hZGRDbGFzcyhcImluIGFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodC5pZCA9PT0gJ2FiJyB8fCB0LmlkID09PSAnY2QnKXtcclxuICAgICAgICAgIGNvbWJpbmVkRGF0YS5wdXNoKHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICQoJyNmdWxsLWRhc2gtJysgdC5pZCkuc2hvdygpO1xyXG4gICAgICAgICAgJCgnI3RhYi0nK3QuaWQpLmFkZENsYXNzKFwiaW4gYWN0aXZlXCIpOyAvLyBNYWtlIGFsbCBhY3RpdmUgdG8gZ2V0IHNpemVzIGZvciBncmFwaHNcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZihjb21iaW5lZERhdGEubGVuZ3RoID09PSAyKXtcclxuICAgICAgICBzaG93RnVsbFZlY3RvckdyYXBoKGNvbWJpbmVkRGF0YSwgdXJsU2VsZWN0aW9ucywgW2JhY2t1cC5zb3J0ZWRSb3dzWzBdLnJvd3NbMF0udW5pdHMsYmFja3VwLnNvcnRlZFJvd3NbMV0ucm93c1swXS51bml0cyxiYWNrdXAuc29ydGVkUm93c1syXS5yb3dzWzBdLnVuaXRzLGJhY2t1cC5zb3J0ZWRSb3dzWzNdLnJvd3NbMF0udW5pdHMgXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIGJvdGggQUIgYW5kIENEIGV4aXN0XHJcbiAgICAgIC8vIEVtaXQgYW4gZXZlbnQgd2l0aCB0aGUgZGF0YVxyXG4gICAgICBldmVudHMuZW1pdChcIklOSVRfREFUQVwiLCB7ZGF0YSA6IGJhY2t1cC5zb3J0ZWRSb3dzfSk7XHJcblxyXG4gICAgICAvLyBTZXQgZGVmYXVsdCByb3dzIHNlbGVjdGVkXHJcbiAgICAgIGV2ZW50cy5lbWl0KCdST1dfQ0xJQ0tFRCcsICB7cm93SUQ6IFwicm93YTBcIiwgcm93TnVtYjogMCwgZWRiOiBcIkFscGluZSBFbmVyZ3lcIn0pO1xyXG4gICAgICBldmVudHMuZW1pdChcIlRPVEFMX1JPV19DTElDS0VEXCIsIHtyb3dJRDogXCJyb3ctdG90LWEwXCIsIHJlZ2lvbjogXCJTb3V0aCBJc2xhbmRcIn0pO1xyXG5cclxuICAgICAgLy8gTWFrZSBhbGwgYWNjZXB0IGEgYWN0aXZlXHJcbiAgICAgIGJhY2t1cC5zb3J0ZWRSb3dzLmZvckVhY2goZnVuY3Rpb24odCl7XHJcbiAgICAgICAgaWYodC5pZCAhPT0gJ2EnKXtcclxuICAgICAgICAgICQoJyN0YWItJyt0LmlkKS5yZW1vdmVDbGFzcyhcImluIGFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgIGdvVG9CeVNjcm9sbCgnI3RvcC10YWInKTsgXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciBnb1RvQnlTY3JvbGwgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoaWQpLm9mZnNldCgpLnRvcH0sJ3Nsb3cnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBhcHBseSBjcGkgYnV0dG9uIGlzIGNsaWNrZWQuIEZpcnN0IGNoZWNrc1xyXG4gICAqIGlmIGNwaSBpbnB1dCBpcyB2YWxpZCB0aGVuIGNvcGllcyByb3dzIGFuZCBhcHBsaWVzIGNwaSB0byBjb3B5XHJcbiAgICogKi9cclxuICB2YXIgYXBwbHlDUEkgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmKENQSU1vZHVsZS5pc1ZhbGlkKCkgJiYgYmFja3VwLnNlbGVjdGlvbiAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdmFyIGNvcHlPZlJvd3MgID0gZHAuY29weVJvd3MoYmFja3VwLnJvd3MpO1xyXG4gICAgICBhcHBseUNQSVRvVGFibGVSb3dzKGNvcHlPZlJvd3MsQ1BJTW9kdWxlLmdldENQSVZhbHVlcygpKTtcclxuICAgICAgdmFyIG5ld0RhdGEgPSBkcC5maWx0ZXJSb3dzVG9UYWJsZXNBbmRDb3B5KGNvcHlPZlJvd3MsYmFja3VwLnNlbGVjdGlvbik7XHJcblxyXG4gICAgICAvLyBTZW5kIGV2ZW50IHRvIHVwZGF0ZSB0YWJsZSBhbmQgZ3JhcGhzXHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiUk9XX1VQREFURVwiLCB7ZGF0YSA6IG5ld0RhdGEgfSk7XHJcbiAgICAgIGV2ZW50cy5lbWl0KFwiQVBQTFlfQ1BJXCIsIHtjcGlWYWx1ZXMgOiBDUElNb2R1bGUuZ2V0Q1BJVmFsdWVzKCl9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBcHBsaWVzIGNwaSB2YWx1ZXMgdG8gdGhlIHJvd3MgYnkgY2hhbmluZyB0aGUgdmFsdWUgaW4gZWFjaCByb3cgd2l0aCB0aGUgY29tcG91bmRlZCBjcGkgdmFsdWVzXHJcbiAgICpcclxuICAgKiBAcGFyYW0gcm93cyB7T2JqZWN0W119IHRoZSByb3dzXHJcbiAgICogQHBhcmFtIGNwaVZhbHVlcyB7T2JqZWN0W119IGNvbnRhaW5zIHRoZSBjcGkgZm9yIGVhY2ggeWVhclxyXG4gICAqICovXHJcbiAgdmFyIGFwcGx5Q1BJVG9UYWJsZVJvd3MgPSBmdW5jdGlvbiAocm93cywgY3BpVmFsdWVzKSB7XHJcbiAgICB2YXIgYXBwbGljYWJsZVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihyKXtcclxuICAgICAgcmV0dXJuIHIudW5pdHMuaW5jbHVkZXMoJyQnKTtcclxuICAgIH0pO1xyXG4gICAgaWYoYXBwbGljYWJsZVJvd3MubGVuZ3RoID09PSAwKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgdGhlIG1pbiBhbmQgbWF4IHllYXIgZnJvbSB0aGUgZGF0YVxyXG4gICAgdmFyIG1pblllYXIgPSBhcHBsaWNhYmxlUm93cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xyXG4gICAgICByZXR1cm4gcHJldi5kaXNjX3lyIDwgY3Vyci5kaXNjX3lyID8gcHJldiA6IGN1cnI7XHJcbiAgICB9KS5vYnNfeXI7XHJcblxyXG4gICAgdmFyIG1heFllYXIgPSBhcHBsaWNhYmxlUm93cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xyXG4gICAgICByZXR1cm4gcHJldi5kaXNjX3lyID4gY3Vyci5kaXNjX3lyID8gcHJldiA6IGN1cnI7XHJcbiAgICB9KS5vYnNfeXI7XHJcblxyXG4gICAgZm9yKHZhciBjdXIgPSBtaW5ZZWFyOyBjdXIgPD1tYXhZZWFyOyBjdXIrKyl7IC8vIEdvIHRocm91Z2ggZWFjaCBwb3NzaWJsZSB5ZWFyXHJcbiAgICAgIGFwcGxpY2FibGVSb3dzLmZvckVhY2goZnVuY3Rpb24oZWxlbSwgaW5kZXgpeyAvLyBHcmFiIGV2ZXJ5IFJvd1xyXG4gICAgICAgIHZhciB5ZWFyID0gYXBwbGljYWJsZVJvd3NbaW5kZXhdLm9ic195cjsgLy8gR3JhYiB0aGUgeWVhciBvZiB0aGUgY2VsbCBieSBjaGVja2luZyB0aGUgY2xhc3NcclxuICAgICAgICB2YXIgdmFsdWVPZkNlbGwgPSBhcHBsaWNhYmxlUm93c1tpbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcGlWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgaWYoY3BpVmFsdWVzW2ldLnllYXIgPT09IGN1cil7XHJcbiAgICAgICAgICAgIGlmKHllYXIgPD0gY3VyKXtcclxuICAgICAgICAgICAgICB2YWx1ZU9mQ2VsbCA9IHZhbHVlT2ZDZWxsICogKDEgKyAoY3BpVmFsdWVzW2ldLnZhbHVlIC8gMTAwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYXBwbGljYWJsZVJvd3NbaW5kZXhdLnZhbHVlID0gdmFsdWVPZkNlbGw7IC8vIENQSSBBcHBsaWVkIHZhbHVlXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8vIEFycmF5IHdpdGggYm90aCB0aGluZ3MgaW4gaXRcclxuICBmdW5jdGlvbiBzaG93RnVsbFZlY3RvckdyYXBoKGRhdGEsIHNlbGVjdGlvbnMsIHVuaXRzKSB7XHJcblxyXG4gICAgICAgIC8vIEdyYWIgYSB0aXRsZVxyXG4gICAgICAgIHZhciBhdGl0bGUgPSBzZWxlY3Rpb25zWzBdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1swXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMF0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgdmFyIGJ0aXRsZSA9IHNlbGVjdGlvbnNbMV0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzFdLnN1YkNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1sxXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICB2YXIgY3RpdGxlID0gc2VsZWN0aW9uc1syXS5jYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMl0uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzJdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHZhciBkdGl0bGUgPSBzZWxlY3Rpb25zWzNdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1szXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbM10uZGVzY3JpcHRpb247XHJcblxyXG4gICAgICAgIHZhciByYXRpbyA9ICc8aDM+IFJhdGlvIChBIC8gQiApIG92ZXIgKCBDIC8gRCApIDwvaDM+J1xyXG4gICAgICAgIHZhciBzcGFuQSA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkE6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuQiA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkI6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuQyA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkM6IDwvc3Bhbj4nO1xyXG4gICAgICAgIHZhciBzcGFuRCA9ICc8c3BhbiBjbGFzcz1cImxldHRlclwiPkQ6IDwvc3Bhbj4nO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGNvbWJpbmVBID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuQSsnICcrIGF0aXRsZSArJzwvaDQ+JztcclxuICAgICAgICB2YXIgY29tYmluZUIgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj4nK3NwYW5CKycgJysgYnRpdGxlICsnPC9oND4nO1xyXG4gICAgICAgIHZhciBjb21iaW5lQyA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPicrc3BhbkMrJyAnKyBjdGl0bGUgKyc8L2g0Pic7XHJcbiAgICAgICAgdmFyIGNvbWJpbmVEID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuRCsnICcrIGR0aXRsZSArJzwvaDQ+JztcclxuXHJcbiAgICAgICAgJCgnI3RpdGxlLXZlY3Rvci1hYmNkJykuYXBwZW5kKHJhdGlvKS5hcHBlbmQoY29tYmluZUEpLmFwcGVuZChjb21iaW5lQikuYXBwZW5kKGNvbWJpbmVDKS5hcHBlbmQoY29tYmluZUQpO1xyXG5cclxuICAgICAgICBWZWN0b3JNb2R1bGUuY3JlYXRlVmVjdG9yR3JhcGgoZHAuY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoKGRhdGFbMF0ucm93cyxkYXRhWzFdLnJvd3MpLCB1bml0c1swXSArIFwiIC8gXCIgKyB1bml0c1sxXSAsdW5pdHNbMl0gKyBcIiAvIFwiICsgdW5pdHNbM10gLFwiI3ZlY3Rvci1ncmFwaC1hYmNkXCIpO1xyXG4gICAgICAgICQoJyN2ZWN0b3ItZnVsbC1hYmNkJykuc2hvdygpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHJldmVydCBjcGkgaXMgY2xpY2tlZCBzZW5kIG91dCBldmVudHMgd2l0aCB0b1xyXG4gICAqIG5vdGlmeSB0aGF0IGNwaSBuZWVkcyB0byBiZSByZXZlcnRlZFxyXG4gICAqICovXHJcbiAgdmFyIHJldmVydENQSSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGV2ZW50cy5lbWl0KFwiUk9XX1VQREFURVwiLCB7ZGF0YSA6IGJhY2t1cC5zb3J0ZWRSb3dzIH0pO1xyXG4gICAgZXZlbnRzLmVtaXQoXCJSRVZFUlRfQ1BJXCIsIHtjcGlWYWx1ZXMgOiBcIlwifSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxvYWRTZWFyY2hGcm9tVVJMIDogbG9hZFNlYXJjaEZyb21VUkwsXHJcbiAgICBzZWFyY2ggOiBzZWFyY2gsXHJcbiAgICBhcHBseUNQSSA6IGFwcGx5Q1BJLFxyXG4gICAgcmV2ZXJ0Q1BJIDogcmV2ZXJ0Q1BJXHJcbiAgfVxyXG59KSgpO1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KCBmdW5jdGlvbigpIHtcclxuICAgIC8vIEhpZ2hsaWdodCB0aGUgc2VsZWN0ZWQgbGlua1xyXG4gICAgJChcIi5uYXYtbGlua1wiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKFwiI2JlbmNobWFya3MtbGlua1wiKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcjc2VhcmNoLWJ0bi1jb21wYXJlJykuY2xpY2soZnVuY3Rpb24oKXsgLy8gTGlzdGVuZXIgdG8gc2VhcmNoIGJ1dHRvblxyXG4gICAgICAgIENvbXBhcmVNb2R1bGUuc2VhcmNoKCk7IC8vIFNlYXJjaCBlbmNvZGVzIHRoZSBzZWxlY3Rpb25zIGludG8gdGhlIHVybCBhbmQgc2VuZHMgdG8gc2VydmVyXHJcbiAgICB9KTtcclxuICAgICQoJ2NwaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgIENvbXBhcmVNb2R1bGUuYXBwbHlDUEkoKTtcclxuICAgIH0pO1xyXG59KTtcclxuIiwidmFyIENQSU1vZHVsZSA9IChmdW5jdGlvbigpe1xyXG5cclxuICAvLyBHcmFwaCBhbmQgY2FjaGVcclxudmFyICRjcGlGb3JtID0gJCgnI2NwaS1mb3JtJyk7XHJcblxyXG4vLyBzZXQgdXAgdmFsaWRhdGlvbiBydWxlc1xyXG4kLnZhbGlkYXRvci5zZXREZWZhdWx0cyh7XHJcbiAgICAgICAgZXJyb3JDbGFzcyA6ICdoZWxwLWJsb2NrJyxcclxuICAgICAgICBoaWdobGlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7JChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmFkZENsYXNzKCdoYXMtZXJyb3InKX0sXHJcbiAgICAgICAgdW5oaWdobGlnaHQgOmZ1bmN0aW9uIChlbGVtZW50KSB7JChlbGVtZW50KS5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLnJlbW92ZUNsYXNzKCdoYXMtZXJyb3InKX1cclxuICAgIH1cclxuKTtcclxuXHJcbi8vIFNldCB0aGUgcnVsZXMgZm9yIGVhY2ggaW5wdXRcclxudmFyIGNwaVJ1bGVzID0ge3JlcXVpcmVkIDogdHJ1ZSwgbnVtYmVyIDogdHJ1ZSwgbWluIDogMC4xLCBtYXggOiAxMDB9O1xyXG52YXIgbWVzc2FnZVNldCA9IHtcclxuICAgIHJlcXVpcmVkIDogXCJQbGVhc2UgZW50ZXIgYSBwZXJjZW50YWdlXCIsXHJcbiAgICBudW1iZXIgOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlclwiLFxyXG4gICAgbWluIDogXCJQbGVhc2UgZW50ZXIgYSBwZXJjZW50YWdlIGdyZWF0ZXIgdGhhbiAwXCIsXHJcbiAgICBtYXggOiBcIlBsZWFzZSBlbnRlciBhIHBlcmNlbnRhZ2UgbGVzcyB0aGFuIDEwMFwiXHJcbn07XHJcblxyXG5cclxuJGNwaUZvcm0udmFsaWRhdGUoe1xyXG4gICAgcnVsZXMgOiB7WTIwMTIgOiBjcGlSdWxlcyxZMjAxMyA6IGNwaVJ1bGVzLFkyMDE0IDogY3BpUnVsZXMsWTIwMTUgOiBjcGlSdWxlcyxZMjAxNiA6IGNwaVJ1bGVzfSxcclxuICAgIG1lc3NhZ2VzIDoge1kyMDEyIDogbWVzc2FnZVNldCxZMjAxMyA6IG1lc3NhZ2VTZXQsWTIwMTQgOiBtZXNzYWdlU2V0LFkyMDE1IDogbWVzc2FnZVNldCxZMjAxNiA6IG1lc3NhZ2VTZXR9XHJcbn0pO1xyXG5cclxudmFyIGdldENQSVZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gIFt7eWVhciA6IDIwMTIsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxMicpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTMsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxMycpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTQsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNCcpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTUsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNScpLnZhbCgpfSxcclxuICAgICAgICAgICB7eWVhciA6IDIwMTYsIHZhbHVlIDogKyRjcGlGb3JtLmZpbmQoJyNZMjAxNicpLnZhbCgpfV1cclxufVxyXG5cclxudmFyIGlzVmFsaWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJGNwaUZvcm0udmFsaWQoKTtcclxufVxyXG5cclxuXHJcbnJldHVybiB7XHJcbiAgZ2V0Q1BJVmFsdWVzIDogZ2V0Q1BJVmFsdWVzLFxyXG4gIGlzVmFsaWQgOiBpc1ZhbGlkXHJcbn1cclxuXHJcbn0pKCk7XHJcbiIsIi8vIERFUEVOREVOQ0lFUyA6IEdyYXBoLCBDb21iaW5lZEdyYXBoXHJcblxyXG52YXIgR3JhcGhNb2R1bGUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgLy8gSG9sZHMgdGhlIGdyYXBoIG9iamVjdHNcclxuICB2YXIgZ3JhcGhzID0gW107XHJcblxyXG4gIC8vIEJsdWUgY29sb3Igc2NhbGVcclxuICB2YXIgeiA9IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKFtcIiNCQkRFRkJcIiwgXCIjNjRCNUY2XCIsIFwiIzE5NzZEMlwiLCBcIiMxNTY1QzBcIiwgXCIjMEQ0N0ExXCIsIFwiI2QwNzQzY1wiLCBcIiNmZjhjMDBcIl0pO1xyXG5cclxuICAvLyBSZWQgY29sb3Igc2NhbGUgZm9yIG5lZ2F0aXZlIHZhbHVlc1xyXG4gIHZhciB6UmVkID0gZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoW1wiI0ZGNzM3M1wiLCBcIiNGRjRDNENcIiwgXCIjRkYyNjI2XCIsIFwiI0IyMDAwMFwiLCBcIiNEOTAwMDBcIiwgXCIjZDA3NDNjXCIsIFwiI2ZmOGMwMFwiXSk7XHJcblxyXG4gIC8vIEdyZWVuIGNvbG9yIHNjYWxlIGZvciBzZWxlY3RlZCB2YWx1ZXNcclxuICB2YXIgelNlbGVjdGVkID0gZDMuc2NhbGVPcmRpbmFsKCkucmFuZ2UoW1wiI0MxRkZDMVwiLCBcIiM5MEVFOTBcIiwgXCIjNUJDODVCXCIsIFwiIzMxQTIzMVwiLCBcIiMxMzdCMTNcIiwgXCIjZDA3NDNjXCIsIFwiI2ZmOGMwMFwiXSk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpc2VzIGFsbCBvZiB0aGUgZ3JhcGhzIG9uIHRoZSBwYWdlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9ICB1cGRhdGUsIGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSBmb3IgZWFjaCBvZiB0aGUgZ3JhcGhzXHJcbiAgICogKi9cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGdyYXBoc1xyXG4gICAgdXBkYXRlLmRhdGEuZm9yRWFjaCAoZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgaWYodGFibGVEYXRhLmNvbWJpbmVkKXtcclxuICAgICAgICBncmFwaHMucHVzaChuZXcgQ29tYmluZWRHcmFwaCh0YWJsZURhdGEuaWQsdGFibGVEYXRhLnJvd3MsdGFibGVEYXRhLnRhYmxlMVJvd3MsdGFibGVEYXRhLnRhYmxlMlJvd3MsICB0YWJsZURhdGEuc2VhcmNoLCB0YWJsZURhdGEuc2VhcmNoMikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGdyYXBocy5wdXNoKG5ldyBHcmFwaCh0YWJsZURhdGEuaWQsdGFibGVEYXRhLnJvd3MsdGFibGVEYXRhLnNlYXJjaCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vIEluc2VydCB0aGUgdGl0bGVzIGFuZCBjcmVhdGUgdGhlIGdyYXBoc1xyXG4gICAgZ3JhcGhzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgIGcuaW5zZXJ0VGl0bGVzKCk7XHJcbiAgICAgIGcuY3JlYXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgYWxsIHRoZSBncmFwaHMgd2l0aCB0aGUgbmV3IHJvd3NcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgdXBkYXRlLCBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgZm9yIGVhY2ggb2YgdGhlIGdyYXBoc1xyXG4gICAqICovXHJcbiAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgZ3JhcGhzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgICAgaWYoZy5nZXRJRCgpID09PSB0YWJsZURhdGEuaWQpe1xyXG4gICAgICAgICAgaWYoZy5pc0NvbWJpbmVkKCkpe1xyXG4gICAgICAgICAgICBnLnVwZGF0ZSh0YWJsZURhdGEucm93cywgdGFibGVEYXRhLnRhYmxlMVJvd3MsIHRhYmxlRGF0YS50YWJsZTJSb3dzKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gYSByb3cgaXMgY2xpY2tlZFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R9ICBldmVudCwgY29udGFpbnMgdGhlIEVEQlxyXG4gICAqICovXHJcbiAgdmFyIHJvd0NsaWNrZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmKGV2ZW50LnVuc2VsZWN0KSB7XHJcbiAgICAgIGQzLnNlbGVjdEFsbChcIi5saW5lLXNlbGVjdGVkLXRhYmxlXCIpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuICAgICAgZDMuc2VsZWN0QWxsKFwiLnZlYy1kb3Qtc2VsZWN0ZWRcIikuY2xhc3NlZChcInZlYy1kb3Qtc2VsZWN0ZWRcIiwgZmFsc2UpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgYWxyZWFkeVNlbGVjdGVkID0gZmFsc2U7IC8vIFRPRE8gZml4XHJcblxyXG4gICAgLy8gQmVmb3JlIHdlIHJlbW92ZSB0aGUgY2xhc3Mgd2UgbmVlZCB0byBhcHBseSB0aGUgY29ycmVjdCBjb2xvciBzY2FsZVxyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmJhci1zZWxlY3RlZFwiKS5kYXR1bShmdW5jdGlvbihkKSB7cmV0dXJuIGQ7IH0pXHJcbiAgICAuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge3JldHVybiB6KGQua2V5KTsgfSk7XHJcblxyXG4gICAgLy8gU2VsZWN0IGFsbCByZWN0YW5nbGUgd2l0aCB0aGUgc2VsZWN0ZWQgY2xhc3MgYW5kIHJlbW92ZSBjbGFzc1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmJhci1zZWxlY3RlZFwiKS5jbGFzc2VkKFwiYmFyLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuXHJcbiAgICBpZihhbHJlYWR5U2VsZWN0ZWQpe3JldHVybjt9IC8vIFRoZSBjYXNlIHdoZXJlIHRoZSByb3cgaXMgdW5zZWxlY3RlZCBidXQgbm90aGluZyBlbHNlIGlzIHNlbGVjdGVkXHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKFwicmVjdC5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpXHJcbiAgICAuY2xhc3NlZChcImJhci1zZWxlY3RlZFwiLCB0cnVlKSAvLyBTZWxlY3QgYWxsIHJlY3RhbmdsZSB3aXRoIHRoZSBjb3JyZWN0IEVEQiBhbmQgb3V0bGluZSBiYXJzIGFuZCBhZGQgc2VsZWN0ZWQgY2xhc3NcclxuICAgIC5kYXR1bShmdW5jdGlvbihkKSB7cmV0dXJuIGQ7IH0pIC8vIEdyYWIgdGhlIGRhdGEgYm91bmQgdG8gdGhlIGVsZW1lbnRzXHJcbiAgICAuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge3JldHVybiB6U2VsZWN0ZWQoZC5rZXkpOyB9KTsgLy8gQXBwbHkgdGhlIGdyZWVuIGNvbG9yIHNjYWxlIGJhc2VkIG9uIHRoZSBrZXlcclxuXHJcbiAgICAvLyBTZWxlY3QgYWxsIGxpbmVzIHdpdGggdGhlIHNlbGVjdGVkIGNsYXNzIGFuZCByZW1vdmUgY2xhc3NcclxuICAgIGQzLnNlbGVjdEFsbChcIi5saW5lLXNlbGVjdGVkLXRhYmxlXCIpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdEFsbChcIi52ZWMtZG90LXNlbGVjdGVkXCIpLmNsYXNzZWQoXCJ2ZWMtZG90LXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuXHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKFwibGluZS5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpLmNsYXNzZWQoXCJsaW5lLXNlbGVjdGVkLXRhYmxlXCIsIHRydWUpO1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmRvdC5cIitldmVudC5lZGIucmVwbGFjZSgvIC9nICwgXCJcIikpLmNsYXNzZWQoXCJ2ZWMtZG90LXNlbGVjdGVkXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHNcclxuICBldmVudHMub24oXCJJTklUX0RBVEFcIiwgaW5pdCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX0NMSUNLRURcIiwgcm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX1VQREFURVwiLCB1cGRhdGUpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdXBkYXRlIDogdXBkYXRlXHJcbiAgfVxyXG59KSgpO1xyXG4iLCJcclxudmFyIHNlbGVjdGlvblJvd3MgPSAgKGZ1bmN0aW9uKCl7XHJcbiAgICAvLyBGaXJzdCBjcmVhdGUgdGhlIGVtcHR5IHNlbGVjdGlvbmRhdGFyb3dzIHdoaWNoIGFyZSB1c2VkIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbGVjdGlvbnNcclxuICAgIHZhciByb3dzRGF0YSA9IFtuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigwKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigxKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigyKSxuZXcgU2VsZWN0aW9uUm93Q29udHJvbGxlcigzKV07XHJcblxyXG4gICAgLy8gTmV4dCBjcmVhdGUgdGhlIG9iamVjdCB0aGF0IGhvbGQgdGhlIGxvZ2ljIGZvciB0aGUgc2VsZWN0b3JzXHJcblxyXG4gICAgdmFyIHNlbGVjdG9ycyA9IFtdO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDQ7IGkrKyl7XHJcbiAgICAgIHNlbGVjdG9ycy5wdXNoKHsgcyA6IG5ldyBTZWN0aW9uU2VsZWN0KGkpLCBjIDogbmV3IENhdGVnb3J5U2VsZWN0KGkpLCBzYyA6IG5ldyBTdWJDYXRlZ29yeVNlbGVjdChpKSwgZCA6IG5ldyBEZXNjcmlwdGlvblNlbGVjdChpKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBnZXRBbGxTZWxlY3Rpb25EYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZWN0aW9ucyA9IFtdO1xyXG4gICAgICByb3dzRGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICAgIHNlbGVjdGlvbnMucHVzaChyLmdldFJvd1NlbGVjdGlvbigpKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgY2FuU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByb3dzRGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICBpZighcm93c0RhdGFbaV0udmFsaWRTZWxlY3Rpb24oKSlyZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgaW4gb3B0aW9ucyBmb3IgZWFjaCBzZWxlY3Rpb24gZHJvcCBkb3duIGZyb20gYSBzZWFyY2guXHJcbiAgICAgKiBXaGVuIHRoZSBwYWdlIGlzIGxvYWRlZCBmcm9tIGEgc2VhcmNoIHRoZSBvcHRpb24gZm9yIHRoYXQgc2VhcmNoIG5lZWQgdG8gYmUgaW5zZXJ0ZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uIHtPYmplY3R9IG9uZSByb3cgb2Ygc2VsZWN0aW9ucyAoc2VjdGlvbiwgY2F0ZWdvcnkgZXRjKVxyXG4gICAgICogKi9cclxuICAgIHZhciBzZXRTZWxlY3Rpb25zRnJvbVVSTCA9IGZ1bmN0aW9uKHNlbGVjdGlvbil7XHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlIGNhdGVnb3JpZXMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb25cclxuICAgICAgICBEYXRhYmFzZS5nZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBmdW5jdGlvbiAoY2F0ZWdvcmllcyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNjYXRlZ29yeS1zZWxlY3QnK3NlbGVjdGlvbi5pZCxjYXRlZ29yaWVzLCBzZWxlY3Rpb24uY2F0ZWdvcnkpO1xyXG4gICAgICAgICAgfX0pO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFsbCB0aGUgIHN1YiBjYXRlZ29yaWVzIGFzc29jaWF0ZWQgd2l0aCBzZWxlY3RlZCBzZWN0aW9uIGFuZCBjYXRlZ29yeVxyXG4gICAgICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sIHNlbGVjdGlvbi5jYXRlZ29yeSwgZnVuY3Rpb24gKHN1YkNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgICAgICBzZWFyY2hEYXRhLnZhbGlkT3B0aW9uc1tzZWxlY3Rpb24uaWRdID0gdHJ1ZTsgLy8gVGhlcmUgYXJlIG9wdGlvbnMgZm9yIHRoaXMgcm93IGFuZCBzdWIgY2F0ZWdvcnlcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNzdWJzZWN0aW9uLXNlbGVjdCcrc2VsZWN0aW9uLmlkLHN1YkNhdGVnb3JpZXMsc2VsZWN0aW9uLnN1YkNhdGVnb3J5KTtcclxuICAgICAgICAgIH19KTtcclxuXHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlICBkZXNjcmlwdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHNlbGVjdGVkIHNlY3Rpb24sIGNhdGVnb3J5LCBhbmQgc3Vic2VjdGlvbnNcclxuICAgICAgICBEYXRhYmFzZS5nZXREZXNjcmlwdGlvbnNGcm9tRGF0YWJhc2Uoc2VsZWN0aW9uLnNlY3Rpb24sc2VsZWN0aW9uLmNhdGVnb3J5LHNlbGVjdGlvbi5zdWJDYXRlZ29yeSwgZnVuY3Rpb24gKGRlc2NyaXB0aW9ucyxub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNkZXNjcmlwdGlvbi1zZWxlY3QnK3NlbGVjdGlvbi5pZCxkZXNjcmlwdGlvbnMsc2VsZWN0aW9uLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgIH19KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zLCB3aXRoU2VhcmNoKSB7XHJcbiAgICAgIGlmKHdpdGhTZWFyY2gpe1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJJTklUX1NFTEVDVElPTlNcIiwgdXJsU2VsZWN0aW9ucyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSnVzdCBmaWxsIHRoZSBzZWN0aW9uIHNlbGVjdG9ycyB3aXRoIHNlY3Rpb25zXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0U2VjdGlvbnNGcm9tRGF0YWJhc2UoZnVuY3Rpb24oc2VjdGlvbnMpe1xyXG4gICAgICAgICAgdmFyIGRwID0gbmV3IERhdGFQcm9jZXNzb3IoKTtcclxuICAgICAgICAgIGRwLnNvcnRTZWN0aW9ucyh7c2VjdGlvbnMgOiBzZWN0aW9uc30pOyAvLyBUT0RPIGZpeFxyXG5cclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcignI3NlY3Rpb24tc2VsZWN0JytpLHNlY3Rpb25zLCcnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKHJvd051bWJlcikge1xyXG4gICAgICAgIHJvd3NEYXRhW3Jvd051bWJlcl0uY2xlYXIoKTtcclxuICAgICAgICAkKCcjZGVzY3JpcHRpb24tc2VsZWN0Jytyb3dOdW1iZXIrJywjc3ViY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIrJywjY2F0ZWdvcnktc2VsZWN0Jytyb3dOdW1iZXIpLmh0bWwoJycpO1xyXG4gICAgICAgICQoJyNzZWN0aW9uLXNlbGVjdCcrcm93TnVtYmVyKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAkKFwiLnNlbGVjdHBpY2tlclwiKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdChbXSxmYWxzZSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBnZXRBbGxTZWxlY3Rpb25EYXRhIDogZ2V0QWxsU2VsZWN0aW9uRGF0YSxcclxuICAgICAgc2V0U2VsZWN0aW9uc0Zyb21VUkwgOiBzZXRTZWxlY3Rpb25zRnJvbVVSTCxcclxuICAgICAgaW5pdCA6IGluaXQsXHJcbiAgICAgIGNsZWFyIDogY2xlYXIsXHJcbiAgICAgIGNhblNlYXJjaCA6IGNhblNlYXJjaFxyXG4gICAgfVxyXG59KSgpO1xyXG4iLCJ2YXIgVGFibGVzTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIFRoZSBFREJzIHRoYXQgYmVsb25nIHRvIGVhY2ggcmVnaW9uXHJcbiAgdmFyIHJlZ2lvbnMgPSB7XHJcbiAgICBuIDogW1wiQ2VudHJhbGluZXNcIixcIkNvdW50aWVzIFBvd2VyXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJFbGVjdHJhXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFxyXG4gICAgICAgICBcIlBvd2VyY29cIixcIlNjYW5wb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlVuaXNvbiBOZXR3b3Jrc1wiLFwiVmVjdG9yIExpbmVzXCIsXHJcbiAgICAgICAgIFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiLFwiV2VsbGluZ3RvbiBFbGVjdHJpY2l0eVwiXSxcclxuICAgIHVuaSA6IFtcIkNvdW50aWVzIFBvd2VyXCIsXCJIb3Jpem9uIEVuZXJneVwiLFwiTm9ydGhwb3dlclwiLFwiVGhlIExpbmVzIENvbXBhbnlcIixcIlRvcCBFbmVyZ3lcIixcIlZlY3RvciBMaW5lc1wiLFwiV2FpcGEgTmV0d29ya3NcIixcIldFTCBOZXR3b3Jrc1wiXSxcclxuICAgIGVuaSA6IFtcIkNlbnRyYWxpbmVzXCIsXCJFYXN0bGFuZCBOZXR3b3JrXCIsXCJTY2FucG93ZXJcIixcIlVuaXNvbiBOZXR3b3Jrc1wiXSxcclxuICAgIHN3bmkgOiBbXCJFbGVjdHJhXCIsXCJQb3dlcmNvXCIsXCJXZWxsaW5ndG9uIEVsZWN0cmljaXR5XCJdLFxyXG4gICAgcyA6IFtcIkFscGluZSBFbmVyZ3lcIixcIkF1cm9yYSBFbmVyZ3lcIixcIkJ1bGxlciBFbGVjdHJpY2l0eVwiLFwiRWxlY3RyaWNpdHkgQXNoYnVydG9uXCIsXCJFbGVjdHJpY2l0eSBJbnZlcmNhcmdpbGxcIixcclxuICAgICAgICAgXCJNYWluUG93ZXIgTlpcIixcIk1hcmxib3JvdWdoIExpbmVzXCIsXCJOZWxzb24gRWxlY3RyaWNpdHlcIixcIk5ldHdvcmsgVGFzbWFuXCIsXHJcbiAgICAgICAgIFwiTmV0d29yayBXYWl0YWtpXCIsXCJPcmlvbiBOWlwiLFwiT3RhZ29OZXRcIixcIlRoZSBQb3dlciBDb21wYW55XCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICB1c2kgOiBbXCJBbHBpbmUgRW5lcmd5XCIsXCJCdWxsZXIgRWxlY3RyaWNpdHlcIixcIk1haW5Qb3dlciBOWlwiLFwiTWFybGJvcm91Z2ggTGluZXNcIixcIk5lbHNvbiBFbGVjdHJpY2l0eVwiLFwiTmV0d29yayBUYXNtYW5cIixcIk9yaW9uIE5aXCIsXCJXZXN0cG93ZXJcIl0sXHJcbiAgICBsc2kgOiBbXCJBdXJvcmEgRW5lcmd5XCIsXCJFbGVjdHJpY2l0eSBBc2hidXJ0b25cIixcIkVsZWN0cmljaXR5IEludmVyY2FyZ2lsbFwiLFwiTmV0d29yayBXYWl0YWtpXCIsXCJPdGFnb05ldFwiLFwiVGhlIFBvd2VyIENvbXBhbnlcIl1cclxuICB9O1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIG1haW4gdGFibGVcclxuICB2YXIgc2VsZWN0ZWRSb3cgPSBcIlwiO1xyXG5cclxuICAvLyBUaGUgaWQgb2YgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCByb3cgaW4gdGhlIHRvdGFsc1xyXG4gIHZhciBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuXHJcbiAgLy8gSG9sZHMgdGhlIHRhYmxlIG9iamVjdHNcclxuICB2YXIgdGFibGVzID0gW107XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSB0YWJsZXMgdXNpbmcgdGhlIHRhYmxlIGRhdGFcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRhYmxlcyBkYXRhXHJcbiAgICogKi9cclxuICB2YXIgaW5pdCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2ggKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIGlmKHRhYmxlRGF0YS5jb21iaW5lZCl7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCwgdGFibGVEYXRhLnJvd3MsIFt0YWJsZURhdGEuc2VhcmNoLCB0YWJsZURhdGEuc2VhcmNoMiBdLCB0cnVlKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGFibGVzLnB1c2gobmV3IFRhYmxlKHRhYmxlRGF0YS5pZCx0YWJsZURhdGEucm93cyx0YWJsZURhdGEuc2VhcmNoLGZhbHNlKSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAvLyBDcmVhdGUgZWFjaCBvZiB0aGUgdGFibGVzIGFsb25nIHdpdGggYSB0aGUgdG90YWxzIHRhYmxlXHJcbiAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5pbnNlcnRUaXRsZXMoKTtcclxuICAgICAgdGFibGUuY3JlYXRlKCk7XHJcbiAgICAgIHRhYmxlLmNyZWF0ZVRvdGFsc1RhYmxlKGZhbHNlLCBzZWxlY3RlZFRvdGFsUm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJlbmRlciBlYWNoIG9mIHRoZSB0YWJsZXNcclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXt0YWJsZS5yZW5kZXIoKTt9KTtcclxuICB9XHJcblxyXG4gIC8vIENhbGxlZCB3aGVuIGEgcm93IGNsaWNrZWQgZXZlbnQgb2Njb3Vyc1xyXG4gIHZhciByb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgaWYoc2VsZWN0ZWRSb3cgPT09IHVwZGF0ZS5yb3dJRCl7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit1cGRhdGUuZWRiK1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICAgIHJvd1NlbGVjdGVkID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkUm93ICE9PSBcIlwiKXtcclxuICAgICAgdmFyIHRleHQgPSAkKFwiI1wiK3NlbGVjdGVkUm93K1wiIC5lZGItY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICQoJy50YWJsZS1yb3cnKS5maW5kKFwiLmVkYi1jZWxsOmNvbnRhaW5zKCdcIit0ZXh0K1wiJylcIikucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICB9XHJcbiAgICBzZWxlY3RlZFJvdyA9IHVwZGF0ZS5yb3dJRDtcclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5lZGItY2VsbDpjb250YWlucygnXCIrdXBkYXRlLmVkYitcIicpXCIpLnBhcmVudCgpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucm93Q2xpY2tlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgdG90YWxSb3dDbGlja2VkID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIHJlZ2lvbiA9IHVwZGF0ZS5yZWdpb247XHJcblxyXG4gICAgaWYoc2VsZWN0ZWRUb3RhbFJvdyA9PT0gdXBkYXRlLnJvd0lEKXtcclxuICAgICAgdmFyIG9sZFJlZyA9ICQoXCIjXCIrdXBkYXRlLnJvd0lEK1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcblxyXG4gICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICQodGhpcykudGV4dCgpID09PSByZWdpb247XHJcbiAgICAgIH0pLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG4gICAgICBzZWxlY3RlZFRvdGFsUm93ID0gXCJcIjtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHNlbGVjdGVkVG90YWxSb3cgIT09IFwiXCIpe1xyXG4gICAgICAgIHZhciBvbGRSZWcgPSAkKFwiI1wiK3NlbGVjdGVkVG90YWxSb3crXCIgLnJlZy1jZWxsXCIpLnRleHQoKTtcclxuICAgICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrb2xkUmVnK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkgPT09IG9sZFJlZztcclxuICAgICAgICB9KS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcInJvdy1zZWxlY3RlZFwiKTsgLy8gU2VsZWN0cyBlZGIgcm93IGluIGFsbCB0YWJsZXNcclxuICAgIH1cclxuXHJcbiAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5yZWctY2VsbDpjb250YWlucygnXCIrcmVnaW9uK1wiJylcIikuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gcmVnaW9uO1xyXG4gICAgfSkucGFyZW50KCkuYWRkQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcblxyXG4gICAgLy8gaWYgaWQgZW5kcyB3aXRoIGxldHRlciBzZXQgdG8gaWRcclxuICAgIHNlbGVjdGVkVG90YWxSb3cgPSB1cGRhdGUucm93SUQ7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS50b3RhbHNSb3dTZWxlY3RlZCh1cGRhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgdmFyIGFwcGx5Q1BJID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgdmFyIGNwaVZhbHVlcyA9IHVwZGF0ZS5jcGlWYWx1ZXM7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIGlmKHRhYmxlLmNhbkFwcGx5Q1BJKCkpe1xyXG4gICAgICAgIHRhYmxlLmFwcGx5Q1BJKGNwaVZhbHVlcyk7XHJcbiAgICAgICAgdGFibGUuY3JlYXRlVG90YWxzVGFibGUodHJ1ZSwgc2VsZWN0ZWRUb3RhbFJvdyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciByZXZlcnRDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIHRhYmxlLnJldmVydENQSSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5yZW5kZXIoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIHVwZGF0ZSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2goZnVuY3Rpb24odGFibGVEYXRhKXtcclxuICAgICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24oZyl7XHJcbiAgICAgICAgaWYoZy5pZCA9PT0gdGFibGVEYXRhLmlkKXtcclxuICAgICAgICAgIGlmKGcuaXNDb21iaW5lZCl7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzLCB0YWJsZURhdGEudGFibGUxUm93cywgdGFibGVEYXRhLnRhYmxlMlJvd3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZy51cGRhdGUodGFibGVEYXRhLnJvd3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHNcclxuICBldmVudHMub24oXCJJTklUX0RBVEFcIiwgaW5pdCk7XHJcbiAgZXZlbnRzLm9uKFwiUk9XX0NMSUNLRURcIiwgcm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiVE9UQUxfUk9XX0NMSUNLRURcIiwgdG90YWxSb3dDbGlja2VkKTtcclxuICBldmVudHMub24oXCJBUFBMWV9DUElcIiwgYXBwbHlDUEkpO1xyXG4gIGV2ZW50cy5vbihcIlJFVkVSVF9DUElcIiwgcmV2ZXJ0Q1BJKTsgLy8gV0hBVD9cclxuICBldmVudHMub24oXCJST1dfVVBEQVRFXCIsIHVwZGF0ZSk7XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcmVnaW9ucyA6IHJlZ2lvbnNcclxuICB9XHJcbn0pKCk7XHJcbiJdfQ==
