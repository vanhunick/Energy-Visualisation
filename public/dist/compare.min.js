function CombinedGraph(t,e,i,o,s,r){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.vectorID="#vector-graph-"+t,this.rows1=i,this.rows2=o,this.combinedRows=e,this.selection1=s,this.selection2=r,this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t),this.$titleVector=$("#title-vector-"+t)}function DataProcessor(){}function DataStructure(t,e,i){this.selectionData=t,this.selectionTable=e,this.combineData=i}function Selection(t,e,i,o){this.aTable=t,this.bTable=e,this.cTable=i,this.dTable=o}function DataTables(t,e,i,o,s,r){this.tableA=t,this.tableB=e,this.tableC=i,this.tableD=o,this.tableAB=s,this.tableCD=r}function SelectionData(t,e,i,o,s){this.rows=t,this.title=e,this.subTitle=i,this.id=s,this.unit=o}function SelectionDataCombined(t,e,i,o,s,r,n,a){this.rows=t,this.title1=o,this.title2=s,this.unit1=r,this.unit2=n,this.id=a,this.table1Rows=e,this.table2Rows=i}function SelectedTableData(t,e,i,o,s){this.rows=t,this.id=e,this.title=i,this.subTitle=o,this.unit=s}function Graph(t,e,i){this.id=t,this.groupedID="#grouped-bar-"+t,this.boxID="#boxplot-"+t,this.rows=e,this.selection=i,this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.unit=this.getUnit(),this.$titleBar=$("#title-bar-"+t),this.$titleBox=$("#title-box-"+t)}function SelectionRowController(t){this.idNumb=t,this.rowSelections={id:t,section:"",category:"",subCategory:"",description:""},this.setInitialState=function(t){this.rowSelections=t},this.clear=function(){this.rowSelections={id:this.id,section:"",category:"",subCategory:"",description:""}},this.validSelection=function(){return""===this.rowSelections.section||""!==this.rowSelections.description},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0];this.rowSelections.section=i.section,this.rowSelections.category=i.category,this.rowSelections.subCategory=i.subCategory,this.rowSelections.description=i.description},this.updateSection=function(t){t.id===this.idNumb&&(this.rowSelections.category="",this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.section=t.section,events.emit("NEW_SECTION",{id:this.idNumb,selection:this.rowSelections}))},this.updateCategory=function(t){t.id===this.idNumb&&(this.rowSelections.subCategory="",this.rowSelections.description="",this.rowSelections.category=t.category,events.emit("NEW_CATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateSubCategory=function(t){t.id===this.idNumb&&(this.rowSelections.description="",this.rowSelections.subCategory=t.subCategory,events.emit("NEW_SUBCATEGORY",{id:this.idNumb,selection:this.rowSelections}))},this.updateDescription=function(t){t.id===this.idNumb&&(this.rowSelections.description=t.description,events.emit("NEW_DESCRIPTION",{id:this.idNumb,selection:this.rowSelections}))},this.getRowSelection=function(){return this.rowSelections},events.on("SECTION_CHANGED",this.updateSection.bind(this)),events.on("CATEGORY_CHANGED",this.updateCategory.bind(this)),events.on("SUBCATEGORY_CHANGED",this.updateSubCategory.bind(this)),events.on("DESCRIPTION_CHANGED",this.updateDescription.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SectionSelect(t){this.idNumb=t,this.id="#section-select"+t,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=this.id,o=t.filter(function(t){return t.id===e})[0];Database.getSectionsFromDatabase(function(t){dp.sortSections({sections:t}),addOptionsToSelector(i,t,o.section)})},this.updated=function(t){events.emit("SECTION_CHANGED",{section:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function CategorySelect(t){this.idNumb=t,this.id="#category-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getCategoriesFromDatabase(i.section,function(t,e){e||addOptionsToSelector(o,t,i.category)})},this.updated=function(t){events.emit("CATEGORY_CHANGED",{category:this.$select.find("option:selected").text(),id:this.idNumb})},this.sectionChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id;Database.getCategoriesFromDatabase(t.selection.section,function(t,i){i||addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("NEW_SECTION",this.sectionChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function SubCategorySelect(t){this.idNumb=t,this.id="#subcategory-select"+this.idNumb,this.$select=$(this.id),this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getSubCategoriesFromDatabase(i.section,i.category,function(t,e){e||addOptionsToSelector(o,t,i.subCategory)})},this.categoryChangedListener=function(t){if(t.id===this.idNumb){this.$select.html("");var e=this.id,i=this.idNumb;Database.getSubCategoriesFromDatabase(t.selection.section,t.selection.category,function(t,o){o?events.emit("SUBCATEGORY_CHANGED",{subCategory:"",id:i}):addOptionsToSelector(e,t,"")})}},this.updated=function(t){events.emit("SUBCATEGORY_CHANGED",{subCategory:this.$select.find("option:selected").text(),id:this.idNumb})},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("NEW_CATEGORY",this.categoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function DescriptionSelect(t){this.idNumb=t,this.id="#description-select"+t,this.$select=$(this.id),this.updated=function(t){events.emit("DESCRIPTION_CHANGED",{description:this.$select.find("option:selected").text(),id:this.idNumb})},this.initEventListener=function(t){var e=this.idNumb,i=t.filter(function(t){return t.id===e})[0],o=this.id;Database.getDescriptionsFromDatabase(i.section,i.category,i.subCategory,function(t,e){e||addOptionsToSelector(o,t,i.description)})},this.subCategoryChangedListener=function(t){if(t.id===this.idNumb){var e=this.id;Database.getDescriptionsFromDatabase(t.selection.section,t.selection.category,t.selection.subCategory,function(t){addOptionsToSelector(e,t,"")})}},this.$select.on("change",this.updated.bind(this)),events.on("SECTION_CHANGED",clearMyself.bind(this)),events.on("CATEGORY_CHANGED",clearMyself.bind(this)),events.on("NEW_SUBCATEGORY",this.subCategoryChangedListener.bind(this)),events.on("INIT_SELECTIONS",this.initEventListener.bind(this))}function clearMyself(t){t.id===this.idNumb&&(this.$select.html(""),this.$select.selectpicker("refresh"))}function addOptionsToSelector(t,e,i){$(t).html("");for(var o=0;o<e.length;o++)null!==e[o]&&(e[o]===i?$(t).append("<option selected>"+e[o]+"</option>"):$(t).append("<option>"+e[o]+"</option>"));$(t).selectpicker("refresh")}function Table(t,e,i,o){this.id=t,this.isCombined=o,this.rows=e,this.unit=e[0].units,this.selection=i,o&&(this.selection1=i[0],this.selection2=i[1]),this.title=this.getTitle(),this.subTitle=this.getSubTitle(),this.dpFormat=d3.format(".4r"),this.availableYears=this.getAvailableYears(),this.noCPICells=[],this.$table=$("#table-"+t),this.$totalsTable=$("#table-total-"+t),this.$title=$("#title-"+t)}CombinedGraph.prototype.isCombined=function(){return!0},CombinedGraph.prototype.getID=function(){return this.id},CombinedGraph.prototype.getSelection1Title=function(){var t=null===this.selection1?"":this.selection1.subCategory;return this.selection1.description+", "+this.selection1.category+", "+t},CombinedGraph.prototype.getSelection2Title=function(){var t=null===this.selection2?"":this.selection2.subCategory;return this.selection2.description+", "+this.selection2.category+",  "+t},CombinedGraph.prototype.getUnit=function(){return this.rows1[0].units+" / "+this.rows2[0].units},CombinedGraph.prototype.getUnit1=function(){return this.rows1[0].units},CombinedGraph.prototype.getUnit2=function(){return this.rows2[0].units},CombinedGraph.prototype.insertTitles=function(){var t="<h4>Ratio "+this.id.charAt(0).toUpperCase()+" / "+this.id.charAt(1).toUpperCase()+"</h4>",e='<h4 class="title"><span style="Color: black;">'+this.id.charAt(0).toUpperCase()+": </span>"+this.getSelection1Title()+"</h4>",i='<h4 class="title"><span style="Color: black;">'+this.id.charAt(1).toUpperCase()+": </span>"+this.getSelection2Title()+"</h4>";this.$titleBar.append(t),this.$titleBar.append(e),this.$titleBar.append(i),this.$titleBox.append(t),this.$titleBox.append(e),this.$titleBox.append(i),this.$titleVector.append(t),this.$titleVector.append(e),this.$titleVector.append(i)},CombinedGraph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.combinedRows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.combinedRows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit);var i=dp.createDataForVectorGraph(this.rows1,this.rows2);VectorModule.createVectorGraph(i,this.getUnit2(),this.getUnit1(),this.vectorID)},CombinedGraph.prototype.update=function(t,e,i){this.rows=t,this.rows1=e,this.rows2=i,this.create()},String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t){var e=this.filter(function(e){return e==t});return e.length>0}});var CompareModule=function(){function t(t,i,o){var s=i[0].category+", "+i[0].subCategory+", "+i[0].description,r=i[1].category+", "+i[1].subCategory+", "+i[1].description,n=i[2].category+", "+i[2].subCategory+", "+i[2].description,a=i[3].category+", "+i[3].subCategory+", "+i[3].description,c="<h3> Ratio (A / B ) over ( C / D ) </h3>",l='<span class="letter">A: </span>',h='<span class="letter">B: </span>',u='<span class="letter">C: </span>',d='<span class="letter">D: </span>',p='<h4 class="title">'+l+" "+s+"</h4>",b='<h4 class="title">'+h+" "+r+"</h4>",f='<h4 class="title">'+u+" "+n+"</h4>",v='<h4 class="title">'+d+" "+a+"</h4>";$("#title-vector-abcd").append(c).append(p).append(b).append(f).append(v),VectorModule.createVectorGraph(e.createDataForVectorGraph(t[0].rows,t[1].rows),o[0]+" / "+o[1],o[2]+" / "+o[3],"#vector-graph-abcd"),$("#vector-full-abcd").show()}var e=new DataProcessor,i={},o=!1,s=$("#error-div"),r=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},n=function(){if(!selectionRows.canSearch())return void(o||(s.append('<h4 style="color : red;">Partial Row Selected</h4>'),o=!0));var t={};selectionRows.getAllSelectionData().forEach(function(e){""!==e.section&&(t["s"+e.id]=e.section,t["c"+e.id]=e.category,t["sc"+e.id]=e.subCategory,t["d"+e.id]=e.description)}),window.location.replace("compare?"+r(t))},a=function(o){selectionRows.init(o,!0),Database.getRowsForSearch(o,function(s){s.forEach(function(t){null!==t.fcast_yr&&(t.obs_yr=t.fcast_yr)}),i.selection=new Selection(o[0],o[1],o[2],o[3]),i.rows=s,i.sortedRows=e.filterRowsToTablesAndCopy(s,i.selection);var r=[];i.sortedRows.forEach(function(t){"a"===t.id&&$("#tab-a").addClass("in active"),"ab"!==t.id&&"cd"!==t.id||r.push(t),$("#full-dash-"+t.id).show(),$("#tab-"+t.id).addClass("in active")}),2===r.length&&t(r,o,[i.sortedRows[0].rows[0].units,i.sortedRows[1].rows[0].units,i.sortedRows[2].rows[0].units,i.sortedRows[3].rows[0].units]),events.emit("INIT_DATA",{data:i.sortedRows}),events.emit("ROW_CLICKED",{rowID:"rowa0",rowNumb:0,edb:"Alpine Energy"}),events.emit("TOTAL_ROW_CLICKED",{rowID:"row-tot-a0",region:"South Island"}),i.sortedRows.forEach(function(t){"a"!==t.id&&$("#tab-"+t.id).removeClass("in active")}),c("#top-tab")})},c=function(t){$("html,body").animate({scrollTop:$(t).offset().top},"slow")},l=function(){if(CPIModule.isValid()&&void 0!==i.selection){var t=e.copyRows(i.rows);h(t,CPIModule.getCPIValues());var o=e.filterRowsToTablesAndCopy(t,i.selection);events.emit("ROW_UPDATE",{data:o}),events.emit("APPLY_CPI",{cpiValues:CPIModule.getCPIValues()})}},h=function(t,e){var i=t.filter(function(t){return t.units.includes("$")});if(0!==i.length)for(var o=i.reduce(function(t,e){return t.disc_yr<e.disc_yr?t:e}).obs_yr,s=i.reduce(function(t,e){return t.disc_yr>e.disc_yr?t:e}).obs_yr,r=o;r<=s;r++)i.forEach(function(t,o){for(var s=i[o].obs_yr,n=i[o].value,a=0;a<e.length;a++)e[a].year===r&&s<=r&&(n*=1+e[a].value/100);i[o].value=n})},u=function(){events.emit("ROW_UPDATE",{data:i.sortedRows}),events.emit("REVERT_CPI",{cpiValues:""})};return{loadSearchFromURL:a,search:n,applyCPI:l,revertCPI:u}}();$(document).ready(function(){$(".nav-link").removeClass("active"),$("#benchmarks-link").addClass("active"),$("#search-btn-compare").click(function(){CompareModule.search()}),$("cpi").click(function(){CompareModule.applyCPI()})});var CPIModule=function(){var t=$("#cpi-form");$.validator.setDefaults({errorClass:"help-block",highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")}});var e={required:!0,number:!0,min:.1,max:100},i={required:"Please enter a percentage",number:"Please enter a valid number",min:"Please enter a percentage greater than 0",max:"Please enter a percentage less than 100"};t.validate({rules:{Y2012:e,Y2013:e,Y2014:e,Y2015:e,Y2016:e},messages:{Y2012:i,Y2013:i,Y2014:i,Y2015:i,Y2016:i}});var o=function(){return[{year:2012,value:+t.find("#Y2012").val()},{year:2013,value:+t.find("#Y2013").val()},{year:2014,value:+t.find("#Y2014").val()},{year:2015,value:+t.find("#Y2015").val()},{year:2016,value:+t.find("#Y2016").val()}]},s=function(){return t.valid()};return{getCPIValues:o,isValid:s}}(),dp=new DataProcessor;DataProcessor.prototype.copyDataTables=function(t){for(var e=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],i=([t.tableAB,t.tableCD],[[],[],[],[],[],[]]),o=0;o<e.length;o++){var s=e[o];if(void 0!==s)if(4===o||5===o)for(var r=0;r<s.length;r++)i[o].push({description:s[r].description,disc_yr:s[r].disc_yr,edb:s[r].edb,section:s[r].section,units:s[r].unit,value:s[r].value,unitA:s[r].unitA,unitB:s[r].unitB,obs_yr:s[r].obs_yr});else for(var r=0;r<s.length;r++)i[o].push({category:s[r].category,description:s[r].description,disc_yr:s[r].disc_yr,edb:s[r].edb,fcast_yr:s[r].fcast_yr,network:s[r].network,note:s[r].note,obs_yr:s[r].obs_yr,p_key:s[r].p_key,sch_ref:s[r].sch_ref,schedule:s[r].schedule,section:s[r].section,sub_category:s[r].sub_category,units:s[r].units,value:s[r].value})}return new DataTables(i[0],i[1],i[2],i[3],i[4],i[5])},DataProcessor.prototype.copyRows=function(t){var e=[];return t.forEach(function(t){e.push({value:t.value,category:t.category,description:t.description,disc_yr:t.disc_yr,edb:t.edb,fcast_yr:t.fcast_yr,network:t.network,note:t.note,obs_yr:t.obs_yr,p_key:t.p_key,sch_ref:t.sch_ref,schedule:t.schedule,section:t.section,sub_category:t.sub_category,units:t.units})}),e},DataProcessor.prototype.createDataStructuresWithCopy=function(t){for(var e=[],i=[],o=[],s=[t.tableA.length>0,t.tableB.length>0,t.tableC.length>0,t.tableD.length>0],r=[t.tableA,t.tableB,t.tableC,t.tableD,t.tableAB,t.tableCD],n=["a","b","c","d","ab","cd"],a=0;a<s.length;a++)if(s[a]){var c=r[a][0].section+", "+r[a][0].category,l=null===r[a][0].sub_category?r[a][0].description:r[a][0].sub_category+", "+r[a][0].description;if(i.push(new SelectedTableData(r[a],n[a],l,c,r[a][0].units)),e.push(new SelectionData(r[a],l,c,r[a][0].units,n[a])),("a"===n[a]||"c"===n[a])&&s[a+1]){var h=0===a?4:3,u=r[a+1][0].section+", "+r[a+1][0].category,d=null===r[a+1][0].sub_category?r[a+1][0].description:r[a+1][0].sub_category+", "+r[a+1][0].description;i.push(new SelectedTableData(r[a+h],n[a+h],l+", "+c,d+", "+u,r[a+1][0].units)),o.push(new SelectionDataCombined(r[a+h],r[a],r[a+1],l+" "+c,d+" "+u,r[a][0].units,r[a+1][0].units,n[a+h]))}}return new DataStructure(e,i,o)},DataProcessor.prototype.validateSearchParams=function(t,e){var i=!0;return t.forEach(function(t,o){""===t.subCategory&&e[o]&&(i=!1),""!==t.section&&""!==t.category&&""!==t.description||""===t.section&&""===t.category&&""===t.description||(i=!1)}),i},DataProcessor.prototype.matchDBRow=function(t,e){return t.section===e.section&&t.category===e.category&&t.description===e.description&&(null!==t.sub_category?e.subCategory===t.sub_category:""===e.subCategory)},DataProcessor.prototype.filterRowsToTables=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)});var n=[];if(i.length>0&&n.push({id:"a",rows:i,search:e.aTable}),i.length>0&&o.length>0)var a=dp.combineTables(i,o);if(s.length>0&&r.length>0)var c=dp.combineTables(s,r);return new DataTables(i,o,s,r,a,c)},DataProcessor.prototype.filterRowsToTablesAndCopy=function(t,e){var i=t.filter(function(t){return dp.matchDBRow(t,e.aTable)}),o=t.filter(function(t){return dp.matchDBRow(t,e.bTable)}),s=t.filter(function(t){return dp.matchDBRow(t,e.cTable)}),r=t.filter(function(t){return dp.matchDBRow(t,e.dTable)});if(i.forEach(function(t){null===t.value&&(t.value=0)}),o.forEach(function(t){null===t.value&&(t.value=0)}),s.forEach(function(t){null===t.value&&(t.value=0)}),r.forEach(function(t){null===t.value&&(t.value=0)}),i.length>0&&o.length>0)var n=dp.combineTables(i,o);if(s.length>0&&r.length>0)var a=dp.combineTables(s,r);var c=this.copyDataTables(new DataTables(i,o,s,r,n,a)),l=[];return i.length>0&&l.push({id:"a",rows:c.tableA,search:e.aTable,combined:!1}),o.length>0&&l.push({id:"b",rows:c.tableB,search:e.bTable,combined:!1}),s.length>0&&l.push({id:"c",rows:c.tableC,search:e.cTable,combined:!1}),r.length>0&&l.push({id:"d",rows:c.tableD,search:e.dTable,combined:!1}),i.length>0&&o.length>0&&l.push({id:"ab",rows:c.tableAB,table1Rows:c.tableA,table2Rows:c.tableB,search:e.aTable,search2:e.bTable,combined:!0}),s.length>0&&r.length>0&&l.push({id:"cd",rows:c.tableCD,table1Rows:c.tableC,table2Rows:c.tableD,search:e.cTable,search2:e.dTable,combined:!0}),l},DataProcessor.prototype.combineTables=function(t,e){for(var i=[],o=t,s=e,r=0;r<o.length;r++)for(var n=0;n<s.length;n++)if(o[r].edb===s[n].edb&&o[r].obs_yr===s[n].obs_yr&&o[r].disc_yr===s[n].disc_yr){i.push({disc_yr:s[n].disc_yr,edb:s[n].edb,obs_yr:s[n].obs_yr,value:o[r].value/("0"===s[n].value||0===s[n].value?1:s[n].value),section:s[n].section+""+s[n].description+" over ",description:o[r].section+" "+o[r].description,unitA:o[r].units,unitB:s[n].units,unit:o[r].units+" / "+s[n].units});break}return i},DataProcessor.prototype.createDataForVectorGraph=function(t,e){var i=t,o=e,s=[],r=[],n=[];t.forEach(function(t){if(!n.includes(t.obs_yr))for(var i=0;i<e.length;i++)if(e[i].obs_yr===t.obs_yr){n.push(t.obs_yr);break}});for(var a=0;a<i.length;a++)if(!s.includes(i[a].edb)){var c=i.filter(function(t){return t.edb===i[a].edb}),l=o.filter(function(t){return t.edb===i[a].edb});s.push(i[a].edb);for(var h=[],u=[],d=0;d<c.length;d++)if(!h.includes(c[d].disc_yr)&&n.includes(c[d].disc_yr)){h.push(c[d].disc_yr);var p=c.filter(function(t){return t.disc_yr===c[d].disc_yr}),b=l.filter(function(t){return t.disc_yr===c[d].disc_yr});if(p.length!=b.length)return[];for(var f=0;f<p.length;f++)u.push({year:+p[f].disc_yr,valueA:+p[f].value,valueB:+b[f].value})}u.sort(function(t,e){return t.year-e.year}),r.push({edb:i[a].edb,years:u})}return r},DataProcessor.prototype.createDataForBoxPlot=function(t){for(var e=[],i=[],o=0;o<t.length;o++)e.includes(t[o].obs_yr)||(i.push(t.filter(function(e){return e.obs_yr===t[o].obs_yr})),e.push(t[o].obs_yr));for(var s=[],r=[],n=1/0,a=-(1/0),o=0;o<i.length;o++){var c=[];c[0]=""+i[o][0].obs_yr;for(var l=""+i[o][0].obs_yr,h=[],u=0;u<i[o].length;u++){var d=+i[o][u].value,p=i[o][u].edb;d>a&&(a=d),d<n&&(n=d),h.push(d),r.push({year:l,edb:p,value:d})}c[1]=h,s.push(c)}return s.sort(function(t,e){return t[0]-e[0]}),{min:n,max:a,data:s,scatterData:r}},DataProcessor.prototype.createDataForGroupedGraph=function(t){var e=[];t.forEach(function(t){e.includes(t.obs_yr)||e.push(t.obs_yr)}),e.sort(function(t,e){return+t-+e});for(var i=[],o=[],s=0;s<t.length;s++)if(o.includes(t[s].edb))for(var r=0;r<i.length;r++)i[r].edb===t[s].edb&&(i[r][t[s].obs_yr]=+t[s].value);else{o.push(t[s].edb);var n={edb:t[s].edb};n[t[s].obs_yr]=+t[s].value,i.push(n)}return{data:i,keys:e}},DataProcessor.prototype.sortSections=function(t){t.sections.sort(function(t,e){for(var i=0;!isNaN(t.charAt(i));)i++;var o=t.substring(0,i);for(i=0;!isNaN(e.charAt(i));)i++;var s=e.substring(0,i);return o!==s?o-s:[t,e].sort()[0]===t?-1:1})},DataProcessor.prototype.applyCPIToTableRows=function(t,e){t.forEach(function(i,o){for(var s=t[o].obs_yr,r=t[o].value,n=0;n<e.length;n++)s<=e[n].year&&(r*=1+e[n].value/100);t[o].value=r})},DataProcessor.prototype.addToSelection=function(t,e,i,o){for(var s=0;s<o.length;s++)o[s].id+""==t+""&&("section"===e?o[s].section=i:"category"===e?o[s].category=i:"subcategory"===e?o[s].subCategory=i:"description"===e&&(o[s].description=i))},DataProcessor.prototype.createTableTotals=function(t,e,i){for(var o=["n","uni","eni","swni","s","usi","lsi"],s={},r=0;r<i.length;r++)t.filter(function(t){return t.obs_yr===i[r]}).forEach(function(t){o.forEach(function(i){e[i].includes(t.edb)&&(void 0===s[i]?s[i]=[+t.value]:r===s[i].length?s[i].push(+t.value):s[i][r]+=+ +t.value)})});for(var n=[],r=0;r<i.length;r++)n.push(s.n[r]+s.s[r]);return s.nz=n,s},Graph.prototype.isCombined=function(){return!1},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.getID=function(){return this.id},Graph.prototype.getTitle=function(){return this.selection.description+", "+this.selection.subCategory},Graph.prototype.getSubTitle=function(){return this.selection.section+", "+this.selection.category},Graph.prototype.getUnit=function(){return this.rows[0].units},Graph.prototype.insertTitles=function(){this.$titleBar.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>"),this.$titleBox.append('<h3 class="title">'+this.title+"</h3>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Graph.prototype.create=function(){var t=dp.createDataForGroupedGraph(this.rows);GroupedBarModule.createdGroupedBarGraph(t.data,t.keys,this.unit,this.groupedID);var e=dp.createDataForBoxPlot(this.rows);BoxPlotModule.createBoxPlot(e,this.boxID,this.unit)},Graph.prototype.update=function(t){this.rows=t,this.create()};var GraphModule=function(){var t=[],e=d3.scaleOrdinal().range(["#BBDEFB","#64B5F6","#1976D2","#1565C0","#0D47A1","#d0743c","#ff8c00"]),i=(d3.scaleOrdinal().range(["#FF7373","#FF4C4C","#FF2626","#B20000","#D90000","#d0743c","#ff8c00"]),d3.scaleOrdinal().range(["#C1FFC1","#90EE90","#5BC85B","#31A231","#137B13","#d0743c","#ff8c00"])),o=function(e){e.data.forEach(function(e){e.combined?t.push(new CombinedGraph(e.id,e.rows,e.table1Rows,e.table2Rows,e.search,e.search2)):t.push(new Graph(e.id,e.rows,e.search))}),t.forEach(function(t){t.insertTitles(),t.create()})},s=function(e){e.data.forEach(function(e){t.forEach(function(t){t.getID()===e.id&&(t.isCombined()?t.update(e.rows,e.table1Rows,e.table2Rows):t.update(e.rows))})})},r=function(t){return t.unselect?(d3.selectAll(".line-selected-table").classed("line-selected",!1),void d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1)):(alreadySelected=!1,d3.selectAll(".bar-selected").datum(function(t){return t}).attr("fill",function(t){return e(t.key)}),d3.selectAll(".bar-selected").classed("bar-selected",!1),void(alreadySelected||(d3.selectAll("rect."+t.edb.replace(/ /g,"")).classed("bar-selected",!0).datum(function(t){return t}).attr("fill",function(t){return i(t.key)}),d3.selectAll(".line-selected-table").classed("line-selected",!1),d3.selectAll(".vec-dot-selected").classed("vec-dot-selected",!1),d3.selectAll("line."+t.edb.replace(/ /g,"")).classed("line-selected-table",!0),d3.selectAll(".dot."+t.edb.replace(/ /g,"")).classed("vec-dot-selected",!0))))};return events.on("INIT_DATA",o),events.on("ROW_CLICKED",r),events.on("ROW_UPDATE",s),{update:s}}(),selectionRows=function(){for(var t=[new SelectionRowController(0),new SelectionRowController(1),new SelectionRowController(2),new SelectionRowController(3)],e=[],i=0;i<4;i++)e.push({s:new SectionSelect(i),c:new CategorySelect(i),sc:new SubCategorySelect(i),d:new DescriptionSelect(i)});var o=function(){var e=[];return t.forEach(function(t){e.push(t.getRowSelection())}),e},s=function(){for(var e=0;e<t.length;e++)if(!t[e].validSelection())return!1;return!0},r=function(t){Database.getCategoriesFromDatabase(t.section,function(e,i){i||addOptionsToSelector("#category-select"+t.id,e,t.category)}),Database.getSubCategoriesFromDatabase(t.section,t.category,function(e,i){i||(searchData.validOptions[t.id]=!0,addOptionsToSelector("#subsection-select"+t.id,e,t.subCategory))}),Database.getDescriptionsFromDatabase(t.section,t.category,t.subCategory,function(e,i){i||addOptionsToSelector("#description-select"+t.id,e,t.description)})},n=function(t,e){e?events.emit("INIT_SELECTIONS",t):Database.getSectionsFromDatabase(function(t){var e=new DataProcessor;e.sortSections({sections:t});for(var i=0;i<4;i++)addOptionsToSelector("#section-select"+i,t,"")})},a=function(e){t[e].clear(),$("#description-select"+e+",#subcategory-select"+e+",#category-select"+e).html(""),$("#section-select"+e).find("option:selected").removeAttr("selected"),$(".selectpicker").selectpicker("refresh")};return n([],!1),{getAllSelectionData:o,setSelectionsFromURL:r,init:n,clear:a,canSearch:s}}();Table.prototype.getTitle=function(){if(this.isCombined){var t=null===this.selection[0]?"":this.selection[0].subCategory;return this.selection[0].category+", "+t+", "+this.selection[0].description}return(void 0===this.subCategory?"":this.selection.subCategory+", ")+" "+this.selection.description},Table.prototype.getSubTitle=function(){if(this.isCombined){var t=null===this.selection[1]?"":this.selection[1].subCategory;return this.selection[1].category+", "+t+", "+this.selection[1].description}return this.selection.section+", "+this.selection.category},Table.prototype.update=function(t){this.rows=t,this.createTotalsTable(!0,"")},Table.prototype.totalsRowSelected=function(t){var e=t.rowID.charAt(t.rowID.length-1),i="row-tot-"+this.id+e;SingleBarModule.showBarWithRowElem(i,t.region,"#bar-total-"+this.id,"#head-row-totals-"+this.id,"#table-total-"+this.id,this.unit)},Table.prototype.rowClicked=function(t){var e=t.rowID.slice(-1);isNaN(t.rowID.slice(-2))||(e=t.rowID.slice(-2)),SingleBarModule.showBarWithRowElem("row"+this.id+e,t.edb,"#bar-"+this.id,"#head-row-"+this.id,"#table-"+this.id,this.unit)},Table.prototype.getAvailableYears=function(){t=[];var t=[];return this.rows.forEach(function(e){t.includes(e.obs_yr)||t.push(e.obs_yr)}),t.sort(function(t,e){return+t-+e}),t},Table.prototype.canApplyCPI=function(){return!this.isCombined&&this.unit.includes("$")},Table.prototype.applyCPI=function(t){this.noCPICells.length>0&&this.revertCPI();var e=this.$table.find(".cell"),i=this.noCPICells;this.id;e.each(function(){i.push({id:$(this).attr("id"),value:$(this).text()})});var o=1/0,s=-(1/0);e.each(function(){var t=+$(this).attr("class").split(" ")[1];o=t<o?t:o,s=t>s?t:s});var r=this.dpFormat;e.each(function(){for(var e=+$(this).attr("class").split(" ")[1],i=$(this).attr("origvalue"),n=o;n<=s;n++)for(var a=0;a<t.length;a++)t[a].year===n&&e<=n&&(i*=1+t[a].value/100,i=r(i));$(this).text(i)})},Table.prototype.revertCPI=function(){if(this.noCPICells.length>0){var t=this.dpFormat;this.noCPICells.forEach(function(e){$("#"+e.id).text(t(e.value))})}},Table.prototype.insertTitles=function(){if(this.isCombined){var t=this.id.charAt(0).toUpperCase(),e=this.id.charAt(1).toUpperCase();this.$title.append("<h3>Ratio analysis "+t+" / "+e+"</h4>"),this.$title.append('<h4 class="title"><span style="color: black;">'+t+": </span>"+this.title+'</h4><h4 class="title"><span style="color: black;">'+e+": </span>"+this.subTitle+"</h4>")}else this.$title.append('<h2 class="title">'+this.title+"</h2>").append('<h4 class="subTitle">'+this.subTitle+"</h4>")},Table.prototype.create=function(){var t=this.createTableData(this.rows),e="";t[0].years.forEach(function(t){e+="<th>"+t.year+"</th>"}),this.$table.append('<tr id="head-row-'+this.id+'" class="table-row table-head"> <th>EDB</th>'+e+"</tr>");for(var i=0,o=0,s=[],r=0;r<t.length;r++){for(var n=t[r],a=n.edb,e=n.years,c="<tr class='table-row' id=row"+this.id+o+"><th class='edb-cell'>"+a+"</th>",l=0;l<e.length;l++){var h=e[l];c+="<th origValue='"+h.value+"' class='cell "+h.year+"' id='t"+this.id+i+"'>"+this.dpFormat(h.value)+"</th>",s.push({id:"#t"+this.id+i,value:h.value}),i++}this.$table.append(c+"</tr>"),$("#row"+this.id+o).click(function(){var t=this.id.slice(-1);isNaN(this.id.slice(-2))||(t=this.id.slice(-2));var e=$("#"+this.id+" .edb-cell").text();events.emit("ROW_CLICKED",{rowID:this.id,rowNumb:t,edb:e})}),o++}this.cellValues=s},Table.prototype.createTotalsTable=function(t,e){var i=dp.createTableTotals(this.rows,TablesModule.regions,this.availableYears),o={n:"North Island",uni:"Upper North Island",eni:"Eastern North Island",swni:"South-West North Island",s:"South Island",usi:"Upper South Island",lsi:"Lower South Island",nz:"New Zealand"},s=[],r="";this.availableYears.forEach(function(t){r+="<th>"+t+"</th>"});var n=0,a=0;t&&this.$totalsTable.html("");var c=29;this.$totalsTable.append('<tr id="head-row-totals-'+this.id+'" class="table-row table-head"> <th>Region</th>'+r+"</tr>");for(var l in i)if(i.hasOwnProperty(l)){var h="<tr class='table-row' id=row-tot-"+this.id+a+">",u=this.dpFormat,d=this.noCPICells;h+="<th class='reg-cell'>"+o[l]+"</th>";var p=this.id;i[l].forEach(function(t){var e;e="nz"===l?t/c:t/TablesModule.regions[l].length,h+="<th id='t-total"+p+n+"' origValue='"+e+"' class='cell'>"+u(e)+"</th>",s.push({id:"#t-total"+p+n,value:e}),d.push({id:"t-total"+p+n,value:e}),n++}),this.$totalsTable.append(h+"</tr>"),$("#row-tot-"+this.id+a).click(function(){var t=$("#"+this.id+" .reg-cell").text();events.emit("TOTAL_ROW_CLICKED",{rowID:this.id,region:t})}),a++}""!==e&&$("#"+e).addClass("row-selected"),this.totalCellValues=s},Table.prototype.createTableData=function(t){var e={};t.forEach(function(t){void 0===e[t.edb]&&(e[t.edb]=t.edb)});var i=[];for(var o in e)if(e.hasOwnProperty(o)){var s=t.filter(function(t){return t.edb===e[o]}),r=[];s.forEach(function(t){r.push({year:t.obs_yr,value:t.value})}),r.sort(function(t,e){return t.year>e.year}),i.push({edb:e[o],years:r})}return i},Table.prototype.render=function(){this.applyGradientCSS(this.cellValues),this.applyGradientCSS(this.totalCellValues)},Table.prototype.applyGradientCSS=function(t){var e=!1,i=-(1/0);t.forEach(function(t){i=+t.value>i?+t.value:i});for(var o=0;o<t.length;o++){var s=e?s:+t[o].value/i*100;$(t[o].id).css({background:"-webkit-gradient(linear, left top, right top, color-stop("+s+"%,#7bbfd6), color-stop("+s+"%,#FFF))"})}};var TablesModule=function(){var t={n:["Centralines","Counties Power","Eastland Network","Electra","Horizon Energy","Northpower","Powerco","Scanpower","The Lines Company","Top Energy","Unison Networks","Vector Lines","Waipa Networks","WEL Networks","Wellington Electricity"],uni:["Counties Power","Horizon Energy","Northpower","The Lines Company","Top Energy","Vector Lines","Waipa Networks","WEL Networks"],eni:["Centralines","Eastland Network","Scanpower","Unison Networks"],swni:["Electra","Powerco","Wellington Electricity"],s:["Alpine Energy","Aurora Energy","Buller Electricity","Electricity Ashburton","Electricity Invercargill","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Network Waitaki","Orion NZ","OtagoNet","The Power Company","Westpower"],
usi:["Alpine Energy","Buller Electricity","MainPower NZ","Marlborough Lines","Nelson Electricity","Network Tasman","Orion NZ","Westpower"],lsi:["Aurora Energy","Electricity Ashburton","Electricity Invercargill","Network Waitaki","OtagoNet","The Power Company"]},e="",i="",o=[],s=function(t){t.data.forEach(function(t){t.combined?o.push(new Table(t.id,t.rows,[t.search,t.search2],!0)):o.push(new Table(t.id,t.rows,t.search,!1))}),o.forEach(function(t){t.insertTitles(),t.create(),t.createTotalsTable(!1,i)}),o.forEach(function(t){t.render()})},r=function(t){if(e===t.rowID)return $(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().removeClass("row-selected"),void(rowSelected="");if(""!==e){var i=$("#"+e+" .edb-cell").text();$(".table-row").find(".edb-cell:contains('"+i+"')").parent().removeClass("row-selected")}e=t.rowID,$(".table-row").find(".edb-cell:contains('"+t.edb+"')").parent().addClass("row-selected"),o.forEach(function(e){e.rowClicked(t)})},n=function(t){var e=t.region;if(i===t.rowID){var s=$("#"+t.rowID+" .reg-cell").text();return $(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().removeClass("row-selected"),void(i="")}if(""!==i){var s=$("#"+i+" .reg-cell").text();$(".table-row").find(".reg-cell:contains('"+s+"')").filter(function(){return $(this).text()===s}).parent().removeClass("row-selected")}$(".table-row").find(".reg-cell:contains('"+e+"')").filter(function(){return $(this).text()===e}).parent().addClass("row-selected"),i=t.rowID,o.forEach(function(e){e.totalsRowSelected(t)})},a=function(t){var e=t.cpiValues;o.forEach(function(t){t.canApplyCPI()&&(t.applyCPI(e),t.createTotalsTable(!0,i))}),o.forEach(function(t){t.render()})},c=function(){o.forEach(function(t){t.revertCPI()}),o.forEach(function(t){t.render()})},l=function(t){t.data.forEach(function(t){o.forEach(function(e){e.id===t.id&&(e.isCombined?e.update(t.rows,t.table1Rows,t.table2Rows):e.update(t.rows))})})};return events.on("INIT_DATA",s),events.on("ROW_CLICKED",r),events.on("TOTAL_ROW_CLICKED",n),events.on("APPLY_CPI",a),events.on("REVERT_CPI",c),events.on("ROW_UPDATE",l),{regions:t}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbWJpbmVkR3JhcGguanMiLCJEYXRhUHJvY2Vzc29yLmpzIiwiR3JhcGguanMiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyLmpzIiwiU2VsZWN0TWFuYWdlci5qcyIsIlRhYmxlLmpzIiwiQ29tcGFyZU1vZHVsZS5qcyIsIkNQSU1vZHVsZS5qcyIsIkdyYXBoTW9kdWxlLmpzIiwiU2VsZWN0aW9uUm93c0NvbnRyb2xsZXIuanMiLCJUYWJsZU1vZHVsZS5qcyJdLCJuYW1lcyI6WyJDb21iaW5lZEdyYXBoIiwiaWQiLCJjb21iaW5lZFJvd3MiLCJyb3dzMSIsInJvd3MyIiwic2VsZWN0aW9uMSIsInNlbGVjdGlvbjIiLCJ0aGlzIiwiZ3JvdXBlZElEIiwiYm94SUQiLCJ2ZWN0b3JJRCIsInVuaXQiLCJnZXRVbml0IiwiJHRpdGxlQmFyIiwiJCIsIiR0aXRsZUJveCIsIiR0aXRsZVZlY3RvciIsIkRhdGFQcm9jZXNzb3IiLCJEYXRhU3RydWN0dXJlIiwic2VsZWN0aW9uRGF0YSIsInNlbGVjdGlvblRhYmxlIiwiY29tYmluZURhdGEiLCJTZWxlY3Rpb24iLCJhIiwiYiIsImMiLCJkIiwiYVRhYmxlIiwiYlRhYmxlIiwiY1RhYmxlIiwiZFRhYmxlIiwiRGF0YVRhYmxlcyIsInRhYmxlQSIsInRhYmxlQiIsInRhYmxlQyIsInRhYmxlRCIsInRhYmxlQUIiLCJ0YWJsZUNEIiwiU2VsZWN0aW9uRGF0YSIsInJvd3MiLCJ0aXRsZSIsInN1YlRpdGxlIiwiU2VsZWN0aW9uRGF0YUNvbWJpbmVkIiwidGFibGUxUm93cyIsInRhYmxlMlJvd3MiLCJ0aXRsZTEiLCJ0aXRsZTIiLCJ1bml0MSIsInVuaXQyIiwiU2VsZWN0ZWRUYWJsZURhdGEiLCJHcmFwaCIsInNlbGVjdGlvbiIsImdldFRpdGxlIiwiZ2V0U3ViVGl0bGUiLCJTZWxlY3Rpb25Sb3dDb250cm9sbGVyIiwiaWROdW1iIiwicm93U2VsZWN0aW9ucyIsInNlY3Rpb24iLCJjYXRlZ29yeSIsInN1YkNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJzZXRJbml0aWFsU3RhdGUiLCJyb3dEYXRhIiwiY2xlYXIiLCJ2YWxpZFNlbGVjdGlvbiIsImluaXRFdmVudExpc3RlbmVyIiwidXJsU2VsZWN0aW9ucyIsInVybFNlbGVjdGlvbiIsImZpbHRlciIsImUiLCJ1cGRhdGVTZWN0aW9uIiwidXBkYXRlIiwiZXZlbnRzIiwiZW1pdCIsInVwZGF0ZUNhdGVnb3J5IiwidXBkYXRlU3ViQ2F0ZWdvcnkiLCJ1cGRhdGVEZXNjcmlwdGlvbiIsImdldFJvd1NlbGVjdGlvbiIsIm9uIiwiYmluZCIsIlNlY3Rpb25TZWxlY3QiLCIkc2VsZWN0IiwicGFzc0lEIiwiRGF0YWJhc2UiLCJnZXRTZWN0aW9uc0Zyb21EYXRhYmFzZSIsInNlY3Rpb25zIiwiZHAiLCJzb3J0U2VjdGlvbnMiLCJhZGRPcHRpb25zVG9TZWxlY3RvciIsInVwZGF0ZWQiLCJldmVudCIsImZpbmQiLCJ0ZXh0IiwiQ2F0ZWdvcnlTZWxlY3QiLCJnZXRDYXRlZ29yaWVzRnJvbURhdGFiYXNlIiwiY2F0ZWdvcmllcyIsIm5vUmVzdWx0Iiwic2VjdGlvbkNoYW5nZWRMaXN0ZW5lciIsImh0bWwiLCJTdWJDYXRlZ29yeVNlbGVjdCIsImdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UiLCJzdWJDYXRlZ29yaWVzIiwiY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIiLCJwYXNzSUROdW1iIiwiY2xlYXJNeXNlbGYiLCJEZXNjcmlwdGlvblNlbGVjdCIsImdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZSIsImRlc2NyaXB0aW9ucyIsInN1YkNhdGVnb3J5Q2hhbmdlZExpc3RlbmVyIiwic2VsZWN0cGlja2VyIiwic2VsZWN0b3JJRCIsIm9wdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJUYWJsZSIsImlzQ29tYmluZWQiLCJ1bml0cyIsImRwRm9ybWF0IiwiZDMiLCJmb3JtYXQiLCJhdmFpbGFibGVZZWFycyIsImdldEF2YWlsYWJsZVllYXJzIiwibm9DUElDZWxscyIsIiR0YWJsZSIsIiR0b3RhbHNUYWJsZSIsIiR0aXRsZSIsInByb3RvdHlwZSIsImdldElEIiwiZ2V0U2VsZWN0aW9uMVRpdGxlIiwiZ2V0U2VsZWN0aW9uMlRpdGxlIiwiZ2V0VW5pdDEiLCJnZXRVbml0MiIsImluc2VydFRpdGxlcyIsInJhdGlvSFRNTCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiczEiLCJzMiIsImNyZWF0ZSIsImdyb3VwZWREYXRhIiwiY3JlYXRlRGF0YUZvckdyb3VwZWRHcmFwaCIsIkdyb3VwZWRCYXJNb2R1bGUiLCJjcmVhdGVkR3JvdXBlZEJhckdyYXBoIiwiZGF0YSIsImtleXMiLCJib3hwbG90RGF0YSIsImNyZWF0ZURhdGFGb3JCb3hQbG90IiwiQm94UGxvdE1vZHVsZSIsImNyZWF0ZUJveFBsb3QiLCJ2ZWN0b3JHcmFwaERhdGEiLCJjcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgiLCJWZWN0b3JNb2R1bGUiLCJjcmVhdGVWZWN0b3JHcmFwaCIsIlN0cmluZyIsImluY2x1ZGVzIiwiaW5kZXhPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwiQXJyYXkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJ2YWx1ZSIsIm9iaiIsIm5ld0FyciIsImVsIiwiQ29tcGFyZU1vZHVsZSIsInNob3dGdWxsVmVjdG9yR3JhcGgiLCJzZWxlY3Rpb25zIiwiYXRpdGxlIiwiYnRpdGxlIiwiY3RpdGxlIiwiZHRpdGxlIiwicmF0aW8iLCJzcGFuQSIsInNwYW5CIiwic3BhbkMiLCJzcGFuRCIsImNvbWJpbmVBIiwiY29tYmluZUIiLCJjb21iaW5lQyIsImNvbWJpbmVEIiwic2hvdyIsImJhY2t1cCIsImVycm9yIiwiJHNlYXJjaEVycm9yIiwic2VyaWFsaXNlIiwic3RyIiwicCIsImhhc093blByb3BlcnR5IiwicHVzaCIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJzZWFyY2giLCJzZWxlY3Rpb25Sb3dzIiwiY2FuU2VhcmNoIiwiZ2V0QWxsU2VsZWN0aW9uRGF0YSIsImZvckVhY2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJsb2FkU2VhcmNoRnJvbVVSTCIsImluaXQiLCJnZXRSb3dzRm9yU2VhcmNoIiwiciIsImZjYXN0X3lyIiwib2JzX3lyIiwic29ydGVkUm93cyIsImZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkiLCJjb21iaW5lZERhdGEiLCJ0IiwiYWRkQ2xhc3MiLCJyb3dJRCIsInJvd051bWIiLCJlZGIiLCJyZWdpb24iLCJyZW1vdmVDbGFzcyIsImdvVG9CeVNjcm9sbCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJhcHBseUNQSSIsIkNQSU1vZHVsZSIsImlzVmFsaWQiLCJ1bmRlZmluZWQiLCJjb3B5T2ZSb3dzIiwiY29weVJvd3MiLCJhcHBseUNQSVRvVGFibGVSb3dzIiwiZ2V0Q1BJVmFsdWVzIiwibmV3RGF0YSIsImNwaVZhbHVlcyIsImFwcGxpY2FibGVSb3dzIiwibWluWWVhciIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwiZGlzY195ciIsIm1heFllYXIiLCJjdXIiLCJlbGVtIiwiaW5kZXgiLCJ5ZWFyIiwidmFsdWVPZkNlbGwiLCJyZXZlcnRDUEkiLCJkb2N1bWVudCIsInJlYWR5IiwiY2xpY2siLCIkY3BpRm9ybSIsInZhbGlkYXRvciIsInNldERlZmF1bHRzIiwiZXJyb3JDbGFzcyIsImhpZ2hsaWdodCIsImVsZW1lbnQiLCJjbG9zZXN0IiwidW5oaWdobGlnaHQiLCJjcGlSdWxlcyIsInJlcXVpcmVkIiwibnVtYmVyIiwibWluIiwibWF4IiwibWVzc2FnZVNldCIsInZhbGlkYXRlIiwicnVsZXMiLCJZMjAxMiIsIlkyMDEzIiwiWTIwMTQiLCJZMjAxNSIsIlkyMDE2IiwibWVzc2FnZXMiLCJ2YWwiLCJ2YWxpZCIsImNvcHlEYXRhVGFibGVzIiwiZGF0YVRhYmxlcyIsIm9yaWdUYWJsZXMiLCJ0YWJsZXMiLCJqIiwidW5pdEEiLCJ1bml0QiIsIm5ldHdvcmsiLCJub3RlIiwicF9rZXkiLCJzY2hfcmVmIiwic2NoZWR1bGUiLCJzdWJfY2F0ZWdvcnkiLCJuZXdSb3dzIiwiY3JlYXRlRGF0YVN0cnVjdHVyZXNXaXRoQ29weSIsImNvcHlPZkRhdGFUYWJsZXMiLCJzZWxlY3Rpb25EYXRhQXJyYXkiLCJzZWxlY3Rpb25UYWJsZXNBcnJheSIsImNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5Iiwic2VsZWN0ZWRSb3dzIiwiaWRzIiwic3VidGl0bGUiLCJqdW1wIiwic3ViVGl0bGVKdW1wIiwidGl0bGVKdW1wIiwidmFsaWRhdGVTZWFyY2hQYXJhbXMiLCJ2YWxpZE9wdGlvbnMiLCJyZXR1cm5WYWwiLCJtYXRjaERCUm93IiwiREJSb3ciLCJmaWx0ZXJSb3dzVG9UYWJsZXMiLCJhUm93cyIsImJSb3dzIiwiY1Jvd3MiLCJkUm93cyIsImFiUm93cyIsImNvbWJpbmVUYWJsZXMiLCJjZFJvd3MiLCJjb3B5IiwiY29tYmluZWQiLCJzZWFyY2gyIiwiYXQiLCJidCIsImVkYkRvbmUiLCJ2ZWNEYXRhIiwiYXZhaWxhYmxlT2JzWWVhcnMiLCJyb3cxIiwiZWRiUm93c0F0IiwiZWRiUm93c0J0IiwieWVhcnNEb25lIiwiZWRiWWVhckFycmF5IiwieWVhclJvd3NBdCIsInllYXJSb3dzQnQiLCJrIiwidmFsdWVBIiwidmFsdWVCIiwic29ydCIsInllYXJzIiwidGFibGVSb3dzIiwic1ZhbHVlcyIsIkluZmluaXR5IiwiZW50cnkiLCJ2YWx1ZXMiLCJjdXJWYWx1ZSIsInNjYXR0ZXJEYXRhIiwiaXNOYU4iLCJudW1iZXJBIiwic3Vic3RyaW5nIiwibnVtYmVyQiIsImFkZFRvU2VsZWN0aW9uIiwidHlwZSIsImNyZWF0ZVRhYmxlVG90YWxzIiwicmVnaW9ucyIsInJlZ2lvblN0cmluZ3MiLCJ0b3RhbHMiLCJyb3ciLCJyZWdpb25TdHJpbmciLCJueiIsImJveERhdGEiLCJHcmFwaE1vZHVsZSIsImdyYXBocyIsInoiLCJzY2FsZU9yZGluYWwiLCJyYW5nZSIsInpTZWxlY3RlZCIsInRhYmxlRGF0YSIsImciLCJyb3dDbGlja2VkIiwidW5zZWxlY3QiLCJzZWxlY3RBbGwiLCJjbGFzc2VkIiwiYWxyZWFkeVNlbGVjdGVkIiwiZGF0dW0iLCJhdHRyIiwia2V5Iiwicm93c0RhdGEiLCJzZWxlY3RvcnMiLCJzIiwic2MiLCJzZXRTZWxlY3Rpb25zRnJvbVVSTCIsInNlYXJjaERhdGEiLCJ3aXRoU2VhcmNoIiwicm93TnVtYmVyIiwicmVtb3ZlQXR0ciIsImNyZWF0ZVRvdGFsc1RhYmxlIiwidG90YWxzUm93U2VsZWN0ZWQiLCJkYXRhUm93SUQiLCJTaW5nbGVCYXJNb2R1bGUiLCJzaG93QmFyV2l0aFJvd0VsZW0iLCJzbGljZSIsImNhbkFwcGx5Q1BJIiwiJGNhY2hlZENlbGxzIiwiZWFjaCIsInNwbGl0IiwiY3JlYXRlVGFibGVEYXRhIiwieSIsImNlbGxDb3VudCIsInJvd0NvdW50IiwiY2VsbFZhbHVlcyIsImRhdGFSb3ciLCJ5ZWFyRGF0YSIsInNlbGVjdGVkVG90YWxSb3ciLCJUYWJsZXNNb2R1bGUiLCJuYW1lcyIsIm4iLCJ1bmkiLCJlbmkiLCJzd25pIiwidXNpIiwibHNpIiwidG90YWxDZWxscyIsIm51bWJlck9mQ29tcGFuaWVzIiwicHJvcGVydHkiLCJjZWxscyIsImF2ZyIsInJlZyIsInRvdGFsQ2VsbFZhbHVlcyIsImVkYnMiLCJlZGJZZWFycyIsInJlbmRlciIsImFwcGx5R3JhZGllbnRDU1MiLCJwZXJjZW50IiwibWF4Q2VsbFZhbHVlIiwiY3NzIiwiYmFja2dyb3VuZCIsInNlbGVjdGVkUm93IiwidGFibGUiLCJwYXJlbnQiLCJyb3dTZWxlY3RlZCIsInRvdGFsUm93Q2xpY2tlZCIsIm9sZFJlZyJdLCJtYXBwaW5ncyI6IkFBWUEsUUFBQUEsZUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQU4sR0FBQUEsRUFDQU0sS0FBQUMsVUFBQSxnQkFBQVAsRUFDQU0sS0FBQUUsTUFBQSxZQUFBUixFQUNBTSxLQUFBRyxTQUFBLGlCQUFBVCxFQUNBTSxL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R0FBQWtLLEdBQUFsSyxFQUFBa0ssU0FDQTRDLEdBQUE5RSxRQUFBLFNBQUE2TixHQUNBQSxFQUFBcEMsZ0JBQ0FvQyxFQUFBcE0sU0FBQVMsR0FDQTJMLEVBQUExQyxtQkFBQSxFQUFBaUIsTUFJQXRILEVBQUE5RSxRQUFBLFNBQUE2TixHQUNBQSxFQUFBUCxZQUlBdkssRUFBQSxXQUNBK0IsRUFBQTlFLFFBQUEsU0FBQTZOLEdBQ0FBLEVBQUE5SyxjQUdBK0IsRUFBQTlFLFFBQUEsU0FBQTZOLEdBQ0FBLEVBQUFQLFlBSUF0VixFQUFBLFNBQUFBLEdBQ0FBLEVBQUEwRSxLQUFBc0QsUUFBQSxTQUFBZ0ssR0FDQWxGLEVBQUE5RSxRQUFBLFNBQUFpSyxHQUNBQSxFQUFBdlcsS0FBQXNXLEVBQUF0VyxLQUNBdVcsRUFBQW5QLFdBQ0FtUCxFQUFBalMsT0FBQWdTLEVBQUFoVSxLQUFBZ1UsRUFBQTVULFdBQUE0VCxFQUFBM1QsWUFFQTRULEVBQUFqUyxPQUFBZ1MsRUFBQWhVLFdBZ0JBLE9BUkFpQyxRQUFBTSxHQUFBLFlBQUE4SCxHQUNBcEksT0FBQU0sR0FBQSxjQUFBMlIsR0FDQWpTLE9BQUFNLEdBQUEsb0JBQUF5VixHQUNBL1YsT0FBQU0sR0FBQSxZQUFBa0osR0FDQXhKLE9BQUFNLEdBQUEsYUFBQXdLLEdBQ0E5SyxPQUFBTSxHQUFBLGFBQUFQLElBSUFtUixRQUFBQSIsImZpbGUiOiJjb21wYXJlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIERFUEVOREVOQ0lFUyA6IERhdGFQcm9jZXNzb3IsIEdyb3VwZWRCYXJHcmFwaE1vZHVsZSwgVmVjdG9yR3JhcGhNb2R1bGUsIEJveFBsb3RNb2R1bGVcclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgdGhhdCBoYW5kbGVzIGxvZ2ljIGZvciB1cGRhdGluZyBhbmQgY3JlYXRpbmcgYWxsIG9mIHRoZSBncmFwaHMgb24gdGhlIGRhc2hib2FyZCBhY3Jvc3MgdGhlIHRhYnNcclxuICpcclxuICogQHBhcmFtIGlkIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBjb21iaW5lZFJvd3Mge09iamVjdFtdfSB0aGUgcmVzdWx0IG9mIHJvd3MxIGRpdmlkZWQgYnkgcm93czJcclxuICogQHBhcmFtIHJvd3MxIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICogQHBhcmFtIHJvd3MyIHtPYmplY3RbXX0gdGhlIHJvd3MgZm9yIHRoZSBzZWxlY3Rpb24gc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb24xIHtPYmplY3R9IHRoZSBmaXJzdCBzZWFyY2hcclxuICogQHBhcmFtIHNlbGVjdGlvbjIge09iamVjdH0gdGhlIHNlY29uZCBzZWFyY2hcclxuICogKi9cclxuZnVuY3Rpb24gQ29tYmluZWRHcmFwaChpZCwgY29tYmluZWRSb3dzLCByb3dzMSxyb3dzMixzZWxlY3Rpb24xLHNlbGVjdGlvbjIpe1xyXG4gIHRoaXMuaWQgPSBpZDtcclxuICB0aGlzLmdyb3VwZWRJRCA9ICcjZ3JvdXBlZC1iYXItJytpZDtcclxuICB0aGlzLmJveElEID0gJyNib3hwbG90LScraWQ7XHJcbiAgdGhpcy52ZWN0b3JJRCA9ICcjdmVjdG9yLWdyYXBoLScraWQ7XHJcbiAgdGhpcy5yb3dzMSA9IHJvd3MxO1xyXG4gIHRoaXMucm93czIgPSByb3dzMjtcclxuICB0aGlzLmNvbWJpbmVkUm93cyA9IGNvbWJpbmVkUm93cztcclxuICB0aGlzLnNlbGVjdGlvbjEgPSBzZWxlY3Rpb24xO1xyXG4gIHRoaXMuc2VsZWN0aW9uMiA9IHNlbGVjdGlvbjI7XHJcbiAgdGhpcy51bml0ID0gdGhpcy5nZXRVbml0KCk7XHJcblxyXG5cclxuICAvLyBDYWNoZSBkb20gZWxlbWVudHNcclxuICB0aGlzLiR0aXRsZUJhciA9ICQoJyN0aXRsZS1iYXItJytpZCk7XHJcbiAgdGhpcy4kdGl0bGVCb3ggPSAkKCcjdGl0bGUtYm94LScraWQpO1xyXG4gIHRoaXMuJHRpdGxlVmVjdG9yID0gJCgnI3RpdGxlLXZlY3Rvci0nK2lkKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGlmIHRoZSB0aGUgb2JqZWN0IGlzIGNvbWJpbmVkIG9yIG5vdFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGNvbWJpbmVkXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmlzQ29tYmluZWQgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgY29tYmluZWQgZ3JhcGhzXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGhlIGlkIG9mIHRoZSBjb21iaW5lZCBncmFwaHNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0SUQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuaWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgb2YgdGhlIGZpcnN0IHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZSBvZiB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmdldFNlbGVjdGlvbjFUaXRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgc3ViQ2F0ZWdvcnkgPSB0aGlzLnNlbGVjdGlvbjEgPT09IG51bGwgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb24xLnN1YkNhdGVnb3J5O1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbjEuZGVzY3JpcHRpb24gKyBcIiwgXCIgKyB0aGlzLnNlbGVjdGlvbjEuY2F0ZWdvcnkgKyBcIiwgXCIgKyBzdWJDYXRlZ29yeTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBvZiB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB0aXRsZSBvZiB0aGUgc2Vjb25kIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5Db21iaW5lZEdyYXBoLnByb3RvdHlwZS5nZXRTZWxlY3Rpb24yVGl0bGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHN1YkNhdGVnb3J5ID0gdGhpcy5zZWxlY3Rpb24yID09PSBudWxsID8gXCJcIiA6IHRoaXMuc2VsZWN0aW9uMi5zdWJDYXRlZ29yeTtcclxuICByZXR1cm4gdGhpcy5zZWxlY3Rpb24yLmRlc2NyaXB0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24yLmNhdGVnb3J5ICsgXCIsICBcIiArIHN1YkNhdGVnb3J5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHVuaXQgZm9yIHRoZSBjb21iaW5lZCBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBjb21iaW5lZCB1bml0cyBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzMVswXS51bml0cyArIFwiIC8gXCIgKyB0aGlzLnJvd3MyWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHVuaXQgZm9yIHRoZSBmaXJzdCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdCBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdDEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93czFbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIHNlY29uZCBzZWxlY3Rpb25cclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdCBmb3IgdGhlIHNlbGVjdGlvbnNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuZ2V0VW5pdDIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucm93czJbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIEluc2VydHMgdGhlIHRpdGxlcyBmb3IgdGhlIGdyYXBocyBpbnRvIHRoZSBET00gZWxlbWVudHNcclxuICogKi9cclxuQ29tYmluZWRHcmFwaC5wcm90b3R5cGUuaW5zZXJ0VGl0bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciByYXRpb0hUTUwgPSAnPGg0PlJhdGlvICcrdGhpcy5pZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSsnIC8gJyt0aGlzLmlkLmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpICsnPC9oND4nXHJcbiAgdmFyIHMxID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+PHNwYW4gc3R5bGU9XCJDb2xvcjogYmxhY2s7XCI+Jyt0aGlzLmlkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKyc6IDwvc3Bhbj4nK3RoaXMuZ2V0U2VsZWN0aW9uMVRpdGxlKCkrJzwvaDQ+JztcclxuICB2YXIgczIgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj48c3BhbiBzdHlsZT1cIkNvbG9yOiBibGFjaztcIj4nK3RoaXMuaWQuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCkrJzogPC9zcGFuPicrdGhpcy5nZXRTZWxlY3Rpb24yVGl0bGUoKSsnPC9oND4nO1xyXG5cclxuICAvLyB2YXIgdGl0bGVIVE1MID0gJzxoNCBjbGFzcz1cImNvbWJpbmVkLXRpdGxlXCI+Jyt0aGlzLmdldFNlbGVjdGlvbjFUaXRsZSgpKyc8YnI+PHNwYW4gY2xhc3M9XCJvdmVyXCI+b3Zlcjwvc3Bhbj48YnI+Jyt0aGlzLmdldFNlbGVjdGlvbjJUaXRsZSgpKyc8L2g0PidcclxuXHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKHJhdGlvSFRNTCk7XHJcbiAgdGhpcy4kdGl0bGVCYXIuYXBwZW5kKHMxKTtcclxuICB0aGlzLiR0aXRsZUJhci5hcHBlbmQoczIpO1xyXG5cclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQocmF0aW9IVE1MKTtcclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQoczEpO1xyXG4gIHRoaXMuJHRpdGxlQm94LmFwcGVuZChzMik7XHJcblxyXG5cclxuICB0aGlzLiR0aXRsZVZlY3Rvci5hcHBlbmQocmF0aW9IVE1MKTtcclxuICB0aGlzLiR0aXRsZVZlY3Rvci5hcHBlbmQoczEpO1xyXG4gIHRoaXMuJHRpdGxlVmVjdG9yLmFwcGVuZChzMik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgR3JhcGhzXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIENyZWF0ZSB0aGUgZ3JvdXBlZCBiYXIgZ3JhcGhcclxuICAgIHZhciBncm91cGVkRGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGgodGhpcy5jb21iaW5lZFJvd3MpO1xyXG4gICAgR3JvdXBlZEJhck1vZHVsZS5jcmVhdGVkR3JvdXBlZEJhckdyYXBoKGdyb3VwZWREYXRhLmRhdGEsZ3JvdXBlZERhdGEua2V5cyx0aGlzLnVuaXQsIHRoaXMuZ3JvdXBlZElEKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGJveCBwbG90IGdyYXBoXHJcbiAgICB2YXIgYm94cGxvdERhdGEgPSBkcC5jcmVhdGVEYXRhRm9yQm94UGxvdCh0aGlzLmNvbWJpbmVkUm93cyk7XHJcbiAgICBCb3hQbG90TW9kdWxlLmNyZWF0ZUJveFBsb3QoYm94cGxvdERhdGEsIHRoaXMuYm94SUQsIHRoaXMudW5pdCk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSB2ZWN0b3IgZ3JhcGhcclxuICAgIHZhciB2ZWN0b3JHcmFwaERhdGEgPSBkcC5jcmVhdGVEYXRhRm9yVmVjdG9yR3JhcGgodGhpcy5yb3dzMSwgdGhpcy5yb3dzMik7XHJcbiAgICBWZWN0b3JNb2R1bGUuY3JlYXRlVmVjdG9yR3JhcGgodmVjdG9yR3JhcGhEYXRhLHRoaXMuZ2V0VW5pdDIoKSx0aGlzLmdldFVuaXQxKCksdGhpcy52ZWN0b3JJRCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2FsbGVkIHdoZW4gdGhlIHJvd3MgYXJlIHVwZGF0ZWQgYnkgQ1BJXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHRoZSBuZXcgY29tYmluZWQgcm93c1xyXG4gKiBAcGFyYW0gdGhlIG5ldyByb3dzIGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSByb3dzMiB0aGUgbmV3IHJvd3MgZm9yIHRoZSBzZWNvbmQgc2VsZWN0aW9uXHJcbiAqICovXHJcbkNvbWJpbmVkR3JhcGgucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChyb3dzLCByb3dzMSxyb3dzMikge1xyXG4gIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgdGhpcy5yb3dzMSA9IHJvd3MxO1xyXG4gIHRoaXMucm93czIgPSByb3dzMjtcclxuICB0aGlzLmNyZWF0ZSgpO1xyXG59XHJcbiIsInZhciBkcCA9IG5ldyBEYXRhUHJvY2Vzc29yKCk7XHJcblxyXG4vKipcclxuICogT2JqZWN0IGNvbnRhaW5zIGEgbnVtYmVyIG9mIGZ1bmN0aW9ucyB0byBtYW5pcHVsYXRlIGRhdGEgZnJvbSB0aGUgZGF0YWJhc2VcclxuICogKi9cclxuZnVuY3Rpb24gRGF0YVByb2Nlc3Nvcigpe31cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBvZiBjb3B5IG9mIHRoZSBkYXRhVGFibGVzIG9iamVjdC4gQ29waWVzIGVhY2ggdGFibGUgYW5kIGl0cyB2YWx1ZXMgZm9yIGVhY2ggcm93LlxyXG4gKlxyXG4gKiBAcGFyYW0gZGF0YVRhYmxlcyB7T2JqZWN0fSBjb250YWlucyA2IGFycmF5cyBvZiByb3dzIG9uZSBmb3IgZWFjaCB0YWJsZS4gQXR0cmlidXRlIGNhbiBiZSB1bmRlZmluZWQgaWYgdGFibGUgZG9lcyBub3QgZXhpc3RcclxuICogQHJldHVybnMge29iamVjdH0gQSBjb3B5IG9mIHRoZSBkYXRhVGFibGVzIG9iamVjdFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jb3B5RGF0YVRhYmxlcyA9IGZ1bmN0aW9uKGRhdGFUYWJsZXMpIHtcclxuICB2YXIgb3JpZ1RhYmxlcyA9IFtkYXRhVGFibGVzLnRhYmxlQSxkYXRhVGFibGVzLnRhYmxlQixkYXRhVGFibGVzLnRhYmxlQyxkYXRhVGFibGVzLnRhYmxlRCxkYXRhVGFibGVzLnRhYmxlQUIsZGF0YVRhYmxlcy50YWJsZUNEXTsgLy8gQWRkIHRhYmxlcyB0byBhcnJheSB0byBpdGVyYXRlIG92ZXIgdGhlbVxyXG4gIHZhciBjb21iaW5lZFRhYmxlcyA9IFtkYXRhVGFibGVzLnRhYmxlQUIsZGF0YVRhYmxlcy50YWJsZUNEXTtcclxuICB2YXIgdGFibGVzID0gW1tdLFtdLFtdLFtdLFtdLFtdXTsgLy8gRW1wdHkgYXJyYXlzIHRvIGluc2VydCBuZXcgcm93cyB3aXRoIHZhbHVlcyB0aGF0IGFyZSBjb3BpZXMgb2YgdGhlIG9yaWdpbmFsXHJcblxyXG4gIC8vIEl0ZXJhdGUgb3ZlciB0aGUgb3JpZ2luYWwgdGFibGVzXHJcbiAgZm9yKHZhciBqID0gMDsgaiA8IG9yaWdUYWJsZXMubGVuZ3RoOyBqKyspe1xyXG4gICAgICB2YXIgYSA9IG9yaWdUYWJsZXNbal07IC8vIEdyYWIgdGhlIGN1cnJlbnQgdGFibGUgd2l0aCBpbmRleCBpXHJcbiAgICAgIGlmKGEgIT09IHVuZGVmaW5lZCl7IC8vIEl0IG1pZ2h0IG5vdCBleGlzdCBkdWUgdG8gaXQgbm90IGJlaW5nIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXHJcbiAgICAgICAgaWYoaiA9PT0gNCB8fCBqID09PSA1KXtcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKXsgLy8gRm9yIGV2ZXJ5IHJvdyBjb3B5IGFsbCB0aGUgZmllbGRzXHJcbiAgICAgICAgICAgICAgdGFibGVzW2pdLnB1c2goe2Rlc2NyaXB0aW9uIDogYVtpXS5kZXNjcmlwdGlvbiwgZGlzY195cjogYVtpXS5kaXNjX3lyLGVkYjogYVtpXS5lZGIsXHJcbiAgICAgICAgICAgICAgICAgIHNlY3Rpb246YVtpXS5zZWN0aW9uLCB1bml0cyA6IGFbaV0udW5pdCwgdmFsdWU6YVtpXS52YWx1ZSwgdW5pdEEgOmFbaV0udW5pdEEsIHVuaXRCIDphW2ldLnVuaXRCLCBvYnNfeXI6YVtpXS5vYnNfeXIgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKXsgLy8gRm9yIGV2ZXJ5IHJvdyBjb3B5IGFsbCB0aGUgZmllbGRzXHJcbiAgICAgICAgICAgICAgdGFibGVzW2pdLnB1c2goe2NhdGVnb3J5IDphW2ldLmNhdGVnb3J5LCBkZXNjcmlwdGlvbiA6IGFbaV0uZGVzY3JpcHRpb24sZGlzY195cjogYVtpXS5kaXNjX3lyLGVkYjogYVtpXS5lZGIsXHJcbiAgICAgICAgICAgICAgICAgIGZjYXN0X3lyOiBhW2ldLmZjYXN0X3lyLG5ldHdvcms6YVtpXS5uZXR3b3JrLG5vdGU6YVtpXS5ub3RlLG9ic195cjphW2ldLm9ic195cixwX2tleTogYVtpXS5wX2tleSxzY2hfcmVmOmFbaV0uc2NoX3JlZixcclxuICAgICAgICAgICAgICAgICAgc2NoZWR1bGU6YVtpXS5zY2hlZHVsZSxzZWN0aW9uOmFbaV0uc2VjdGlvbixzdWJfY2F0ZWdvcnk6IGFbaV0uc3ViX2NhdGVnb3J5LHVuaXRzOmFbaV0udW5pdHMsdmFsdWU6YVtpXS52YWx1ZX0pXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBuZXcgRGF0YVRhYmxlcyh0YWJsZXNbMF0sdGFibGVzWzFdLHRhYmxlc1syXSx0YWJsZXNbM10sdGFibGVzWzRdLHRhYmxlc1s1XSk7IC8vIFJldHVybiB0aGUgY29weVxyXG59XHJcblxyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jb3B5Um93cyA9IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgICB2YXIgbmV3Um93cyA9IFtdO1xyXG4gICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHIpe1xyXG4gICAgICBuZXdSb3dzLnB1c2goe3ZhbHVlIDogci52YWx1ZSwgY2F0ZWdvcnkgOnIuY2F0ZWdvcnksIGRlc2NyaXB0aW9uIDogci5kZXNjcmlwdGlvbixkaXNjX3lyOiByLmRpc2NfeXIsZWRiOiByLmVkYixcclxuICAgICAgICAgIGZjYXN0X3lyOiByLmZjYXN0X3lyLG5ldHdvcms6IHIubmV0d29yayxub3RlOiAgci5ub3RlLG9ic195cjogci5vYnNfeXIscF9rZXk6IHIucF9rZXksc2NoX3JlZjogci5zY2hfcmVmLFxyXG4gICAgICAgICAgc2NoZWR1bGU6IHIuc2NoZWR1bGUsc2VjdGlvbjogci5zZWN0aW9uLHN1Yl9jYXRlZ29yeTogci5zdWJfY2F0ZWdvcnksdW5pdHM6IHIudW5pdHN9KVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3Um93cztcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuZCBvYmplY3Qgd2l0aCB0aHJlZSBhcnJheXMgdGhhdCBhcmUgdXNlZCB0byBpdGVyYXRlIG92ZXIgYW5kIGFkZCB0aGUgZGF0YSB0byB0aGUgcGFnZS4gVGhlIHN0cnVjdHVyZSBzaW1wbGlmaWVzXHJcbiAqIGNyZWF0aW9uIG9mIHRhYmxlLCBncmFwaHMgYW5kIGNvbWJpbmVkIGdyYXBocy5cclxuICpcclxuICogQHBhcmFtIGRhdGFUYWJsZXMge09iamVjdH0gY29udGFpbnMgNiBhcnJheXMgb2Ygcm93cyBvbmUgZm9yIGVhY2ggdGFibGUuIFRhYmxlIGFycmF5IGNhbiBiZSBlbXB0eSBpZiB0YWJsZSBkb2VzIG5vdCBleGlzdFxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBEYXRhIHN0cnVjdHVyZVxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhU3RydWN0dXJlc1dpdGhDb3B5ID0gZnVuY3Rpb24gKGNvcHlPZkRhdGFUYWJsZXMpe1xyXG4gICAgdmFyIHNlbGVjdGlvbkRhdGFBcnJheSA9IFtdOyAvLyBVc2VkIHRvIGNyZWF0ZSB0aGUgcmVndWxhciBncmFwaHNcclxuICAgIHZhciBzZWxlY3Rpb25UYWJsZXNBcnJheSA9IFtdOyAvLyBUYWJsZXMgYWxzbyBjb250YWlucyBjb21iaW5lZCBkYXRhXHJcbiAgICB2YXIgY29tYmluZWRTZWxlY3Rpb25EYXRhQXJyYXkgPSBbXTsgLy8gVXNlZCB0byBjcmVhdGUgdmVjdG9yIGdyYXBoc1xyXG5cclxuICAgIC8vIEFuIGFycmF5IG9mIHRydWUgb3IgZmFsc2UgdmFsdWVzIGlmIGEgdGFibGUgY29udGFpbnMgdmFsdWVzXHJcbiAgICB2YXIgc2VsZWN0ZWRSb3dzID0gW2NvcHlPZkRhdGFUYWJsZXMudGFibGVBLmxlbmd0aCA+IDAsY29weU9mRGF0YVRhYmxlcy50YWJsZUIubGVuZ3RoID4gMCxjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQy5sZW5ndGggPiAwLGNvcHlPZkRhdGFUYWJsZXMudGFibGVELmxlbmd0aCA+IDBdO1xyXG5cclxuICAgIC8vIEFuIGFycmF5IHdpdGggdGhlIHRhYmxlcyBkYXRhXHJcbiAgICB2YXIgdGFibGVzID0gW2NvcHlPZkRhdGFUYWJsZXMudGFibGVBLGNvcHlPZkRhdGFUYWJsZXMudGFibGVCLGNvcHlPZkRhdGFUYWJsZXMudGFibGVDLGNvcHlPZkRhdGFUYWJsZXMudGFibGVELGNvcHlPZkRhdGFUYWJsZXMudGFibGVBQixjb3B5T2ZEYXRhVGFibGVzLnRhYmxlQ0RdO1xyXG5cclxuICAgIC8vIENyZWF0ZXMgdGhlIDQgbm9ybWFsIHRhYmxlcyBhbmQgdGhlIGNvbWJpbmVkIHRhYmxlc1xyXG4gICAgdmFyIGlkcyA9IFsnYScsJ2InLCdjJywnZCcsJ2FiJywnY2QnXTsgLy8gVGhlIGlkJ3MgbGluZSB1cCB3aXRoIHRoZSB0YWJsZXMgYXJyYXkgdG8gYWRkIGFuIGlkIHRvIGVhY2ggcm93XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2VsZWN0ZWRSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihzZWxlY3RlZFJvd3NbaV0peyAvLyBPbmx5IGdvIHRocm91Z2ggdGFibGUgaWYgaXQgaGFzIHJvd3NcclxuICAgICAgICAgICAgdmFyIHN1YnRpdGxlID0gdGFibGVzW2ldWzBdLnNlY3Rpb24gKyBcIiwgXCIgKyB0YWJsZXNbaV1bMF0uY2F0ZWdvcnk7IC8vIENyZWF0ZSBzdWJ0aXRsZSB3aXRoIHNlY3Rpb24gYW5kIGNhdGVnb3J5XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzdWIgY2F0ZWdvcnkgaXMgbnVsbCBpZiBzbyBqdXN0IHVzZSBkZXNjcmlwdGlvbiBlbHNlIGFsc28gdXNlIHN1YiBjYXRlZ29yeVxyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSB0YWJsZXNbaV1bMF0uc3ViX2NhdGVnb3J5ID09PSBudWxsID8gdGFibGVzW2ldWzBdLmRlc2NyaXB0aW9uIDogdGFibGVzW2ldWzBdLnN1Yl9jYXRlZ29yeSArIFwiLCBcIiArIHRhYmxlc1tpXVswXS5kZXNjcmlwdGlvbjtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBhIHJvdyBhbG9uZyB3aXRoIHRoZSBpZCBvZiB0aGUgdGFibGUgdGhlIHRpdGxlLCBzdWJ0aXRsZSBhbmQgdW5pdCB0byBib3RoIHRhYmxlIGFuZCBzZWxlY3Rpb24gYXJyYXlzXHJcbiAgICAgICAgICAgIHNlbGVjdGlvblRhYmxlc0FycmF5LnB1c2gobmV3IFNlbGVjdGVkVGFibGVEYXRhKHRhYmxlc1tpXSxpZHNbaV0sdGl0bGUsc3VidGl0bGUsIHRhYmxlc1tpXVswXS51bml0cykpO1xyXG4gICAgICAgICAgICBzZWxlY3Rpb25EYXRhQXJyYXkucHVzaChuZXcgU2VsZWN0aW9uRGF0YSh0YWJsZXNbaV0sIHRpdGxlLCBzdWJ0aXRsZSAsdGFibGVzW2ldWzBdLnVuaXRzLGlkc1tpXSkpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGNvbWJpbmVkIHNwZWNpYWwgY2FzZSwgaWYgQSBvciBDIGV4aXN0IGl0IGlzIHBvc3NpYmxlIGEgY29tYmluZWQgdGFibGUgbmVlZHMgdG8gYmUgY3JlYXRlZFxyXG4gICAgICAgICAgICBpZihpZHNbaV0gPT09ICdhJyB8fCBpZHNbaV0gPT09ICdjJyl7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZFJvd3NbaSsxXSl7IC8vIENoZWNrIHRoYXQgYSBzZWxlY3Rpb25zIGhhcyBiZWVuIG1hZGUgaWYgc28gY3JlYXRlIHRoZSBjb21iaW5lZCB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqdW1wID0gaSA9PT0gMCA/IDQgOiAzOyAvLyBJZiAwIG5lZWQgdG8ganVtcCB0byB0aGUgbG9jYXRpb24gb2YgYWIgdGFibGUgZWxzZSBqdW1wIHRvIGxvY2F0aW9uIG9mIGNkIHRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YlRpdGxlSnVtcCA9IHRhYmxlc1tpKzFdWzBdLnNlY3Rpb24gKyBcIiwgXCIgKyB0YWJsZXNbaSsxXVswXS5jYXRlZ29yeTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGVKdW1wID0gdGFibGVzW2krMV1bMF0uc3ViX2NhdGVnb3J5ID09PSBudWxsID8gdGFibGVzW2krMV1bMF0uZGVzY3JpcHRpb24gOiB0YWJsZXNbaSsxXVswXS5zdWJfY2F0ZWdvcnkgKyBcIiwgXCIgKyB0YWJsZXNbaSsxXVswXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25UYWJsZXNBcnJheS5wdXNoKG5ldyBTZWxlY3RlZFRhYmxlRGF0YSh0YWJsZXNbaStqdW1wXSxpZHNbaStqdW1wXSwgdGl0bGUgKyBcIiwgXCIgKyBzdWJ0aXRsZSwgdGl0bGVKdW1wICsgXCIsIFwiICsgc3ViVGl0bGVKdW1wLCB0YWJsZXNbaSsxXVswXS51bml0cykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkU2VsZWN0aW9uRGF0YUFycmF5LnB1c2gobmV3IFNlbGVjdGlvbkRhdGFDb21iaW5lZCh0YWJsZXNbaStqdW1wXSx0YWJsZXNbaV0sdGFibGVzW2krMV0sIHRpdGxlICsgXCIgXCIgKyBzdWJ0aXRsZSwgdGl0bGVKdW1wICsgXCIgXCIgKyBzdWJUaXRsZUp1bXAsdGFibGVzW2ldWzBdLnVuaXRzLHRhYmxlc1tpKzFdWzBdLnVuaXRzLGlkc1tpK2p1bXBdKSk7IC8vIFRPRE8gYXNrIGhvdyB0byBmb3JtYXQgdGl0bGVzIGZvciBjb21iaW5lZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBEYXRhU3RydWN0dXJlKHNlbGVjdGlvbkRhdGFBcnJheSxzZWxlY3Rpb25UYWJsZXNBcnJheSxjb21iaW5lZFNlbGVjdGlvbkRhdGFBcnJheSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBzZWxlY3Rpb25zIHRoZSB1c2VyIGhhcyBtYWRlIGFyZSBjb21wbGV0ZS4gRm9yIGV4YW1wbGUgaWYgYSBzZWxlY3Rpb24gaXMgbWFkZSBmb3IgYSBzZWN0aW9uIGluIGEgcm93IHRoZSBjYXRlZ29yeVxyXG4gKiBhbHNvIGhhcyB0byBiZSBjaG9zZW4gYWxvbmcgd2l0aCBhIGRlc2NyaXB0aW9uIGFuZCBzdWIgY2F0ZWdvcnkgaWYgaXQgZXhpc3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9ucyB7T2JqZWN0fSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHNlY3Rpb25zIGZvciBlYWNoIHJvdywgYW4gYXJyYXkgb2YgNCBzZWxlY3Rpb24gcm93c1xyXG4gKiBAcGFyYW0gdmFsaWRPcHRpb25zIHtPYmplY3R9IGNvbnRhaW5zIGlmIGEgcm93IGhhcyBhIHN1YiBjYXRlZ29yeSBvciBub3QgZmFsc2UgaWYgbm8gc3ViIGNhdGVnb3J5XHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgdmFsaWQgc2VhcmNoIGZhbHNlIGlmIG5vdFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS52YWxpZGF0ZVNlYXJjaFBhcmFtcyA9IGZ1bmN0aW9uIChzZWxlY3Rpb25zLCB2YWxpZE9wdGlvbnMpe1xyXG4gICAgdmFyIHJldHVyblZhbCA9IHRydWU7XHJcbiAgICBzZWxlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsZW0sIGkpIHtcclxuICAgICAgICBpZihlbGVtLnN1YkNhdGVnb3J5ID09PSBcIlwiICYmIHZhbGlkT3B0aW9uc1tpXSl7IC8vIFZhbGlkIG9wdGlvbnMgaG9sZHMgaWYgdGhlcmUgaXMgYSBwb3NzaWJsZSBvcHRpb24gdG8gY2hvb3NlZnJvbSBpbiB0aGUgc2VsZWN0IGRyb3AgZG93blxyXG4gICAgICAgICAgICByZXR1cm5WYWwgPSBmYWxzZTsgLy8gVGhlcmUgaXMgYSBwb3NzaWJsZSBzdWIgY2F0ZWdvcnkgc28gaXQgaGFzIHRvIGJlIGNob3NlbiBmcm9tXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVja3MgaWYgb25lIG9mIHRoZSBzZWxlY3Rpb25zIGlzIGVtcHR5XHJcbiAgICAgICAgaWYoZWxlbS5zZWN0aW9uID09PSBcIlwiIHx8IGVsZW0uY2F0ZWdvcnkgPT09IFwiXCIgfHwgZWxlbS5kZXNjcmlwdGlvbiA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgIC8vIE5vdyBjaGVjayBpZiBvbmUgb2YgdGhlIHNlbGVjdGlvbnMgaXMgbm90IGVtcHR5XHJcbiAgICAgICAgICAgIGlmKGVsZW0uc2VjdGlvbiAhPT0gXCJcIiB8fCBlbGVtLmNhdGVnb3J5ICE9PSBcIlwiIHx8IGVsZW0uZGVzY3JpcHRpb24gIT09IFwiXCIpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsID0gZmFsc2U7IC8vIEEgcm93IGNhbm5vdCBoYXZlIG9uZSBpdGVtIHNlbGVjdGVkIGFuZCBhbm90aGVyIGVtcHR5XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXR1cm5WYWw7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIGEgcm93IGZyb20gdGhlIGRhdGFiYXNlIG1hdGNoZXMgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSB1c2VyLiBUaGlzIGlzIHVzZWQgYmVjYXVzZSB0aGUgdXNlciBjYW4gbWFrZSBmb3VyIGRpZmZlcmVudFxyXG4gKiBzZWxlY3Rpb25zIGFuZCB0aGUgcXVlcnkgZm9yIHRoZSBkYXRhYmFzZSByZXR1bnMgYWxsIHRoZSByb3dzIGZvciBhbGwgdGhlIHNlY3Rpb25zLlxyXG4gKlxyXG4gKiBAcGFyYW0gREJSb3cge09iamVjdH0gQSByb3cgZnJvbSB0aGUgZGF0YWJhc2UgY29udGFpbnMgYWxsIHRoZSBmaWVsZHNcclxuICogQHBhcmFtIFNlbGVjdGlvbiB7T2JqZWN0fSBjb250YWlucyBzZWN0aW9uLCBjYXRlZ29yeSwgc3ViIGNhdGVnb3J5IGFuZCBkZXNjcmlwdGlvbiBmcm9tIGEgdXNlciBzZWxlY3Rpb25cclxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYSBkYXRhYmFzZSByb3cgYmVsb25ncyB0byB0aGUgdXNlciBzZWxlY3Rpb25cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUubWF0Y2hEQlJvdyA9IGZ1bmN0aW9uIChEQlJvdywgc2VsZWN0aW9uKSB7XHJcbiAgaWYoREJSb3cuc2VjdGlvbiA9PT0gc2VsZWN0aW9uLnNlY3Rpb24gJiYgREJSb3cuY2F0ZWdvcnkgPT09IHNlbGVjdGlvbi5jYXRlZ29yeSAmJiBEQlJvdy5kZXNjcmlwdGlvbiA9PT0gc2VsZWN0aW9uLmRlc2NyaXB0aW9uKXtcclxuICAgICAgaWYoREJSb3cuc3ViX2NhdGVnb3J5ICE9PSBudWxsKXtcclxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IERCUm93LnN1Yl9jYXRlZ29yeTsgLy8gU3ViIGNhdCBjb3VsZCBiZSBudWxsIGJ1dCB3b3VsZCBzdGlsbCBtYXRjaFxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgPT09IFwiXCI7IC8vIEhhcyB0byBhbHNvIGJlIGVtcHR5XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyByb3dzIGZyb20gZGF0YWJhc2UgcXVlcnkgcmVzdWx0IGFuZCBzcGxpdHMgaW50byBjb3JyZXNwb25kaW5nIHRhYmxlLiBVc2VzIHRoZSBtYXRjaERCUm93IGZ1bmN0aW9uIHRvIG1hdGNoXHJcbiAqIGEgcm93IHRvIGEgc2VsZWN0aW9uLiBPbmNlIGZpbHRlcmVkIGNyZWF0ZXMgYW5kIG9iamVjdCBjb250YWluaW5nIGVhY2ggdGFibGUgYW5kIHRoZSByb3dzXHJcbiAqXHJcbiAqIEFsc28gY3JlYXRlcyB0aGUgY29tYmluZWQgdGFibGVzIGJ5IHVzaW5nIHRoZSBjb21iaW5lVGFibGUgZnVuY3Rpb24gYW5kIGFkZHMgdGhlIGNvbWJpbmVkIHRhYmxlcyB0byB0aGUgcmV0dXJuZWRcclxuICogb2JqZWN0LlxyXG4gKlxyXG4gKiBOb3RlIGFueSBudWxsIHZhbHVlcyBpbiB0aGUgcm93cyBhcmUgY2hhbmdlZCB0byAwXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHtPYmplY3R9IEFsbCB0aGUgcm93cyBmcm9tIHRoZSB1c2VycyBzZWxlY3Rpb25zXHJcbiAqIEBwYXJhbSBzZWFyY2gge09iamVjdH0gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZvdXIgZGlmZmVyZW50IHNlbGVjdGlvbnMgdGhlIHVzZXIgbWF5IGhhdmUgbWFkZVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHByb3BlcnR5IGZvciBlYWNoIHRhYmxlIHdoaWNoIGlzIGFuIGFycmF5IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5maWx0ZXJSb3dzVG9UYWJsZXMgPSBmdW5jdGlvbiAocm93cywgc2VhcmNoKSB7XHJcblxyXG4gIC8vIENyZWF0ZSBmb3VyIGFycmF5cyBmb3IgdGhlIGRpZmZlcmVudCByb3dzIHRoYXQgYmVsb25nIHRvIGVhY2ggb2YgdGhlIHNlYXJjaGVzXHJcbiAgdmFyIGFSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guYVRhYmxlKTt9KTtcclxuICB2YXIgYlJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5iVGFibGUpO30pO1xyXG4gIHZhciBjUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmNUYWJsZSk7fSk7XHJcbiAgdmFyIGRSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guZFRhYmxlKTt9KTtcclxuXHJcbiAgLy8gU2V0IGFsbCBudWxsIHZhbHVlcyBpbiByb3dzIHRvIDBcclxuICBhUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBiUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBjUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuICBkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUudmFsdWUgPT09IG51bGwpe2UudmFsdWUgPSAwO319KTtcclxuXHJcblxyXG4gIHZhciB0YWJsZXMgPSBbXTtcclxuICBpZihhUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYScsIHJvd3MgOiBhUm93cywgc2VhcmNoIDogc2VhcmNoLmFUYWJsZX0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGNvbWJpbmVkIHRhYmxlcyBpZiBwb3NzaWJsZVxyXG4gIGlmKGFSb3dzLmxlbmd0aCA+IDAgJiYgYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBhYlJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGFSb3dzLGJSb3dzKTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDAgJiYgZFJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICAgIHZhciBjZFJvd3MgPSBkcC5jb21iaW5lVGFibGVzKGNSb3dzLGRSb3dzKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgRGF0YVRhYmxlcyhhUm93cyxiUm93cyxjUm93cyxkUm93cywgYWJSb3dzLCBjZFJvd3MpO1xyXG59XHJcblxyXG5cclxuXHJcbi8vIFNUQVJUIE5FV1xyXG4vKipcclxuICogVGFrZXMgcm93cyBmcm9tIGRhdGFiYXNlIHF1ZXJ5IHJlc3VsdCBhbmQgc3BsaXRzIGludG8gY29ycmVzcG9uZGluZyB0YWJsZS4gVXNlcyB0aGUgbWF0Y2hEQlJvdyBmdW5jdGlvbiB0byBtYXRjaFxyXG4gKiBhIHJvdyB0byBhIHNlbGVjdGlvbi4gT25jZSBmaWx0ZXJlZCBjcmVhdGVzIGFuZCBvYmplY3QgY29udGFpbmluZyBlYWNoIHRhYmxlIGFuZCB0aGUgcm93c1xyXG4gKlxyXG4gKiBBbHNvIGNyZWF0ZXMgdGhlIGNvbWJpbmVkIHRhYmxlcyBieSB1c2luZyB0aGUgY29tYmluZVRhYmxlIGZ1bmN0aW9uIGFuZCBhZGRzIHRoZSBjb21iaW5lZCB0YWJsZXMgdG8gdGhlIHJldHVybmVkXHJcbiAqIG9iamVjdC5cclxuICpcclxuICogTm90ZSBhbnkgbnVsbCB2YWx1ZXMgaW4gdGhlIHJvd3MgYXJlIGNoYW5nZWQgdG8gMFxyXG4gKlxyXG4gKiBAcGFyYW0gcm93cyB7T2JqZWN0fSBBbGwgdGhlIHJvd3MgZnJvbSB0aGUgdXNlcnMgc2VsZWN0aW9uc1xyXG4gKiBAcGFyYW0gc2VhcmNoIHtPYmplY3R9IG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb3VyIGRpZmZlcmVudCBzZWxlY3Rpb25zIHRoZSB1c2VyIG1heSBoYXZlIG1hZGVcclxuICogQHJldHVybnMge09iamVjdH0gQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBwcm9wZXJ0eSBmb3IgZWFjaCB0YWJsZSB3aGljaCBpcyBhbiBhcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIHJvd3NcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuZmlsdGVyUm93c1RvVGFibGVzQW5kQ29weSA9IGZ1bmN0aW9uIChyb3dzLCBzZWFyY2gpIHtcclxuXHJcbiAgLy8gQ3JlYXRlIGZvdXIgYXJyYXlzIGZvciB0aGUgZGlmZmVyZW50IHJvd3MgdGhhdCBiZWxvbmcgdG8gZWFjaCBvZiB0aGUgc2VhcmNoZXNcclxuICB2YXIgYVJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5hVGFibGUpO30pO1xyXG4gIHZhciBiUm93cyA9IHJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBkcC5tYXRjaERCUm93KGUsc2VhcmNoLmJUYWJsZSk7fSk7XHJcbiAgdmFyIGNSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGRwLm1hdGNoREJSb3coZSxzZWFyY2guY1RhYmxlKTt9KTtcclxuICB2YXIgZFJvd3MgPSByb3dzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZHAubWF0Y2hEQlJvdyhlLHNlYXJjaC5kVGFibGUpO30pO1xyXG5cclxuICAvLyBTZXQgYWxsIG51bGwgdmFsdWVzIGluIHJvd3MgdG8gMFxyXG4gIGFSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGJSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGNSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG4gIGRSb3dzLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZS52YWx1ZSA9PT0gbnVsbCl7ZS52YWx1ZSA9IDA7fX0pO1xyXG5cclxuICAvLyBDcmVhdGUgY29tYmluZWQgdGFibGVzIGlmIHBvc3NpYmxlXHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCAmJiBiUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGFiUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoYVJvd3MsYlJvd3MpO1xyXG4gIH1cclxuXHJcbiAgaWYoY1Jvd3MubGVuZ3RoID4gMCAmJiBkUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdmFyIGNkUm93cyA9IGRwLmNvbWJpbmVUYWJsZXMoY1Jvd3MsZFJvd3MpO1xyXG4gIH1cclxuXHJcblxyXG4gIHZhciBjb3B5ID0gdGhpcy5jb3B5RGF0YVRhYmxlcyhuZXcgRGF0YVRhYmxlcyhhUm93cyxiUm93cyxjUm93cyxkUm93cyxhYlJvd3MsY2RSb3dzKSk7XHJcbiAgXHJcblxyXG4gIHZhciB0YWJsZXMgPSBbXTtcclxuICBpZihhUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnYScsIHJvd3MgOiBjb3B5LnRhYmxlQSwgc2VhcmNoIDogc2VhcmNoLmFUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgaWYoYlJvd3MubGVuZ3RoID4gMCl7XHJcbiAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2InLCByb3dzIDogY29weS50YWJsZUIsIHNlYXJjaCA6IHNlYXJjaC5iVGFibGUsIGNvbWJpbmVkIDogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIGlmKGNSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgdGFibGVzLnB1c2goeyBpZCA6ICdjJywgcm93cyA6IGNvcHkudGFibGVDLCBzZWFyY2ggOiBzZWFyY2guY1RhYmxlLCBjb21iaW5lZCA6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBpZihkUm93cy5sZW5ndGggPiAwKXtcclxuICAgIHRhYmxlcy5wdXNoKHsgaWQgOiAnZCcsIHJvd3MgOiBjb3B5LnRhYmxlRCwgc2VhcmNoIDogc2VhcmNoLmRUYWJsZSwgY29tYmluZWQgOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICAvLyBDcmVhdGUgY29tYmluZWQgdGFibGVzIGlmIHBvc3NpYmxlXHJcbiAgaWYoYVJvd3MubGVuZ3RoID4gMCAmJiBiUm93cy5sZW5ndGggPiAwKXtcclxuICAgICAgdGFibGVzLnB1c2goeyBpZCA6ICdhYicsIHJvd3MgOiBjb3B5LnRhYmxlQUIsIHRhYmxlMVJvd3MgOiBjb3B5LnRhYmxlQSwgdGFibGUyUm93cyA6IGNvcHkudGFibGVCLCBzZWFyY2ggOiBzZWFyY2guYVRhYmxlLCBzZWFyY2gyIDogc2VhcmNoLmJUYWJsZSwgY29tYmluZWQgOiB0cnVlfSk7XHJcbiAgfVxyXG5cclxuICBpZihjUm93cy5sZW5ndGggPiAwICYmIGRSb3dzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0YWJsZXMucHVzaCh7IGlkIDogJ2NkJywgcm93cyA6IGNvcHkudGFibGVDRCwgdGFibGUxUm93cyA6IGNvcHkudGFibGVDLCB0YWJsZTJSb3dzIDogY29weS50YWJsZUQsIHNlYXJjaCA6IHNlYXJjaC5jVGFibGUsIHNlYXJjaDIgOiBzZWFyY2guZFRhYmxlLCBjb21iaW5lZCA6IHRydWV9KTtcclxuICB9XHJcbiAgcmV0dXJuIHRhYmxlcztcclxufVxyXG4vLyBFTkQgTkVXXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBDb21iaW5lcyB0aGUgdHdvIHRhYmxlcyBieSBnb2luZyB0aHJvdWdoIGVhY2ggcm93IGFuZCBkaXZpZGluZyB0aGUgdmFsdWUgb2YgdGFibGUxIHRvIHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIGZyb21cclxuICogYSByb3cgaW4gdGFibGUgMlxyXG4gKlxyXG4gKiBOb3RlIGlmIHRhYmxlIDIgdmFsdWUgaXMgMCBpdCBpcyBkaXZpZGVkIGJ5IDEgaW5zdGVhZFxyXG4gKlxyXG4gKiBAcGFyYW0gdGFibGUxUm93cyB7T2JqZWN0fSBBbiBhcnJheSBvZiByb3dzIHRoYXQgYmVsb25nIHRvIG9uZSB0YWJsZVxyXG4gKiBAcGFyYW0gdGFibGUyUm93cyB7T2JqZWN0fSBBbiBhcnJheSBvZiByb3dzIHRoYXQgYmVsb25nIHRvIGFub3RoZXIgdGFibGVcclxuICogQHJldHVybnMge09qYmVjdFtdfSBBbiBhcnJheSBvZiByb3dzIGFzIGEgcmVzdWx0IG9mIGNvbWJpbmluZyB0YWJsZTEgYW5kIHRhYmxlMlxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jb21iaW5lVGFibGVzID0gZnVuY3Rpb24odGFibGUxUm93cywgdGFibGUyUm93cykge1xyXG4gIHZhciBjb21iaW5lZCA9IFtdO1xyXG4gIHZhciBhdCA9IHRhYmxlMVJvd3M7XHJcbiAgdmFyIGJ0ID0gdGFibGUyUm93cztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGF0Lmxlbmd0aDsgaSsrKXtcclxuICAgICAgZm9yKHZhciBqID0gMDsgaiA8IGJ0Lmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgIGlmKGF0W2ldLmVkYiA9PT0gYnRbal0uZWRiICYmIGF0W2ldLm9ic195ciA9PT0gYnRbal0ub2JzX3lyICYmIGF0W2ldLmRpc2NfeXIgPT09IGJ0W2pdLmRpc2NfeXIpe1xyXG4gICAgICAgICAgICAgIGNvbWJpbmVkLnB1c2goeyBkaXNjX3lyIDogYnRbal0uZGlzY195cixcclxuICAgICAgICAgICAgICAgICAgZWRiIDogYnRbal0uZWRiLFxyXG4gICAgICAgICAgICAgICAgICBvYnNfeXIgOiBidFtqXS5vYnNfeXIsXHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlIDogYXRbaV0udmFsdWUgLyAoYnRbal0udmFsdWUgPT09ICcwJyB8fCBidFtqXS52YWx1ZSA9PT0gMCA/IDEgOiBidFtqXS52YWx1ZSksIC8vIERpdmlkZSB0aGUgdmFsdWUgaWYgdmEgaWYgZGl2aWRpbmcgYnkgMCBtYWtlIGl0IDFcclxuICAgICAgICAgICAgICAgICAgc2VjdGlvbiA6IGJ0W2pdLnNlY3Rpb24gKyBcIlwiICsgYnRbal0uZGVzY3JpcHRpb24gKyBcIiBvdmVyIFwiLCAvLyBCaXQgb2YgYSBoYWNrIGFzIGRlc2NyaXB0aW9uIGlzIGluc2VydGVkIGFmdGVyIHNlY3Rpb24sIHRoaXMgd2F5IGJvdGggdGl0bGVzIGFyZSBhZGRlZCB0byB0YWJsZVxyXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA6IGF0W2ldLnNlY3Rpb24gKyBcIiBcIiArIGF0W2ldLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICB1bml0QSA6IGF0W2ldLnVuaXRzLFxyXG4gICAgICAgICAgICAgICAgICB1bml0QiA6IGJ0W2pdLnVuaXRzLFxyXG4gICAgICAgICAgICAgICAgICB1bml0IDogYXRbaV0udW5pdHMgK1wiIC8gXCIgKyAgYnRbal0udW5pdHNcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBicmVhazsgLy8gY2FuIGV4aXQgdGhlIGxvb3BcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH1cclxuICByZXR1cm4gY29tYmluZWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHVzZWQgYnkgdGhlIHZlY3RvciBncmFwaC4gRWFjaCBlbnRyeSBpbiB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGVkYiBhbiBhcnJheSBvZiB5ZWFycyB3aXRoIHRoZSB2YWx1ZSBmcm9tXHJcbiAqIHRhYmxlIGEgYW5kIHRhYmxlIGIuXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZTFSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gb25lIHRhYmxlXHJcbiAqIEBwYXJhbSB0YWJsZTJSb3dzIHtPYmplY3R9IEFuIGFycmF5IG9mIHJvd3MgdGhhdCBiZWxvbmcgdG8gYW5vdGhlciB0YWJsZVxyXG4gKiBAcmV0dXJucyB7T2piZWN0W119IERhdGEgZm9yIHRoZSB2ZWN0b3IgZ3JhcGggaW4gdGhlIGZvcm0gW3sgRURCLCBbIHsgeWVhcjEsIHZhbHVlQSwgdmFsdWVCIH0sIHt5ZWFyMiwgdmFsdWVBLCB2YWx1ZUIgfSwuLi5dfV1cclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuY3JlYXRlRGF0YUZvclZlY3RvckdyYXBoID0gZnVuY3Rpb24odGFibGUxUm93cyx0YWJsZTJSb3dzKSB7XHJcbiAgICAvLyBUT0RPIHdvcmsgb3V0IE9CUyBhbmQgRkNBU1RcclxuXHJcbiAgICB2YXIgYXQgPSB0YWJsZTFSb3dzO1xyXG4gICAgdmFyIGJ0ID0gdGFibGUyUm93cztcclxuICAgIHZhciBlZGJEb25lID0gW107IC8vIFRoZSBlZGJzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZFxyXG4gICAgdmFyIHZlY0RhdGEgPSBbXTsgLy8gVGhlIGZpbmFsIGVudHJ5IGluIHRoZSBmb3JtIHsgRURCLCBbIHsgeWVhcjEsIHZhbHVlQSwgdmFsdWVCIH0sIHt5ZWFyMiwgdmFsdWVBLCB2YWx1ZUIgfV19XHJcblxyXG4gICAgdmFyIGF2YWlsYWJsZU9ic1llYXJzID0gW107IC8vIFRoZSB5ZWFycyBmb3IgYm90aCB0YWJsZSAxIGFuZCB0YWJsZSAyXHJcbiAgICB0YWJsZTFSb3dzLmZvckVhY2goZnVuY3Rpb24gKHJvdzEpIHtcclxuICAgICAgICBpZighYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMocm93MS5vYnNfeXIpKXtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlY29uZCBzZXQgb2Ygcm93cyBhbHNvIGNvbnRhaW5zIHRoZSB5ZWFyXHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZTJSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICBpZih0YWJsZTJSb3dzW2ldLm9ic195ciA9PT0gcm93MS5vYnNfeXIpe1xyXG4gICAgICAgICAgICAgICAgICBhdmFpbGFibGVPYnNZZWFycy5wdXNoKHJvdzEub2JzX3lyKTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gR28gdGhyb3VnaCBldmVyeSByb3dcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgRURCIGhhcyBhbHJlYWR5IGJlZW4gcHJvY2Vzc2VkXHJcbiAgICAgICAgaWYgKCFlZGJEb25lLmluY2x1ZGVzKGF0W2ldLmVkYikpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIEdyYWIgYWxsIHRoZSByb3dzIGZvciB0aGUgY3VycmVudCBlZGIgaW4gYm90aCB0YWJsZXNcclxuICAgICAgICAgICAgdmFyIGVkYlJvd3NBdCA9IGF0LmZpbHRlcihmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuZWRiID09PSBhdFtpXS5lZGJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBlZGJSb3dzQnQgPSBidC5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmVkYiA9PT0gYXRbaV0uZWRiXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlZGJEb25lLnB1c2goYXRbaV0uZWRiKTsgLy8gQWRkIHllYXIgdG8gZG9uZSBzbyBpdCBpcyBub3QgcmVwZWF0ZWRcclxuICAgICAgICAgICAgdmFyIHllYXJzRG9uZSA9IFtdOyAvLyBQcm9jZXNzZWQgeWVhcnNcclxuICAgICAgICAgICAgdmFyIGVkYlllYXJBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MgaW4gZWRiXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWRiUm93c0F0Lmxlbmd0aDsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaXQgaGFzIG5vdCBiZWVuIHByb2Nlc3NlZFxyXG4gICAgICAgICAgICAgICAgaWYgKCF5ZWFyc0RvbmUuaW5jbHVkZXMoZWRiUm93c0F0W2pdLmRpc2NfeXIpICYmIGF2YWlsYWJsZU9ic1llYXJzLmluY2x1ZGVzKGVkYlJvd3NBdFtqXS5kaXNjX3lyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHllYXJzRG9uZS5wdXNoKGVkYlJvd3NBdFtqXS5kaXNjX3lyKTsgLy8gQWRkIHRvIHByb2Nlc3NlZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIGhhdmUgdG8gcm93cyBmb3IgYSBwYXJ0aWN1bGFyIHllYXIgZm9yIGEgcGFydGljdWxhciBlZGIgbm93IHdlIGNhbiBjcmVhdGUgdGhlIGVudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJSb3dzQXQgPSBlZGJSb3dzQXQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRpc2NfeXIgPT09IGVkYlJvd3NBdFtqXS5kaXNjX3lyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJSb3dzQnQgPSBlZGJSb3dzQnQuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmRpc2NfeXIgPT09IGVkYlJvd3NBdFtqXS5kaXNjX3lyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCEoeWVhclJvd3NBdC5sZW5ndGggPT0geWVhclJvd3NCdC5sZW5ndGggKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgeWVhclJvd3NBdC5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGJZZWFyQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiAreWVhclJvd3NBdFtrXS5kaXNjX3lyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVBOiAreWVhclJvd3NBdFtrXS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlQjogK3llYXJSb3dzQnRba10udmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVkYlllYXJBcnJheS5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhLnllYXIgLSBiLnllYXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2ZWNEYXRhLnB1c2goe2VkYjogYXRbaV0uZWRiLCB5ZWFyczogZWRiWWVhckFycmF5fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZlY0RhdGE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSBmcm9tIHRoZSB0YWJsZSByb3dzIHdoaWNoIGlzIHRoZW4gdXNlZCBieSB0aGUgYm94IHBsb3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZVJvd3Mge09iamVjdH0gVGhlIHJvd3MgZnJvbSB0aGUgdGFibGUgdGhlIGJveCBwbG90IGlzIHZpc3VhbGlzaW5nXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIGJveCBwbG90XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZURhdGFGb3JCb3hQbG90ID0gZnVuY3Rpb24gKHRhYmxlUm93cyl7XHJcbiAgICB2YXIgeWVhcnNEb25lID0gW107IC8vIFllYXJzIHByb2Nlc3NlZFxyXG4gICAgdmFyIHllYXJzID0gW107IC8vIFdpbGwgY29udGFpbiBhbiBhcnJheSBvZiByb3dzIGZvciBlYWNoIHllYXJcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFibGVSb3dzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZigheWVhcnNEb25lLmluY2x1ZGVzKHRhYmxlUm93c1tpXS5vYnNfeXIpKXtcclxuICAgICAgICAgICAgeWVhcnMucHVzaCh0YWJsZVJvd3MuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9ic195ciA9PT0gdGFibGVSb3dzW2ldLm9ic195cn0pKTtcclxuICAgICAgICAgICAgeWVhcnNEb25lLnB1c2godGFibGVSb3dzW2ldLm9ic195cik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBkYXRhID0gW107IC8vIEVhY2ggZW50cnkgd2lsbCBiZSBhbiBhcnJheSB3aGVyZSBhcnJheVswXSA9IHllYXIgYW5kIGFycmF5WzFdID0gdmFsdWVzIGZvciB0aGF0IHllYXJcclxuICAgIHZhciBzVmFsdWVzID0gW107IC8vIERhdGEgZm9yIHRoZSBzY2F0dGVyIHBsb3Qgb24gdG9wIG9mIGJveCBwbG90XHJcbiAgICB2YXIgbWluID0gSW5maW5pdHk7XHJcbiAgICB2YXIgbWF4ID0gLUluZmluaXR5O1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB5ZWFycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gW107XHJcbiAgICAgICAgZW50cnlbMF0gPSBcIlwiK3llYXJzW2ldWzBdLm9ic195cjsgLy8gTmFtZSBvZiB0aGUgYm94IHBsb3QgY29udmVydCB5ZWFyIHRvIHN0cmluZ1xyXG4gICAgICAgIHZhciB5ZWFyID0gXCJcIit5ZWFyc1tpXVswXS5vYnNfeXI7XHJcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgeWVhcnNbaV0ubGVuZ3RoOyBqKyspe1xyXG4gICAgICAgICAgICB2YXIgY3VyVmFsdWUgPSAreWVhcnNbaV1bal0udmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBlZGIgPSB5ZWFyc1tpXVtqXS5lZGI7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VyVmFsdWUgPiBtYXgpe1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gY3VyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGN1clZhbHVlIDwgbWluKXtcclxuICAgICAgICAgICAgICAgIG1pbiA9IGN1clZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGN1clZhbHVlKTtcclxuICAgICAgICAgICAgc1ZhbHVlcy5wdXNoKHt5ZWFyIDogeWVhciAsZWRiIDogZWRiLCB2YWx1ZSA6IGN1clZhbHVlfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVudHJ5WzFdID0gdmFsdWVzO1xyXG4gICAgICAgIGRhdGEucHVzaChlbnRyeSk7XHJcbiAgICB9XHJcbiAgICBkYXRhLnNvcnQoZnVuY3Rpb24oYSxiKXtcclxuICAgICAgICByZXR1cm4gYVswXSAtIGJbMF07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7bWluIDogbWluLCBtYXggOiBtYXgsIGRhdGEgOiBkYXRhLCBzY2F0dGVyRGF0YSA6IHNWYWx1ZXN9O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgdGhlIGRhdGEgZnJvbSB0aGUgdGFibGUgcm93cyB3aGljaCBpcyB0aGVuIHVzZWQgYnkgdGhlIGdyb3VwZWQgYmFyIGdyYXBoLlxyXG4gKlxyXG4gKiBAcGFyYW0gdG93cyB7T2JqZWN0fSBUaGUgcm93cyBmcm9tIHRoZSB0YWJsZSB0aGUgYmFyIGdyYXBoIGlzIHZpc3VhbGlzaW5nXHJcbiAqIEByZXR1cm5zIHtPamJlY3RbXX0gRGF0YSBmb3IgdGhlIGJhciBncmFwaFxyXG4gKiAqL1xyXG5EYXRhUHJvY2Vzc29yLnByb3RvdHlwZS5jcmVhdGVEYXRhRm9yR3JvdXBlZEdyYXBoID0gZnVuY3Rpb24ocm93cyl7XHJcbiAgICB2YXIgYXZhaWxhYmxlT2JzWWVhcnMgPSBbXTtcclxuXHJcbiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICBpZighYXZhaWxhYmxlT2JzWWVhcnMuaW5jbHVkZXMoZWxlbS5vYnNfeXIpKWF2YWlsYWJsZU9ic1llYXJzLnB1c2goZWxlbS5vYnNfeXIpO1xyXG4gICAgfSk7XHJcbiAgICBhdmFpbGFibGVPYnNZZWFycy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuICthIC0gK2I7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgdmFyIGVkYkRvbmUgPSBbXTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoIWVkYkRvbmUuaW5jbHVkZXMocm93c1tpXS5lZGIpKXtcclxuICAgICAgICAgICAgZWRiRG9uZS5wdXNoKHJvd3NbaV0uZWRiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHsgXCJlZGJcIiA6IHJvd3NbaV0uZWRifTtcclxuXHJcbiAgICAgICAgICAgIGVudHJ5W3Jvd3NbaV0ub2JzX3lyXSA9ICtyb3dzW2ldLnZhbHVlO1xyXG4gICAgICAgICAgICBkYXRhLnB1c2goZW50cnkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBkYXRhLmxlbmd0aDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGFbal0uZWRiID09PSByb3dzW2ldLmVkYil7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVtqXVtyb3dzW2ldLm9ic195cl0gPSArcm93c1tpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7ZGF0YSA6IGRhdGEsIGtleXMgOiBhdmFpbGFibGVPYnNZZWFyc307XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU29ydHMgdGhlIHNlY3Rpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSByb3dzIHtPYmplY3R9IGRhdGEgb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHNlY3Rpb25zIGFycmF5XHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLnNvcnRTZWN0aW9ucyA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICBkYXRhLnNlY3Rpb25zLnNvcnQoZnVuY3Rpb24oYSxiKXtcclxuICAgICAgLy8gRmlyc3QgY2hlY2sgc2ltcGxlIGNhc2Ugb2YgbnVtYmVyIGRpZmZlcmVuY2VcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB3aGlsZSghaXNOYU4oYS5jaGFyQXQoaSkpKXtpKyt9XHJcbiAgICAgIHZhciBudW1iZXJBID0gYS5zdWJzdHJpbmcoMCxpKTsgLy8gR2V0cyB0aGUgbnVtYmVyIGZyb20gdGhlIHNlY3Rpb25cclxuXHJcbiAgICAgIGkgPSAwO1xyXG4gICAgICB3aGlsZSghaXNOYU4oYi5jaGFyQXQoaSkpKXtpKyt9XHJcbiAgICAgIHZhciBudW1iZXJCID0gYi5zdWJzdHJpbmcoMCxpKTtcclxuXHJcbiAgICAgIGlmKG51bWJlckEgIT09IG51bWJlckIpIHtcclxuICAgICAgICAgIHJldHVybiBudW1iZXJBIC0gbnVtYmVyQjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gW2EsYl0uc29ydCgpWzBdID09PSBhID8gLTEgOiAxOyAvLyBTb3J0IHR3byBuYW1lcyBhbmQgcmV0dXJuIHRoZSBmaXJzdFxyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFwcGxpZXMgYSBDUEkgY29uc3VtZXIgcHJpY2UgaW5kZXggcGVyY2VudGFnZSB0byBlYWNoIG9mIHRoZSByb3dzIHZhbHVlcy4gVGhlIGNwaVZhbHVlcyBjb250YWlucyBhIHZhbHVlIGZvciBlYWNoIG9mIHRoZSB5ZWFycy5cclxuICpcclxuICogVGhlIENQSSBpcyBhcHBsb2VkIGJ5IHN0YXJ0aW5nIGF0IHRoZSB5ZWFyIHRoZSB2YWx1ZSB3YXMgb2JzZXJ2ZWQgYXQgY29tcG91bmRpbmcgdGhlIGNwaSB2YWx1ZXMgdW50aWwgdGhlIGxhc3QgeWVhciBpbiB0aGVcclxuICogY3BpVmFsdWVzIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHJvd3Mge09iamVjdH0gVGhlIHJvd3MgY3BpIHdpbGwgYmUgYXBwbGllZCB0b1xyXG4gKiBAcGFyYW0gY3BpIHZhbHVlcyB7T2JqZWN0fSBUaGUgdmFsdWVzIHRvIGFkZCB0byBlYWNoIHllYXJcclxuICogKi9cclxuRGF0YVByb2Nlc3Nvci5wcm90b3R5cGUuYXBwbHlDUElUb1RhYmxlUm93cyA9IGZ1bmN0aW9uKHJvd3MsIGNwaVZhbHVlcyl7XHJcbiAgICAvLyBGaW5kIHRoZSBtaW4gYW5kIG1heCB5ZWFyIGZyb20gdGhlIGRhdGFcclxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihlbGVtLCBpbmRleCl7IC8vIEdyYWIgZXZlcnkgUm93XHJcbiAgICAgICAgdmFyIHllYXIgPSByb3dzW2luZGV4XS5vYnNfeXI7IC8vIEdyYWIgdGhlIHllYXIgb2YgdGhlIGNlbGwgYnkgY2hlY2tpbmcgdGhlIGNsYXNzXHJcbiAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gcm93c1tpbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcGlWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZih5ZWFyIDw9IGNwaVZhbHVlc1tpXS55ZWFyKXtcclxuICAgICAgICAgICAgICAgIHZhbHVlT2ZDZWxsID0gdmFsdWVPZkNlbGwgKiAoMSArIChjcGlWYWx1ZXNbaV0udmFsdWUgLyAxMDApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByb3dzW2luZGV4XS52YWx1ZSA9IHZhbHVlT2ZDZWxsOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQWRkcyBpbiBhIHNlY3Rpb24sIGNhdGVnb3J5LCBzdWIgY2F0ZWdvcnksIG9yIGRlc2NyaXB0aW9uIHRvIGEgcm93IGluIHNlbGVjdGlvbnMuIFRoZSBpZCBpcyB1c2VkIHRvXHJcbiAqIHdvcmsgb3V0IHdoaWNoIHJvdyBpdCBnb2VzIGluLiBUaGUgdHlwZSBpcyB1c2VkIGZvciB3b3JraW5nIG91dCB3aGljaCBwcm9wZXJ0eSB0byBzZXRcclxuICpcclxuICogQHBhcmFtIGlkIHtOdW1iZXJ9IHRoZSBpZCBvZiB0aGUgc2VsZWN0aW9uIHJvd1xyXG4gKiBAcGFyYW0gdHlwZSB7U3RyaW5nfSB0aGUgdHlwZSBvZiBzZWxlY3Rpb24gc2VjdGlvbiwgY2F0ZWdvcnkgZXRjLlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9ucyB7T2JqZWN0W119IFRoZSBhcnJheSBvZiByb3dzIHRvIHNldCB0aGUgc2VsZWN0aW9uIGluXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmFkZFRvU2VsZWN0aW9uID0gZnVuY3Rpb24gKGlkLHR5cGUsZGF0YSxzZWxlY3Rpb25zKSB7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHNlbGVjdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKHNlbGVjdGlvbnNbaV0uaWQrXCJcIiA9PT0gaWQrXCJcIil7IC8vIENvbnZlcnQgdGhlbSBib3RoIHRvIHN0cmluZ3NcclxuICAgICAgICAgICAgaWYodHlwZSA9PT0gXCJzZWN0aW9uXCIpe1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uc1tpXS5zZWN0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiY2F0ZWdvcnlcIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLmNhdGVnb3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwic3ViY2F0ZWdvcnlcIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLnN1YkNhdGVnb3J5ID0gZGF0YTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09IFwiZGVzY3JpcHRpb25cIil7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25zW2ldLmRlc2NyaXB0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBXb3JrcyBvdXQgdGhlIHRvdGFsIGZvciBlYWNoIHJlZ2lvbiBiYXNlZCBvbiB0aGUgZWRiIGZvciBlYWNoIHJvdyBhbmQgd2hpY2ggcmVnaW9uIGl0IGlzIHBhcnQgb2ZcclxuICpcclxuICogQHBhcmFtIHRhYmxlUm93cyB7T2JqZWN0W119IHRoZSByb3dzIGZyb20gYSB0YWJsZVxyXG4gKiBAcGFyYW0gcmVnaW9ucyB7T2JqZWN0W119IEFuIGFycmF5IG9mIHJlZ2lvbnMgYW5kIHdoaWNoIGVkYnMgbWFrZSB1cCB0aGF0IHJlZ2lvblxyXG4gKiBAcGFyYW0gYXZhaWxhYmxlWWVhcnMge09iamVjdFtdfSBUaGUgeWVhcnMgdGhhdCB0b3RhbHMgc2hvdWxkIGJlIGNyZWF0ZWQgZm9yXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IGNvbnRhaW5zIGVhY2ggcmVnaW9uIGFuZCBhbiBhcnJheSBvZiB5ZWFycyBhbG9uZyB3aXRoIHRvdGFscyBmb3IgdGhhdCB5ZWFyXHJcbiAqICovXHJcbkRhdGFQcm9jZXNzb3IucHJvdG90eXBlLmNyZWF0ZVRhYmxlVG90YWxzID0gZnVuY3Rpb24gKHRhYmxlUm93cywgcmVnaW9ucywgYXZhaWxhYmxlT2JzWWVhcnMpIHtcclxuICAgIHZhciByZWdpb25TdHJpbmdzID0gW1wiblwiLFwidW5pXCIsXCJlbmlcIiwgXCJzd25pXCIsIFwic1wiLCBcInVzaVwiLCBcImxzaVwiXTsgLy8gQWxsIHRoZSByZWdpb25zXHJcbiAgICB2YXIgdG90YWxzID0ge307IC8vIHJlZyA6IFwiXCIgLCB5ZWFycyA6IFtdXHJcblxyXG4gICAgLy8gR28gdGhyb3VnaCBldmVyeSB5ZWFyXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXZhaWxhYmxlT2JzWWVhcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIC8vIEdldCB0aGUgcm93cyBmb3IgdGhlIGN1cnJlbnQgeWVhclxyXG4gICAgICAgIHRhYmxlUm93cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUub2JzX3lyID09PSBhdmFpbGFibGVPYnNZZWFyc1tpXTt9KS5mb3JFYWNoKGZ1bmN0aW9uKHJvdyl7XHJcblxyXG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGVhY2ggb2YgdGhlIHJlZ2lvbnNcclxuICAgICAgICAgICAgcmVnaW9uU3RyaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKHJlZ2lvblN0cmluZyl7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCByb3cgZWRiIGlzIGluc2lkZSB0aGUgY3VycmVudCByZXFpb24gZ3JhYiB0aGUgdmFsdWUgZnJvbSB0aGUgcm93IGFuZCBhZGQgaXQgaW4gdGhlIGFycmF5IGZvciB0aGUgY3VycmVudCB5ZWFyXHJcbiAgICAgICAgICAgICAgICBpZihyZWdpb25zW3JlZ2lvblN0cmluZ10uaW5jbHVkZXMocm93LmVkYikpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRvdGFsc1tyZWdpb25TdHJpbmddID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbHNbcmVnaW9uU3RyaW5nXSA9IFsrcm93LnZhbHVlXTsgLy8gRmlyc3QgdGltZSB0aGlzIHJlcWlvbiBoYXMgYmVlbiBmb3VuZCBzbyBoYXZlIHRvIGNyZWF0ZSB0aGUgcHJvcGVydHlcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpID09PSB0b3RhbHNbcmVnaW9uU3RyaW5nXS5sZW5ndGgpeyAvLyBUaGlzIG1lYW5zIHdlIGhhdmUgbW92ZWQgb250byBhIG5ldyB5ZWFyIHNvIGhhdmUgdG8gY3JlYXRlIGEgbmV3IHNsb3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsc1tyZWdpb25TdHJpbmddLnB1c2goK3Jvdy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbHNbcmVnaW9uU3RyaW5nXSBbaV0gKz0gKyAoK3Jvdy52YWx1ZSk7IC8vIFN0aWxsIGluIHRoZSBmaXJzdCB5ZWFyIHdpdGggYSBkaWZmZXJlbnQgZWRiIGluIHRoZSBzYW1lIHJlZ2lvbiBzbyBqdXN0IGFkZCB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdmFyIG56ID0gW107IC8vIFRvIGZpbmQgdGhlIHRvdGFscyBvZiBOWiBhZGQgbm9ydGggYW5kIHNvdXRoIHRlZ2V0aGVyXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXZhaWxhYmxlT2JzWWVhcnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIG56LnB1c2godG90YWxzW1wiblwiXVtpXSArIHRvdGFsc1tcInNcIl1baV0pO1xyXG4gICAgfVxyXG4gICAgdG90YWxzW1wibnpcIl0gPSBuejsgLy8gQWRkIHRoZSBOWiBwcm9wZXJ0eSB0byB0b3RhbHNcclxuICAgIHJldHVybiB0b3RhbHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGhlIGRhdGEgc3RydWN0dXJlIG9iamVjdFxyXG4gKlxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uc0RhdGEge09iamVjdFtdfSBVc2VkIGZvciBjcmVhdGluZyByZWd1bGFyIGdyYXBoc1xyXG4gKiBAcGFyYW0gc2VsZWN0aW9uVGFibGV7T2JqZWN0W119IFVzZWQgZm9yIGNyZWF0aW5nIHRoZSBodG1sIHRhYmxlc1xyXG4gKiBAcGFyYW0gY29tYmluZURhdGEge09iamVjdFtdfSBVc2VkIGZvciB0aGUgdmVjdG9yIGdyYXBoc1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBEYXRhU3RydWN0dXJlKHNlbGVjdGlvbkRhdGEsIHNlbGVjdGlvblRhYmxlLCBjb21iaW5lRGF0YSl7XHJcbiAgICB0aGlzLnNlbGVjdGlvbkRhdGEgPSBzZWxlY3Rpb25EYXRhOyAvLyBDb250YWlucyB0aGUgcm93cywgaWQsIHRpdGxlLCBzdWJ0aXRsZSBhbWQgaW5pdCBmb3IgZWFjaCBzZWxlY3Rpb25cclxuICAgIHRoaXMuc2VsZWN0aW9uVGFibGUgPSBzZWxlY3Rpb25UYWJsZTsgLy8gQ29udGFpbnMgdGhlIHJvd3MsIGlkLCB0aXRsZSwgc3VidGl0bGUgYW1kIGluaXQgZm9yIGVhY2ggdGFibGVcclxuICAgIHRoaXMuY29tYmluZURhdGEgPSBjb21iaW5lRGF0YTsgLy8gQ29udGFpbnMgY29tYmluZWQgcm93cyBhbG9uZyB3aXRoIHRpdGxlcyBhbmQgdW5pdHNcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgZm9yIGhvbGRpbmcgdGhlIHVzZXJzIHNlbGVjdGlvbnMgZWFjaCBwcm9wZXJ0eSBjb250YWlucyBhXHJcbiAqIHNlY3Rpb24sIGNhdGVnb3J5LCBzdWIgY2F0ZWdvcnkgYW5kIGRlc2NyaXB0aW9uLiBUaGV5IGNhbiBiZSBlbXB0eSBzdHJpbmdzXHJcbiAqXHJcbiAqIEBwYXJhbSBhIHtPYmplY3R9IEEgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBiIHtPYmplY3R9IEIgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBjIHtPYmplY3R9IEMgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSBkIHtPYmplY3R9IEQgc2VsZWN0aW9uXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbihhLGIsYyxkKXtcclxuICAgIHRoaXMuYVRhYmxlID0gYTtcclxuICAgIHRoaXMuYlRhYmxlID0gYjtcclxuICAgIHRoaXMuY1RhYmxlID0gYztcclxuICAgIHRoaXMuZFRhYmxlID0gZDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBPYmplY3QgZm9yIGhvbGRpbmcgdGhlIHJvd3MgdGhhdCBiZWxvbmcgdG8gZWFjaCBvZiB0aGUgdGFibGUgc2VsZWN0aW9ucy5cclxuICogQWxzbyBjb250YWlucyB0aGUgY29tYmluZWQgdGFibGVzLiBFYWNoIG9mIHRoZSBhcnJheXMgY291bGQgYmUgZW1wdHkgaWYgbm9cclxuICogc2VsZWN0aW9uIHdhcyBtYWRlIGZvciBhIHRhYmxlXHJcbiAqXHJcbiAqIEBwYXJhbSB0YWJsZUEge09iamVjdFtdfSBBIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVCIHtPYmplY3RbXX0gQiBzZWxlY3Rpb25cclxuICogQHBhcmFtIHRhYmxlQyB7T2JqZWN0W119IEMgc2VsZWN0aW9uXHJcbiAqIEBwYXJhbSB0YWJsZUQge09iamVjdFtdfSBEIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVBQiB7T2JqZWN0W119IEFCIHNlbGVjdGlvblxyXG4gKiBAcGFyYW0gdGFibGVDRCB7T2JqZWN0W119IENEIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5mdW5jdGlvbiBEYXRhVGFibGVzKHRhYmxlQSx0YWJsZUIsdGFibGVDLHRhYmxlRCx0YWJsZUFCLHRhYmxlQ0Qpe1xyXG4gICAgdGhpcy50YWJsZUEgPSB0YWJsZUE7XHJcbiAgICB0aGlzLnRhYmxlQiA9IHRhYmxlQjtcclxuICAgIHRoaXMudGFibGVDID0gdGFibGVDO1xyXG4gICAgdGhpcy50YWJsZUQgPSB0YWJsZUQ7XHJcbiAgICB0aGlzLnRhYmxlQUIgPSB0YWJsZUFCO1xyXG4gICAgdGhpcy50YWJsZUNEID0gdGFibGVDRDtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDb250YWlucyBkYXRhIGZvciBhIHBhcnRpY3VsYXIgc2VsZWN0aW9uLiBUaGUgcm93cyB0aGF0IGJlbG9uZyB0byB0aGUgc2VjdGlvbnMgYW5kXHJcbiAqIHRoZSBzaGFyZWQgdGl0bGUgc3VidGl0bGUgYW5kIHVuaXQuXHJcbiAqICovXHJcbmZ1bmN0aW9uIFNlbGVjdGlvbkRhdGEocm93cyx0aXRsZSxzdWJUaXRsZSx1bml0LGlkKXtcclxuICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLnN1YlRpdGxlID0gc3ViVGl0bGU7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnVuaXQgPSB1bml0O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIGJvdGggdGFibGVzIGFuZCB0aGUgY29tYmluZWQgcm93c1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBTZWxlY3Rpb25EYXRhQ29tYmluZWQocm93cywgdGFibGUxUm93cyx0YWJsZTJSb3dzLHRpdGxlMSx0aXRsZTIsdW5pdDEsdW5pdDIsaWQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93czsgLy8gQ29tYmluZWQgcm93c1xyXG4gICAgdGhpcy50aXRsZTEgPSB0aXRsZTE7XHJcbiAgICB0aGlzLnRpdGxlMiA9IHRpdGxlMjtcclxuICAgIHRoaXMudW5pdDEgPSB1bml0MTtcclxuICAgIHRoaXMudW5pdDIgPSB1bml0MjtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudGFibGUxUm93cyA9IHRhYmxlMVJvd3M7XHJcbiAgICB0aGlzLnRhYmxlMlJvd3MgPSB0YWJsZTJSb3dzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIENvbnRhaW5zIGRhdGEgZm9yIGEgcGFydGljdWxhciBzZWxlY3Rpb24uIFRoZSByb3dzIHRoYXQgYmVsb25nIHRvIHRoZSBzZWN0aW9ucyBhbmRcclxuICogdGhlIHNoYXJlZCB0aXRsZSBzdWJ0aXRsZSBhbmQgdW5pdC4gVXNlZCB0byBnZW5lcmF0ZSBodG1sIHRhYmxlc1xyXG4gKiAqL1xyXG5mdW5jdGlvbiBTZWxlY3RlZFRhYmxlRGF0YShyb3dzLGlkLCB0aXRsZSwgc3ViVGl0bGUsIHVuaXQpe1xyXG4gICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuc3ViVGl0bGUgPSBzdWJUaXRsZTtcclxuICAgIHRoaXMudW5pdCA9IHVuaXQ7XHJcbn1cclxuIiwiLy8gREVQRU5ERU5DSUVTIDogRGF0YVByb2Nlc3NvciwgR3JvdXBlZEJhckdyYXBoLCBib3hQbG90XHJcblxyXG5cclxuLyoqXHJcbiAqIEdyYXBoIG9iamVjdCB0byBjb250cm9sIHRoZSBncmFwaHMgZm9yIHNpbmdsZSBzZWxlY3Rpb25zXHJcbiAqXHJcbiAqIEBpZCB0aGUgaWQgb2YgdGhlIHNlbGVjdGlvblxyXG4gKiBAcm93cyB7T2JqZWN0W119IHRoZSByb3dzIGZvciB0aGUgc2VsZWN0aW9uXHJcbiAqIEBzZWxlY3Rpb24ge09iamVjdH0gdGhlIGRldGFpbHMgb2YgdGhlIHNlbGVjdGlvblxyXG4gKiAqL1xyXG5mdW5jdGlvbiBHcmFwaChpZCxyb3dzLHNlbGVjdGlvbikge1xyXG4gIHRoaXMuaWQgPSBpZDtcclxuICB0aGlzLmdyb3VwZWRJRCA9ICcjZ3JvdXBlZC1iYXItJytpZDtcclxuICB0aGlzLmJveElEID0gJyNib3hwbG90LScraWQ7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcclxuICB0aGlzLnRpdGxlID0gdGhpcy5nZXRUaXRsZSgpO1xyXG4gIHRoaXMuc3ViVGl0bGUgPSB0aGlzLmdldFN1YlRpdGxlKCk7XHJcbiAgdGhpcy51bml0ID0gdGhpcy5nZXRVbml0KCk7XHJcblxyXG4gIC8vIENhY2hlIGRvbSBlbGVtZW50c1xyXG4gIHRoaXMuJHRpdGxlQmFyID0gJCgnI3RpdGxlLWJhci0nK2lkKTtcclxuICB0aGlzLiR0aXRsZUJveCA9ICQoJyN0aXRsZS1ib3gtJytpZCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyBpZiB0aGUgb2JqZWN0IGlzIGNvbWJpbmVkXHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGNvbWJpbmVkIG9yIG5vdFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuaXNDb21iaW5lZCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBvZiB0aGUgZ3JhcGhcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdW5pdFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0VW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5yb3dzWzBdLnVuaXRzO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGlkIG9mIHRoZSBncmFwaFxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBpZFxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuZ2V0SUQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuaWQ7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdGl0bGUgZm9yIHRoZSBncmFwaHNcclxuICpcclxuICogQHJldHVybiB7U3RyaW5nfSB0aGUgdGl0bGVcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbi5kZXNjcmlwdGlvbiArIFwiLCBcIiArIHRoaXMuc2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHN1YiB0aXRsZSBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBzdWIgdGl0bGVcclxuICogKi9cclxuR3JhcGgucHJvdG90eXBlLmdldFN1YlRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGlvbi5zZWN0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgdW5pdCBmb3IgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSB1bml0XHJcbiAqICovXHJcbkdyYXBoLnByb3RvdHlwZS5nZXRVbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnJvd3NbMF0udW5pdHM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogSW5zZXJ0cyB0aGUgdGl0bGVzIGZvciB0aGUgZ3JhcGhzIGludG8gdGhlIERPTVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuaW5zZXJ0VGl0bGVzID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuJHRpdGxlQmFyLmFwcGVuZCgnPGgzIGNsYXNzPVwidGl0bGVcIj4nK3RoaXMudGl0bGUrJzwvaDM+JykuYXBwZW5kKCc8aDQgY2xhc3M9XCJzdWJUaXRsZVwiPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxuICB0aGlzLiR0aXRsZUJveC5hcHBlbmQoJzxoMyBjbGFzcz1cInRpdGxlXCI+Jyt0aGlzLnRpdGxlKyc8L2gzPicpLmFwcGVuZCgnPGg0IGNsYXNzPVwic3ViVGl0bGVcIj4nK3RoaXMuc3ViVGl0bGUrJzwvaDQ+Jyk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyB0aGUgZGF0YSB1c2luZyBkYXRhIHByb2Nlc3NvciBhbmQgaW5zZXJ0cyBpbnRvIERPTVxyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZGF0YSBmb3IgdGhlIGdyb3VwZWQgZ3JhcGggYW5kIGRpc3BsYXkgaXRcclxuICAgIHZhciBncm91cGVkRGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JHcm91cGVkR3JhcGgodGhpcy5yb3dzKTtcclxuICAgIEdyb3VwZWRCYXJNb2R1bGUuY3JlYXRlZEdyb3VwZWRCYXJHcmFwaChncm91cGVkRGF0YS5kYXRhLGdyb3VwZWREYXRhLmtleXMsdGhpcy51bml0LHRoaXMuZ3JvdXBlZElEKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGRhdGEgZm9yIGJveHBsb3QgYW5kIHNob3cgdGhlIGdyYXBoXHJcbiAgICB2YXIgYm94RGF0YSA9IGRwLmNyZWF0ZURhdGFGb3JCb3hQbG90KHRoaXMucm93cyk7XHJcbiAgICBCb3hQbG90TW9kdWxlLmNyZWF0ZUJveFBsb3QoYm94RGF0YSwgdGhpcy5ib3hJRCwgdGhpcy51bml0KTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBUYWtlcyB0aGUgbmV3IHJvd3MgYW5kIHVwZGF0ZXMgdGhlIGdyYXBoc1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdFtdfSByb3dzIHRoZSBuZXcgcm93c1xyXG4gKiAqL1xyXG5HcmFwaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJvd3MpIHtcclxuICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICB0aGlzLmNyZWF0ZSgpO1xyXG59XHJcbiIsIi8vIENvbnRhaW5zIGluZm9ybWF0aW9uIGZvciBhIHJvdyBvZiBzZWxlY3Rpb25zXHJcbi8vIFJlY2lldmVzIGV2ZW50cyBmcm9tIHNlbGVjdG9ycyB3aGVuIHRoZSBzZWxlY3Rpb24gY2hhbmdlcyBhbmQgdXBkYXRlcyBpdCdzIHN0YXRlXHJcbi8vIFNlbmQgb3V0IGV2ZW50cyB3aGVuIHNlbGVjdG9ycyBjaGFuZ2UgYW5kIG90aGVyIHNlbGVjdG9ycyBzaG91bGQgYmUgbm90aWZpZWRcclxuZnVuY3Rpb24gU2VsZWN0aW9uUm93Q29udHJvbGxlcihpZCl7XHJcbiAgICB0aGlzLmlkTnVtYiA9IGlkO1xyXG4gICAgdGhpcy5yb3dTZWxlY3Rpb25zID0geyBpZCA6IGlkLCBzZWN0aW9uIDogXCJcIiwgY2F0ZWdvcnkgOiBcIlwiLCBzdWJDYXRlZ29yeSA6IFwiXCIsIGRlc2NyaXB0aW9uIDogXCJcIiB9O1xyXG5cclxuICAgIHRoaXMuc2V0SW5pdGlhbFN0YXRlID0gZnVuY3Rpb24gKHJvd0RhdGEpIHtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zID0gcm93RGF0YTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMgPSB7IGlkIDogdGhpcy5pZCwgc2VjdGlvbiA6IFwiXCIsIGNhdGVnb3J5IDogXCJcIiwgc3ViQ2F0ZWdvcnkgOiBcIlwiLCBkZXNjcmlwdGlvbiA6IFwiXCIgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbGlkU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZih0aGlzLnJvd1NlbGVjdGlvbnMuc2VjdGlvbiAhPT0gXCJcIiAmJiB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPT09IFwiXCIpe1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgICAgdmFyIHVybFNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiAoZS5pZCA9PT0gaWQpfSlbMF07XHJcblxyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc2VjdGlvbiA9IHVybFNlbGVjdGlvbi5zZWN0aW9uO1xyXG4gICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuY2F0ZWdvcnkgPSB1cmxTZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbiAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IHVybFNlbGVjdGlvbi5zdWJDYXRlZ29yeTtcclxuICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gdXJsU2VsZWN0aW9uLmRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlU2VjdGlvbiA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuc3ViQ2F0ZWdvcnkgPSBcIlwiO1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gXCJcIjtcclxuICAgICAgICAgIC8vIFNldCB0aGUgbmV3IHNlbGVjdGVkIHNlY3Rpb25cclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zZWN0aW9uID0gdXBkYXRlLnNlY3Rpb247XHJcbiAgICAgICAgICBldmVudHMuZW1pdChcIk5FV19TRUNUSU9OXCIsIHtpZCA6IHRoaXMuaWROdW1iLCBzZWxlY3Rpb24gOiB0aGlzLnJvd1NlbGVjdGlvbnN9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVDYXRlZ29yeSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5zdWJDYXRlZ29yeSA9IFwiXCI7XHJcbiAgICAgICAgICB0aGlzLnJvd1NlbGVjdGlvbnMuZGVzY3JpcHRpb24gPSBcIlwiO1xyXG5cclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5jYXRlZ29yeSA9IHVwZGF0ZS5jYXRlZ29yeTtcclxuICAgICAgICAgIGV2ZW50cy5lbWl0KFwiTkVXX0NBVEVHT1JZXCIsIHtpZCA6IHRoaXMuaWROdW1iLCBzZWxlY3Rpb24gOiB0aGlzLnJvd1NlbGVjdGlvbnN9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVTdWJDYXRlZ29yeSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgICAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICAgIHRoaXMucm93U2VsZWN0aW9ucy5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLnN1YkNhdGVnb3J5ID0gdXBkYXRlLnN1YkNhdGVnb3J5O1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfU1VCQ0FURUdPUllcIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZSkge1xyXG4gICAgICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgICAgdGhpcy5yb3dTZWxlY3Rpb25zLmRlc2NyaXB0aW9uID0gdXBkYXRlLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJORVdfREVTQ1JJUFRJT05cIiwge2lkIDogdGhpcy5pZE51bWIsIHNlbGVjdGlvbiA6IHRoaXMucm93U2VsZWN0aW9uc30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdldFJvd1NlbGVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb3dTZWxlY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGFueSBvZiB0aGVzZSBldmVudHMgY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uXHJcbiAgICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgdGhpcy51cGRhdGVTZWN0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiQ0FURUdPUllfQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZUNhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiU1VCQ0FURUdPUllfQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZVN1YkNhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiREVTQ1JJUFRJT05fQ0hBTkdFRFwiLCB0aGlzLnVwZGF0ZURlc2NyaXB0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuIiwiLy8gUmVsaWVzIG9uXHJcbi8vIEpRVUVSWVxyXG4vLyBEYXRhQmFzZVxyXG4vLyBFdmVudHNcclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU2VjdGlvbiBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIFNlY3Rpb25TZWxlY3QoaWROdW1iKXtcclxuICAgIHRoaXMuaWROdW1iID0gaWROdW1iO1xyXG4gICAgdGhpcy5pZCA9IFwiI3NlY3Rpb24tc2VsZWN0XCIraWROdW1iOyAvLyBUaGUgZWxlbWVudCBpZFxyXG4gICAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTsgLy8gU2VsZWN0ZXRzIGFuZCBjYWNoZXMgdGhlIGVsZW1lbnRcclxuXHJcbiAgICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuICAgICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG5cclxuICAgICAgLy8gR3JhYiBzZWN0aW9uIGZyb20gREIgYW5kIGFkZCB0byBkcm9wZG93blxyXG4gICAgICBEYXRhYmFzZS5nZXRTZWN0aW9uc0Zyb21EYXRhYmFzZShmdW5jdGlvbihzZWN0aW9ucyl7XHJcbiAgICAgICAgZHAuc29ydFNlY3Rpb25zKHtzZWN0aW9ucyA6IHNlY3Rpb25zfSk7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELHNlY3Rpb25zLHNlbGVjdGlvbi5zZWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIFdoZW4gdGhlIHNlbGVjdG9yIGlzIGNsaWNrZWQgc2VuZCBvdXQgYSBzZWN0aW9uIGNoYW5nZWQgZXZlbnRcclxuICAgIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBldmVudHMuZW1pdChcIlNFQ1RJT05fQ0hBTkdFRFwiLCB7c2VjdGlvbiA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExpc3RlbiB0byB0aGVzZSBldmVudHNcclxuICAgIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykgKTtcclxuICAgIGV2ZW50cy5vbihcIklOSVRfU0VMRUNUSU9OU1wiLCB0aGlzLmluaXRFdmVudExpc3RlbmVyLmJpbmQodGhpcykpO1xyXG59XHJcblxyXG5cclxuLy8gTWFuYWdlcyBhIFNlY3Rpb24gZHJvcGRvd24gbWVudVxyXG5mdW5jdGlvbiBDYXRlZ29yeVNlbGVjdChpZE51bWIpe1xyXG4gIHRoaXMuaWROdW1iID0gaWROdW1iO1xyXG4gIHRoaXMuaWQgPSBcIiNjYXRlZ29yeS1zZWxlY3RcIit0aGlzLmlkTnVtYjtcclxuICB0aGlzLiRzZWxlY3QgPSAkKHRoaXMuaWQpO1xyXG5cclxuXHJcbiAgLy8gUmVzcG9pbmRzIHRvIGFuIGV2ZW50IHRoYXQgaW5kaWNhdGVzIGRhdGEgaXMgYXZhbGFibGUgZm9yIHRoZSBkcm9wIGRvd25cclxuICB0aGlzLmluaXRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHVybFNlbGVjdGlvbnMpIHtcclxuICAgIHZhciBpZCA9IHRoaXMuaWROdW1iO1xyXG4gICAgdmFyIHNlbGVjdGlvbiA9IHVybFNlbGVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkID09PSBpZH0pWzBdO1xyXG4gICAgdmFyIHBhc3NJRCA9IHRoaXMuaWRcclxuXHJcbiAgICAvLyBHcmFiIGNhdGVnb3JpZXMgZnJvbSBEQiBhbmQgYWRkIHRvIHRoZSBkcm9wZG93blxyXG4gICAgRGF0YWJhc2UuZ2V0Q2F0ZWdvcmllc0Zyb21EYXRhYmFzZShzZWxlY3Rpb24uc2VjdGlvbiwgZnVuY3Rpb24gKGNhdGVnb3JpZXMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGNhdGVnb3JpZXMsc2VsZWN0aW9uLmNhdGVnb3J5KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiB0aGUgc2VsZWN0b3IgaXMgY2xpY2tlZCBzZW5kIG91dCBhIHNlY3Rpb24gY2hhbmdlZCBldmVudFxyXG4gIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnRzLmVtaXQoXCJDQVRFR09SWV9DSEFOR0VEXCIsIHtjYXRlZ29yeSA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIFdoZW4gYSBzZWN0aW9uIGNoYW5nZXMgdGhpcyBmaW5kcyB0aGUgY2F0ZWdvcmllcyByZXF1aXJlZFxyXG4gIHRoaXMuc2VjdGlvbkNoYW5nZWRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHVwZGF0ZS5pZCA9PT0gdGhpcy5pZE51bWIpe1xyXG4gICAgICAgIHRoaXMuJHNlbGVjdC5odG1sKCcnKTsgLy8gQ2xlYXIgb3V0IG9sZCBvcHRpb25zXHJcbiAgICAgICAgdmFyIHBhc3NJRCA9IHRoaXMuaWRcclxuXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0Q2F0ZWdvcmllc0Zyb21EYXRhYmFzZSh1cGRhdGUuc2VsZWN0aW9uLnNlY3Rpb24sIGZ1bmN0aW9uIChjYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGNhdGVnb3JpZXMsXCJcIik7IC8vIE1pZ2h0IGNoYW5nZSB0aGlzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBCaW5kIGZ1bmN0aW9uIHRvIHJlc3BvbmQgdG8gdXBkYXRlXHJcbiAgdGhpcy4kc2VsZWN0Lm9uKCdjaGFuZ2UnLCB0aGlzLnVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcblxyXG4gIC8vIExpc3RlbiB0byBldmVudHMgd2UgY2FyZSBhYm91dFxyXG4gIGV2ZW50cy5vbihcIk5FV19TRUNUSU9OXCIsIHRoaXMuc2VjdGlvbkNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuXHJcbi8vIE1hbmFnZXMgYSBTdWJjYXRlZ29yeSBkcm9wZG93biBtZW51XHJcbmZ1bmN0aW9uIFN1YkNhdGVnb3J5U2VsZWN0KGlkTnVtYil7XHJcbiAgdGhpcy5pZE51bWIgPSBpZE51bWI7XHJcbiAgdGhpcy5pZCA9IFwiI3N1YmNhdGVnb3J5LXNlbGVjdFwiK3RoaXMuaWROdW1iO1xyXG4gIHRoaXMuJHNlbGVjdCA9ICQodGhpcy5pZCk7XHJcblxyXG5cclxuICAvLyBSZXNwb2luZHMgdG8gYW4gZXZlbnQgdGhhdCBpbmRpY2F0ZXMgZGF0YSBpcyBhdmFsYWJsZSBmb3IgdGhlIGRyb3AgZG93blxyXG4gIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgdmFyIGlkID0gdGhpcy5pZE51bWI7XHJcbiAgICB2YXIgc2VsZWN0aW9uID0gdXJsU2VsZWN0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQgPT09IGlkfSlbMF07XHJcbiAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuXHJcbiAgICBEYXRhYmFzZS5nZXRTdWJDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBzZWxlY3Rpb24uY2F0ZWdvcnksIGZ1bmN0aW9uIChzdWJDYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICBpZighbm9SZXN1bHQpe1xyXG4gICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKHBhc3NJRCxzdWJDYXRlZ29yaWVzLHNlbGVjdGlvbi5zdWJDYXRlZ29yeSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIExpc3RlbnMgdG8gYSBjaGFuZ2UgaW4gYSBjYXRlZ29yeVxyXG4gIHRoaXMuY2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgdGhpcy4kc2VsZWN0Lmh0bWwoJycpO1xyXG4gICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuICAgICAgdmFyIHBhc3NJRE51bWIgPSB0aGlzLmlkTnVtYjtcclxuXHJcbiAgICAgIERhdGFiYXNlLmdldFN1YkNhdGVnb3JpZXNGcm9tRGF0YWJhc2UodXBkYXRlLnNlbGVjdGlvbi5zZWN0aW9uLHVwZGF0ZS5zZWxlY3Rpb24uY2F0ZWdvcnksIGZ1bmN0aW9uIChzdWJDYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsc3ViQ2F0ZWdvcmllcyxcIlwiKTsgLy8gTWlnaHQgY2hhbmdlIHRoaXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZXZlbnRzLmVtaXQoXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHtzdWJDYXRlZ29yeSA6IFwiXCIsIGlkIDogcGFzc0lETnVtYn0pOy8vIEJZIHNlbmRpbmcgb3V0IHRoaXMgZXZlbnQgZGVzY3JpcHRpb24gaXMgbm90aWZpZWQgd2l0aCBlbXB0eSBzdWJDYXRlZ29yeVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gV2hlbiB3ZSBhcmUgdXBkYXRlZCBieSB0aGUgdXNlciBzZW5kIG91dCBhbiBldmVudFxyXG4gIHRoaXMudXBkYXRlZCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZXZlbnRzLmVtaXQoXCJTVUJDQVRFR09SWV9DSEFOR0VEXCIsIHtzdWJDYXRlZ29yeSA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIEJpbmQgZnVuY3Rpb24gdG8gcmVzcG9uZCB0byB1cGRhdGVcclxuICB0aGlzLiRzZWxlY3Qub24oJ2NoYW5nZScsIHRoaXMudXBkYXRlZC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgLy8gTGlzdGVuIHRvIGV2ZW50cyB3ZSBjYXJlIGFib3V0XHJcbiAgZXZlbnRzLm9uKFwiU0VDVElPTl9DSEFOR0VEXCIsIGNsZWFyTXlzZWxmLmJpbmQodGhpcykpOyAvLyBUT0RPIHRlc3RcclxuICBldmVudHMub24oXCJORVdfQ0FURUdPUllcIiwgdGhpcy5jYXRlZ29yeUNoYW5nZWRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxuICBldmVudHMub24oXCJJTklUX1NFTEVDVElPTlNcIiwgdGhpcy5pbml0RXZlbnRMaXN0ZW5lci5iaW5kKHRoaXMpKTtcclxufVxyXG5cclxuXHJcblxyXG4vLyBNYW5hZ2VzIGEgU3ViY2F0ZWdvcnkgZHJvcGRvd24gbWVudVxyXG5mdW5jdGlvbiBEZXNjcmlwdGlvblNlbGVjdChpZCl7XHJcbiAgdGhpcy5pZE51bWIgPSBpZDtcclxuICB0aGlzLmlkID0gXCIjZGVzY3JpcHRpb24tc2VsZWN0XCIraWQ7XHJcbiAgdGhpcy4kc2VsZWN0ID0gJCh0aGlzLmlkKTtcclxuXHJcbiAgdGhpcy51cGRhdGVkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudHMuZW1pdChcIkRFU0NSSVBUSU9OX0NIQU5HRURcIiwgIHtkZXNjcmlwdGlvbiA6IHRoaXMuJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSwgaWQgOiB0aGlzLmlkTnVtYn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vXHJcbiAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh1cmxTZWxlY3Rpb25zKSB7XHJcbiAgICB2YXIgaWQgPSB0aGlzLmlkTnVtYjtcclxuICAgIHZhciBzZWxlY3Rpb24gPSB1cmxTZWxlY3Rpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5pZCA9PT0gaWR9KVswXTtcclxuICAgIHZhciBwYXNzSUQgPSB0aGlzLmlkO1xyXG5cclxuICAgIERhdGFiYXNlLmdldERlc2NyaXB0aW9uc0Zyb21EYXRhYmFzZShzZWxlY3Rpb24uc2VjdGlvbiwgc2VsZWN0aW9uLmNhdGVnb3J5LCBzZWxlY3Rpb24uc3ViQ2F0ZWdvcnksIGZ1bmN0aW9uIChkZXNjcmlwdGlvbnMsIG5vUmVzdWx0KSB7XHJcbiAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IocGFzc0lELGRlc2NyaXB0aW9ucyxzZWxlY3Rpb24uZGVzY3JpcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICAvL1xyXG4gIHRoaXMuc3ViQ2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICBpZih1cGRhdGUuaWQgPT09IHRoaXMuaWROdW1iKXtcclxuICAgICAgICB2YXIgcGFzc0lEID0gdGhpcy5pZDtcclxuXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0RGVzY3JpcHRpb25zRnJvbURhdGFiYXNlKHVwZGF0ZS5zZWxlY3Rpb24uc2VjdGlvbix1cGRhdGUuc2VsZWN0aW9uLmNhdGVnb3J5LHVwZGF0ZS5zZWxlY3Rpb24uc3ViQ2F0ZWdvcnksIGZ1bmN0aW9uKGRlc2NyaXB0aW9ucyl7XHJcbiAgICAgICAgICBhZGRPcHRpb25zVG9TZWxlY3RvcihwYXNzSUQsZGVzY3JpcHRpb25zLFwiXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQmluZCBmdW5jdGlvbiB0byByZXNwb25kIHRvIGV2ZW50c1xyXG4gIHRoaXMuJHNlbGVjdC5vbignY2hhbmdlJywgdGhpcy51cGRhdGVkLmJpbmQodGhpcykpO1xyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzIGZyb20gYW55IG9mIHRoZSBvdGhlciBzZWxlY3Rpb25zIGNoYW5naW5nIG9uIG91ciByb3dcclxuICBldmVudHMub24oXCJTRUNUSU9OX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7IC8vIFRPRE8gdGVzdFxyXG4gIGV2ZW50cy5vbihcIkNBVEVHT1JZX0NIQU5HRURcIiwgY2xlYXJNeXNlbGYuYmluZCh0aGlzKSk7XHJcbiAgZXZlbnRzLm9uKFwiTkVXX1NVQkNBVEVHT1JZXCIsIHRoaXMuc3ViQ2F0ZWdvcnlDaGFuZ2VkTGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbiAgZXZlbnRzLm9uKFwiSU5JVF9TRUxFQ1RJT05TXCIsIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXIuYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbi8vIENsZWFycyB0aGUgb3B0aW9ucyBmcm9tIHRoZSBzZWxlY3RcclxuZnVuY3Rpb24gY2xlYXJNeXNlbGYodXBkYXRlKSB7XHJcbiAgaWYodXBkYXRlLmlkID09PSB0aGlzLmlkTnVtYil7XHJcbiAgICAgIHRoaXMuJHNlbGVjdC5odG1sKCcnKTtcclxuICAgICAgdGhpcy4kc2VsZWN0LnNlbGVjdHBpY2tlcigncmVmcmVzaCcpOyAvLyBSZWZyZXNoIHRoZSBzZWxlY3Rpb25zXHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEFkZHMgdGhlIGRyb3AgZG93biBvcHRpb25zIHRvIG9uZSBvZiB0aGUgc2VsZWN0b3JzXHJcbiAqXHJcbiAqIEBwYXJhbSBzZWxlY3RvcklEIHtTdHJpbmd9IHRoZSBpZCBvZiB0aGUgZHJvcCBkb3duXHJcbiAqIEBwYXJhbSBvcHRpb25zIHtTdHJpbmdbXX0gdGhlIG9wdGlvbnMgdG8gYWRkXHJcbiAqIEBwYXJhbSBzZWxlY3RlZE9wdGlvbiB7U3RyaW5nfSB0aGUgb3B0aW9uIHRoYXQgc2hvdWxkIGJlIHNldCBhcyBzZWxlY3RlZFxyXG4gKiAqL1xyXG5mdW5jdGlvbiBhZGRPcHRpb25zVG9TZWxlY3RvcihzZWxlY3RvcklELCBvcHRpb25zLCBzZWxlY3RlZE9wdGlvbil7XHJcbiAgJChzZWxlY3RvcklEKS5odG1sKCcnKTsgLy8gRW1wdHkgdGVtcCBvcHRpb25zXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgaWYob3B0aW9uc1tpXSA9PT0gbnVsbCljb250aW51ZTtcclxuICAgIGlmKG9wdGlvbnNbaV0gPT09IHNlbGVjdGVkT3B0aW9uKXtcclxuICAgICAgJChzZWxlY3RvcklEKS5hcHBlbmQoJzxvcHRpb24gc2VsZWN0ZWQ+JyArIG9wdGlvbnNbaV0gKyAnPC9vcHRpb24+Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKHNlbGVjdG9ySUQpLmFwcGVuZCgnPG9wdGlvbj4nICsgb3B0aW9uc1tpXSArICc8L29wdGlvbj4nKTtcclxuICAgIH1cclxuICB9XHJcbiAgJChzZWxlY3RvcklEKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTsgLy8gUmVmcmVzaCB0aGUgc2VsZWN0aW9uc1xyXG59XHJcbiIsIi8qKlxyXG4qIENyZWF0ZXMgYSB0YWJsZSBvYmplY3RcclxuKiBAcGFyYW0gaWQgdGhlIGlkIG9mIHRoZSB0YWJsZSBhLCBiLCBjLCBkXHJcbiogQHBhcmFtIHJvd3MgdGhlIHJvd3Mgb2YgZGF0YSBmb3IgdGhlIHRhYmxlXHJcbiogQHBhcmFtIHVuaXQgdGhlIHVuaXQgb2YgdGhlIGRhdGFcclxuKiBAcGFyYW0gc2VsZWN0aW9uIHtPYmplY3R9IGlmIG5vdCBjb21iaW5lZCBlbHNlIHtPYmplY3RbXX0gdGhlIHNlbGVjdGlvbiBtYWRlIGJ5IHRoZSB1c2VyIHRvIGZpbmQgdGhlIGRhdGFcclxuKi9cclxuZnVuY3Rpb24gVGFibGUoaWQsIHJvd3MsIHNlbGVjdGlvbiwgaXNDb21iaW5lZCl7XHJcbiAgdGhpcy5pZCA9IGlkO1xyXG4gIHRoaXMuaXNDb21iaW5lZCA9IGlzQ29tYmluZWQ7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLnVuaXQgPSByb3dzWzBdLnVuaXRzO1xyXG4gIHRoaXMuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xyXG4gIFxyXG4gIGlmKGlzQ29tYmluZWQpe1xyXG4gICAgdGhpcy5zZWxlY3Rpb24xID0gc2VsZWN0aW9uWzBdO1xyXG4gICAgdGhpcy5zZWxlY3Rpb24yID0gc2VsZWN0aW9uWzFdO1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIHRoZSB0aXRsZXNcclxuICB0aGlzLnRpdGxlID0gdGhpcy5nZXRUaXRsZSgpO1xyXG4gIHRoaXMuc3ViVGl0bGUgPSB0aGlzLmdldFN1YlRpdGxlKCk7XHJcblxyXG4gIC8vIFVzZWQgdG8gZm9ybWF0IG51bWJlcnMgZGlzcGxheWVkXHJcbiAgdGhpcy5kcEZvcm1hdCA9IGQzLmZvcm1hdChcIi40clwiKTtcclxuXHJcbiAgLy8gRmluZCB0aGUgYXZhaWxhYmxlIHllYXJzXHJcbiAgdGhpcy5hdmFpbGFibGVZZWFycyA9IHRoaXMuZ2V0QXZhaWxhYmxlWWVhcnMoKTtcclxuXHJcbiAgLy8gVXNlZCB0byBzdG9yZSBvcmlnaW5hbCBjZWxsIHZhbHVlc1xyXG4gIHRoaXMubm9DUElDZWxscyA9IFtdO1xyXG5cclxuICAvLyBDYWNoZSBET00gZWxlbWVudHNcclxuICB0aGlzLiR0YWJsZSA9ICQoJyN0YWJsZS0nK2lkKTtcclxuICB0aGlzLiR0b3RhbHNUYWJsZSA9ICQoJyN0YWJsZS10b3RhbC0nK2lkKTtcclxuICB0aGlzLiR0aXRsZSA9ICQoJyN0aXRsZS0nK2lkKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB0aXRsZSBmb3IgdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gdGl0bGVcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmdldFRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZCl7XHJcbiAgICB2YXIgc3ViQ2F0ZWdvcnkgPSB0aGlzLnNlbGVjdGlvblswXSA9PT0gbnVsbCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvblswXS5zdWJDYXRlZ29yeTtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblswXS5jYXRlZ29yeSArIFwiLCBcIiArIHN1YkNhdGVnb3J5ICsgXCIsIFwiKyB0aGlzLnNlbGVjdGlvblswXS5kZXNjcmlwdGlvbjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuICh0aGlzLnN1YkNhdGVnb3J5ID09PSB1bmRlZmluZWQgPyBcIlwiIDogdGhpcy5zZWxlY3Rpb24uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIpICsgXCIgXCIrIHRoaXMuc2VsZWN0aW9uLmRlc2NyaXB0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBzdWJ0aXRsZSBmb3IgdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gc3VidGl0bGVcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmdldFN1YlRpdGxlID0gZnVuY3Rpb24gKCkge1xyXG4gIGlmKHRoaXMuaXNDb21iaW5lZCl7XHJcbiAgICB2YXIgc3ViQ2F0ZWdvcnkgPSB0aGlzLnNlbGVjdGlvblsxXSA9PT0gbnVsbCA/IFwiXCIgOiB0aGlzLnNlbGVjdGlvblsxXS5zdWJDYXRlZ29yeTtcclxuICAgIHJldHVybiAgdGhpcy5zZWxlY3Rpb25bMV0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzdWJDYXRlZ29yeSArIFwiLCBcIisgdGhpcy5zZWxlY3Rpb25bMV0uZGVzY3JpcHRpb247XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbi5zZWN0aW9uICsgXCIsIFwiICsgdGhpcy5zZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHJvd3MgYW5kIHRoZSByZWNhbGN1bGF0ZXMgdG90YWwgdGFibGVcclxuICpcclxuICogQHBhcmFtIHJvd3MgdGhlIG5ldyByb3dzIGZvciB0aGUgdGFibGVcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgdGhpcy5yb3dzID0gcm93cztcclxuICB0aGlzLmNyZWF0ZVRvdGFsc1RhYmxlKHRydWUsIFwiXCIpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNob3dzIGEgYmFyIGdyYXBoIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBzZWxlY3RlZCByb3dcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHVwZGF0ZSB0aGUgb2JqZWN0IHRvIGhvbGQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJvdyBjbGlja2VkXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS50b3RhbHNSb3dTZWxlY3RlZCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICB2YXIgcm93TnVtYiAgPSB1cGRhdGUucm93SUQuY2hhckF0KHVwZGF0ZS5yb3dJRC5sZW5ndGgtMSk7XHJcbiAgdmFyIGRhdGFSb3dJRCA9IFwicm93LXRvdC1cIit0aGlzLmlkK1wiXCIrcm93TnVtYjtcclxuXHJcbiAgU2luZ2xlQmFyTW9kdWxlLnNob3dCYXJXaXRoUm93RWxlbShkYXRhUm93SUQsdXBkYXRlLnJlZ2lvbixcIiNiYXItdG90YWwtXCIrdGhpcy5pZCxcIiNoZWFkLXJvdy10b3RhbHMtXCIrdGhpcy5pZCxcIiN0YWJsZS10b3RhbC1cIit0aGlzLmlkLHRoaXMudW5pdCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogU2hvd3MgYSBiYXIgZ3JhcGggd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHNlbGVjdGVkIHJvd1xyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdXBkYXRlIHRoZSBvYmplY3QgdG8gaG9sZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcm93IGNsaWNrZWRcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLnJvd0NsaWNrZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICB2YXIgcm93TnVtYiA9IGV2ZW50LnJvd0lELnNsaWNlKC0xKTtcclxuLy8gTmVlZCB0byBhY2NvdW50IGZvciBudW1iZXJzIGdyZWF0ZXIgdGhhbiAxMFxyXG5pZighaXNOYU4oZXZlbnQucm93SUQuc2xpY2UoLTIpKSl7XHJcbiAgcm93TnVtYiA9IGV2ZW50LnJvd0lELnNsaWNlKC0yKTtcclxufVxyXG4gIFNpbmdsZUJhck1vZHVsZS5zaG93QmFyV2l0aFJvd0VsZW0oJ3JvdycrdGhpcy5pZCArJycrcm93TnVtYixldmVudC5lZGIsXCIjYmFyLVwiK3RoaXMuaWQsXCIjaGVhZC1yb3ctXCIrdGhpcy5pZCxcIiN0YWJsZS1cIit0aGlzLmlkLHRoaXMudW5pdCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSB5ZWFycyBvZiBkYXRhIGluIHRoZSB0YWJsZVxyXG4gKlxyXG4gKiBAcmV0dXJuIHtTdHJpbmdbXX0gVGhlIGFycmF5IG9mIHllYXJzXHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5nZXRBdmFpbGFibGVZZWFycyA9IGZ1bmN0aW9uICgpIHtcclxuICBhdmFpbGFibGVZZWFycyA9IFtdO1xyXG4gIHZhciBhdmFpbGFibGVZZWFycyA9IFtdO1xyXG4gIHRoaXMucm93cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgIGlmKCFhdmFpbGFibGVZZWFycy5pbmNsdWRlcyhlbGVtLm9ic195cikpYXZhaWxhYmxlWWVhcnMucHVzaChlbGVtLm9ic195cik7XHJcbiAgfSk7XHJcbiAgYXZhaWxhYmxlWWVhcnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyAvLyBTb3J0IHRoZSB5ZWFyc1xyXG4gICAgICByZXR1cm4gK2EgLSArYjtcclxuICB9KTtcclxuICByZXR1cm4gYXZhaWxhYmxlWWVhcnM7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogUmV0dXJucyBpZiBDUEkgY2FuIGJlIGFwcGxpZWQgdG8gdGhlIHRhYmxlXHJcbiAqXHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGNhbiBhcHBseSBjcGkgb3Igbm90XHJcbiAqICovXHJcblRhYmxlLnByb3RvdHlwZS5jYW5BcHBseUNQSSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZih0aGlzLmlzQ29tYmluZWQpcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiB0aGlzLnVuaXQuaW5jbHVkZXMoJyQnKTsgLy8gVE9ETyBjaGVjayBpZiB0aGlzIGlzIHJpZ2h0IGxhdGVyXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQXBwbGllcyBDUEkgdG8gYWxsIHZhbHVlcyBpbiB0aGUgdGFibGVcclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IEhvbGRzIHBlcmNlbnRhZ2Ugb2YgQ1BJIGZvciBlYWNoIHllYXJcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmFwcGx5Q1BJID0gZnVuY3Rpb24gKGNwaVZhbHVlcykge1xyXG4gIGlmKHRoaXMubm9DUElDZWxscy5sZW5ndGggPiAwKXtcclxuICAgICAgdGhpcy5yZXZlcnRDUEkoKTtcclxuICB9XHJcblxyXG4gIHZhciAkY2FjaGVkQ2VsbHMgPSB0aGlzLiR0YWJsZS5maW5kKCcuY2VsbCcpO1xyXG5cclxuICAvLyBGaXJzdCBiYWNrdXAgdGhlIGNwaUNlbGxzXHJcbiAgdmFyIG5vQ1BJQ2VsbHMgPSB0aGlzLm5vQ1BJQ2VsbHM7XHJcbiAgdmFyIGlkID0gdGhpcy5pZDtcclxuICAkY2FjaGVkQ2VsbHMuZWFjaChmdW5jdGlvbigpeyAvLyBCYWNrdXAgdGhlIHZhbHVlcyBmcm9tIHRoZSBjZWxsc1xyXG4gICAgICBub0NQSUNlbGxzLnB1c2goe2lkIDogJCh0aGlzKS5hdHRyKCdpZCcpLCB2YWx1ZSA6ICQodGhpcykudGV4dCgpfSk7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBtaW5ZZWFyID0gSW5maW5pdHk7XHJcbiAgdmFyIG1heFllYXIgPSAtSW5maW5pdHk7XHJcbiAgJGNhY2hlZENlbGxzLmVhY2goZnVuY3Rpb24oKXsgLy9jZWxsIG9yIHRoXHJcbiAgICAgIHZhciB5ZWFyID0gKyQodGhpcykuYXR0cihcImNsYXNzXCIpLnNwbGl0KCcgJylbMV07XHJcbiAgICAgIG1pblllYXIgPSB5ZWFyIDwgbWluWWVhciA/IHllYXIgOiBtaW5ZZWFyO1xyXG4gICAgICBtYXhZZWFyID0geWVhciA+IG1heFllYXIgPyB5ZWFyIDogbWF4WWVhcjtcclxuICB9KTtcclxuXHJcbiAgdmFyIGZvcm1hdCA9IHRoaXMuZHBGb3JtYXQ7XHJcbiAgICAgICRjYWNoZWRDZWxscy5lYWNoKGZ1bmN0aW9uKCl7IC8vIEdyYWIgZXZlcnkgY2VsbFxyXG4gICAgICAgICAgdmFyIHllYXIgPSArJCh0aGlzKS5hdHRyKFwiY2xhc3NcIikuc3BsaXQoJyAnKVsxXTsgLy8gR3JhYiB0aGUgeWVhciBvZiB0aGUgY2VsbCBieSBjaGVja2luZyB0aGUgY2xhc3NcclxuICAgICAgICAgIHZhciB2YWx1ZU9mQ2VsbCA9ICQodGhpcykuYXR0cihcIm9yaWd2YWx1ZVwiKTtcclxuICAgICAgZm9yKHZhciBjdXIgPSBtaW5ZZWFyOyBjdXIgPD1tYXhZZWFyOyBjdXIrKyl7IC8vIEdvIHRocm91Z2ggZWFjaCBwb3NzaWJsZSB5ZWFyXHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjcGlWYWx1ZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgIGlmKGNwaVZhbHVlc1tpXS55ZWFyID09PSBjdXIpe1xyXG4gICAgICAgICAgICAgICAgICBpZih5ZWFyIDw9IGN1cil7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU9mQ2VsbCA9IHZhbHVlT2ZDZWxsICogKDEgKyAoY3BpVmFsdWVzW2ldLnZhbHVlIC8gMTAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU9mQ2VsbCA9IGZvcm1hdCh2YWx1ZU9mQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICAgJCh0aGlzKS50ZXh0KHZhbHVlT2ZDZWxsKTsgLy8gQ1BJIEFwcGxpZWQgdmFsdWVcclxuICAgICAgfSk7XHJcbn1cclxuXHJcblRhYmxlLnByb3RvdHlwZS5yZXZlcnRDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgaWYodGhpcy5ub0NQSUNlbGxzLmxlbmd0aCA+IDApe1xyXG4gICAgdmFyIGZvcm1hdCA9IHRoaXMuZHBGb3JtYXQ7XHJcbiAgICB0aGlzLm5vQ1BJQ2VsbHMuZm9yRWFjaChmdW5jdGlvbihlKXtcclxuICAgICAgICAkKCcjJytlLmlkKS50ZXh0KGZvcm1hdChlLnZhbHVlKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcblRhYmxlLnByb3RvdHlwZS5pbnNlcnRUaXRsZXMgPSBmdW5jdGlvbigpIHtcclxuICBpZih0aGlzLmlzQ29tYmluZWQpe1xyXG4gICAgdmFyIHMxID0gdGhpcy5pZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcclxuICAgIHZhciBzMiA9IHRoaXMuaWQuY2hhckF0KDEpLnRvVXBwZXJDYXNlKCk7XHJcbiAgICB0aGlzLiR0aXRsZS5hcHBlbmQoJzxoMz5SYXRpbyBhbmFseXNpcyAnK3MxKycgLyAnK3MyKyc8L2g0PicpO1xyXG4gICAgdGhpcy4kdGl0bGUuYXBwZW5kKCc8aDQgY2xhc3M9XCJ0aXRsZVwiPjxzcGFuIHN0eWxlPVwiY29sb3I6IGJsYWNrO1wiPicrczErJzogPC9zcGFuPicrdGhpcy50aXRsZSsnPC9oND48aDQgY2xhc3M9XCJ0aXRsZVwiPjxzcGFuIHN0eWxlPVwiY29sb3I6IGJsYWNrO1wiPicrczIrJzogPC9zcGFuPicrdGhpcy5zdWJUaXRsZSsnPC9oND4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhpcy4kdGl0bGUuYXBwZW5kKCc8aDIgY2xhc3M9XCJ0aXRsZVwiPicrdGhpcy50aXRsZSsnPC9oMj4nKS5hcHBlbmQoJzxoNCBjbGFzcz1cInN1YlRpdGxlXCI+Jyt0aGlzLnN1YlRpdGxlKyc8L2g0PicpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4vLyBPbmx5IGNhbGxlZCBvbmNlIHRvIGNyZWF0ZSB0aGUgdGFibGVcclxuVGFibGUucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgdGFibGVEYXRhID0gdGhpcy5jcmVhdGVUYWJsZURhdGEgKHRoaXMucm93cyk7IC8vIEdyYWIgdGhlIGRhdGEgaW4gdGhlIGZvcm0gd2Ugd2FudFxyXG5cclxuICAvLyBjcmVhdGUgdGhlIHllYXJzIGNlbGxzXHJcbiAgdmFyIHllYXJzID0gXCJcIjtcclxuICB0YWJsZURhdGFbMF0ueWVhcnMuZm9yRWFjaChmdW5jdGlvbih5KXtcclxuICAgIHllYXJzICs9IFwiPHRoPlwiICsgeS55ZWFyICsgXCI8L3RoPlwiO1xyXG4gIH0pO1xyXG5cclxuICAvLyBBcHBlbmQgdGhlIGhlYWQgcm93XHJcbiAgdGhpcy4kdGFibGUuYXBwZW5kKCc8dHIgaWQ9XCJoZWFkLXJvdy0nK3RoaXMuaWQrJ1wiIGNsYXNzPVwidGFibGUtcm93IHRhYmxlLWhlYWRcIj4gPHRoPkVEQjwvdGg+JysgeWVhcnMgKyAnPC90cj4nKTtcclxuXHJcbiAgLy8gR28gdGhyb3VnaCBhbmQgY3JlYXRlIGEgcm93IGZvciBlYWNoIGVkYlxyXG4gIHZhciBjZWxsQ291bnQgPSAwO1xyXG4gIHZhciByb3dDb3VudCA9ICAwO1xyXG4gIHZhciBjZWxsVmFsdWVzID0gW107IC8vIEFsbCB0aGUgY2VsbCB2YWx1ZXNcclxuXHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZURhdGEubGVuZ3RoOyBpKyspe1xyXG4gICAgdmFyIGRhdGFSb3cgPSB0YWJsZURhdGFbaV07XHJcbiAgICB2YXIgZWRiID0gZGF0YVJvdy5lZGI7XHJcbiAgICB2YXIgeWVhcnMgPSBkYXRhUm93LnllYXJzO1xyXG4gICAgdmFyIHJvdz0gXCI8dHIgY2xhc3M9J3RhYmxlLXJvdycgaWQ9cm93XCIrdGhpcy5pZCtyb3dDb3VudCtcIj48dGggY2xhc3M9J2VkYi1jZWxsJz5cIiArIGVkYiArIFwiPC90aD5cIjsvLyBJbnNlcnRzIHRoZSBjZWxsIHdpdGggdGhlIGVkYiBuYW1lXHJcblxyXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IHllYXJzLmxlbmd0aDsgaisrKXtcclxuICAgICAgdmFyIHllYXJEYXRhID0geWVhcnNbal07XHJcbiAgICAgIHJvdyArPSBcIjx0aCBvcmlnVmFsdWU9J1wiKyB5ZWFyRGF0YS52YWx1ZSArXCInIGNsYXNzPSdjZWxsIFwiK3llYXJEYXRhLnllYXIrXCInIGlkPSd0XCIrdGhpcy5pZCtcIlwiK2NlbGxDb3VudCtcIic+XCIgKyB0aGlzLmRwRm9ybWF0KHllYXJEYXRhLnZhbHVlKSArIFwiPC90aD5cIjtcclxuICAgICAgY2VsbFZhbHVlcy5wdXNoKHsgaWQgOiBcIiN0XCIrdGhpcy5pZCtcIlwiK2NlbGxDb3VudCwgdmFsdWUgOiB5ZWFyRGF0YS52YWx1ZSB9KTtcclxuICAgICAgY2VsbENvdW50Kys7XHJcbiAgICB9XHJcbiAgICB0aGlzLiR0YWJsZS5hcHBlbmQocm93ICsgJzwvdHI+Jyk7XHJcblxyXG4gICAgJChcIiNyb3dcIit0aGlzLmlkK3Jvd0NvdW50KS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICB2YXIgcm93TnVtYiA9IHRoaXMuaWQuc2xpY2UoLTEpO1xyXG4gICAgICAvLyBOZWVkIHRvIGFjY291bnQgZm9yIG51bWJlcnMgZ3JlYXRlciB0aGFuIDEwXHJcbiAgICAgIGlmKCFpc05hTih0aGlzLmlkLnNsaWNlKC0yKSkpe1xyXG4gICAgICAgIHJvd051bWIgPSB0aGlzLmlkLnNsaWNlKC0yKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZWRiID0gJChcIiNcIit0aGlzLmlkK1wiIC5lZGItY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgIGV2ZW50cy5lbWl0KCdST1dfQ0xJQ0tFRCcsIHsgcm93SUQgOiB0aGlzLmlkLCByb3dOdW1iIDogcm93TnVtYiwgZWRiIDogZWRifSk7XHJcbiAgICB9KTtcclxuICAgIHJvd0NvdW50Kys7XHJcbiAgfVxyXG4gIHRoaXMuY2VsbFZhbHVlcyA9IGNlbGxWYWx1ZXM7XHJcbn1cclxuXHJcblxyXG5UYWJsZS5wcm90b3R5cGUuY3JlYXRlVG90YWxzVGFibGUgPSBmdW5jdGlvbih1cGRhdGUsIHNlbGVjdGVkVG90YWxSb3cpIHtcclxuXHJcbiAgdmFyIHRvdGFscyA9IGRwLmNyZWF0ZVRhYmxlVG90YWxzKHRoaXMucm93cywgVGFibGVzTW9kdWxlLnJlZ2lvbnMsIHRoaXMuYXZhaWxhYmxlWWVhcnMpO1xyXG4gIHZhciBuYW1lcyA9IHtuIDogXCJOb3J0aCBJc2xhbmRcIiwgdW5pIDogXCJVcHBlciBOb3J0aCBJc2xhbmRcIiwgZW5pIDogXCJFYXN0ZXJuIE5vcnRoIElzbGFuZFwiLCBzd25pIDogXCJTb3V0aC1XZXN0IE5vcnRoIElzbGFuZFwiLCBzIDogXCJTb3V0aCBJc2xhbmRcIiwgdXNpIDogXCJVcHBlciBTb3V0aCBJc2xhbmRcIiwgbHNpIDogXCJMb3dlciBTb3V0aCBJc2xhbmRcIiwgbnogOiBcIk5ldyBaZWFsYW5kXCJ9O1xyXG5cclxuICB2YXIgdG90YWxDZWxscyA9IFtdO1xyXG4gIC8vIEluc2VydCBDYXB0aW9uIGZvciB0YWJsZVxyXG4gIHZhciB5ZWFycyA9IFwiXCI7XHJcbiAgdGhpcy5hdmFpbGFibGVZZWFycy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyKSB7XHJcbiAgICAgIHllYXJzICs9IFwiPHRoPlwiICsgeWVhciArIFwiPC90aD5cIjtcclxuICB9KTtcclxuXHJcbiAgdmFyIGNlbGxDb3VudCA9IDA7IC8vIFVzZWQgZm9yIGlkIGNlbGxzXHJcbiAgdmFyIHJvd0NvdW50ID0gMDsgLy8gVXNlZCBmb3IgaWQgcm93c1xyXG5cclxuICBpZih1cGRhdGUpe1xyXG4gICAgICB0aGlzLiR0b3RhbHNUYWJsZS5odG1sKCcnKTsgLy8gQ2xlYXIgbGFzdCB0YWJsZVxyXG4gIH1cclxuXHJcbiAgLy8gVXNlZCB0byBjYWxjdWxhdGUgYXZlcmFnZSBvciB0b3RhbFxyXG4gIHZhciBudW1iZXJPZkNvbXBhbmllcyA9IDI5O1xyXG5cclxuICB0aGlzLiR0b3RhbHNUYWJsZS5hcHBlbmQoJzx0ciBpZD1cImhlYWQtcm93LXRvdGFscy0nK3RoaXMuaWQrJ1wiIGNsYXNzPVwidGFibGUtcm93IHRhYmxlLWhlYWRcIj4gPHRoPlJlZ2lvbjwvdGg+JysgeWVhcnMgKyAnPC90cj4nKTtcclxuXHJcbiAgZm9yICh2YXIgcHJvcGVydHkgaW4gdG90YWxzKSB7XHJcbiAgICAgIGlmICh0b3RhbHMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKSB7XHJcbiAgICAgICAgICB2YXIgcm93PSBcIjx0ciBjbGFzcz0ndGFibGUtcm93JyBpZD1yb3ctdG90LVwiK3RoaXMuaWQrcm93Q291bnQrXCI+XCI7XHJcblxyXG4gICAgICAgICAgLy9UT0RPIChOb3RlIHdoZW4gdXBkYXRlZCBvcmlnVmFsdWUgd2lsbCBiZSB0aGUgdXBkYXRlZCB2YWx1ZSBub3QgdGhlIG9yaWdpbmFsKVxyXG5cclxuICAgICAgICAgIC8vIEluc2VydCBuYW1lIGluIGNvbHVtbiBhbmQgYXNzaWduIGFuIGlkIHRvIHRoZSByb3dcclxuICAgICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmRwRm9ybWF0O1xyXG4gICAgICAgIHZhciBjZWxscyA9IHRoaXMubm9DUElDZWxscztcclxuICAgICAgICAgIHJvdyArPSBcIjx0aCBjbGFzcz0ncmVnLWNlbGwnPlwiICsgbmFtZXNbcHJvcGVydHldICsgXCI8L3RoPlwiO1xyXG4gICAgICAgICAgdmFyIHBhc3NJRCA9IHRoaXMuaWQ7XHJcbiAgICAgICAgICB0b3RhbHNbcHJvcGVydHldLmZvckVhY2goZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgIHZhciBhdmc7XHJcbiAgICAgICAgICAgICAgaWYocHJvcGVydHkgPT09IFwibnpcIil7XHJcbiAgICAgICAgICAgICAgICAgIGF2ZyA9IHZhbHVlIC8gbnVtYmVyT2ZDb21wYW5pZXM7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgYXZnID0gdmFsdWUgLyBUYWJsZXNNb2R1bGUucmVnaW9uc1twcm9wZXJ0eV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcm93ICs9IFwiPHRoIGlkPSd0LXRvdGFsXCIrcGFzc0lEK1wiXCIrY2VsbENvdW50K1wiJyBvcmlnVmFsdWU9J1wiKyBhdmcgK1wiJyBjbGFzcz0nY2VsbCc+XCIgKyBmb3JtYXQoYXZnKSArIFwiPC90aD5cIjtcclxuICAgICAgICAgICAgICB0b3RhbENlbGxzLnB1c2goe2lkIDogXCIjdC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCwgdmFsdWUgOmF2Z30pO1xyXG5cclxuICAgICAgICAgICAgICAvLyBUT0RPIGNoZWNrIGlmIGJldHRlciB3YXlcclxuICAgICAgICAgICAgICBjZWxscy5wdXNoKHtpZCA6IFwidC10b3RhbFwiK3Bhc3NJRCtcIlwiK2NlbGxDb3VudCwgdmFsdWUgOiBhdmd9KTtcclxuXHJcbiAgICAgICAgICAgICAgY2VsbENvdW50Kys7XHJcblxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLiR0b3RhbHNUYWJsZS5hcHBlbmQocm93ICsgJzwvdHI+Jyk7XHJcbiAgICAgICAgICAkKFwiI3Jvdy10b3QtXCIrdGhpcy5pZCtyb3dDb3VudCkuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByZWcgPSAkKFwiI1wiK3RoaXMuaWQgK1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50cy5lbWl0KFwiVE9UQUxfUk9XX0NMSUNLRURcIiwge3Jvd0lEIDogdGhpcy5pZCwgcmVnaW9uIDogcmVnfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHJvd0NvdW50Kys7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgaWYoc2VsZWN0ZWRUb3RhbFJvdyAhPT1cIlwiKXtcclxuICAgICAgJCgnIycrc2VsZWN0ZWRUb3RhbFJvdykuYWRkQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7XHJcbiAgfVxyXG4gIHRoaXMudG90YWxDZWxsVmFsdWVzID0gdG90YWxDZWxscztcclxufVxyXG5cclxuXHJcblxyXG5cclxuVGFibGUucHJvdG90eXBlLmNyZWF0ZVRhYmxlRGF0YSA9IGZ1bmN0aW9uIChyb3dzKSB7XHJcbiAgLy8gQ3JlYXRlIGFycmF5IHdpdGggdW5pcXVlIEVEQlNcclxuICB2YXIgZWRicyA9IHt9O1xyXG4gIHJvd3MuZm9yRWFjaCAoZnVuY3Rpb24ocil7XHJcbiAgICBpZihlZGJzW3IuZWRiXSA9PT0gdW5kZWZpbmVkKWVkYnNbci5lZGJdID0gci5lZGI7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBkYXRhID0gW107XHJcblxyXG4gIC8vIEZpbHRlciByb3dzIGJ5IGVhY2ggRURCXHJcbiAgZm9yICh2YXIgZWRiIGluIGVkYnMpIHtcclxuICAgIGlmIChlZGJzLmhhc093blByb3BlcnR5KGVkYikpIHtcclxuICAgICAgdmFyIGVkYlllYXJzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIHIuZWRiID09PSBlZGJzW2VkYl0gfSk7XHJcblxyXG4gICAgICB2YXIgeWVhcnMgPSBbXTtcclxuICAgICAgZWRiWWVhcnMuZm9yRWFjaChmdW5jdGlvbih5KXtcclxuICAgICAgICB5ZWFycy5wdXNoKHsgeWVhciA6IHkub2JzX3lyLCB2YWx1ZSA6IHkudmFsdWUgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU29ydCB5ZWFyc1xyXG4gICAgICB5ZWFycy5zb3J0KGZ1bmN0aW9uKGEsYil7XHJcbiAgICAgICAgcmV0dXJuIGEueWVhciA+IGIueWVhcjtcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGRhdGEucHVzaCh7IGVkYiA6IGVkYnNbZWRiXSwgeWVhcnMgOiB5ZWFyc30pO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuXHJcbi8vIENhbGxlZCB3aGVuIHZhbHVlcyBpbiB0aGUgdGFibGUgdXBkYXRlXHJcblRhYmxlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy5hcHBseUdyYWRpZW50Q1NTKHRoaXMuY2VsbFZhbHVlcyk7XHJcbiAgdGhpcy5hcHBseUdyYWRpZW50Q1NTKHRoaXMudG90YWxDZWxsVmFsdWVzKTtcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBoaWdobGlnaHRzIHRoZSBjZWxsIGJhc2VkIG9uIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBtYXggdmFsdWUgaW4gdGhlIHRhYmxlIHVubGVzcyBhbHJlYWR5IGEgcGVyY2VudGFnZVxyXG4gKlxyXG4gKiBAcGFyYW0gY2VsbFZhbHVlcyB7T2JqZWN0W119IHZhbHVlIG9mIGEgY2VsbCBhbmQgdGhlIHRhYmxlIGNlbGwgaWRcclxuICogQHBhcmFtIHBlcmNlbnQge0Jvb2xlYW59IGlmIG5vdCBhIHBlcmNlbnQgaXQgc2hvdWxkIGJlIGhpZ2hsaWdodGVkIGJhc2VkIG9uIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBtYXggdmFsdWUgaW4gdGhlIGNlbGxcclxuICogKi9cclxuVGFibGUucHJvdG90eXBlLmFwcGx5R3JhZGllbnRDU1MgPSBmdW5jdGlvbihjZWxsVmFsdWVzKSB7XHJcbiAgdmFyIHBlcmNlbnQgPSBmYWxzZTsgLy8gVE9ETyBmaXggbGF0ZXJcclxuICAvLyBGaW5kIHRoZSBtYXggdmFsdWVcclxuICB2YXIgbWF4Q2VsbFZhbHVlID0gLUluZmluaXR5O1xyXG4gIGNlbGxWYWx1ZXMuZm9yRWFjaChmdW5jdGlvbihlbGVtKXtcclxuICAgICAgbWF4Q2VsbFZhbHVlID0gK2VsZW0udmFsdWUgPiBtYXhDZWxsVmFsdWUgPyArZWxlbS52YWx1ZSA6IG1heENlbGxWYWx1ZTtcclxuICB9KTtcclxuXHJcbiAgLy8gQXBsbGllIGNzcyB0byBlYWNoIGNlbGxcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2VsbFZhbHVlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgIHZhciB2YWx1ZSA9IChwZXJjZW50ID8gdmFsdWUgOiAoKCtjZWxsVmFsdWVzW2ldLnZhbHVlIC8gbWF4Q2VsbFZhbHVlKSoxMDApKTsgLy8gSWYgcGVyY2VudGFnZSBtZXRyaWMganVzdCB1c2UgdmFsdWRcclxuICAgICAgJChjZWxsVmFsdWVzW2ldLmlkKS5jc3Moe1xyXG4gICAgICAgICAgICAgIFwiYmFja2dyb3VuZFwiIDogXCItd2Via2l0LWdyYWRpZW50KGxpbmVhciwgbGVmdCB0b3AsIHJpZ2h0IHRvcCwgY29sb3Itc3RvcChcIiArIHZhbHVlICtcIiUsIzdiYmZkNiksIGNvbG9yLXN0b3AoXCIgKyB2YWx1ZSArXCIlLCNGRkYpKVwiLFxyXG4gICAgICAgICAgfVxyXG4gICAgICApO1xyXG4gIH1cclxufVxyXG4iLCIvLyBERVBFTkRFTkNJRVMgRGF0YVByb2Nlc3NvciwgRGF0YWJhc2UsIEV2ZW50c1xyXG5cclxuLy8gSW50ZXJuZXQgRXhwbG9yZXIgY29tcGF0aWJpbGl0eVxyXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMpIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAndXNlIHN0cmljdCc7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpICE9PSAtMTtcclxuICAgIH07XHJcbn1cclxuXHJcbmlmICghQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImluY2x1ZGVzXCIsIHtcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdBcnIgPSB0aGlzLmZpbHRlcihmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsID09IG9iajtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdBcnIubGVuZ3RoID4gMDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vLyBFbmQgSW50ZXJuZXQgZXhwbG9yZXIgY29tcGF0aWJpbGl0eVxyXG5cclxudmFyIENvbXBhcmVNb2R1bGUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgLy8gSW5pdCB0aGUgZGF0YSBwcm9jZXNzb3JcclxuICB2YXIgZHAgPSBuZXcgRGF0YVByb2Nlc3NvcigpO1xyXG5cclxuICAvLyBPYmplY3QgdGhhdCBob2xkcyBhbGwgdGhlIHJvd3MgZm9yIGVhY2ggdGFibGUgYWxvbmcgd2l0aCBhIGNvcHlcclxuICB2YXIgYmFja3VwID0ge307XHJcblxyXG4gIC8vIFNlYXJjaCBlcnJvciBzdGF0ZVxyXG4gIHZhciBlcnJvciA9IGZhbHNlO1xyXG5cclxuICAvLyBDYWNoZSBkb20gZWxlbWVudHNcclxuICB2YXIgJHNlYXJjaEVycm9yID0gJCgnI2Vycm9yLWRpdicpO1xyXG5cclxuICAvKipcclxuICAgKiBUdXJucyBvYmplY3QgaW4gdXJsIHN0cmluZ1xyXG4gICAqXHJcbiAgICogQHBhcmFtIG9iaiB7T2JqZWN0fSB0aGUgb2JqZWN0IHRvIHR1cm4gaW50byB1cmxcclxuICAgKiAqL1xyXG4gIHZhciBzZXJpYWxpc2UgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICB2YXIgc3RyID0gW107XHJcbiAgICBmb3IodmFyIHAgaW4gb2JqKVxyXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgc3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKSk7XHJcbiAgICAgIH1cclxuICAgIHJldHVybiBzdHIuam9pbihcIiZcIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ2FsbGVkIHdoZW4gdGhlIHNlYXJjaCBidXR0b24gaXMgY2xpY2tlZCwgY2hlY2tzIGlmIGEgdmFsaWQgc2VhcmNoIHNlbGVjdGlvbiBpcyBtYWRlXHJcbiAgICogaWYgc28gaW5zZXJ0cyB0aGUgc2VhcmNoIGludG8gdGhlIHVybCB0byBzZWFyY2guXHJcbiAgICogKi9cclxuICB2YXIgc2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCFzZWxlY3Rpb25Sb3dzLmNhblNlYXJjaCgpKSB7XHJcbiAgICAgIGlmICghZXJyb3IpIHtcclxuICAgICAgICAkc2VhcmNoRXJyb3IuYXBwZW5kKCc8aDQgc3R5bGU9XCJjb2xvciA6IHJlZDtcIj5QYXJ0aWFsIFJvdyBTZWxlY3RlZDwvaDQ+Jyk7XHJcbiAgICAgICAgZXJyb3IgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjsgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIHNlbGVjdGlvbiBpcyB2YWxpZFxyXG4gICAgfVxyXG5cclxuICAgIHZhciByb3dzPSB7fTtcclxuICAgIHNlbGVjdGlvblJvd3MuZ2V0QWxsU2VsZWN0aW9uRGF0YSgpLmZvckVhY2goZnVuY3Rpb24oc2VsZWN0aW9uKXtcclxuICAgICAgaWYoc2VsZWN0aW9uLnNlY3Rpb24gIT09IFwiXCIpe1xyXG4gICAgICAgICAgcm93c1tcInNcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLnNlY3Rpb247XHJcbiAgICAgICAgICByb3dzW1wiY1wiK3NlbGVjdGlvbi5pZF0gPSBzZWxlY3Rpb24uY2F0ZWdvcnk7XHJcbiAgICAgICAgICByb3dzW1wic2NcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLnN1YkNhdGVnb3J5O1xyXG4gICAgICAgICAgcm93c1tcImRcIitzZWxlY3Rpb24uaWRdID0gc2VsZWN0aW9uLmRlc2NyaXB0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKFwiY29tcGFyZT9cIiArIHNlcmlhbGlzZShyb3dzKSk7IC8vIFJlcGxhY2UgdGhlIHVybCB3aXRoIHRoZSBzZWxlY3Rpb25zIHVybFxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIHRoZSBwYWdlIGlzIGxvYWRlZCB3aXRoIGEgc2VhcmNoIGluIHRoZSB1cmwsIGZldGNoZXMgdGhlIHJlbGV2YW50IGRhdGEgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgKiB1c2luZyB0aGUgZGIgbW9kdWxlXHJcbiAgICogKi9cclxuICB2YXIgbG9hZFNlYXJjaEZyb21VUkwgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucykge1xyXG4gICAgc2VsZWN0aW9uUm93cy5pbml0KHVybFNlbGVjdGlvbnMsdHJ1ZSk7IC8vIFNldCB1cHMgdGhlIHNlbGVjdGlvbiByb3dzXHJcblxyXG4gICAgRGF0YWJhc2UuZ2V0Um93c0ZvclNlYXJjaCh1cmxTZWxlY3Rpb25zLCBmdW5jdGlvbihyb3dzKXtcclxuXHJcbiAgICAgIC8vIFRPRE8gUVVJQ0sgRklORCBBIEJFVFRFUiBXQVkgXHJcbiAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihyKXtcclxuICAgICAgICBpZihyLmZjYXN0X3lyICE9PSBudWxsKXtcclxuICAgICAgICAgIHIub2JzX3lyID0gci5mY2FzdF95cjtcclxuICAgICAgICB9XHJcbiAgICAgIH0pOyAgXHJcblxyXG5cclxuICAgICAgLy8gc2V0IHRoZSByb3dzIHRhYmxlcyBhbmQgY3JlYXRlIGEgY29weVxyXG4gICAgICBiYWNrdXAuc2VsZWN0aW9uICA9IG5ldyBTZWxlY3Rpb24odXJsU2VsZWN0aW9uc1swXSx1cmxTZWxlY3Rpb25zWzFdLHVybFNlbGVjdGlvbnNbMl0sdXJsU2VsZWN0aW9uc1szXSk7XHJcbiAgICAgIGJhY2t1cC5yb3dzID0gcm93c1xyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cyA9IGRwLmZpbHRlclJvd3NUb1RhYmxlc0FuZENvcHkocm93cyxiYWNrdXAuc2VsZWN0aW9uKTtcclxuICAgICAgXHJcbiAgICAgIHZhciBjb21iaW5lZERhdGEgPSBbXTtcclxuICAgICAgYmFja3VwLnNvcnRlZFJvd3MuZm9yRWFjaChmdW5jdGlvbih0KXtcclxuICAgICAgICBpZih0LmlkID09PSAnYScpe1xyXG4gICAgICAgICAgJCgnI3RhYi1hJykuYWRkQ2xhc3MoXCJpbiBhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHQuaWQgPT09ICdhYicgfHwgdC5pZCA9PT0gJ2NkJyl7XHJcbiAgICAgICAgICBjb21iaW5lZERhdGEucHVzaCh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICAkKCcjZnVsbC1kYXNoLScrIHQuaWQpLnNob3coKTtcclxuICAgICAgICAgICQoJyN0YWItJyt0LmlkKS5hZGRDbGFzcyhcImluIGFjdGl2ZVwiKTsgLy8gTWFrZSBhbGwgYWN0aXZlIHRvIGdldCBzaXplcyBmb3IgZ3JhcGhzXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYoY29tYmluZWREYXRhLmxlbmd0aCA9PT0gMil7XHJcbiAgICAgICAgc2hvd0Z1bGxWZWN0b3JHcmFwaChjb21iaW5lZERhdGEsIHVybFNlbGVjdGlvbnMsIFtiYWNrdXAuc29ydGVkUm93c1swXS5yb3dzWzBdLnVuaXRzLGJhY2t1cC5zb3J0ZWRSb3dzWzFdLnJvd3NbMF0udW5pdHMsYmFja3VwLnNvcnRlZFJvd3NbMl0ucm93c1swXS51bml0cyxiYWNrdXAuc29ydGVkUm93c1szXS5yb3dzWzBdLnVuaXRzIF0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiBib3RoIEFCIGFuZCBDRCBleGlzdFxyXG4gICAgICAvLyBFbWl0IGFuIGV2ZW50IHdpdGggdGhlIGRhdGFcclxuICAgICAgZXZlbnRzLmVtaXQoXCJJTklUX0RBVEFcIiwge2RhdGEgOiBiYWNrdXAuc29ydGVkUm93c30pO1xyXG5cclxuICAgICAgLy8gU2V0IGRlZmF1bHQgcm93cyBzZWxlY3RlZFxyXG4gICAgICBldmVudHMuZW1pdCgnUk9XX0NMSUNLRUQnLCAge3Jvd0lEOiBcInJvd2EwXCIsIHJvd051bWI6IDAsIGVkYjogXCJBbHBpbmUgRW5lcmd5XCJ9KTtcclxuICAgICAgZXZlbnRzLmVtaXQoXCJUT1RBTF9ST1dfQ0xJQ0tFRFwiLCB7cm93SUQ6IFwicm93LXRvdC1hMFwiLCByZWdpb246IFwiU291dGggSXNsYW5kXCJ9KTtcclxuXHJcbiAgICAgIC8vIE1ha2UgYWxsIGFjY2VwdCBhIGFjdGl2ZVxyXG4gICAgICBiYWNrdXAuc29ydGVkUm93cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe1xyXG4gICAgICAgIGlmKHQuaWQgIT09ICdhJyl7XHJcbiAgICAgICAgICAkKCcjdGFiLScrdC5pZCkucmVtb3ZlQ2xhc3MoXCJpbiBhY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICBnb1RvQnlTY3JvbGwoJyN0b3AtdGFiJyk7IFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgZ29Ub0J5U2Nyb2xsID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAkKGlkKS5vZmZzZXQoKS50b3B9LCdzbG93Jyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgd2hlbiB0aGUgYXBwbHkgY3BpIGJ1dHRvbiBpcyBjbGlja2VkLiBGaXJzdCBjaGVja3NcclxuICAgKiBpZiBjcGkgaW5wdXQgaXMgdmFsaWQgdGhlbiBjb3BpZXMgcm93cyBhbmQgYXBwbGllcyBjcGkgdG8gY29weVxyXG4gICAqICovXHJcbiAgdmFyIGFwcGx5Q1BJID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZihDUElNb2R1bGUuaXNWYWxpZCgpICYmIGJhY2t1cC5zZWxlY3Rpb24gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgIHZhciBjb3B5T2ZSb3dzICA9IGRwLmNvcHlSb3dzKGJhY2t1cC5yb3dzKTtcclxuICAgICAgYXBwbHlDUElUb1RhYmxlUm93cyhjb3B5T2ZSb3dzLENQSU1vZHVsZS5nZXRDUElWYWx1ZXMoKSk7XHJcbiAgICAgIHZhciBuZXdEYXRhID0gZHAuZmlsdGVyUm93c1RvVGFibGVzQW5kQ29weShjb3B5T2ZSb3dzLGJhY2t1cC5zZWxlY3Rpb24pO1xyXG5cclxuICAgICAgLy8gU2VuZCBldmVudCB0byB1cGRhdGUgdGFibGUgYW5kIGdyYXBoc1xyXG4gICAgICBldmVudHMuZW1pdChcIlJPV19VUERBVEVcIiwge2RhdGEgOiBuZXdEYXRhIH0pO1xyXG4gICAgICBldmVudHMuZW1pdChcIkFQUExZX0NQSVwiLCB7Y3BpVmFsdWVzIDogQ1BJTW9kdWxlLmdldENQSVZhbHVlcygpfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQXBwbGllcyBjcGkgdmFsdWVzIHRvIHRoZSByb3dzIGJ5IGNoYW5pbmcgdGhlIHZhbHVlIGluIGVhY2ggcm93IHdpdGggdGhlIGNvbXBvdW5kZWQgY3BpIHZhbHVlc1xyXG4gICAqXHJcbiAgICogQHBhcmFtIHJvd3Mge09iamVjdFtdfSB0aGUgcm93c1xyXG4gICAqIEBwYXJhbSBjcGlWYWx1ZXMge09iamVjdFtdfSBjb250YWlucyB0aGUgY3BpIGZvciBlYWNoIHllYXJcclxuICAgKiAqL1xyXG4gIHZhciBhcHBseUNQSVRvVGFibGVSb3dzID0gZnVuY3Rpb24gKHJvd3MsIGNwaVZhbHVlcykge1xyXG4gICAgdmFyIGFwcGxpY2FibGVSb3dzID0gcm93cy5maWx0ZXIoZnVuY3Rpb24ocil7XHJcbiAgICAgIHJldHVybiByLnVuaXRzLmluY2x1ZGVzKCckJyk7XHJcbiAgICB9KTtcclxuICAgIGlmKGFwcGxpY2FibGVSb3dzLmxlbmd0aCA9PT0gMCl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaW5kIHRoZSBtaW4gYW5kIG1heCB5ZWFyIGZyb20gdGhlIGRhdGFcclxuICAgIHZhciBtaW5ZZWFyID0gYXBwbGljYWJsZVJvd3MucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgcmV0dXJuIHByZXYuZGlzY195ciA8IGN1cnIuZGlzY195ciA/IHByZXYgOiBjdXJyO1xyXG4gICAgfSkub2JzX3lyO1xyXG5cclxuICAgIHZhciBtYXhZZWFyID0gYXBwbGljYWJsZVJvd3MucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgcmV0dXJuIHByZXYuZGlzY195ciA+IGN1cnIuZGlzY195ciA/IHByZXYgOiBjdXJyO1xyXG4gICAgfSkub2JzX3lyO1xyXG5cclxuICAgIGZvcih2YXIgY3VyID0gbWluWWVhcjsgY3VyIDw9bWF4WWVhcjsgY3VyKyspeyAvLyBHbyB0aHJvdWdoIGVhY2ggcG9zc2libGUgeWVhclxyXG4gICAgICBhcHBsaWNhYmxlUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZW0sIGluZGV4KXsgLy8gR3JhYiBldmVyeSBSb3dcclxuICAgICAgICB2YXIgeWVhciA9IGFwcGxpY2FibGVSb3dzW2luZGV4XS5vYnNfeXI7IC8vIEdyYWIgdGhlIHllYXIgb2YgdGhlIGNlbGwgYnkgY2hlY2tpbmcgdGhlIGNsYXNzXHJcbiAgICAgICAgdmFyIHZhbHVlT2ZDZWxsID0gYXBwbGljYWJsZVJvd3NbaW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY3BpVmFsdWVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgIGlmKGNwaVZhbHVlc1tpXS55ZWFyID09PSBjdXIpe1xyXG4gICAgICAgICAgICBpZih5ZWFyIDw9IGN1cil7XHJcbiAgICAgICAgICAgICAgdmFsdWVPZkNlbGwgPSB2YWx1ZU9mQ2VsbCAqICgxICsgKGNwaVZhbHVlc1tpXS52YWx1ZSAvIDEwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcGxpY2FibGVSb3dzW2luZGV4XS52YWx1ZSA9IHZhbHVlT2ZDZWxsOyAvLyBDUEkgQXBwbGllZCB2YWx1ZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvLyBBcnJheSB3aXRoIGJvdGggdGhpbmdzIGluIGl0XHJcbiAgZnVuY3Rpb24gc2hvd0Z1bGxWZWN0b3JHcmFwaChkYXRhLCBzZWxlY3Rpb25zLCB1bml0cykge1xyXG5cclxuICAgICAgICAvLyBHcmFiIGEgdGl0bGVcclxuICAgICAgICB2YXIgYXRpdGxlID0gc2VsZWN0aW9uc1swXS5jYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMF0uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzBdLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHZhciBidGl0bGUgPSBzZWxlY3Rpb25zWzFdLmNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1sxXS5zdWJDYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbMV0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgdmFyIGN0aXRsZSA9IHNlbGVjdGlvbnNbMl0uY2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzJdLnN1YkNhdGVnb3J5ICsgXCIsIFwiICsgc2VsZWN0aW9uc1syXS5kZXNjcmlwdGlvbjtcclxuICAgICAgICB2YXIgZHRpdGxlID0gc2VsZWN0aW9uc1szXS5jYXRlZ29yeSArIFwiLCBcIiArIHNlbGVjdGlvbnNbM10uc3ViQ2F0ZWdvcnkgKyBcIiwgXCIgKyBzZWxlY3Rpb25zWzNdLmRlc2NyaXB0aW9uO1xyXG5cclxuICAgICAgICB2YXIgcmF0aW8gPSAnPGgzPiBSYXRpbyAoQSAvIEIgKSBvdmVyICggQyAvIEQgKSA8L2gzPidcclxuICAgICAgICB2YXIgc3BhbkEgPSAnPHNwYW4gY2xhc3M9XCJsZXR0ZXJcIj5BOiA8L3NwYW4+JztcclxuICAgICAgICB2YXIgc3BhbkIgPSAnPHNwYW4gY2xhc3M9XCJsZXR0ZXJcIj5COiA8L3NwYW4+JztcclxuICAgICAgICB2YXIgc3BhbkMgPSAnPHNwYW4gY2xhc3M9XCJsZXR0ZXJcIj5DOiA8L3NwYW4+JztcclxuICAgICAgICB2YXIgc3BhbkQgPSAnPHNwYW4gY2xhc3M9XCJsZXR0ZXJcIj5EOiA8L3NwYW4+JztcclxuXHJcblxyXG4gICAgICAgIHZhciBjb21iaW5lQSA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPicrc3BhbkErJyAnKyBhdGl0bGUgKyc8L2g0Pic7XHJcbiAgICAgICAgdmFyIGNvbWJpbmVCID0gJzxoNCBjbGFzcz1cInRpdGxlXCI+JytzcGFuQisnICcrIGJ0aXRsZSArJzwvaDQ+JztcclxuICAgICAgICB2YXIgY29tYmluZUMgPSAnPGg0IGNsYXNzPVwidGl0bGVcIj4nK3NwYW5DKycgJysgY3RpdGxlICsnPC9oND4nO1xyXG4gICAgICAgIHZhciBjb21iaW5lRCA9ICc8aDQgY2xhc3M9XCJ0aXRsZVwiPicrc3BhbkQrJyAnKyBkdGl0bGUgKyc8L2g0Pic7XHJcblxyXG4gICAgICAgICQoJyN0aXRsZS12ZWN0b3ItYWJjZCcpLmFwcGVuZChyYXRpbykuYXBwZW5kKGNvbWJpbmVBKS5hcHBlbmQoY29tYmluZUIpLmFwcGVuZChjb21iaW5lQykuYXBwZW5kKGNvbWJpbmVEKTtcclxuXHJcbiAgICAgICAgVmVjdG9yTW9kdWxlLmNyZWF0ZVZlY3RvckdyYXBoKGRwLmNyZWF0ZURhdGFGb3JWZWN0b3JHcmFwaChkYXRhWzBdLnJvd3MsZGF0YVsxXS5yb3dzKSwgdW5pdHNbMF0gKyBcIiAvIFwiICsgdW5pdHNbMV0gLHVuaXRzWzJdICsgXCIgLyBcIiArIHVuaXRzWzNdICxcIiN2ZWN0b3ItZ3JhcGgtYWJjZFwiKTtcclxuICAgICAgICAkKCcjdmVjdG9yLWZ1bGwtYWJjZCcpLnNob3coKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBDYWxsZWQgd2hlbiByZXZlcnQgY3BpIGlzIGNsaWNrZWQgc2VuZCBvdXQgZXZlbnRzIHdpdGggdG9cclxuICAgKiBub3RpZnkgdGhhdCBjcGkgbmVlZHMgdG8gYmUgcmV2ZXJ0ZWRcclxuICAgKiAqL1xyXG4gIHZhciByZXZlcnRDUEkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBldmVudHMuZW1pdChcIlJPV19VUERBVEVcIiwge2RhdGEgOiBiYWNrdXAuc29ydGVkUm93cyB9KTtcclxuICAgIGV2ZW50cy5lbWl0KFwiUkVWRVJUX0NQSVwiLCB7Y3BpVmFsdWVzIDogXCJcIn0pO1xyXG4gIH1cclxuXHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsb2FkU2VhcmNoRnJvbVVSTCA6IGxvYWRTZWFyY2hGcm9tVVJMLFxyXG4gICAgc2VhcmNoIDogc2VhcmNoLFxyXG4gICAgYXBwbHlDUEkgOiBhcHBseUNQSSxcclxuICAgIHJldmVydENQSSA6IHJldmVydENQSVxyXG4gIH1cclxufSkoKTtcclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeSggZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBIaWdobGlnaHQgdGhlIHNlbGVjdGVkIGxpbmtcclxuICAgICQoXCIubmF2LWxpbmtcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJChcIiNiZW5jaG1hcmtzLWxpbmtcIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJCgnI3NlYXJjaC1idG4tY29tcGFyZScpLmNsaWNrKGZ1bmN0aW9uKCl7IC8vIExpc3RlbmVyIHRvIHNlYXJjaCBidXR0b25cclxuICAgICAgICBDb21wYXJlTW9kdWxlLnNlYXJjaCgpOyAvLyBTZWFyY2ggZW5jb2RlcyB0aGUgc2VsZWN0aW9ucyBpbnRvIHRoZSB1cmwgYW5kIHNlbmRzIHRvIHNlcnZlclxyXG4gICAgfSk7XHJcbiAgICAkKCdjcGknKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICBDb21wYXJlTW9kdWxlLmFwcGx5Q1BJKCk7XHJcbiAgICB9KTtcclxufSk7XHJcbiIsInZhciBDUElNb2R1bGUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgLy8gR3JhcGggYW5kIGNhY2hlXHJcbnZhciAkY3BpRm9ybSA9ICQoJyNjcGktZm9ybScpO1xyXG5cclxuLy8gc2V0IHVwIHZhbGlkYXRpb24gcnVsZXNcclxuJC52YWxpZGF0b3Iuc2V0RGVmYXVsdHMoe1xyXG4gICAgICAgIGVycm9yQ2xhc3MgOiAnaGVscC1ibG9jaycsXHJcbiAgICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCkgeyQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5hZGRDbGFzcygnaGFzLWVycm9yJyl9LFxyXG4gICAgICAgIHVuaGlnaGxpZ2h0IDpmdW5jdGlvbiAoZWxlbWVudCkgeyQoZWxlbWVudCkuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5yZW1vdmVDbGFzcygnaGFzLWVycm9yJyl9XHJcbiAgICB9XHJcbik7XHJcblxyXG4vLyBTZXQgdGhlIHJ1bGVzIGZvciBlYWNoIGlucHV0XHJcbnZhciBjcGlSdWxlcyA9IHtyZXF1aXJlZCA6IHRydWUsIG51bWJlciA6IHRydWUsIG1pbiA6IDAuMSwgbWF4IDogMTAwfTtcclxudmFyIG1lc3NhZ2VTZXQgPSB7XHJcbiAgICByZXF1aXJlZCA6IFwiUGxlYXNlIGVudGVyIGEgcGVyY2VudGFnZVwiLFxyXG4gICAgbnVtYmVyIDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBudW1iZXJcIixcclxuICAgIG1pbiA6IFwiUGxlYXNlIGVudGVyIGEgcGVyY2VudGFnZSBncmVhdGVyIHRoYW4gMFwiLFxyXG4gICAgbWF4IDogXCJQbGVhc2UgZW50ZXIgYSBwZXJjZW50YWdlIGxlc3MgdGhhbiAxMDBcIlxyXG59O1xyXG5cclxuXHJcbiRjcGlGb3JtLnZhbGlkYXRlKHtcclxuICAgIHJ1bGVzIDoge1kyMDEyIDogY3BpUnVsZXMsWTIwMTMgOiBjcGlSdWxlcyxZMjAxNCA6IGNwaVJ1bGVzLFkyMDE1IDogY3BpUnVsZXMsWTIwMTYgOiBjcGlSdWxlc30sXHJcbiAgICBtZXNzYWdlcyA6IHtZMjAxMiA6IG1lc3NhZ2VTZXQsWTIwMTMgOiBtZXNzYWdlU2V0LFkyMDE0IDogbWVzc2FnZVNldCxZMjAxNSA6IG1lc3NhZ2VTZXQsWTIwMTYgOiBtZXNzYWdlU2V0fVxyXG59KTtcclxuXHJcbnZhciBnZXRDUElWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuICBbe3llYXIgOiAyMDEyLCB2YWx1ZSA6ICskY3BpRm9ybS5maW5kKCcjWTIwMTInKS52YWwoKX0sXHJcbiAgICAgICAgICAge3llYXIgOiAyMDEzLCB2YWx1ZSA6ICskY3BpRm9ybS5maW5kKCcjWTIwMTMnKS52YWwoKX0sXHJcbiAgICAgICAgICAge3llYXIgOiAyMDE0LCB2YWx1ZSA6ICskY3BpRm9ybS5maW5kKCcjWTIwMTQnKS52YWwoKX0sXHJcbiAgICAgICAgICAge3llYXIgOiAyMDE1LCB2YWx1ZSA6ICskY3BpRm9ybS5maW5kKCcjWTIwMTUnKS52YWwoKX0sXHJcbiAgICAgICAgICAge3llYXIgOiAyMDE2LCB2YWx1ZSA6ICskY3BpRm9ybS5maW5kKCcjWTIwMTYnKS52YWwoKX1dXHJcbn1cclxuXHJcbnZhciBpc1ZhbGlkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICRjcGlGb3JtLnZhbGlkKCk7XHJcbn1cclxuXHJcblxyXG5yZXR1cm4ge1xyXG4gIGdldENQSVZhbHVlcyA6IGdldENQSVZhbHVlcyxcclxuICBpc1ZhbGlkIDogaXNWYWxpZFxyXG59XHJcblxyXG59KSgpO1xyXG4iLCIvLyBERVBFTkRFTkNJRVMgOiBHcmFwaCwgQ29tYmluZWRHcmFwaFxyXG5cclxudmFyIEdyYXBoTW9kdWxlID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gIC8vIEhvbGRzIHRoZSBncmFwaCBvYmplY3RzXHJcbiAgdmFyIGdyYXBocyA9IFtdO1xyXG5cclxuICAvLyBCbHVlIGNvbG9yIHNjYWxlXHJcbiAgdmFyIHogPSBkMy5zY2FsZU9yZGluYWwoKS5yYW5nZShbXCIjQkJERUZCXCIsIFwiIzY0QjVGNlwiLCBcIiMxOTc2RDJcIiwgXCIjMTU2NUMwXCIsIFwiIzBENDdBMVwiLCBcIiNkMDc0M2NcIiwgXCIjZmY4YzAwXCJdKTtcclxuXHJcbiAgLy8gUmVkIGNvbG9yIHNjYWxlIGZvciBuZWdhdGl2ZSB2YWx1ZXNcclxuICB2YXIgelJlZCA9IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKFtcIiNGRjczNzNcIiwgXCIjRkY0QzRDXCIsIFwiI0ZGMjYyNlwiLCBcIiNCMjAwMDBcIiwgXCIjRDkwMDAwXCIsIFwiI2QwNzQzY1wiLCBcIiNmZjhjMDBcIl0pO1xyXG5cclxuICAvLyBHcmVlbiBjb2xvciBzY2FsZSBmb3Igc2VsZWN0ZWQgdmFsdWVzXHJcbiAgdmFyIHpTZWxlY3RlZCA9IGQzLnNjYWxlT3JkaW5hbCgpLnJhbmdlKFtcIiNDMUZGQzFcIiwgXCIjOTBFRTkwXCIsIFwiIzVCQzg1QlwiLCBcIiMzMUEyMzFcIiwgXCIjMTM3QjEzXCIsIFwiI2QwNzQzY1wiLCBcIiNmZjhjMDBcIl0pO1xyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXNlcyBhbGwgb2YgdGhlIGdyYXBocyBvbiB0aGUgcGFnZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgdXBkYXRlLCBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgZm9yIGVhY2ggb2YgdGhlIGdyYXBoc1xyXG4gICAqICovXHJcbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRoZSBncmFwaHNcclxuICAgIHVwZGF0ZS5kYXRhLmZvckVhY2ggKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIGlmKHRhYmxlRGF0YS5jb21iaW5lZCl7XHJcbiAgICAgICAgZ3JhcGhzLnB1c2gobmV3IENvbWJpbmVkR3JhcGgodGFibGVEYXRhLmlkLHRhYmxlRGF0YS5yb3dzLHRhYmxlRGF0YS50YWJsZTFSb3dzLHRhYmxlRGF0YS50YWJsZTJSb3dzLCAgdGFibGVEYXRhLnNlYXJjaCwgdGFibGVEYXRhLnNlYXJjaDIpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBncmFwaHMucHVzaChuZXcgR3JhcGgodGFibGVEYXRhLmlkLHRhYmxlRGF0YS5yb3dzLHRhYmxlRGF0YS5zZWFyY2gpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBJbnNlcnQgdGhlIHRpdGxlcyBhbmQgY3JlYXRlIHRoZSBncmFwaHNcclxuICAgIGdyYXBocy5mb3JFYWNoKGZ1bmN0aW9uKGcpe1xyXG4gICAgICBnLmluc2VydFRpdGxlcygpO1xyXG4gICAgICBnLmNyZWF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlIGFsbCB0aGUgZ3JhcGhzIHdpdGggdGhlIG5ldyByb3dzXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gIHVwZGF0ZSwgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIGZvciBlYWNoIG9mIHRoZSBncmFwaHNcclxuICAgKiAqL1xyXG4gIHZhciB1cGRhdGUgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICB1cGRhdGUuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIGdyYXBocy5mb3JFYWNoKGZ1bmN0aW9uKGcpe1xyXG4gICAgICAgIGlmKGcuZ2V0SUQoKSA9PT0gdGFibGVEYXRhLmlkKXtcclxuICAgICAgICAgIGlmKGcuaXNDb21iaW5lZCgpKXtcclxuICAgICAgICAgICAgZy51cGRhdGUodGFibGVEYXRhLnJvd3MsIHRhYmxlRGF0YS50YWJsZTFSb3dzLCB0YWJsZURhdGEudGFibGUyUm93cyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnLnVwZGF0ZSh0YWJsZURhdGEucm93cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENhbGxlZCB3aGVuIGEgcm93IGlzIGNsaWNrZWRcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgZXZlbnQsIGNvbnRhaW5zIHRoZSBFREJcclxuICAgKiAqL1xyXG4gIHZhciByb3dDbGlja2VkID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZihldmVudC51bnNlbGVjdCkge1xyXG4gICAgICBkMy5zZWxlY3RBbGwoXCIubGluZS1zZWxlY3RlZC10YWJsZVwiKS5jbGFzc2VkKFwibGluZS1zZWxlY3RlZFwiLCBmYWxzZSk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbChcIi52ZWMtZG90LXNlbGVjdGVkXCIpLmNsYXNzZWQoXCJ2ZWMtZG90LXNlbGVjdGVkXCIsIGZhbHNlKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGFscmVhZHlTZWxlY3RlZCA9IGZhbHNlOyAvLyBUT0RPIGZpeFxyXG5cclxuICAgIC8vIEJlZm9yZSB3ZSByZW1vdmUgdGhlIGNsYXNzIHdlIG5lZWQgdG8gYXBwbHkgdGhlIGNvcnJlY3QgY29sb3Igc2NhbGVcclxuICAgIGQzLnNlbGVjdEFsbChcIi5iYXItc2VsZWN0ZWRcIikuZGF0dW0oZnVuY3Rpb24oZCkge3JldHVybiBkOyB9KVxyXG4gICAgLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtyZXR1cm4geihkLmtleSk7IH0pO1xyXG5cclxuICAgIC8vIFNlbGVjdCBhbGwgcmVjdGFuZ2xlIHdpdGggdGhlIHNlbGVjdGVkIGNsYXNzIGFuZCByZW1vdmUgY2xhc3NcclxuICAgIGQzLnNlbGVjdEFsbChcIi5iYXItc2VsZWN0ZWRcIikuY2xhc3NlZChcImJhci1zZWxlY3RlZFwiLCBmYWxzZSk7XHJcblxyXG4gICAgaWYoYWxyZWFkeVNlbGVjdGVkKXtyZXR1cm47fSAvLyBUaGUgY2FzZSB3aGVyZSB0aGUgcm93IGlzIHVuc2VsZWN0ZWQgYnV0IG5vdGhpbmcgZWxzZSBpcyBzZWxlY3RlZFxyXG5cclxuICAgIGQzLnNlbGVjdEFsbChcInJlY3QuXCIrZXZlbnQuZWRiLnJlcGxhY2UoLyAvZyAsIFwiXCIpKVxyXG4gICAgLmNsYXNzZWQoXCJiYXItc2VsZWN0ZWRcIiwgdHJ1ZSkgLy8gU2VsZWN0IGFsbCByZWN0YW5nbGUgd2l0aCB0aGUgY29ycmVjdCBFREIgYW5kIG91dGxpbmUgYmFycyBhbmQgYWRkIHNlbGVjdGVkIGNsYXNzXHJcbiAgICAuZGF0dW0oZnVuY3Rpb24oZCkge3JldHVybiBkOyB9KSAvLyBHcmFiIHRoZSBkYXRhIGJvdW5kIHRvIHRoZSBlbGVtZW50c1xyXG4gICAgLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtyZXR1cm4gelNlbGVjdGVkKGQua2V5KTsgfSk7IC8vIEFwcGx5IHRoZSBncmVlbiBjb2xvciBzY2FsZSBiYXNlZCBvbiB0aGUga2V5XHJcblxyXG4gICAgLy8gU2VsZWN0IGFsbCBsaW5lcyB3aXRoIHRoZSBzZWxlY3RlZCBjbGFzcyBhbmQgcmVtb3ZlIGNsYXNzXHJcbiAgICBkMy5zZWxlY3RBbGwoXCIubGluZS1zZWxlY3RlZC10YWJsZVwiKS5jbGFzc2VkKFwibGluZS1zZWxlY3RlZFwiLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3RBbGwoXCIudmVjLWRvdC1zZWxlY3RlZFwiKS5jbGFzc2VkKFwidmVjLWRvdC1zZWxlY3RlZFwiLCBmYWxzZSk7XHJcblxyXG5cclxuICAgIGQzLnNlbGVjdEFsbChcImxpbmUuXCIrZXZlbnQuZWRiLnJlcGxhY2UoLyAvZyAsIFwiXCIpKS5jbGFzc2VkKFwibGluZS1zZWxlY3RlZC10YWJsZVwiLCB0cnVlKTtcclxuICAgIGQzLnNlbGVjdEFsbChcIi5kb3QuXCIrZXZlbnQuZWRiLnJlcGxhY2UoLyAvZyAsIFwiXCIpKS5jbGFzc2VkKFwidmVjLWRvdC1zZWxlY3RlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzXHJcbiAgZXZlbnRzLm9uKFwiSU5JVF9EQVRBXCIsIGluaXQpO1xyXG4gIGV2ZW50cy5vbihcIlJPV19DTElDS0VEXCIsIHJvd0NsaWNrZWQpO1xyXG4gIGV2ZW50cy5vbihcIlJPV19VUERBVEVcIiwgdXBkYXRlKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHVwZGF0ZSA6IHVwZGF0ZVxyXG4gIH1cclxufSkoKTtcclxuIiwiXHJcbnZhciBzZWxlY3Rpb25Sb3dzID0gIChmdW5jdGlvbigpe1xyXG4gICAgLy8gRmlyc3QgY3JlYXRlIHRoZSBlbXB0eSBzZWxlY3Rpb25kYXRhcm93cyB3aGljaCBhcmUgdXNlZCB0byBzdG9yZSB0aGUgY3VycmVudCBzZWxlY3Rpb25zXHJcbiAgICB2YXIgcm93c0RhdGEgPSBbbmV3IFNlbGVjdGlvblJvd0NvbnRyb2xsZXIoMCksbmV3IFNlbGVjdGlvblJvd0NvbnRyb2xsZXIoMSksbmV3IFNlbGVjdGlvblJvd0NvbnRyb2xsZXIoMiksbmV3IFNlbGVjdGlvblJvd0NvbnRyb2xsZXIoMyldO1xyXG5cclxuICAgIC8vIE5leHQgY3JlYXRlIHRoZSBvYmplY3QgdGhhdCBob2xkIHRoZSBsb2dpYyBmb3IgdGhlIHNlbGVjdG9yc1xyXG5cclxuICAgIHZhciBzZWxlY3RvcnMgPSBbXTtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCA0OyBpKyspe1xyXG4gICAgICBzZWxlY3RvcnMucHVzaCh7IHMgOiBuZXcgU2VjdGlvblNlbGVjdChpKSwgYyA6IG5ldyBDYXRlZ29yeVNlbGVjdChpKSwgc2MgOiBuZXcgU3ViQ2F0ZWdvcnlTZWxlY3QoaSksIGQgOiBuZXcgRGVzY3JpcHRpb25TZWxlY3QoaSl9KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZ2V0QWxsU2VsZWN0aW9uRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHNlbGVjdGlvbnMgPSBbXTtcclxuICAgICAgcm93c0RhdGEuZm9yRWFjaChmdW5jdGlvbihyKXtcclxuICAgICAgICBzZWxlY3Rpb25zLnB1c2goci5nZXRSb3dTZWxlY3Rpb24oKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gc2VsZWN0aW9ucztcclxuICAgIH1cclxuXHJcblxyXG4gICAgdmFyIGNhblNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcm93c0RhdGEubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgaWYoIXJvd3NEYXRhW2ldLnZhbGlkU2VsZWN0aW9uKCkpcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGluIG9wdGlvbnMgZm9yIGVhY2ggc2VsZWN0aW9uIGRyb3AgZG93biBmcm9tIGEgc2VhcmNoLlxyXG4gICAgICogV2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQgZnJvbSBhIHNlYXJjaCB0aGUgb3B0aW9uIGZvciB0aGF0IHNlYXJjaCBuZWVkIHRvIGJlIGluc2VydGVkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNlbGVjdGlvbiB7T2JqZWN0fSBvbmUgcm93IG9mIHNlbGVjdGlvbnMgKHNlY3Rpb24sIGNhdGVnb3J5IGV0YylcclxuICAgICAqICovXHJcbiAgICB2YXIgc2V0U2VsZWN0aW9uc0Zyb21VUkwgPSBmdW5jdGlvbihzZWxlY3Rpb24pe1xyXG4gICAgICAgIC8vIEZpbmQgYWxsIHRoZSBjYXRlZ29yaWVzIGFzc29jaWF0ZWQgd2l0aCBzZWxlY3RlZCBzZWN0aW9uXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0Q2F0ZWdvcmllc0Zyb21EYXRhYmFzZShzZWxlY3Rpb24uc2VjdGlvbiwgZnVuY3Rpb24gKGNhdGVnb3JpZXMsbm9SZXN1bHQpIHtcclxuICAgICAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKCcjY2F0ZWdvcnktc2VsZWN0JytzZWxlY3Rpb24uaWQsY2F0ZWdvcmllcywgc2VsZWN0aW9uLmNhdGVnb3J5KTtcclxuICAgICAgICAgIH19KTtcclxuXHJcbiAgICAgICAgLy8gRmluZCBhbGwgdGhlICBzdWIgY2F0ZWdvcmllcyBhc3NvY2lhdGVkIHdpdGggc2VsZWN0ZWQgc2VjdGlvbiBhbmQgY2F0ZWdvcnlcclxuICAgICAgICBEYXRhYmFzZS5nZXRTdWJDYXRlZ29yaWVzRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLCBzZWxlY3Rpb24uY2F0ZWdvcnksIGZ1bmN0aW9uIChzdWJDYXRlZ29yaWVzLCBub1Jlc3VsdCkge1xyXG4gICAgICAgICAgaWYoIW5vUmVzdWx0KXtcclxuICAgICAgICAgICAgc2VhcmNoRGF0YS52YWxpZE9wdGlvbnNbc2VsZWN0aW9uLmlkXSA9IHRydWU7IC8vIFRoZXJlIGFyZSBvcHRpb25zIGZvciB0aGlzIHJvdyBhbmQgc3ViIGNhdGVnb3J5XHJcbiAgICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKCcjc3Vic2VjdGlvbi1zZWxlY3QnK3NlbGVjdGlvbi5pZCxzdWJDYXRlZ29yaWVzLHNlbGVjdGlvbi5zdWJDYXRlZ29yeSk7XHJcbiAgICAgICAgICB9fSk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgYWxsIHRoZSAgZGVzY3JpcHRpb25zIGFzc29jaWF0ZWQgd2l0aCBzZWxlY3RlZCBzZWN0aW9uLCBjYXRlZ29yeSwgYW5kIHN1YnNlY3Rpb25zXHJcbiAgICAgICAgRGF0YWJhc2UuZ2V0RGVzY3JpcHRpb25zRnJvbURhdGFiYXNlKHNlbGVjdGlvbi5zZWN0aW9uLHNlbGVjdGlvbi5jYXRlZ29yeSxzZWxlY3Rpb24uc3ViQ2F0ZWdvcnksIGZ1bmN0aW9uIChkZXNjcmlwdGlvbnMsbm9SZXN1bHQpIHtcclxuICAgICAgICAgIGlmKCFub1Jlc3VsdCl7XHJcbiAgICAgICAgICAgIGFkZE9wdGlvbnNUb1NlbGVjdG9yKCcjZGVzY3JpcHRpb24tc2VsZWN0JytzZWxlY3Rpb24uaWQsZGVzY3JpcHRpb25zLHNlbGVjdGlvbi5kZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICB9fSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAodXJsU2VsZWN0aW9ucywgd2l0aFNlYXJjaCkge1xyXG4gICAgICBpZih3aXRoU2VhcmNoKXtcclxuICAgICAgICAgIGV2ZW50cy5lbWl0KFwiSU5JVF9TRUxFQ1RJT05TXCIsIHVybFNlbGVjdGlvbnMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEp1c3QgZmlsbCB0aGUgc2VjdGlvbiBzZWxlY3RvcnMgd2l0aCBzZWN0aW9uc1xyXG4gICAgICAgIERhdGFiYXNlLmdldFNlY3Rpb25zRnJvbURhdGFiYXNlKGZ1bmN0aW9uKHNlY3Rpb25zKXtcclxuICAgICAgICAgIHZhciBkcCA9IG5ldyBEYXRhUHJvY2Vzc29yKCk7XHJcbiAgICAgICAgICBkcC5zb3J0U2VjdGlvbnMoe3NlY3Rpb25zIDogc2VjdGlvbnN9KTsgLy8gVE9ETyBmaXhcclxuXHJcbiAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNDsgaSsrKXtcclxuICAgICAgICAgICAgYWRkT3B0aW9uc1RvU2VsZWN0b3IoJyNzZWN0aW9uLXNlbGVjdCcraSxzZWN0aW9ucywnJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHZhciBjbGVhciA9IGZ1bmN0aW9uIChyb3dOdW1iZXIpIHtcclxuICAgICAgICByb3dzRGF0YVtyb3dOdW1iZXJdLmNsZWFyKCk7XHJcbiAgICAgICAgJCgnI2Rlc2NyaXB0aW9uLXNlbGVjdCcrcm93TnVtYmVyKycsI3N1YmNhdGVnb3J5LXNlbGVjdCcrcm93TnVtYmVyKycsI2NhdGVnb3J5LXNlbGVjdCcrcm93TnVtYmVyKS5odG1sKCcnKTtcclxuICAgICAgICAkKCcjc2VjdGlvbi1zZWxlY3QnK3Jvd051bWJlcikuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS5yZW1vdmVBdHRyKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgJChcIi5zZWxlY3RwaWNrZXJcIikuc2VsZWN0cGlja2VyKCdyZWZyZXNoJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGluaXQoW10sZmFsc2UpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZ2V0QWxsU2VsZWN0aW9uRGF0YSA6IGdldEFsbFNlbGVjdGlvbkRhdGEsXHJcbiAgICAgIHNldFNlbGVjdGlvbnNGcm9tVVJMIDogc2V0U2VsZWN0aW9uc0Zyb21VUkwsXHJcbiAgICAgIGluaXQgOiBpbml0LFxyXG4gICAgICBjbGVhciA6IGNsZWFyLFxyXG4gICAgICBjYW5TZWFyY2ggOiBjYW5TZWFyY2hcclxuICAgIH1cclxufSkoKTtcclxuIiwidmFyIFRhYmxlc01vZHVsZSA9IChmdW5jdGlvbigpe1xyXG5cclxuICAvLyBUaGUgRURCcyB0aGF0IGJlbG9uZyB0byBlYWNoIHJlZ2lvblxyXG4gIHZhciByZWdpb25zID0ge1xyXG4gICAgbiA6IFtcIkNlbnRyYWxpbmVzXCIsXCJDb3VudGllcyBQb3dlclwiLFwiRWFzdGxhbmQgTmV0d29ya1wiLFwiRWxlY3RyYVwiLFwiSG9yaXpvbiBFbmVyZ3lcIixcIk5vcnRocG93ZXJcIixcclxuICAgICAgICAgXCJQb3dlcmNvXCIsXCJTY2FucG93ZXJcIixcIlRoZSBMaW5lcyBDb21wYW55XCIsXCJUb3AgRW5lcmd5XCIsXCJVbmlzb24gTmV0d29ya3NcIixcIlZlY3RvciBMaW5lc1wiLFxyXG4gICAgICAgICBcIldhaXBhIE5ldHdvcmtzXCIsXCJXRUwgTmV0d29ya3NcIixcIldlbGxpbmd0b24gRWxlY3RyaWNpdHlcIl0sXHJcbiAgICB1bmkgOiBbXCJDb3VudGllcyBQb3dlclwiLFwiSG9yaXpvbiBFbmVyZ3lcIixcIk5vcnRocG93ZXJcIixcIlRoZSBMaW5lcyBDb21wYW55XCIsXCJUb3AgRW5lcmd5XCIsXCJWZWN0b3IgTGluZXNcIixcIldhaXBhIE5ldHdvcmtzXCIsXCJXRUwgTmV0d29ya3NcIl0sXHJcbiAgICBlbmkgOiBbXCJDZW50cmFsaW5lc1wiLFwiRWFzdGxhbmQgTmV0d29ya1wiLFwiU2NhbnBvd2VyXCIsXCJVbmlzb24gTmV0d29ya3NcIl0sXHJcbiAgICBzd25pIDogW1wiRWxlY3RyYVwiLFwiUG93ZXJjb1wiLFwiV2VsbGluZ3RvbiBFbGVjdHJpY2l0eVwiXSxcclxuICAgIHMgOiBbXCJBbHBpbmUgRW5lcmd5XCIsXCJBdXJvcmEgRW5lcmd5XCIsXCJCdWxsZXIgRWxlY3RyaWNpdHlcIixcIkVsZWN0cmljaXR5IEFzaGJ1cnRvblwiLFwiRWxlY3RyaWNpdHkgSW52ZXJjYXJnaWxsXCIsXHJcbiAgICAgICAgIFwiTWFpblBvd2VyIE5aXCIsXCJNYXJsYm9yb3VnaCBMaW5lc1wiLFwiTmVsc29uIEVsZWN0cmljaXR5XCIsXCJOZXR3b3JrIFRhc21hblwiLFxyXG4gICAgICAgICBcIk5ldHdvcmsgV2FpdGFraVwiLFwiT3Jpb24gTlpcIixcIk90YWdvTmV0XCIsXCJUaGUgUG93ZXIgQ29tcGFueVwiLFwiV2VzdHBvd2VyXCJdLFxyXG4gICAgdXNpIDogW1wiQWxwaW5lIEVuZXJneVwiLFwiQnVsbGVyIEVsZWN0cmljaXR5XCIsXCJNYWluUG93ZXIgTlpcIixcIk1hcmxib3JvdWdoIExpbmVzXCIsXCJOZWxzb24gRWxlY3RyaWNpdHlcIixcIk5ldHdvcmsgVGFzbWFuXCIsXCJPcmlvbiBOWlwiLFwiV2VzdHBvd2VyXCJdLFxyXG4gICAgbHNpIDogW1wiQXVyb3JhIEVuZXJneVwiLFwiRWxlY3RyaWNpdHkgQXNoYnVydG9uXCIsXCJFbGVjdHJpY2l0eSBJbnZlcmNhcmdpbGxcIixcIk5ldHdvcmsgV2FpdGFraVwiLFwiT3RhZ29OZXRcIixcIlRoZSBQb3dlciBDb21wYW55XCJdXHJcbiAgfTtcclxuXHJcbiAgLy8gVGhlIGlkIG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcm93IGluIHRoZSBtYWluIHRhYmxlXHJcbiAgdmFyIHNlbGVjdGVkUm93ID0gXCJcIjtcclxuXHJcbiAgLy8gVGhlIGlkIG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcm93IGluIHRoZSB0b3RhbHNcclxuICB2YXIgc2VsZWN0ZWRUb3RhbFJvdyA9IFwiXCI7XHJcblxyXG4gIC8vIEhvbGRzIHRoZSB0YWJsZSBvYmplY3RzXHJcbiAgdmFyIHRhYmxlcyA9IFtdO1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB0aGUgdGFibGVzIHVzaW5nIHRoZSB0YWJsZSBkYXRhXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge09iamVjdH0gdGhlIG9iamVjdCBjb250YWluaW5nIHRoZSB0YWJsZXMgZGF0YVxyXG4gICAqICovXHJcbiAgdmFyIGluaXQgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICB1cGRhdGUuZGF0YS5mb3JFYWNoIChmdW5jdGlvbih0YWJsZURhdGEpe1xyXG4gICAgICBpZih0YWJsZURhdGEuY29tYmluZWQpe1xyXG4gICAgICAgIHRhYmxlcy5wdXNoKG5ldyBUYWJsZSh0YWJsZURhdGEuaWQsIHRhYmxlRGF0YS5yb3dzLCBbdGFibGVEYXRhLnNlYXJjaCwgdGFibGVEYXRhLnNlYXJjaDIgXSwgdHJ1ZSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRhYmxlcy5wdXNoKG5ldyBUYWJsZSh0YWJsZURhdGEuaWQsdGFibGVEYXRhLnJvd3MsdGFibGVEYXRhLnNlYXJjaCxmYWxzZSkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgLy8gQ3JlYXRlIGVhY2ggb2YgdGhlIHRhYmxlcyBhbG9uZyB3aXRoIGEgdGhlIHRvdGFscyB0YWJsZVxyXG4gIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUuaW5zZXJ0VGl0bGVzKCk7XHJcbiAgICAgIHRhYmxlLmNyZWF0ZSgpO1xyXG4gICAgICB0YWJsZS5jcmVhdGVUb3RhbHNUYWJsZShmYWxzZSwgc2VsZWN0ZWRUb3RhbFJvdyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZW5kZXIgZWFjaCBvZiB0aGUgdGFibGVzXHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7dGFibGUucmVuZGVyKCk7fSk7XHJcbiAgfVxyXG5cclxuICAvLyBDYWxsZWQgd2hlbiBhIHJvdyBjbGlja2VkIGV2ZW50IG9jY291cnNcclxuICB2YXIgcm93Q2xpY2tlZCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIGlmKHNlbGVjdGVkUm93ID09PSB1cGRhdGUucm93SUQpe1xyXG4gICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5lZGItY2VsbDpjb250YWlucygnXCIrdXBkYXRlLmVkYitcIicpXCIpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG4gICAgICByb3dTZWxlY3RlZCA9IFwiXCI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZihzZWxlY3RlZFJvdyAhPT0gXCJcIil7XHJcbiAgICAgIHZhciB0ZXh0ID0gJChcIiNcIitzZWxlY3RlZFJvdytcIiAuZWRiLWNlbGxcIikudGV4dCgpO1xyXG4gICAgICAkKCcudGFibGUtcm93JykuZmluZChcIi5lZGItY2VsbDpjb250YWlucygnXCIrdGV4dCtcIicpXCIpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG4gICAgfVxyXG4gICAgc2VsZWN0ZWRSb3cgPSB1cGRhdGUucm93SUQ7XHJcblxyXG4gICAgJCgnLnRhYmxlLXJvdycpLmZpbmQoXCIuZWRiLWNlbGw6Y29udGFpbnMoJ1wiK3VwZGF0ZS5lZGIrXCInKVwiKS5wYXJlbnQoKS5hZGRDbGFzcyhcInJvdy1zZWxlY3RlZFwiKTsgLy8gU2VsZWN0cyBlZGIgcm93IGluIGFsbCB0YWJsZXNcclxuXHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIHRhYmxlLnJvd0NsaWNrZWQodXBkYXRlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdmFyIHRvdGFsUm93Q2xpY2tlZCA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHZhciByZWdpb24gPSB1cGRhdGUucmVnaW9uO1xyXG5cclxuICAgIGlmKHNlbGVjdGVkVG90YWxSb3cgPT09IHVwZGF0ZS5yb3dJRCl7XHJcbiAgICAgIHZhciBvbGRSZWcgPSAkKFwiI1wiK3VwZGF0ZS5yb3dJRCtcIiAucmVnLWNlbGxcIikudGV4dCgpO1xyXG5cclxuICAgICAgJCgnLnRhYmxlLXJvdycpLmZpbmQoXCIucmVnLWNlbGw6Y29udGFpbnMoJ1wiK3JlZ2lvbitcIicpXCIpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKSA9PT0gcmVnaW9uO1xyXG4gICAgICB9KS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcInJvdy1zZWxlY3RlZFwiKTsgLy8gU2VsZWN0cyBlZGIgcm93IGluIGFsbCB0YWJsZXNcclxuICAgICAgc2VsZWN0ZWRUb3RhbFJvdyA9IFwiXCI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZihzZWxlY3RlZFRvdGFsUm93ICE9PSBcIlwiKXtcclxuICAgICAgICB2YXIgb2xkUmVnID0gJChcIiNcIitzZWxlY3RlZFRvdGFsUm93K1wiIC5yZWctY2VsbFwiKS50ZXh0KCk7XHJcbiAgICAgICAgJCgnLnRhYmxlLXJvdycpLmZpbmQoXCIucmVnLWNlbGw6Y29udGFpbnMoJ1wiK29sZFJlZytcIicpXCIpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQodGhpcykudGV4dCgpID09PSBvbGRSZWc7XHJcbiAgICAgICAgfSkucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJyb3ctc2VsZWN0ZWRcIik7IC8vIFNlbGVjdHMgZWRiIHJvdyBpbiBhbGwgdGFibGVzXHJcbiAgICB9XHJcblxyXG4gICAgJCgnLnRhYmxlLXJvdycpLmZpbmQoXCIucmVnLWNlbGw6Y29udGFpbnMoJ1wiK3JlZ2lvbitcIicpXCIpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkgPT09IHJlZ2lvbjtcclxuICAgIH0pLnBhcmVudCgpLmFkZENsYXNzKFwicm93LXNlbGVjdGVkXCIpOyAvLyBTZWxlY3RzIGVkYiByb3cgaW4gYWxsIHRhYmxlc1xyXG5cclxuICAgIC8vIGlmIGlkIGVuZHMgd2l0aCBsZXR0ZXIgc2V0IHRvIGlkXHJcbiAgICBzZWxlY3RlZFRvdGFsUm93ID0gdXBkYXRlLnJvd0lEO1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUudG90YWxzUm93U2VsZWN0ZWQodXBkYXRlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIHZhciBhcHBseUNQSSA9IGZ1bmN0aW9uICh1cGRhdGUpIHtcclxuICAgIHZhciBjcGlWYWx1ZXMgPSB1cGRhdGUuY3BpVmFsdWVzO1xyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICBpZih0YWJsZS5jYW5BcHBseUNQSSgpKXtcclxuICAgICAgICB0YWJsZS5hcHBseUNQSShjcGlWYWx1ZXMpO1xyXG4gICAgICAgIHRhYmxlLmNyZWF0ZVRvdGFsc1RhYmxlKHRydWUsIHNlbGVjdGVkVG90YWxSb3cpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0YWJsZXMuZm9yRWFjaChmdW5jdGlvbih0YWJsZSl7XHJcbiAgICAgIHRhYmxlLnJlbmRlcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2YXIgcmV2ZXJ0Q1BJID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGFibGVzLmZvckVhY2goZnVuY3Rpb24odGFibGUpe1xyXG4gICAgICB0YWJsZS5yZXZlcnRDUEkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlKXtcclxuICAgICAgdGFibGUucmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHZhciB1cGRhdGUgPSBmdW5jdGlvbiAodXBkYXRlKSB7XHJcbiAgICB1cGRhdGUuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHRhYmxlRGF0YSl7XHJcbiAgICAgIHRhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uKGcpe1xyXG4gICAgICAgIGlmKGcuaWQgPT09IHRhYmxlRGF0YS5pZCl7XHJcbiAgICAgICAgICBpZihnLmlzQ29tYmluZWQpe1xyXG4gICAgICAgICAgICBnLnVwZGF0ZSh0YWJsZURhdGEucm93cywgdGFibGVEYXRhLnRhYmxlMVJvd3MsIHRhYmxlRGF0YS50YWJsZTJSb3dzKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGcudXBkYXRlKHRhYmxlRGF0YS5yb3dzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBMaXN0ZW4gdG8gZXZlbnRzXHJcbiAgZXZlbnRzLm9uKFwiSU5JVF9EQVRBXCIsIGluaXQpO1xyXG4gIGV2ZW50cy5vbihcIlJPV19DTElDS0VEXCIsIHJvd0NsaWNrZWQpO1xyXG4gIGV2ZW50cy5vbihcIlRPVEFMX1JPV19DTElDS0VEXCIsIHRvdGFsUm93Q2xpY2tlZCk7XHJcbiAgZXZlbnRzLm9uKFwiQVBQTFlfQ1BJXCIsIGFwcGx5Q1BJKTtcclxuICBldmVudHMub24oXCJSRVZFUlRfQ1BJXCIsIHJldmVydENQSSk7IC8vIFdIQVQ/XHJcbiAgZXZlbnRzLm9uKFwiUk9XX1VQREFURVwiLCB1cGRhdGUpO1xyXG5cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlZ2lvbnMgOiByZWdpb25zXHJcbiAgfVxyXG59KSgpO1xyXG4iXX0=
