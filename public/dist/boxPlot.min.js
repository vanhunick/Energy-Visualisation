function BoxPlotData(t,a,r,e,n,o,i,s){this.x=t,this.y=a,this.xAxis=r,this.yAxis=e,this.svg=n,this.chart=o,this.created=i,this.id=s}function createBoxPlot(t,a,r){var e=null,n=t.data,o=t.min,i=t.max,s=t.scatterData;if(plots.forEach(function(t){t.id===a&&(e=t)}),null===e){var l=d3.scaleBand().rangeRound([0,boxWidth]).padding(.7,.3);e=new BoxPlotData(l,null,null,null,null,null,!1,a),plots.push(e)}else d3.select(a+" svg").remove();e.y=d3.scaleLinear().domain([o,i]).nice().range([boxHeight+boxMargin.top,0+boxMargin.top]),e.chart=d3.box().whiskers(iqr(1.5)).height(boxHeight).domain(e.y.domain()).showLabels(labels),e.svg=d3.select(a).append("svg").attr("width",boxWidth+boxMargin.left+boxMargin.right).attr("height",boxHeight+boxMargin.top+boxMargin.bottom).attr("class","box").append("g").attr("transform","translate("+boxMargin.left+","+boxMargin.top+")"),e.x.domain(n.map(function(t){return t[0]})),e.xAxis=d3.axisBottom(e.x),e.yAxis=d3.axisLeft(e.y),e.svg.selectAll(".box").data(n).enter().append("g").attr("transform",function(t){return"translate("+e.x(t[0])+","+boxMargin.top+")"}).call(e.chart.width(e.x.bandwidth())),e.svg.selectAll(".box").data(n).enter().append("g").attr("transform",function(t){return"translate("+e.x(t[0])+","+boxMargin.top+")"}).call(e.chart.width(e.x.bandwidth()));var x=d3.format(".2f"),d=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>Value:</strong> <span style='color:lightgreen'>"+x(t.value)+"</span><br><br><strong>EDB:</strong> <span style='color:lightgreen'>"+t.edb+"</span>"});e.svg.call(d),e.svg.selectAll(".dot").data(s).enter().append("circle").attr("class",function(t){return"dot "+t.edb.replace(/ /g,"")}).attr("r",3.5).attr("cx",function(t){return e.x(t.year)+whiskBoxWidth/2}).attr("cy",function(t){return e.y(t.value)}).on("mouseover",d.show).on("mouseout",d.hide),e.svg.append("g").attr("class","y axis").call(e.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-size","16px"),e.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+(boxHeight+boxMargin.top+10)+")").call(e.xAxis).append("text").attr("x",boxWidth/2).attr("y",10).attr("dy",".71em").style("text-anchor","middle").style("font-size","16px").text("Quarter"),e.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+-(boxMargin.left/2)+","+2*boxMargin.top+")rotate(-90)").style("font-size","18px").attr("class","unit-text").text(r),e.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+ +(boxWidth/2)+","+(boxMargin.top+40+boxHeight)+")").style("font-size","18px").attr("class","unit-text").text("Year"),e.created=!0}function iqr(t){return function(a,r){for(var e=a.quartiles[0],n=a.quartiles[2],o=(n-e)*t,r=-1,i=a.length;a[++r]<e-o;);for(;a[--i]>n+o;);return[r,i]}}var labels=!1,boxMargin={top:30,right:50,bottom:100,left:100},boxWidth=1e3-boxMargin.left-boxMargin.right,boxHeight=800-boxMargin.top-boxMargin.bottom,plots=[];