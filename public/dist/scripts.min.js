function BarGraph(t){this.id=t,this.x=d3.scaleBand().range([0,barWidth]).padding(.5),this.y=d3.scaleLinear().range([barHeight,0]).nice(),this.yAxis=d3.axisLeft(),this.xAxis=d3.axisBottom(),this.created=!1,this.svg=null}function createBarGraph(t,e,r,a,n,i){var o=null;singlebarGraphs.forEach(function(e){e.id===t&&(o=e)}),null===o?createNewGraph(t,e,r,a,n,i):updateGraph(o,e,r,a,n)}function createNewGraph(t,e,r,a,n,i){var o=new BarGraph(t);singlebarGraphs.push(o);var s=r<0&&e>0,l=0;!s&&r<0?l=r:s||(l=e),s&&(l=e),o.svg=d3.select(t).append("svg").attr("width",barWidth+barMargin.left+barMargin.right).attr("height",barHeight+barMargin.top+barMargin.bottom).append("g").attr("transform","translate("+barMargin.left+","+barMargin.top+")"),o.x.domain(a.map(function(t){return t.category})),o.y.domain([0,l]),o.y.nice(),o.yAxis.scale(o.y),o.svg.selectAll(".bar").data(a).enter().append("rect").attr("class","bar single-bar").attr("x",function(t){return o.x(t.category)}).attr("width",o.x.bandwidth()).attr("y",function(t){return o.y(s?Math.abs(t.value):t.value)}).attr("height",function(t){return barHeight-o.y(s?Math.abs(t.value):t.value)}).attr("fill",function(t){return s?t.value>0?"lightgreen":red:"lightgreen"}),o.svg.append("g").attr("transform","translate(0,"+barHeight+")").call(o.xAxis.scale(o.x)),o.svg.append("g").attr("class","yAxis").call(o.yAxis),o.created=!0,o.svg.append("text").attr("x",barWidth/2).attr("y",0-barMargin.top/2).attr("id","bar-title").attr("text-anchor","middle").style("font-size","24px").text(n),o.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+-(barMargin.left/2+10)+","+(barMargin.top-50)+")rotate(-90)").style("font-size","16px").attr("class","unit-text").text(i),o.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+ +(barWidth/2)+","+(barMargin.top+barHeight-barMargin.bottom+20)+")").style("font-size","16px").attr("class","unit-text").text("Year")}function updateGraph(t,e,r,a,n){var i=r<0&&e>0;t.svg.selectAll(".bar").data(a).transition().duration(750).attr("y",function(e){return t.y(i?Math.abs(e.value):e.value)}).attr("height",function(e){return barHeight-t.y(i?Math.abs(e.value):e.value)}).attr("fill",function(t){return i?t.value>0?"lightgreen":red:"lightgreen"}),t.svg.select("#bar-title").text(n)}function GroupedBarData(t,e,r,a,n,i){this.x0=t,this.x1=e,this.y=r,this.yAxis=a,this.svg=n,this.id=i,this.created=!1}function highlight(t,e){d3.selectAll(".bar-selected").datum(function(t){return t}).attr("fill",function(t){return z(t.key)}),d3.selectAll(".bar-selected").classed("bar-selected",!1),e||d3.selectAll("rect."+t.replace(/ /g,"")).classed("bar-selected",!0).datum(function(t){return t}).attr("fill",function(t){return zSelected(t.key)})}function createdGroupedBarGraph(t,e,r,a){var n=null;barGraphs.forEach(function(t){t.id===a&&(n=t)}),null===n&&(n=new GroupedBarData(d3.scaleBand().rangeRound([0,width]).paddingInner(.05),d3.scaleBand().padding(.05),d3.scaleLinear().rangeRound([height,0]),d3.axisLeft(),d3.axisBottom(),a),barGraphs.push(n)),n.created||(n.svg=d3.select(a).append("div").classed("svg-container",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(width+margin.left+margin.right)+" "+(height+margin.top+margin.bottom)).append("g").attr("transform","translate("+margin.left+","+margin.top+")").classed("svg-content-responsive",!0)),n.x0.domain(t.map(function(t){return t.edb})),n.x1.domain(e).rangeRound([0,n.x0.bandwidth()]),n.y.domain([0,d3.max(t,function(t){return d3.max(e,function(e){return Math.abs(t[e])})})]).nice();var i=n.svg.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),o=d3.format(".2f"),s=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>Value:</strong> <span style='color:lightgreen'>"+o(t.value)+"</span><br><br><strong>Year:</strong> <span style='color:lightgreen'>"+t.key+"</span>"});n.svg.call(s),n.created?i.append("g").selectAll("g").data(t).attr("transform",function(t){return"translate("+n.x0(t.edb)+",0)"}).selectAll("rect").data(function(t){return e.map(function(e){return{neg:t[e]<0,key:e,value:Math.abs(t[e])}})}).enter().append("rect").attr("x",function(t){return n.x1(t.key)}).attr("y",function(t){return n.y(t.value)}).attr("width",n.x1.bandwidth()).attr("height",function(t){return height-n.y(t.value)}).attr("fill",function(t){return t.neg?zRed(t.key):z(t.key)}).on("mouseover",s.show).on("mouseout",s.hide):i.append("g").selectAll("g").data(t).enter().append("g").attr("transform",function(t){return"translate("+n.x0(t.edb)+",0)"}).selectAll("rect").data(function(t){return e.map(function(e){return{neg:t[e]<0,key:e,edb:t.edb,value:Math.abs(t[e])}})}).enter().append("rect").attr("x",function(t){return n.x1(t.key)}).attr("y",function(t){return n.y(t.value)}).attr("width",n.x1.bandwidth()).attr("height",function(t){return height-n.y(t.value)}).attr("fill",function(t){return t.neg?zRed(t.key):z(t.key)}).attr("class",function(t){return""+t.edb.replace(/ /g,"")}).on("mouseover",s.show).on("mouseout",s.hide),i.append("g").attr("class","axis").attr("transform","translate(0,"+height+")").call(d3.axisBottom(n.x0)).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("class","axis-text").attr("transform","rotate(55)").style("font-size","11px").style("text-anchor","start"),n.created?n.svg.select(".yAxis").call(n.yAxis):i.append("g").attr("class","axis yAxis y-group").call(n.yAxis.scale(n.y).ticks(null,"s")).append("text").attr("x",2).attr("y",n.y(n.y.ticks().pop())+.5).attr("dy","0.32em").attr("text-anchor","start"),n.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+(margin.left/2-5)+","+(margin.top+8)+")rotate(-90)").style("font-size","10px").attr("class","unit-text").text(r);var l=i.append("g").attr("font-family","sans-serif").attr("font-size",8).attr("text-anchor","end").selectAll("g").data(e.slice().reverse()).enter().append("g").attr("transform",function(t,e){return"translate(0,"+10*e+")"});l.append("rect").attr("x",width-100).attr("width",8.5).attr("height",8.5).attr("fill",z),l.append("text").attr("x",width-110).attr("y",4).attr("dy","0.32em").attr("class","g-text").style("font-size","8px").text(function(t){return t}),n.created=!0}function BoxPlotData(t,e,r,a,n,i,o,s){this.x=t,this.y=e,this.xAxis=r,this.yAxis=a,this.svg=n,this.chart=i,this.created=o,this.id=s}function createBoxPlot(t,e,r){var a=null,n=t.data,i=t.min,o=t.max,s=t.scatterData;if(plots.forEach(function(t){t.id===e&&(a=t)}),null===a){var l=d3.scaleBand().rangeRound([0,boxWidth]).padding(.7,.3);a=new BoxPlotData(l,null,null,null,null,null,!1,e),plots.push(a)}else d3.select(e+" svg").remove();a.y=d3.scaleLinear().domain([i,o]).nice().range([boxHeight+boxMargin.top,0+boxMargin.top]),a.chart=d3.box().whiskers(iqr(1.5)).height(boxHeight).domain(a.y.domain()).showLabels(labels),a.svg=d3.select(e).append("div").classed("svg-container-box",!0).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(boxWidth+boxMargin.left+boxMargin.right)+" "+(boxHeight+boxMargin.top+boxMargin.bottom)).attr("class","box").append("g").attr("transform","translate("+margin.left+","+margin.top+")").classed("svg-content-responsive",!0),a.x.domain(n.map(function(t){return t[0]})),a.xAxis=d3.axisBottom(a.x),a.yAxis=d3.axisLeft(a.y),a.svg.selectAll(".box").data(n).enter().append("g").attr("transform",function(t){return"translate("+a.x(t[0])+","+boxMargin.top+")"}).call(a.chart.width(a.x.bandwidth())),a.svg.selectAll(".box").data(n).enter().append("g").attr("transform",function(t){return"translate("+a.x(t[0])+","+boxMargin.top+")"}).call(a.chart.width(a.x.bandwidth()));var c=d3.format(".2f"),u=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>Value:</strong> <span style='color:lightgreen'>"+c(t.value)+"</span><br><br><strong>EDB:</strong> <span style='color:lightgreen'>"+t.edb+"</span>"});a.svg.call(u),a.svg.selectAll(".dot").data(s).enter().append("circle").attr("class",function(t){return"dot "+t.edb.replace(/ /g,"")}).attr("r",2).attr("cx",function(t){return a.x(t.year)+whiskBoxWidth/2}).attr("cy",function(t){return a.y(t.value)}).on("mouseover",u.show).on("mouseout",u.hide),a.svg.append("g").attr("class","y axis").call(a.yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("font-size","8px"),a.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+(boxHeight+boxMargin.top+10)+")").call(a.xAxis).append("text").attr("x",boxWidth/2).attr("y",10).attr("dy",".71em").style("text-anchor","middle").style("font-size","8px").text("Quarter"),a.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+-(boxMargin.left/2-10)+","+(2*boxMargin.top+10)+")rotate(-90)").style("font-size","12px").attr("class","unit-text").text(r),a.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+ +(boxWidth/2)+","+(boxMargin.top+40+boxHeight)+")").style("font-size","12px").attr("class","unit-text").text("Year"),a.created=!0}function iqr(t){return function(e,r){for(var a=e.quartiles[0],n=e.quartiles[2],i=(n-a)*t,r=-1,o=e.length;e[++r]<a-i;);for(;e[--o]>n+i;);return[r,o]}}function VectorGraphData(t){this.id=t,this.created=!1,this.xAxis=d3.axisBottom(),this.yAxis=d3.axisLeft(),this.x=d3.scaleLinear().rangeRound([vWidth,0]),this.y=d3.scaleLinear().rangeRound([vHeight,0]),this.svg=null}function createVectorGraph(t,e,r,a){var n=null;vectorGraphs.forEach(function(t){t.id===a&&(n=t)}),null===n&&(n=new VectorGraphData(a),vectorGraphs.push(n));var i=[];t.forEach(function(t){i.push(t.edb)});var o=d3.scaleOrdinal().domain(i).range(["#e69a61","#9817ff","#18c61a","#33b4ff","#c9167e","#297853","#d7011b","#7456c7","#7e6276","#afb113","#fd879c","#fb78fa","#24c373","#45bbc5","#766b21","#abad93","#c19ce3","#fd8f11","#2f56ff","#307a11","#b3483c","#0d7396","#94b665","#9d4d91","#b807c8","#086cbf","#a2abc5","#a35702","#d3084b"]),s=[];t.forEach(function(t){t.years.forEach(function(e){e.edb=t.edb,s.push(e)})});var l=[];s.forEach(function(t){l.push(t.valueB)});var c=[];s.forEach(function(t){c.push(t.valueA)}),n.created||(n.svg=d3.select(a).append("svg").attr("width",vWidth+vMargin.left+vMargin.right).attr("height",vHeight+vMargin.top+vMargin.bottom).append("g").attr("transform","translate("+vMargin.left+","+vMargin.top+")"));var u=d3.max(l,function(t){return t}),d=d3.max(c,function(t){return t});n.x.domain([u,0]).nice(),n.y.domain([0,d]).nice(),n.created?(n.svg.select(".yAxis").call(n.yAxis),n.svg.select(".xAxis").call(n.xAxis)):(n.xAxis.scale(n.x),n.yAxis.scale(n.y)),n.svg.append("g").attr("class","xAxis").attr("transform","translate(0,"+vHeight+")").attr("stroke","black").call(n.xAxis.scale(n.x));var f=d3.format(".2f");n.svg.append("g").attr("class","yAxis").attr("fill","black").call(n.yAxis);var g=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>EDB:</strong> <span style='color:lightgreen'>"+t.edb+"</span><br><br><strong>Year:</strong> <span style='color:lightgreen'>"+t.year+"</span><br><br><strong>Value:</strong> <span style='color:lightgreen'>["+f(t.valueA)+", "+f(t.valueB)+"]</span>"});n.svg.call(g),n.created?n.svg.selectAll(".dotm").data(s).attr("class","dot").attr("r",3.5).attr("cx",function(t){return n.x(t.valueB)}).attr("cy",function(t){return n.y(t.valueA)}).attr("fill",function(t){return o(t.edb)}).on("mouseover",g.show).on("mouseout",g.hide):n.svg.selectAll(".dotm").data(s).enter().append("circle").attr("class","dotm").attr("r",3.5).attr("cx",function(t){return n.x(t.valueB)}).attr("cy",function(t){return n.y(t.valueA)}).attr("fill",function(t){return o(t.edb)}).on("mouseover",g.show).on("mouseout",g.hide);for(var p=[],h=0;h<t.length;h++)for(var v=0;v<t[h].years.length-1;v++)p.push({end:2016===t[h].years[v].year||2016===t[h].years[v+1].year,edb:t[h].edb,x:t[h].years[v].valueB,y:t[h].years[v].valueA,x1:t[h].years[v+1].valueB,y1:t[h].years[v+1].valueA});if(n.created||n.svg.append("svg:defs").selectAll("marker").data(p).enter().append("svg:marker").attr("id",function(t){if(t.end)return"end"+t.edb.replace(/ /g,"")}).attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",-.5).attr("markerWidth",9).attr("markerHeight",9).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").style("fill",function(t){return o(t.edb)}),n.created?n.svg.selectAll(".line").data(p).attr("x1",function(t){return x(t.x)}).attr("y1",function(t){return y(t.y)}).attr("x2",function(t){return x(t.x1)}).attr("y2",function(t){return y(t.y1)}).attr("stroke-width",2).attr("class",function(t){return""+t.edb.replace(/ /g,"")}).attr("stroke",function(t){return o(t.edb)}).attr("marker-end",function(t){if(t.end)return"url(#end"+t.edb.replace(/ /g,"")+")"}):n.svg.selectAll(".line").data(p).enter().append("line").attr("x1",function(t){return n.x(t.x)}).attr("y1",function(t){return n.y(t.y)}).attr("x2",function(t){return n.x(t.x1)}).attr("y2",function(t){return n.y(t.y1)}).attr("stroke-width",2).attr("class",function(t){return""+t.edb.replace(/ /g,"")}).attr("stroke",function(t){return o(t.edb)}).attr("marker-end",function(t){if(t.end)return"url(#end"+t.edb.replace(/ /g,"")+")"}),n.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+-(vMargin.left/2+15)+","+2*vMargin.top+")rotate(-90)").style("font-size","18px").attr("font-family","sans-serif").attr("class","unit-text").text(r),n.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+vWidth/2+","+(vHeight+35)+")").style("font-size","18px").attr("font-family","sans-serif").attr("class","unit-text").text(e),!n.created){var m=n.svg.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(i).enter().append("g").append("svg:a").attr("transform",function(t,e){var r=20*Math.floor(e/5),a=160*(e-5*Math.floor(e/5));return a+=vMargin.left,"translate("+a+","+(r+vHeight+vMargin.bottom/3)+")"}).on("mouseover",function(t){n.svg.selectAll("line."+t.replace(/ /g,"")).classed("line-selected",!0)}).on("mouseout",function(t){n.svg.selectAll("line."+t.replace(/ /g,"")).classed("line-selected",!1)});m.append("circle").attr("cx",vMargin.left+55).attr("cy",9.5).attr("r",7.5).attr("fill",o),m.append("text").attr("x",vMargin.left+40).attr("y",9.5).attr("dy","0.32em").attr("class","g-text").style("font-size","14px").text(function(t){return t})}n.created=!0}var barMargin={top:60,right:20,bottom:50,left:50},barWidth=550-barMargin.left-barMargin.right,barHeight=500-barMargin.top-barMargin.bottom,singlebarGraphs=[],red="#FF2626",margin={top:25,right:85,bottom:150,left:50},width=850-margin.left-margin.right,height=500-margin.top-margin.bottom,barGraphs=[],z=d3.scaleOrdinal().range(["#BBDEFB","#64B5F6","#1976D2","#1565C0","#0D47A1","#d0743c","#ff8c00"]),zRed=d3.scaleOrdinal().range(["#FF7373","#FF4C4C","#FF2626","#B20000","#D90000","#d0743c","#ff8c00"]),zSelected=d3.scaleOrdinal().range(["#C1FFC1","#90EE90","#5BC85B","#31A231","#137B13","#d0743c","#ff8c00"]),whiskBoxWidth=1;!function(){function t(t){return[0,t.length-1]}function e(t){return[d3.quantile(t,.25),d3.quantile(t,.5),d3.quantile(t,.75)]}d3.box=function(){function r(t){t.each(function(t,e){var r=t[1].sort(d3.ascending),o=d3.select(this),d=r.length,f=r[0],g=r[d-1],p=r.quartiles=l(r),h=s&&s.call(this,r,e),x=h&&h.map(function(t){return r[t]}),y=h?d3.range(0,h[0]).concat(d3.range(h[1]+1,d)):d3.range(d),v=d3.scaleLinear().domain(i&&i.call(this,r,e)||[f,g]).range([a,0]),m=this.__chart__||d3.scaleLinear().domain([0,1/0]).range(v.range());this.__chart__=v;var b=o.selectAll("line.center").data(x?[x]:[]);b.enter().insert("line","rect").attr("class","center").attr("x1",whiskBoxWidth/2).attr("y1",function(t){return m(t[0])}).attr("x2",whiskBoxWidth/2).attr("y2",function(t){return m(t[1])}).style("opacity",1e-6).transition().duration(n).style("opacity",1).attr("y1",function(t){return v(t[0])}).attr("y2",function(t){return v(t[1])}),b.transition().duration(n).style("opacity",1).attr("y1",function(t){return v(t[0])}).attr("y2",function(t){return v(t[1])}),b.exit().transition().duration(n).style("opacity",1e-6).attr("y1",function(t){return v(t[0])}).attr("y2",function(t){return v(t[1])}).remove();var w=o.selectAll("rect.box").data([p]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return m(t[2])}).attr("width",whiskBoxWidth).attr("height",function(t){return m(t[0])-m(t[2])}).transition().duration(n).attr("y",function(t){return v(t[2])}).attr("height",function(t){return v(t[0])-v(t[2])}),w.transition().duration(n).attr("y",function(t){return v(t[2])}).attr("height",function(t){return v(t[0])-v(t[2])});var A=o.selectAll("line.median").data([p[1]]);A.enter().append("line").attr("class","median").attr("x1",0).attr("y1",m).attr("x2",whiskBoxWidth).attr("y2",m).transition().duration(n).attr("y1",v).attr("y2",v),A.transition().duration(n).attr("y1",v).attr("y2",v);var M=o.selectAll("line.whisker").data(x||[]);M.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",m).attr("x2",0+whiskBoxWidth).attr("y2",m).style("opacity",1e-6).transition().duration(n).attr("y1",v).attr("y2",v).style("opacity",1),M.transition().duration(n).attr("y1",v).attr("y2",v).style("opacity",1),M.exit().transition().duration(n).attr("y1",v).attr("y2",v).style("opacity",1e-6).remove();var B=o.selectAll("circle.outlier").data(y,Number);B.enter().insert("circle","text").attr("class","outlier").attr("r",2).attr("cx",whiskBoxWidth/2).attr("cy",function(t){return m(r[t])}).style("opacity",1e-6).transition().duration(n).attr("cy",function(t){return v(r[t])}).style("opacity",1),B.transition().duration(n).attr("cy",function(t){return v(r[t])}).style("opacity",1),B.exit().transition().duration(n).attr("cy",function(t){return v(r[t])}).style("opacity",1e-6).remove();var k=u||v.tickFormat(8),W=o.selectAll("text.box").data(p);1==c&&W.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?+whiskBoxWidth:0}).attr("y",m).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(k).transition().duration(n).attr("y",v),W.transition().duration(n).text(k).attr("y",v);var z=o.selectAll("text.whisker").data(x||[]);1==c&&z.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",whiskBoxWidth).attr("y",m).text(k).style("opacity",1e-6).transition().duration(n).attr("y",v).style("opacity",1),z.transition().duration(n).text(k).attr("y",v).style("opacity",1),z.exit().transition().duration(n).attr("y",v).style("opacity",1e-6).remove()}),d3.timerFlush()}var a=1,n=0,i=null,o=Number,s=t,l=e,c=!0,u=null;return r.width=function(t){return arguments.length?(whiskBoxWidth=t,r):whiskBoxWidth},r.height=function(t){return arguments.length?(a=t,r):a},r.tickFormat=function(t){return arguments.length?(u=t,r):u},r.duration=function(t){return arguments.length?(n=t,r):n},d3.functor=function(t){return"function"==typeof t?t:function(){return t}},r.domain=function(t){return arguments.length?(i=null===t?t:d3.functor(t),r):i},r.value=function(t){return arguments.length?(o=t,r):o},r.whiskers=function(t){return arguments.length?(s=t,r):s},r.showLabels=function(t){return arguments.length?(c=t,r):c},r.quartiles=function(t){return arguments.length?(l=t,r):l},r}}();var labels=!1,boxMargin={top:0,right:100,bottom:80,left:100},boxWidth=600-boxMargin.left-boxMargin.right,boxHeight=350-boxMargin.top-boxMargin.bottom,plots=[];d3.functor=function(t){return"function"==typeof t?t:function(){return t}},d3.tip=function(){function t(t){b=g(t),w=b.createSVGPoint(),document.body.appendChild(m)}function e(){return"n"}function r(){return[0,0]}function a(){return" "}function n(){var t=h();return{top:t.n.y-m.offsetHeight,left:t.n.x-m.offsetWidth/2}}function i(){var t=h();return{top:t.s.y,left:t.s.x-m.offsetWidth/2}}function o(){var t=h();return{top:t.e.y-m.offsetHeight/2,left:t.e.x}}function s(){var t=h();return{top:t.w.y-m.offsetHeight/2,left:t.w.x-m.offsetWidth}}function l(){var t=h();return{top:t.nw.y-m.offsetHeight,left:t.nw.x-m.offsetWidth}}function c(){var t=h();return{top:t.ne.y-m.offsetHeight,left:t.ne.x}}function u(){var t=h();return{top:t.sw.y,left:t.sw.x-m.offsetWidth}}function d(){var t=h();return{top:t.se.y,left:t.e.x}}function f(){var t=d3.select(document.createElement("div"));return t.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function g(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function p(){return null===m&&(m=f(),document.body.appendChild(m)),d3.select(m)}function h(){for(var t=A||d3.event.target;"undefined"==typeof t.getScreenCTM&&"undefined"===t.parentNode;)t=t.parentNode;var e={},r=t.getScreenCTM(),a=t.getBBox(),n=a.width,i=a.height,o=a.x,s=a.y;return w.x=o,w.y=s,e.nw=w.matrixTransform(r),w.x+=n,e.ne=w.matrixTransform(r),w.y+=i,e.se=w.matrixTransform(r),w.x-=n,e.sw=w.matrixTransform(r),w.y-=i/2,e.w=w.matrixTransform(r),w.x+=n,e.e=w.matrixTransform(r),w.x-=n/2,w.y-=i/2,e.n=w.matrixTransform(r),w.y+=i,e.s=w.matrixTransform(r),e}var x=e,y=r,v=a,m=f(),b=null,w=null,A=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(A=e.pop());var r,a=v.apply(this,e),n=y.apply(this,e),i=x.apply(this,e),o=p(),s=B.length,l=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;for(o.html(a).style("position","absolute").style("opacity",1).style("pointer-events","all");s--;)o.classed(B[s],!1);return r=M[i].apply(this),o.classed(i,!0).style("top",r.top+n[0]+l+"px").style("left",r.left+n[1]+c+"px"),t},t.hide=function(){var e=p();return e.style("opacity",0).style("pointer-events","none"),t},t.attr=function(e,r){if(arguments.length<2&&"string"==typeof e)return p().attr(e);var a=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(p(),a),t},t.style=function(e,r){if(arguments.length<2&&"string"==typeof e)return p().style(e);var a=Array.prototype.slice.call(arguments);if(1===a.length){var n=a[0];Object.keys(n).forEach(function(t){return d3.selection.prototype.style.apply(p(),[t,n[t]])})}return t},t.direction=function(e){return arguments.length?(x=null==e?e:d3.functor(e),t):x},t.offset=function(e){return arguments.length?(y=null==e?e:d3.functor(e),t):y},t.html=function(e){return arguments.length?(v=null==e?e:d3.functor(e),t):v},t.destroy=function(){return m&&(p().remove(),m=null),t};var M={n:n,s:i,e:o,w:s,nw:l,ne:c,sw:u,se:d},B=Object.keys(M);return t};var vMargin={top:30,right:20,bottom:180,left:70},vWidth=1e3-vMargin.left-vMargin.right,vHeight=800-vMargin.top-vMargin.bottom,vectorGraphs=[];