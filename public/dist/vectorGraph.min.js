function VectorGraphData(t){this.id=t,this.created=!1,this.xAxis=d3.axisBottom(),this.yAxis=d3.axisLeft(),this.x=d3.scaleLinear().rangeRound([vWidth,0]),this.y=d3.scaleLinear().rangeRound([vHeight,0]),this.svg=null}function createVectorGraph(t,e,r,a){a.includes("cd")&&(console.log("CD"),console.log(t));var n=null;vectorGraphs.forEach(function(t){t.id===a&&(n=t)}),null===n&&(n=new VectorGraphData(a),vectorGraphs.push(n));var s=[];t.forEach(function(t){s.push(t.edb)});var i=d3.scaleOrdinal().domain(s).range(["#e69a61","#9817ff","#18c61a","#33b4ff","#c9167e","#297853","#d7011b","#7456c7","#7e6276","#afb113","#fd879c","#fb78fa","#24c373","#45bbc5","#766b21","#abad93","#c19ce3","#fd8f11","#2f56ff","#307a11","#b3483c","#0d7396","#94b665","#9d4d91","#b807c8","#086cbf","#a2abc5","#a35702","#d3084b"]),l=[];t.forEach(function(t){t.years.forEach(function(e){e.edb=t.edb,l.push(e)})});var o=[];l.forEach(function(t){o.push(t.valueB)});var c=[];l.forEach(function(t){c.push(t.valueA)}),n.created||(n.svg=d3.select(a).append("svg").attr("width",vWidth+vMargin.left+vMargin.right).attr("height",vHeight+vMargin.top+vMargin.bottom).append("g").attr("transform","translate("+vMargin.left+","+vMargin.top+")"));var d=d3.max(o,function(t){return t}),f=d3.max(c,function(t){return t});n.x.domain([d,0]).nice(),n.y.domain([0,f]).nice(),n.created?(n.svg.select(".yAxis").call(n.yAxis),n.svg.select(".xAxis").call(n.xAxis)):(n.xAxis.scale(n.x),n.yAxis.scale(n.y)),n.svg.append("g").attr("class","xAxis").attr("transform","translate(0,"+vHeight+")").attr("stroke","#black").call(n.xAxis.scale(n.x));var u=d3.format(".2f");n.svg.append("g").attr("class","yAxis").attr("fill","black").call(n.yAxis);var g=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return"<strong>EDB:</strong> <span style='color:lightgreen'>"+t.edb+"</span><br><br><strong>Year:</strong> <span style='color:lightgreen'>"+t.year+"</span><br><br><strong>Value:</strong> <span style='color:lightgreen'>["+u(t.valueA)+", "+u(t.valueB)+"]</span>"});n.svg.call(g),n.created?n.svg.selectAll(".dotm").data(l).attr("class","dot").attr("r",3.5).attr("cx",function(t){return n.x(t.valueB)}).attr("cy",function(t){return n.y(t.valueA)}).attr("fill",function(t){return i(t.edb)}).on("mouseover",g.show).on("mouseout",g.hide):n.svg.selectAll(".dotm").data(l).enter().append("circle").attr("class","dotm").attr("r",3.5).attr("cx",function(t){return n.x(t.valueB)}).attr("cy",function(t){return n.y(t.valueA)}).attr("fill",function(t){return i(t.edb)}).on("mouseover",g.show).on("mouseout",g.hide);for(var v=[],p=0;p<t.length;p++)for(var h=0;h<t[p].years.length-1;h++)v.push({end:2016===t[p].years[h].year||2016===t[p].years[h+1].year,edb:t[p].edb,x:t[p].years[h].valueB,y:t[p].years[h].valueA,x1:t[p].years[h+1].valueB,y1:t[p].years[h+1].valueA});if(n.created||n.svg.append("svg:defs").selectAll("marker").data(v).enter().append("svg:marker").attr("id",function(t){if(t.end)return"end"+t.edb.replace(/ /g,"")}).attr("viewBox","0 -5 10 10").attr("refX",9).attr("refY",-.5).attr("markerWidth",9).attr("markerHeight",9).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").style("fill",function(t){return i(t.edb)}),n.created?n.svg.selectAll(".line").data(v).attr("x1",function(t){return x(t.x)}).attr("y1",function(t){return y(t.y)}).attr("x2",function(t){return x(t.x1)}).attr("y2",function(t){return y(t.y1)}).attr("stroke-width",2).attr("class",function(t){return""+t.edb.replace(/ /g,"")}).attr("stroke",function(t){return i(t.edb)}).attr("marker-end",function(t){if(t.end)return"url(#end"+t.edb.replace(/ /g,"")+")"}):n.svg.selectAll(".line").data(v).enter().append("line").attr("x1",function(t){return n.x(t.x)}).attr("y1",function(t){return n.y(t.y)}).attr("x2",function(t){return n.x(t.x1)}).attr("y2",function(t){return n.y(t.y1)}).attr("stroke-width",2).attr("class",function(t){return""+t.edb.replace(/ /g,"")}).attr("stroke",function(t){return i(t.edb)}).attr("marker-end",function(t){if(t.end)return"url(#end"+t.edb.replace(/ /g,"")+")"}),n.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+-(vMargin.left/2+15)+","+2*vMargin.top+")rotate(-90)").style("font-size","18px").attr("font-family","sans-serif").attr("class","unit-text").text(r),n.svg.append("text").attr("text-anchor","middle").attr("transform","translate("+vWidth/2+","+(vHeight+35)+")").style("font-size","18px").attr("font-family","sans-serif").attr("class","unit-text").text(e),!n.created){var b=n.svg.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(s).enter().append("g").append("svg:a").attr("transform",function(t,e){var r=20*Math.floor(e/5),a=160*(e-5*Math.floor(e/5));return a+=vMargin.left,"translate("+a+","+(r+vHeight+vMargin.bottom/3)+")"}).on("mouseover",function(t){n.svg.selectAll("line."+t.replace(/ /g,"")).classed("line-selected",!0)}).on("mouseout",function(t){n.svg.selectAll("line."+t.replace(/ /g,"")).classed("line-selected",!1)});b.append("circle").attr("cx",vMargin.left+55).attr("cy",9.5).attr("r",7.5).attr("fill",i),b.append("text").attr("x",vMargin.left+40).attr("y",9.5).attr("dy","0.32em").attr("class","g-text").style("font-size","14px").text(function(t){return t})}n.created=!0}var vMargin={top:30,right:20,bottom:180,left:70},vWidth=1e3-vMargin.left-vMargin.right,vHeight=800-vMargin.top-vMargin.bottom,vectorGraphs=[];