  <!DOCTYPE html>
  <html>
  <head>
    <title>Core Metrics</title>

    <!--The head template containing the required scripts-->
    <% include ../views/templates/head %>

    <!--Form validation plugin-->
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>

    <!--Page specific scripts-->
    <!-- <script src="/javascripts/compare/DataProcessor.js"></script> -->

    <!-- <script src="/javascripts/compare/SelectionRows.js"></script> -->
    <script src="/javascripts/d3-tip.js"></script>
  </head>
  <body>

  <!-- The navigation bar template -->
  <% include ../views/templates/nav %>

  <div class="container-fluid" id="compare-container">
    <div class="col-md-12 text-center">
      <h1 class="page-title">Core Metrics</h1>
    </div>

    <!-- The selection drop downs are inserted here -->
    <div id="compare-div">
      <% include ../views/templates/SelectionRows %>

    </div>

    <!-- Holds the search button for selections and a div for errors -->
    <div class="row">
      <div class="col-md-12" id="search-div">
        <button type="button" class="btn btn-primary" id="search-btn-compare">Search</button>
      </div>
    </div>

    <!-- Row for error message when Partial selection made -->
    <div class="row">
        <div class="col-md-12" id="error-div"></div>
    </div>

    <!-- CPI Inputs -->
    <div class="row" style="margin-top: 2%;">
      <div class="col-sm-12">
        <div class="form-group input-horizontal">
          <h4><b>Set CPI:</b></h4>
        </div>

        <!-- Form for CPI -->
        <form id="cpi-form"  onsubmit="return applyCPI()" >

          <!-- 2012 -->
          <div class="form-group input-horizontal">
            <label for="inputdefault">2012</label>
            <input name="Y2012" class="form-control cpi-form" id="Y2012" type="text" value="1.00">
          </div>

          <!-- 2013 -->
          <div class="form-group input-horizontal">
            <label for="inputdefault">2013</label>
            <input name="Y2013" class="form-control cpi-form" id="Y2013" type="text" value="1.00">
          </div>

          <!-- 2014 -->
          <div class="form-group input-horizontal">
            <label for="inputdefault">2014</label>
            <input name="Y2014" class="form-control cpi-form" id="Y2014" type="text" value="1.40">
          </div>

          <!-- 2015 -->
          <div class="form-group input-horizontal">
            <label for="inputdefault">2015</label>
            <input name="Y2015" class="form-control cpi-form" id="Y2015" type="text" value="0.5">
          </div>

          <!-- 2016 -->
          <div class="form-group input-horizontal">
            <label for="inputdefault">2016</label>
            <input  name="Y2016" class="form-control cpi-form" id="Y2016" type="text" value="1.00">
          </div>
        </form>
      </div>
    </div>

      <!--CPI Buttons apply and revert -->
    <div class="row">
      <div class="col-sm-12">
        <button type ="button" class ="btn btn-primary" onclick="CompareModule.applyCPI()">Apply cpi</button>
        <button type="button" class="btn btn-warning" onclick="CompareModule.revertCPI()">Revert</button>
      </div>
    </div>

    <!--Tabs for content -->
    <div class="row text-center" style="margin-top: 2%">
        <div class="col-md-12 text-center">
              <div class="panel with-nav-tabs panel-default tab-background">
                  <div class="panel-heading">
                      <ul class="nav nav-tabs">
                          <li class="active"><a href="#tab-a" data-toggle="tab">Selection A</a></li>
                          <li><a href="#tab-b" data-toggle="tab">Selection B</a></li>
                          <li><a href="#tab-c" data-toggle="tab">Selection C</a></li>
                          <li><a href="#tab-d" data-toggle="tab">Selection D</a></li>
                          <li><a href="#tab-ab" data-toggle="tab">A over B</a></li>
                          <li><a href="#tab-cd" data-toggle="tab">C over D</a></li>
                          <li><a href="#tab7default" data-toggle="tab">Vector Graph A/B over C/D </a></li>
                      </ul>
                  </div>

                  <!--Tab Content-->
                  <div class="panel-body tab-background">
                      <div class="tab-content">

                          <!--Table A content-->
                          <% var data= { tableID : 'a'}; %>
                          <% include ../views/templates/dashboard.ejs %>

                          <!--Table B Content-->
                          <% var data= { tableID : 'b'}; %>
                          <% include ../views/templates/dashboard.ejs %>

                          <!--Table C content-->
                          <% var data= { tableID : 'c'}; %>
                          <% include ../views/templates/dashboard.ejs %>

                          <!--Table D Content-->
                          <% var data= { tableID : 'd'}; %>
                          <% include ../views/templates/dashboard.ejs %>

                          <!--Table AB content-->
                          <% var data= { tableID : 'ab'}; %>
                          <% include ../views/templates/dashboard.ejs %>

                            <!-- Div for vectorGraph -->
                            <div class="row text-center" >
                                <div class="row text-center  graph-title" id="title-ab-vector"></div>
                                <div class="col-lg-12 text-center" id="vector-graph-div-ab" style="margin-bottom: 2%"></div>
                            </div>
                          </div>

                          <!-- Table CD content -->
                          <div class="tab-pane fade" id="tab6default">
                            <% var data= { tableID : 'cd'}; %>
                            <% include ../views/templates/dashboard.ejs %>

                            <div class="row text-center" >
                                <div class="row text-center  graph-title" id="title-cd-vector"></div>
                                <div class="col-lg-12 text-center" id="vector-graph-div-cd" style="margin-bottom: 2%"></div>
                            </div>
                          </div>

                          <!-- ABCD Vector Graph content -->
                          <div class="tab-pane fade" id="tab7default">
                              <div id="vector-full-div-abcd" class="full-table full">
                                  <div class="row text-center" >
                                      <div id="title-abcd-vec" class="text-center graph-title"></div>
                                      <div class="col-lg-12 text-center" id="vector-graph-div-abcd" style="margin-bottom: 2%"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
  </body>
  <!-- Scipts -->
  <script src="https://d3js.org/d3-timer.v1.min.js"></script>
  <script src="/javascripts/bar.js"></script>
  <script src="/javascripts/barGroup.js"></script>
  <script src="/javascripts/box.js"></script>
  <script src="/javascripts/boxPlot.js"></script>
  <script src="/javascripts/vectorGraph.js"></script>
  <script src="/javascripts/compare/CPIModule.js"></script>
  <script src="/javascripts/compare/Table.js"></script>
  <script src="/javascripts/compare/TableModule.js"></script>
  <script src="/javascripts/compare/CombinedGraph.js"></script>
  <script src="/javascripts/compare/Graph.js"></script>
  <script src="/javascripts/compare/GraphModule.js"></script>
  <script src="/javascripts/compare/CompareModule.js"></script>
  <script src="/javascripts/compare/compare.js"></script>
  <script src="/javascripts/compare/SelectionRowsController.js"></script>


  <script>
      $('.clear').on('click', function(event){
        var idNumb = event.target.id.charAt(event.target.id.length-1);
        selectionRows.clear(idNumb);
      });

      var s =  <%- JSON.stringify(selections) %>;
      if('<%- selections %>' !== ""){

          if(s.length > 0){
              console.log("loading from url")
              CompareModule.loadSearchFromURL(s);
          } else {
            selectionRows.init([],false);
          }
      }
  </script>

  </html>
